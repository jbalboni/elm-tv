!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="/dist/",t(0)}([function(e,t,r){"use strict";function n(){a.fetchShows().then(function(e){i.ports.loadShows.send(e)})["catch"](function(e){console.log(e)})}var o,i,a,u,c=r(1),s=r(2),f=window.location.protocol+"//"+window.location.host+"/db/shows";o=r(38),u=new s("shows"),a=c(u),i=o.Main.fullscreen(),i.ports.persistShow.subscribe(function(e){a.saveShow(e).then(function(t){i.ports.loadRev.send({id:e.id,rev:t.rev})})["catch"](function(e){console.log(e)})}),setTimeout(function(){u.sync(f,{live:!0,retry:!0}).on("change",function(e){"pull"===e.direction&&n()}),n()},0),"serviceWorker"in navigator&&navigator.serviceWorker.register("service-worker.js")},function(e,t){"use strict";function r(e){var t={};return t.fetchShows=function(){return e.allDocs({include_docs:!0}).then(function(e){return e.total_rows>0?e.rows.map(function(e){return e.doc.rev=e.doc._rev,e.doc}):[]})},t.saveShow=function(t){return t._id=t.id.toString(),t._rev=t.rev,e.put(t)},t}e.exports=r},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}var o=n(r(3)),i=n(r(20)),a=n(r(27)),u=n(r(29)),c=n(r(31)),s=n(r(35));o.plugin(i).plugin(a).plugin(u).plugin(c).plugin(s),e.exports=o},function(e,t,r){(function(t,n){"use strict";function o(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function i(e){return L("return "+e+";",{})}function a(e){return new Function("doc",["var emitted = false;","var emit = function (a, b) {","  emitted = true;","};","var view = "+e+";","view(doc);","if (emitted) {","  return true;","}"].join("\n"))}function u(e,t){try{e.emit("change",t)}catch(r){I.guardedConsole("error",'Error in .on("change", function):',r)}}function c(e,t,r){function n(){o.cancel()}N.EventEmitter.call(this);var o=this;this.db=e,t=t?I.clone(t):{};var i=t.complete=I.once(function(t,r){t?I.listenerCount(o,"error")>0&&o.emit("error",t):o.emit("complete",r),o.removeAllListeners(),e.removeListener("destroyed",n)});r&&(o.on("complete",function(e){r(null,e)}),o.on("error",r)),e.once("destroyed",n),t.onChange=function(e){t.isCancelled||(u(o,e),o.startSeq&&o.startSeq<=e.seq&&(o.startSeq=!1))};var a=new R(function(e,r){t.complete=function(t,n){t?r(t):e(n)}});o.once("cancel",function(){e.removeListener("destroyed",n),t.complete(null,{status:"cancelled"})}),this.then=a.then.bind(a),this["catch"]=a["catch"].bind(a),this.then(function(e){i(null,e)},i),e.taskqueue.isReady?o.doChanges(t):e.taskqueue.addTask(function(){o.isCancelled?o.emit("cancel"):o.doChanges(t)})}function s(e,t,r){var n=[{rev:e._rev}];"all_docs"===r.style&&(n=C.collectLeaves(t.rev_tree).map(function(e){return{rev:e.rev}}));var o={id:t.id,changes:n,doc:e};return C.isDeleted(t,e._rev)&&(o.deleted=!0),r.conflicts&&(o.doc._conflicts=C.collectConflicts(t),o.doc._conflicts.length||delete o.doc._conflicts),o}function f(e,t){return t>e?-1:e>t?1:0}function l(e,t){for(var r=0;r<e.length;r++)if(t(e[r],r)===!0)return e[r]}function d(e){return function(t,r){t||r[0]&&r[0].error?e(t||r[0]):e(null,r.length?r[0]:r)}}function _(e){for(var t=0;t<e.length;t++){var r=e[t];if(r._deleted)delete r._attachments;else if(r._attachments)for(var n=Object.keys(r._attachments),o=0;o<n.length;o++){var i=n[o];r._attachments[i]=I.pick(r._attachments[i],["data","digest","content_type","length","revpos","stub"])}}}function h(e,t){var r=f(e._id,t._id);if(0!==r)return r;var n=e._revisions?e._revisions.start:0,o=t._revisions?t._revisions.start:0;return f(n,o)}function p(e){var t={},r=[];return C.traverseRevTree(e,function(e,n,o,i){var a=n+"-"+o;return e&&(t[a]=0),void 0!==i&&r.push({from:i,to:a}),a}),r.reverse(),r.forEach(function(e){void 0===t[e.from]?t[e.from]=1+t[e.to]:t[e.from]=Math.min(t[e.from],1+t[e.to])}),t}function v(e,t,r){var n="limit"in t?t.keys.slice(t.skip,t.limit+t.skip):t.skip>0?t.keys.slice(t.skip):t.keys;if(t.descending&&n.reverse(),!n.length)return e._allDocs({limit:0},r);var o={offset:t.skip};return R.all(n.map(function(r){var n=E.extend({key:r,deleted:"ok"},t);return["limit","skip","keys"].forEach(function(e){delete n[e]}),new R(function(t,i){e._allDocs(n,function(e,n){return e?i(e):(o.total_rows=n.total_rows,void t(n.rows[0]||{key:r,error:"not_found"}))})})})).then(function(e){return o.rows=e,o})}function m(e){var r=e._compactionQueue[0],n=r.opts,o=r.callback;e.get("_local/compaction")["catch"](function(){return!1}).then(function(r){r&&r.last_seq&&(n.last_seq=r.last_seq),e._compact(n,function(r,n){r?o(r):o(null,n),t.nextTick(function(){e._compactionQueue.shift(),e._compactionQueue.length&&m(e)})})})}function g(e){return"_"===e.charAt(0)?e+"is not a valid attachment name, attachment names cannot start with '_'":!1}function y(){N.EventEmitter.call(this)}function b(){this.isReady=!1,this.failed=!1,this.queue=[]}function w(e){e&&n.debug&&I.guardedConsole("error",e)}function A(e,t){function r(){i.emit("destroyed",o)}function n(){e.removeListener("destroyed",r),e.emit("destroyed",e)}var o=t.originalName,i=e.constructor,a=i._destructionListeners;e.once("destroyed",r),a.has(o)||a.set(o,[]),a.get(o).push(n)}function k(e,t,r){if(!(this instanceof k))return new k(e,t,r);var n=this;if("function"!=typeof t&&"undefined"!=typeof t||(r=t,t={}),e&&"object"==typeof e&&(t=e,e=void 0),"undefined"==typeof r)r=w;else{var o=r;r=function(){return I.guardedConsole("warn","Using a callback for new PouchDB()is deprecated."),o.apply(null,arguments)}}e=e||t.name,t=I.clone(t),delete t.name,this.__opts=t;var i=r;n.auto_compaction=t.auto_compaction,n.prefix=k.prefix,y.call(n),n.taskqueue=new b;var a=new R(function(o,i){r=function(e,t){return e?i(e):(delete t.then,void o(t))},t=I.clone(t);var a,u;return function(){try{if("string"!=typeof e)throw u=new Error("Missing/invalid DB name"),u.code=400,u;var r=(t.prefix||"")+e;if(a=k.parseAdapter(r,t),t.originalName=e,t.name=a.name,t.adapter=t.adapter||a.adapter,n._adapter=t.adapter,T("pouchdb:adapter")("Picked adapter: "+t.adapter),n._db_name=e,!k.adapters[t.adapter])throw u=new Error("Adapter is missing"),u.code=404,u;if(!k.adapters[t.adapter].valid())throw u=new Error("Invalid Adapter"),u.code=404,u}catch(o){n.taskqueue.fail(o)}}(),u?i(u):(n.adapter=t.adapter,n.replicate={},n.replicate.from=function(e,t,r){return n.constructor.replicate(e,n,t,r)},n.replicate.to=function(e,t,r){return n.constructor.replicate(n,e,t,r)},n.sync=function(e,t,r){return n.constructor.sync(n,e,t,r)},n.replicate.sync=n.sync,void k.adapters[t.adapter].call(n,t,function(e){return e?(n.taskqueue.fail(e),void r(e)):(A(n,t),n.emit("created",n),k.emit("created",t.originalName),n.taskqueue.ready(n),void r(null,n))}))});a.then(function(e){i(null,e)},i),n.then=a.then.bind(a),n["catch"]=a["catch"].bind(a)}function S(e){Object.keys(N.EventEmitter.prototype).forEach(function(t){"function"==typeof N.EventEmitter.prototype[t]&&(e[t]=B[t].bind(B))});var t=e._destructionListeners=new O.Map;e.on("destroyed",function(e){t.get(e).forEach(function(e){e()}),t["delete"](e)})}var E=r(5),T=o(r(6)),x=o(r(9)),R=o(r(10)),O=r(13),q=o(r(14)),N=r(15),I=r(16),C=r(18),L=o(r(19)),D=r(17);x(c,N.EventEmitter),c.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},c.prototype.doChanges=function(e){var t=this,r=e.complete;if(e=I.clone(e),"live"in e&&!("continuous"in e)&&(e.continuous=e.live),e.processChange=s,"latest"===e.since&&(e.since="now"),e.since||(e.since=0),"now"===e.since)return void this.db.info().then(function(n){return t.isCancelled?void r(null,{status:"cancelled"}):(e.since=n.update_seq,void t.doChanges(e))},r);if(e.continuous&&"now"!==e.since&&this.db.info().then(function(e){t.startSeq=e.update_seq},function(e){if("idbNull"!==e.id)throw e}),e.view&&!e.filter&&(e.filter="_view"),e.filter&&"string"==typeof e.filter&&("_view"===e.filter?e.view=I.normalizeDdocFunctionName(e.view):e.filter=I.normalizeDdocFunctionName(e.filter),"http"!==this.db.type()&&!e.doc_ids))return this.filterChanges(e);"descending"in e||(e.descending=!1),e.limit=0===e.limit?1:e.limit,e.complete=r;var n=this.db._changes(e);if(n&&"function"==typeof n.cancel){var o=t.cancel;t.cancel=q(function(e){n.cancel(),o.apply(this,e)})}},c.prototype.filterChanges=function(e){var t=this,r=e.complete;if("_view"===e.filter){if(!e.view||"string"!=typeof e.view){var n=D.createError(D.BAD_REQUEST,"`view` filter parameter not found or invalid.");return r(n)}var o=I.parseDdocFunctionName(e.view);this.db.get("_design/"+o[0],function(n,i){if(t.isCancelled)return r(null,{status:"cancelled"});if(n)return r(D.generateErrorFromResponse(n));var u=i&&i.views&&i.views[o[1]]&&i.views[o[1]].map;return u?(e.filter=a(u),void t.doChanges(e)):r(D.createError(D.MISSING_DOC,i.views?"missing json key: "+o[1]:"missing json key: views"))})}else{var u=I.parseDdocFunctionName(e.filter);if(!u)return t.doChanges(e);this.db.get("_design/"+u[0],function(n,o){if(t.isCancelled)return r(null,{status:"cancelled"});if(n)return r(D.generateErrorFromResponse(n));var a=o&&o.filters&&o.filters[u[1]];return a?(e.filter=i(a),void t.doChanges(e)):r(D.createError(D.MISSING_DOC,o&&o.filters?"missing json key: "+u[1]:"missing json key: filters"))})}},x(y,N.EventEmitter),y.prototype.post=I.adapterFun("post",function(e,t,r){return"function"==typeof t&&(r=t,t={}),"object"!=typeof e||Array.isArray(e)?r(D.createError(D.NOT_AN_OBJECT)):void this.bulkDocs({docs:[e]},t,d(r))}),y.prototype.put=I.adapterFun("put",q(function(e){function t(){a||(I.guardedConsole("warn","db.put(doc, id, rev) has been deprecated and will be removed in a future release, please use db.put({_id: id, _rev: rev}) instead"),a=!0)}var r,n,o,i,a=!1,u=e.shift(),c="_id"in u;if("object"!=typeof u||Array.isArray(u))return(i=e.pop())(D.createError(D.NOT_AN_OBJECT));for(;;)if(r=e.shift(),n=typeof r,"string"!==n||c?"string"!==n||!c||"_rev"in u?"object"===n?o=r:"function"===n&&(i=r):(t(),u._rev=r):(t(),u._id=r,c=!0),!e.length)break;return o=o||{},I.invalidIdError(u._id),C.isLocalId(u._id)&&"function"==typeof this._putLocal?u._deleted?this._removeLocal(u,i):this._putLocal(u,i):void this.bulkDocs({docs:[u]},o,d(i))})),y.prototype.putAttachment=I.adapterFun("putAttachment",function(e,t,r,n,o){function i(e){var r="_rev"in e?parseInt(e._rev,10):0;return e._attachments=e._attachments||{},e._attachments[t]={content_type:o,data:n,revpos:++r},a.put(e)}var a=this;return"function"==typeof o&&(o=n,n=r,r=null),"undefined"==typeof o&&(o=n,n=r,r=null),a.get(e).then(function(e){if(e._rev!==r)throw D.createError(D.REV_CONFLICT);return i(e)},function(t){if(t.reason===D.MISSING_DOC.message)return i({_id:e});throw t})}),y.prototype.removeAttachment=I.adapterFun("removeAttachment",function(e,t,r,n){var o=this;o.get(e,function(e,i){return e?void n(e):i._rev!==r?void n(D.createError(D.REV_CONFLICT)):i._attachments?(delete i._attachments[t],0===Object.keys(i._attachments).length&&delete i._attachments,void o.put(i,n)):n()})}),y.prototype.remove=I.adapterFun("remove",function(e,t,r,n){var o;"string"==typeof t?(o={_id:e,_rev:t},"function"==typeof r&&(n=r,r={})):(o=e,"function"==typeof t?(n=t,r={}):(n=r,r=t)),r=r||{},r.was_delete=!0;var i={_id:o._id,_rev:o._rev||r.rev};return i._deleted=!0,C.isLocalId(i._id)&&"function"==typeof this._removeLocal?this._removeLocal(o,n):void this.bulkDocs({docs:[i]},r,d(n))}),y.prototype.revsDiff=I.adapterFun("revsDiff",function(e,t,r){function n(e,t){u.has(e)||u.set(e,{missing:[]}),u.get(e).missing.push(t)}function o(t,r){var o=e[t].slice(0);C.traverseRevTree(r,function(e,r,i,a,u){var c=r+"-"+i,s=o.indexOf(c);-1!==s&&(o.splice(s,1),"available"!==u.status&&n(t,c))}),o.forEach(function(e){n(t,e)})}"function"==typeof t&&(r=t,t={});var i=Object.keys(e);if(!i.length)return r(null,{});var a=0,u=new O.Map;i.map(function(t){this._getRevisionTree(t,function(n,c){if(n&&404===n.status&&"missing"===n.message)u.set(t,{missing:e[t]});else{if(n)return r(n);o(t,c)}if(++a===i.length){var s={};return u.forEach(function(e,t){s[t]=e}),r(null,s)}})},this)}),y.prototype.bulkGet=I.adapterFun("bulkGet",function(e,t){I.bulkGetShim(this,e,t)}),y.prototype.compactDocument=I.adapterFun("compactDocument",function(e,t,r){var n=this;this._getRevisionTree(e,function(o,i){if(o)return r(o);var a=p(i),u=[],c=[];Object.keys(a).forEach(function(e){a[e]>t&&u.push(e)}),C.traverseRevTree(i,function(e,t,r,n,o){var i=t+"-"+r;"available"===o.status&&-1!==u.indexOf(i)&&c.push(i)}),n._doCompaction(e,c,r)})}),y.prototype.compact=I.adapterFun("compact",function(e,t){"function"==typeof e&&(t=e,e={});var r=this;e=e||{},r._compactionQueue=r._compactionQueue||[],r._compactionQueue.push({opts:e,callback:t}),1===r._compactionQueue.length&&m(r)}),y.prototype._compact=function(e,t){function r(e){a.push(o.compactDocument(e.id,0))}function n(e){var r=e.last_seq;R.all(a).then(function(){return I.upsert(o,"_local/compaction",function(e){return!e.last_seq||e.last_seq<r?(e.last_seq=r,e):!1})}).then(function(){t(null,{ok:!0})})["catch"](t)}var o=this,i={return_docs:!1,last_seq:e.last_seq||0},a=[];o.changes(i).on("change",r).on("complete",n).on("error",t)},y.prototype.get=I.adapterFun("get",function(e,t,r){function n(){var n=[],a=o.length;return a?void o.forEach(function(o){i.get(e,{rev:o,revs:t.revs,attachments:t.attachments},function(e,t){e?n.push({missing:o}):n.push({ok:t}),a--,a||r(null,n)})}):r(null,n)}if("function"==typeof t&&(r=t,t={}),"string"!=typeof e)return r(D.createError(D.INVALID_ID));if(C.isLocalId(e)&&"function"==typeof this._getLocal)return this._getLocal(e,r);var o=[],i=this;if(!t.open_revs)return this._get(e,t,function(e,n){if(e)return r(e);var o=n.doc,a=n.metadata,u=n.ctx;if(t.conflicts){var c=C.collectConflicts(a);c.length&&(o._conflicts=c)}if(C.isDeleted(a,o._rev)&&(o._deleted=!0),t.revs||t.revs_info){var s=C.rootToLeaf(a.rev_tree),f=l(s,function(e){return-1!==e.ids.map(function(e){return e.id}).indexOf(o._rev.split("-")[1])}),d=f.ids.map(function(e){return e.id}).indexOf(o._rev.split("-")[1])+1,_=f.ids.length-d;if(f.ids.splice(d,_),f.ids.reverse(),t.revs&&(o._revisions={start:f.pos+f.ids.length-1,ids:f.ids.map(function(e){return e.id})}),t.revs_info){var h=f.pos+f.ids.length;o._revs_info=f.ids.map(function(e){return h--,{rev:h+"-"+e.id,status:e.opts.status}})}}if(t.attachments&&o._attachments){var p=o._attachments,v=Object.keys(p).length;if(0===v)return r(null,o);Object.keys(p).forEach(function(e){this._getAttachment(o._id,e,p[e],{rev:o._rev,binary:t.binary,ctx:u},function(t,n){var i=o._attachments[e];i.data=n,delete i.stub,delete i.length,--v||r(null,o)})},i)}else{if(o._attachments)for(var m in o._attachments)o._attachments.hasOwnProperty(m)&&(o._attachments[m].stub=!0);r(null,o)}});if("all"===t.open_revs)this._getRevisionTree(e,function(e,t){return e?r(e):(o=C.collectLeaves(t).map(function(e){return e.rev}),void n())});else{if(!Array.isArray(t.open_revs))return r(D.createError(D.UNKNOWN_ERROR,"function_clause"));o=t.open_revs;for(var a=0;a<o.length;a++){var u=o[a];if("string"!=typeof u||!/^\d+-/.test(u))return r(D.createError(D.INVALID_REV))}n()}}),y.prototype.getAttachment=I.adapterFun("getAttachment",function(e,t,r,n){var o=this;r instanceof Function&&(n=r,r={}),this._get(e,r,function(i,a){return i?n(i):a.doc._attachments&&a.doc._attachments[t]?(r.ctx=a.ctx,r.binary=!0,o._getAttachment(e,t,a.doc._attachments[t],r,n),void 0):n(D.createError(D.MISSING_DOC))})}),y.prototype.allDocs=I.adapterFun("allDocs",function(e,t){if("function"==typeof e&&(t=e,e={}),e.skip="undefined"!=typeof e.skip?e.skip:0,e.start_key&&(e.startkey=e.start_key),e.end_key&&(e.endkey=e.end_key),"keys"in e){if(!Array.isArray(e.keys))return t(new TypeError("options.keys must be an array"));var r=["startkey","endkey","key"].filter(function(t){return t in e})[0];if(r)return void t(D.createError(D.QUERY_PARSE_ERROR,"Query parameter `"+r+"` is not compatible with multi-get"));if("http"!==this.type())return v(this,e,t)}return this._allDocs(e,t)}),y.prototype.changes=function(e,t){return"function"==typeof e&&(t=e,e={}),new c(this,e,t)},y.prototype.close=I.adapterFun("close",function(e){return this._closed=!0,this._close(e)}),y.prototype.info=I.adapterFun("info",function(e){var t=this;this._info(function(r,n){return r?e(r):(n.db_name=n.db_name||t._db_name,n.auto_compaction=!(!t.auto_compaction||"http"===t.type()),n.adapter=t.type(),void e(null,n))})}),y.prototype.id=I.adapterFun("id",function(e){return this._id(e)}),y.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},y.prototype.bulkDocs=I.adapterFun("bulkDocs",function(e,t,r){if("function"==typeof t&&(r=t,t={}),t=t||{},Array.isArray(e)&&(e={docs:e}),!e||!e.docs||!Array.isArray(e.docs))return r(D.createError(D.MISSING_BULK_DOCS));for(var n=0;n<e.docs.length;++n)if("object"!=typeof e.docs[n]||Array.isArray(e.docs[n]))return r(D.createError(D.NOT_AN_OBJECT));var o;return e.docs.forEach(function(e){e._attachments&&Object.keys(e._attachments).forEach(function(e){o=o||g(e)})}),o?r(D.createError(D.BAD_REQUEST,o)):("new_edits"in t||("new_edits"in e?t.new_edits=e.new_edits:t.new_edits=!0),t.new_edits||"http"===this.type()||e.docs.sort(h),_(e.docs),this._bulkDocs(e,t,function(e,n){return e?r(e):(t.new_edits||(n=n.filter(function(e){return e.error})),void r(null,n))}))}),y.prototype.registerDependentDatabase=I.adapterFun("registerDependentDatabase",function(e,t){function r(t){return t.dependentDbs=t.dependentDbs||{},t.dependentDbs[e]?!1:(t.dependentDbs[e]=!0,t)}var n=new this.constructor(e,this.__opts);I.upsert(this,"_local/_pouch_dependentDbs",r).then(function(){t(null,{db:n})})["catch"](t)}),y.prototype.destroy=I.adapterFun("destroy",function(e,t){function r(){n._destroy(e,function(e,r){return e?t(e):(n._destroyed=!0,n.emit("destroyed"),void t(null,r||{ok:!0}))})}"function"==typeof e&&(t=e,e={});var n=this,o="use_prefix"in n?n.use_prefix:!0;return"http"===n.type()?r():void n.get("_local/_pouch_dependentDbs",function(e,i){if(e)return 404!==e.status?t(e):r();var a=i.dependentDbs,u=n.constructor,c=Object.keys(a).map(function(e){var t=o?e.replace(new RegExp("^"+u.prefix),""):e;return new u(t,n.__opts).destroy()});R.all(c).then(r,t)})}),b.prototype.execute=function(){var e;if(this.failed)for(;e=this.queue.shift();)e(this.failed);else for(;e=this.queue.shift();)e()},b.prototype.fail=function(e){this.failed=e,this.execute()},b.prototype.ready=function(e){this.isReady=!0,this.db=e,this.execute()},b.prototype.addTask=function(e){this.queue.push(e),this.failed&&this.execute()},x(k,y),k.debug=T,k.adapters={},k.preferredAdapters=[],k.prefix="_pouch_";var B=new N.EventEmitter;S(k),k.parseAdapter=function(e,t){var r,n,o=e.match(/([a-z\-]*):\/\/(.*)/);if(o){if(e=/http(s?)/.test(o[1])?o[1]+"://"+o[2]:o[2],r=o[1],!k.adapters[r].valid())throw"Invalid adapter";return{name:e,adapter:o[1]}}var i="idb"in k.adapters&&"websql"in k.adapters&&I.hasLocalStorage()&&localStorage["_pouch__websqldb_"+k.prefix+e];if(t.adapter)n=t.adapter;else if("undefined"!=typeof t&&t.db)n="leveldb";else for(var a=0;a<k.preferredAdapters.length;++a)if(n=k.preferredAdapters[a],n in k.adapters){if(i&&"idb"===n){I.guardedConsole("log",'PouchDB is downgrading "'+e+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');continue}break}r=k.adapters[n];var u=r&&"use_prefix"in r?r.use_prefix:!0;return{name:u?k.prefix+e:e,adapter:n}},k.adapter=function(e,t,r){t.valid()&&(k.adapters[e]=t,r&&k.preferredAdapters.push(e))},k.plugin=function(e){return"function"==typeof e?e(k):Object.keys(e).forEach(function(t){k.prototype[t]=e[t]}),k},k.defaults=function(e){function t(r,n,o){return this instanceof t?("function"!=typeof n&&"undefined"!=typeof n||(o=n,n={}),r&&"object"==typeof r&&(n=r,r=void 0),n=E.extend({},e,n),void k.call(this,r,n,o)):new t(r,n,o)}return x(t,k),t.preferredAdapters=k.preferredAdapters.slice(),Object.keys(k).forEach(function(e){e in t||(t[e]=k[e])}),t};var j="5.4.1";k.version=j,e.exports=k}).call(t,r(4),function(){return this}())},function(e,t){function r(){s&&a&&(s=!1,a.length?c=a.concat(c):f=-1,c.length&&n())}function n(){if(!s){var e=setTimeout(r);s=!0;for(var t=c.length;t;){for(a=c,c=[];++f<t;)a&&a[f].run();f=-1,t=c.length}a=null,s=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function i(){}var a,u=e.exports={},c=[],s=!1,f=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new o(e,t)),1!==c.length||s||setTimeout(n,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=i,u.addListener=i,u.once=i,u.off=i,u.removeListener=i,u.removeAllListeners=i,u.emit=i,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(e,t,r){(function(e){e(t)}).call(this,function(e){var t=Array.prototype.slice,r=Array.prototype.forEach,n=function(e){if("object"!=typeof e)throw e+" is not an object";var o=t.call(arguments,1);return r.call(o,function(t){if(t)for(var r in t)"object"==typeof t[r]&&e[r]?n.call(e,e[r],t[r]):e[r]=t[r]}),e};e.extend=n})},function(e,t,r){function n(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return e;var n="color: "+this.color;e=[e[0],n,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,n),e}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(r){}}function u(){var e;try{e=t.storage.debug}catch(r){}return e}function c(){try{return window.localStorage}catch(e){}}t=e.exports=r(7),t.log=i,t.formatArgs=o,t.save=a,t.load=u,t.useColors=n,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){return JSON.stringify(e)},t.enable(u())},function(e,t,r){function n(){return t.colors[f++%t.colors.length]}function o(e){function r(){}function o(){var e=o,r=+new Date,i=r-(s||r);e.diff=i,e.prev=s,e.curr=r,s=r,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=n());var a=Array.prototype.slice.call(arguments);a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var u=0;a[0]=a[0].replace(/%([a-z%])/g,function(r,n){if("%%"===r)return r;u++;var o=t.formatters[n];if("function"==typeof o){var i=a[u];r=o.call(e,i),a.splice(u,1),u--}return r}),"function"==typeof t.formatArgs&&(a=t.formatArgs.apply(e,a));var c=o.log||t.log||console.log.bind(console);c.apply(e,a)}r.enabled=!1,o.enabled=!0;var i=t.enabled(e)?o:r;return i.namespace=e,i}function i(e){t.save(e);for(var r=(e||"").split(/[\s,]+/),n=r.length,o=0;n>o;o++)r[o]&&(e=r[o].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function a(){t.enable("")}function u(e){var r,n;for(r=0,n=t.skips.length;n>r;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;n>r;r++)if(t.names[r].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=o,t.coerce=c,t.disable=a,t.enable=i,t.enabled=u,t.humanize=r(8),t.names=[],t.skips=[],t.formatters={};var s,f=0},function(e,t){function r(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*f;case"days":case"day":case"d":return r*s;case"hours":case"hour":case"hrs":case"hr":case"h":return r*c;case"minutes":case"minute":case"mins":case"min":case"m":return r*u;case"seconds":case"second":case"secs":case"sec":case"s":return r*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r}}}}function n(e){return e>=s?Math.round(e/s)+"d":e>=c?Math.round(e/c)+"h":e>=u?Math.round(e/u)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function o(e){return i(e,s,"day")||i(e,c,"hour")||i(e,u,"minute")||i(e,a,"second")||e+" ms"}function i(e,t,r){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}var a=1e3,u=60*a,c=60*u,s=24*c,f=365.25*s;e.exports=function(e,t){return t=t||{},"string"==typeof e?r(e):t["long"]?o(e):n(e)}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}var o=n(r(11)),i="function"==typeof Promise?Promise:o;e.exports=i},function(e,t,r){(function(t){"use strict";function n(){}function o(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,t.browser||(this.handled=y),e!==n&&c(this,e)}function i(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function a(e,t,r){h(function(){var n;try{n=t(r)}catch(o){return p.reject(e,o)}n===e?p.reject(e,new TypeError("Cannot resolve promise with itself")):p.resolve(e,n)})}function u(e){var t=e&&e.then;return e&&"object"==typeof e&&"function"==typeof t?function(){t.apply(e,arguments)}:void 0}function c(e,t){function r(t){i||(i=!0,p.reject(e,t))}function n(t){i||(i=!0,p.resolve(e,t))}function o(){t(n,r)}var i=!1,a=s(o);"error"===a.status&&r(a.value)}function s(e,t){var r={};try{r.value=e(t),r.status="success"}catch(n){r.status="error",r.value=n}return r}function f(e){return e instanceof this?e:p.resolve(new this(n),e)}function l(e){var t=new this(n);return p.reject(t,e)}function d(e){function t(e,t){function n(e){a[t]=e,++u!==o||i||(i=!0,p.resolve(s,a))}r.resolve(e).then(n,function(e){i||(i=!0,p.reject(s,e))})}var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var o=e.length,i=!1;if(!o)return this.resolve([]);for(var a=new Array(o),u=0,c=-1,s=new this(n);++c<o;)t(e[c],c);return s}function _(e){function t(e){r.resolve(e).then(function(e){i||(i=!0,p.resolve(u,e))},function(e){i||(i=!0,p.reject(u,e))})}var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var o=e.length,i=!1;if(!o)return this.resolve([]);for(var a=-1,u=new this(n);++a<o;)t(e[a]);return u}var h=r(12),p={},v=["REJECTED"],m=["FULFILLED"],g=["PENDING"];if(!t.browser)var y=["UNHANDLED"];e.exports=o,o.prototype["catch"]=function(e){return this.then(null,e)},o.prototype.then=function(e,r){if("function"!=typeof e&&this.state===m||"function"!=typeof r&&this.state===v)return this;var o=new this.constructor(n);if(t.browser||this.handled===y&&(this.handled=null),this.state!==g){var u=this.state===m?e:r;a(o,u,this.outcome)}else this.queue.push(new i(o,e,r));return o},i.prototype.callFulfilled=function(e){p.resolve(this.promise,e)},i.prototype.otherCallFulfilled=function(e){a(this.promise,this.onFulfilled,e)},i.prototype.callRejected=function(e){p.reject(this.promise,e)},i.prototype.otherCallRejected=function(e){a(this.promise,this.onRejected,e)},p.resolve=function(e,t){var r=s(u,t);if("error"===r.status)return p.reject(e,r.value);var n=r.value;if(n)c(e,n);else{e.state=m,e.outcome=t;for(var o=-1,i=e.queue.length;++o<i;)e.queue[o].callFulfilled(t)}return e},p.reject=function(e,r){e.state=v,e.outcome=r,t.browser||e.handled===y&&h(function(){e.handled===y&&t.emit("unhandledRejection",r,e)});for(var n=-1,o=e.queue.length;++n<o;)e.queue[n].callRejected(r);return e},o.resolve=f,o.reject=l,o.all=d,o.race=_}).call(t,r(4))},function(e,t,r){(function(t,r){"use strict";function n(){l=!0;for(var e,t,r=d.length;r;){for(t=d,d=[],e=-1;++e<r;)t[e]();r=d.length}l=!1}function o(e){1!==d.push(e)||l||i()}var i,a=t.MutationObserver||t.WebKitMutationObserver;if(r.browser)if(a){var u=0,c=new a(n),s=t.document.createTextNode("");c.observe(s,{characterData:!0}),i=function(){s.data=u=++u%2}}else if(t.setImmediate||"undefined"==typeof t.MessageChannel)i="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){n(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(n,0)};else{var f=new t.MessageChannel;f.port1.onmessage=n,i=function(){f.port2.postMessage(0)}}else i=function(){r.nextTick(n)};var l,d=[];e.exports=o}).call(t,function(){return this}(),r(4))},function(e,t){"use strict";function r(){this.store={}}function n(e){if(this.store=new r,e&&Array.isArray(e))for(var t=0,n=e.length;n>t;t++)this.add(e[t])}t.Map=r,t.Set=n,r.prototype.mangle=function(e){if("string"!=typeof e)throw new TypeError("key must be a string but Got "+e);return"$"+e},r.prototype.unmangle=function(e){return e.substring(1)},r.prototype.get=function(e){var t=this.mangle(e);return t in this.store?this.store[t]:void 0},r.prototype.set=function(e,t){var r=this.mangle(e);return this.store[r]=t,!0},r.prototype.has=function(e){var t=this.mangle(e);return t in this.store},r.prototype["delete"]=function(e){var t=this.mangle(e);return t in this.store?(delete this.store[t],!0):!1},r.prototype.forEach=function(e){for(var t=Object.keys(this.store),r=0,n=t.length;n>r;r++){var o=t[r],i=this.store[o];o=this.unmangle(o),e(i,o)}},n.prototype.add=function(e){return this.store.set(e,!0)},n.prototype.has=function(e){return this.store.has(e)},n.prototype["delete"]=function(e){return this.store["delete"](e)}},function(e,t){"use strict";function r(e){return function(){var t=arguments.length;if(t){for(var r=[],n=-1;++n<t;)r[n]=arguments[n];return e.call(this,r)}return e.call(this,[])}}e.exports=r},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function o(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,o,u,c,s;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[e],a(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),r.apply(this,u)}else if(i(r))for(u=Array.prototype.slice.call(arguments,1),s=r.slice(),o=s.length,c=0;o>c;c++)s[c].apply(this,u);return!0},r.prototype.addListener=function(e,t){var o;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,
i(this._events[e])&&!this._events[e].warned&&(o=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),o||(o=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var o=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,o,a,u;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],a=r.length,o=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(u=a;u-- >0;)if(r[u]===t||r[u].listener&&r[u].listener===t){o=u;break}if(0>o)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,r){(function(e){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(e){return e instanceof ArrayBuffer||"undefined"!=typeof Blob&&e instanceof Blob}function i(e){if("function"==typeof e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength),r=new Uint8Array(t),n=new Uint8Array(e);return r.set(n),t}function a(e){if(e instanceof ArrayBuffer)return i(e);var t=e.size,r=e.type;return"function"==typeof e.slice?e.slice(0,t,r):e.webkitSlice(0,t,r)}function u(e){var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=t.constructor;return"function"==typeof r&&r instanceof r&&G.call(r)==K}function c(e){var t,r,n;if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(t=[],r=0,n=e.length;n>r;r++)t[r]=c(e[r]);return t}if(e instanceof Date)return e.toISOString();if(o(e))return a(e);if(!u(e))return e;t={};for(r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=c(e[r]);"undefined"!=typeof i&&(t[r]=i)}return t}function s(e){var t=!1;return J(function(r){if(t)throw new Error("once called more than once");t=!0,e.apply(this,r)})}function f(t){return J(function(r){r=c(r);var n,o=this,i="function"==typeof r[r.length-1]?r.pop():!1;i&&(n=function(t,r){e.nextTick(function(){i(t,r)})});var a=new U(function(e,n){var i;try{var a=s(function(t,r){t?n(t):e(r)});r.push(a),i=t.apply(o,r),i&&"function"==typeof i.then&&e(i)}catch(u){n(u)}});return n&&a.then(function(e){n(null,e)},n),a})}function l(e,t){function r(e,t,r){if($.enabled){for(var n=[e._db_name,t],o=0;o<r.length-1;o++)n.push(r[o]);$.apply(null,n);var i=r[r.length-1];r[r.length-1]=function(r,n){var o=[e._db_name,t];o=o.concat(r?["error",r]:["success",n]),$.apply(null,o),i(r,n)}}}return f(J(function(n){if(this._closed)return U.reject(new Error("database is closed"));if(this._destroyed)return U.reject(new Error("database is destroyed"));var o=this;return r(o,e,n),this.taskqueue.isReady?t.apply(this,n):new U(function(t,r){o.taskqueue.addTask(function(i){i?r(i):t(o[e].apply(o,n))})})}))}function d(e,t){for(var r={},n=0,o=t.length;o>n;n++){var i=t[n];i in e&&(r[i]=e[i])}return r}function _(e){return e}function h(e){return[{ok:e}]}function p(e,t,r){function n(){var e=[];p.forEach(function(t){t.docs.forEach(function(r){e.push({id:t.id,docs:[r]})})}),r(null,{results:e})}function o(){++l===f&&n()}function i(e,t,r){p[e]={id:t,docs:r},o()}function a(){if(!(m>=v.length)){var e=Math.min(m+Q,v.length),t=v.slice(m,e);u(t,m),m+=t.length}}function u(r,n){r.forEach(function(r,o){var u=n+o,c=s[r],f=d(c[0],["atts_since","attachments"]);f.open_revs=c.map(function(e){return e.rev}),f.open_revs=f.open_revs.filter(_);var l=_;0===f.open_revs.length&&(delete f.open_revs,l=h),["revs","attachments","binary","ajax"].forEach(function(e){e in t&&(f[e]=t[e])}),e.get(r,f,function(e,t){var n;n=e?[{error:e}]:l(t),i(u,r,n),a()})})}var c=t.docs,s={};c.forEach(function(e){e.id in s?s[e.id].push(e):s[e.id]=[e]});var f=Object.keys(s).length,l=0,p=new Array(f),v=Object.keys(s),m=0;a()}function v(){return"undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage&&"undefined"!=typeof chrome.storage.local}function m(){return P}function g(e){v()?chrome.storage.onChanged.addListener(function(t){null!=t.db_name&&e.emit(t.dbName.newValue)}):m()&&("undefined"!=typeof addEventListener?addEventListener("storage",function(t){e.emit(t.key)}):window.attachEvent("storage",function(t){e.emit(t.key)}))}function y(){H.EventEmitter.call(this),this._listeners={},g(this)}function b(e){if("undefined"!==console&&e in console){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}function w(e,t){var r=6e5;e=parseInt(e,10)||0,t=parseInt(t,10),t!==t||e>=t?t=(e||1)<<1:t+=1,t>r&&(e=r>>1,t=r);var n=Math.random(),o=t-e;return~~(o*n+e)}function A(e){var t=0;return e||(t=2e3),w(e,t)}function k(e,t){b("info","The above "+e+" is totally normal. "+t)}function S(e,t){for(var r in t)if(t.hasOwnProperty(r)){var n=c(t[r]);"undefined"!=typeof n&&(e[r]=n)}}function E(e,t,r){return S(e,t),r&&S(e,r),e}function T(e,t,r){try{return!e(t,r)}catch(n){var o="Filter function threw: "+n.toString();return z.createError(z.BAD_REQUEST,o)}}function x(e){var t={},r=e.filter&&"function"==typeof e.filter;return t.query=e.query_params,function(n){n.doc||(n.doc={});var o=r&&T(e.filter,n.doc,t);if("object"==typeof o)return o;if(o)return!1;if(e.include_docs){if(!e.attachments)for(var i in n.doc._attachments)n.doc._attachments.hasOwnProperty(i)&&(n.doc._attachments[i].stub=!0)}else delete n.doc;return!0}}function R(e){for(var t=[],r=0,n=e.length;n>r;r++)t=t.concat(e[r]);return t}function O(){}function q(e){var t;if(e?"string"!=typeof e?t=z.createError(z.INVALID_ID):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=z.createError(z.RESERVED_ID)):t=z.createError(z.MISSING_ID),t)throw t}function N(){return"undefined"!=typeof cordova||"undefined"!=typeof PhoneGap||"undefined"!=typeof phonegap}function I(e,t){return"listenerCount"in e?e.listenerCount(t):H.EventEmitter.listenerCount(e,t)}function C(e){if(!e)return null;var t=e.split("/");return 2===t.length?t:1===t.length?[e,e]:null}function L(e){var t=C(e);return t?t.join("/"):null}function D(e){for(var t=oe.exec(e),r={},n=14;n--;){var o=te[n],i=t[n]||"",a=-1!==["user","password"].indexOf(o);r[o]=a?decodeURIComponent(i):i}return r[re]={},r[te[12]].replace(ne,function(e,t,n){t&&(r[re][t]=n)}),r}function B(e,t,r){return new U(function(n,o){e.get(t,function(i,a){if(i){if(404!==i.status)return o(i);a={}}var u=a._rev,c=r(a);return c?(c._id=t,c._rev=u,void n(j(e,c,r))):n({updated:!1,rev:u})})})}function j(e,t,r){return e.put(t).then(function(e){return{updated:!0,rev:e.rev}},function(n){if(409!==n.status)throw n;return B(e,t._id,r)})}function M(e){return 0|Math.random()*e}function F(e,t){t=t||ie.length;var r="",n=-1;if(e){for(;++n<e;)r+=ie[M(t)];return r}for(;++n<36;)switch(n){case 8:case 13:case 18:case 23:r+="-";break;case 19:r+=ie[3&M(16)|8];break;default:r+=ie[M(16)]}return r}Object.defineProperty(t,"__esModule",{value:!0});var P,U=n(r(10)),J=n(r(14)),W=n(r(6)),H=r(15),V=n(r(9)),z=r(17),G=Function.prototype.toString,K=G.call(Object),$=W("pouchdb:api"),Q=6;if(v())P=!1;else try{localStorage.setItem("_pouch_check_localstorage",1),P=!!localStorage.getItem("_pouch_check_localstorage")}catch(X){P=!1}V(y,H.EventEmitter),y.prototype.addListener=function(e,t,r,n){function o(){function e(){a=!1}if(i._listeners[t]){if(a)return void(a="waiting");a=!0;var u=d(n,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary"]);r.changes(u).on("change",function(e){e.seq>n.since&&!n.cancelled&&(n.since=e.seq,n.onChange(e))}).on("complete",function(){"waiting"===a&&setTimeout(function(){o()},0),a=!1}).on("error",e)}}if(!this._listeners[t]){var i=this,a=!1;this._listeners[t]=o,this.on(e,o)}},y.prototype.removeListener=function(e,t){t in this._listeners&&H.EventEmitter.prototype.removeListener.call(this,e,this._listeners[t])},y.prototype.notifyLocalWindows=function(e){v()?chrome.storage.local.set({dbName:e}):m()&&(localStorage[e]="a"===localStorage[e]?"b":"a")},y.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)};var Y,Z=O.name;Y=Z?function(e){return e.name}:function(e){return e.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]};var ee=Y,te=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],re="queryKey",ne=/(?:^|&)([^&=]*)=?([^&]*)/g,oe=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ie="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");t.adapterFun=l,t.bulkGetShim=p,t.changesHandler=y,t.clone=c,t.defaultBackOff=A,t.explainError=k,t.extend=E,t.filterChange=x,t.flatten=R,t.functionName=ee,t.guardedConsole=b,t.hasLocalStorage=m,t.invalidIdError=q,t.isChromeApp=v,t.isCordova=N,t.listenerCount=I,t.normalizeDdocFunctionName=L,t.once=s,t.parseDdocFunctionName=C,t.parseUri=D,t.pick=d,t.toPromise=f,t.upsert=B,t.uuid=F}).call(t,r(4))},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(e){Error.call(this,e.reason),this.status=e.status,this.name=e.error,this.message=e.reason,this.error=!0}function i(e,t,r){function n(t){for(var n in e)"function"!=typeof e[n]&&(this[n]=e[n]);void 0!==r&&(this.name=r),void 0!==t&&(this.reason=t)}return n.prototype=o.prototype,new n(t)}function a(e){var t,r,n,o,a;return r=e.error===!0&&"string"==typeof e.name?e.name:e.error,a=e.reason,n=C("name",r,a),e.missing||"missing"===a||"deleted"===a||"not_found"===r?n=f:"doc_validation"===r?(n=b,o=a):"bad_request"===r&&n.message!==a&&(n=w),n||(n=C("status",e.status,a)||v),t=i(n,a,r),o&&(t.message=o),e.id&&(t.id=e.id),e.status&&(t.status=e.status),e.missing&&(t.missing=e.missing),t}Object.defineProperty(t,"__esModule",{value:!0});var u=n(r(9));u(o,Error),o.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};var c=new o({status:401,error:"unauthorized",reason:"Name or password is incorrect."}),s=new o({status:400,error:"bad_request",reason:"Missing JSON list of 'docs'"}),f=new o({status:404,error:"not_found",reason:"missing"}),l=new o({status:409,error:"conflict",reason:"Document update conflict"}),d=new o({status:400,error:"invalid_id",reason:"_id field must contain a string"}),_=new o({status:412,error:"missing_id",reason:"_id is required for puts"}),h=new o({status:400,error:"bad_request",reason:"Only reserved document ids may start with underscore."}),p=new o({status:412,error:"precondition_failed",reason:"Database not open"}),v=new o({status:500,error:"unknown_error",reason:"Database encountered an unknown error"}),m=new o({status:500,error:"badarg",reason:"Some query argument is invalid"}),g=new o({status:400,error:"invalid_request",reason:"Request was invalid"}),y=new o({status:400,error:"query_parse_error",reason:"Some query parameter is invalid"}),b=new o({status:500,error:"doc_validation",reason:"Bad special document member"}),w=new o({status:400,error:"bad_request",reason:"Something wrong with the request"}),A=new o({status:400,error:"bad_request",reason:"Document must be a JSON object"}),k=new o({status:404,error:"not_found",reason:"Database not found"}),S=new o({status:500,error:"indexed_db_went_bad",reason:"unknown"}),E=new o({status:500,error:"web_sql_went_bad",reason:"unknown"}),T=new o({status:500,error:"levelDB_went_went_bad",reason:"unknown"}),x=new o({status:403,error:"forbidden",reason:"Forbidden by design doc validate_doc_update function"}),R=new o({status:400,error:"bad_request",reason:"Invalid rev format"}),O=new o({status:412,error:"file_exists",reason:"The database could not be created, the file already exists."}),q=new o({status:412,error:"missing_stub"}),N=new o({status:413,error:"invalid_url",reason:"Provided URL is invalid"}),I=[c,s,f,l,d,_,h,p,v,m,g,y,b,w,A,k,E,T,x,R,O,q,S,N],C=function(e,t,r){var n=I.filter(function(r){return r[e]===t});return r&&n.filter(function(e){return e.message===r})[0]||n[0]};t.UNAUTHORIZED=c,t.MISSING_BULK_DOCS=s,t.MISSING_DOC=f,t.REV_CONFLICT=l,t.INVALID_ID=d,t.MISSING_ID=_,t.RESERVED_ID=h,t.NOT_OPEN=p,t.UNKNOWN_ERROR=v,t.BAD_ARG=m,t.INVALID_REQUEST=g,t.QUERY_PARSE_ERROR=y,t.DOC_VALIDATION=b,t.BAD_REQUEST=w,t.NOT_AN_OBJECT=A,t.DB_MISSING=k,t.WSQ_ERROR=E,t.LDB_ERROR=T,t.FORBIDDEN=x,t.INVALID_REV=R,t.FILE_EXISTS=O,t.MISSING_STUB=q,t.IDB_ERROR=S,t.INVALID_URL=N,t.getErrorTypeByProp=C,t.createError=i,t.generateErrorFromResponse=a},function(e,t){"use strict";function r(e){for(var t,r,n,o,i=e.rev_tree.slice();o=i.pop();){var a=o.ids,u=a[2],c=o.pos;if(u.length)for(var s=0,f=u.length;f>s;s++)i.push({pos:c+1,ids:u[s]});else{var l=!!a[1].deleted,d=a[0];t&&!(n!==l?n:r!==c?c>r:d>t)||(t=d,r=c,n=l)}}return r+"-"+t}function n(e,t){for(var r,n=e.slice();r=n.pop();)for(var o=r.pos,i=r.ids,a=i[2],u=t(0===a.length,o,i[0],r.ctx,i[1]),c=0,s=a.length;s>c;c++)n.push({pos:o+1,ids:a[c],ctx:u})}function o(e,t){return e.pos-t.pos}function i(e){var t=[];n(e,function(e,r,n,o,i){e&&t.push({rev:r+"-"+n,pos:r,opts:i})}),t.sort(o).reverse();for(var r=0,i=t.length;i>r;r++)delete t[r].pos;return t}function a(e){for(var t=r(e),n=i(e.rev_tree),o=[],a=0,u=n.length;u>a;a++){var c=n[a];c.rev===t||c.opts.deleted||o.push(c.rev)}return o}function u(e){var t=[];return n(e.rev_tree,function(e,r,n,o,i){"available"!==i.status||e||(t.push(r+"-"+n),i.status="missing")}),t}function c(e){for(var t,r=[],n=e.slice();t=n.pop();){var o=t.pos,i=t.ids,a=i[0],u=i[1],c=i[2],s=0===c.length,f=t.history?t.history.slice():[];f.push({id:a,opts:u}),s&&r.push({pos:o+1-f.length,ids:f});for(var l=0,d=c.length;d>l;l++)n.push({pos:o+1,ids:c[l],history:f})}return r.reverse()}function s(e,t){return e.pos-t.pos}function f(e,t,r){for(var n,o=0,i=e.length;i>o;)n=o+i>>>1,r(e[n],t)<0?o=n+1:i=n;return o}function l(e,t,r){var n=f(e,t,r);e.splice(n,0,t)}function d(e,t){for(var r,n,o=t,i=e.length;i>o;o++){var a=e[o],u=[a.id,a.opts,[]];n?(n[2].push(u),n=u):r=n=u}return r}function _(e,t){return e[0]<t[0]?-1:1}function h(e,t){for(var r=[{tree1:e,tree2:t}],n=!1;r.length>0;){var o=r.pop(),i=o.tree1,a=o.tree2;(i[1].status||a[1].status)&&(i[1].status="available"===i[1].status||"available"===a[1].status?"available":"missing");for(var u=0;u<a[2].length;u++)if(i[2][0]){for(var c=!1,s=0;s<i[2].length;s++)i[2][s][0]===a[2][u][0]&&(r.push({tree1:i[2][s],tree2:a[2][u]}),c=!0);c||(n="new_branch",l(i[2],a[2][u],_))}else n="new_leaf",i[2][0]=a[2][u]}return{conflicts:n,tree:e}}function p(e,t,r){var n,o=[],i=!1,a=!1;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var u=0,c=e.length;c>u;u++){var f=e[u];if(f.pos===t.pos&&f.ids[0]===t.ids[0])n=h(f.ids,t.ids),o.push({pos:f.pos,ids:n.tree}),i=i||n.conflicts,a=!0;else if(r!==!0){var l=f.pos<t.pos?f:t,d=f.pos<t.pos?t:f,_=d.pos-l.pos,p=[],v=[];for(v.push({ids:l.ids,diff:_,parent:null,parentIdx:null});v.length>0;){var m=v.pop();if(0!==m.diff)for(var g=m.ids[2],y=0,b=g.length;b>y;y++)v.push({ids:g[y],diff:m.diff-1,parent:m.ids,parentIdx:y});else m.ids[0]===d.ids[0]&&p.push(m)}var w=p[0];w?(n=h(w.ids,d.ids),w.parent[2][w.parentIdx]=n.tree,o.push({pos:l.pos,ids:l.ids}),i=i||n.conflicts,a=!0):o.push(f)}else o.push(f)}return a||o.push(t),o.sort(s),{tree:o,conflicts:i||"internal_node"}}function v(e,t){for(var r,o=c(e),i={},a=0,u=o.length;u>a;a++){for(var s=o[a],f=s.ids,l=Math.max(0,f.length-t),_={pos:s.pos+l,ids:d(f,l)},h=0;l>h;h++){var v=s.pos+h+"-"+f[h].id;i[v]=!0}r=r?p(r,_,!0).tree:[_]}return n(r,function(e,t,r){delete i[t+"-"+r]}),{tree:r,revs:Object.keys(i)}}function m(e,t,r){var n=p(e,t),o=v(n.tree,r);return{tree:o.tree,stemmedRevs:o.revs,conflicts:n.conflicts}}function g(e,t){for(var r,n=e.slice(),o=t.split("-"),i=parseInt(o[0],10),a=o[1];r=n.pop();){if(r.pos===i&&r.ids[0]===a)return!0;for(var u=r.ids[2],c=0,s=u.length;s>c;c++)n.push({pos:r.pos+1,ids:u[c]})}return!1}function y(e){return e.ids}function b(e,t){t||(t=r(e));for(var n,o=t.substring(t.indexOf("-")+1),i=e.rev_tree.map(y);n=i.pop();){if(n[0]===o)return!!n[1].deleted;i=i.concat(n[2])}}function w(e){return/^_local/.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.collectConflicts=a,t.collectLeaves=i,t.compactTree=u,t.isDeleted=b,t.isLocalId=w,t.merge=m,t.revExists=g,t.rootToLeaf=c,t.traverseRevTree=n,t.winningRev=r},function(e,t){(function(){var t={}.hasOwnProperty,r=[].slice;e.exports=function(e,n){var o,i,a,u;i=[],u=[];for(o in n)t.call(n,o)&&(a=n[o],"this"!==o&&(i.push(o),u.push(a)));return Function.apply(null,r.call(i).concat([e])).apply(n["this"],u)}}).call(this)},function(e,t,r){(function(t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(e,t,r,n){try{e.apply(t,r)}catch(o){n.emit("error",o)}}function i(e){if(!J.running&&J.queue.length){J.running=!0;var r=J.queue.shift();r.action(function(n,a){o(r.callback,this,[n,a],e),J.running=!1,t.nextTick(function(){i(e)})})}}function a(e){return function(t){var r="unknown_error";t.target&&t.target.error&&(r=t.target.error.name||t.target.error.message),e(R.createError(R.IDB_ERROR,r,t.type))}}function u(e,t,r){return{data:I.safeJsonStringify(e),winningRev:t,deletedOrLocal:r?"1":"0",seq:e.seq,id:e.id}}function c(e){if(!e)return null;var t=I.safeJsonParse(e.data);return t.winningRev=e.winningRev,t.deleted="1"===e.deletedOrLocal,t.seq=e.seq,t}function s(e){if(!e)return e;var t=e._doc_id_rev.lastIndexOf(":");return e._id=e._doc_id_rev.substring(0,t-1),e._rev=e._doc_id_rev.substring(t+1),delete e._doc_id_rev,e}function f(e,t,r,n){r?n(e?"string"!=typeof e?e:C.base64StringToBlobOrBuffer(e,t):C.blob([""],{type:t})):e?"string"!=typeof e?C.readAsBinaryString(e,function(e){n(C.btoa(e))}):n(e):n("")}function l(e,t,r,n){function o(){++u===a.length&&n&&n()}function i(e,t){var n=e._attachments[t],i=n.digest,a=r.objectStore(j).get(i);a.onsuccess=function(e){n.body=e.target.result.body,o()}}var a=Object.keys(e._attachments||{});if(!a.length)return n&&n();var u=0;a.forEach(function(r){t.attachments&&t.include_docs?i(e,r):(e._attachments[r].stub=!0,o())})}function d(e,t){return N.all(e.map(function(e){if(e.doc&&e.doc._attachments){var r=Object.keys(e.doc._attachments);return N.all(r.map(function(r){var n=e.doc._attachments[r];if("body"in n){var o=n.body,i=n.content_type;return new N(function(a){f(o,i,t,function(t){e.doc._attachments[r]=q.extend(E.pick(n,["digest","content_type"]),{data:t}),a()})})}}))}}))}function _(e,t,r){function n(){s--,s||o()}function o(){i.length&&i.forEach(function(e){var t=c.index("digestSeq").count(IDBKeyRange.bound(e+"::",e+"::",!1,!1));t.onsuccess=function(t){var r=t.target.result;r||u["delete"](e)}})}var i=[],a=r.objectStore(B),u=r.objectStore(j),c=r.objectStore(M),s=e.length;e.forEach(function(e){var r=a.index("_doc_id_rev"),o=t+"::"+e;r.getKey(o).onsuccess=function(e){var t=e.target.result;if("number"!=typeof t)return n();a["delete"](t);var r=c.index("seq").openCursor(IDBKeyRange.only(t));r.onsuccess=function(e){var t=e.target.result;if(t){var r=t.value.digestSeq.split("::")[0];i.push(r),c["delete"](t.primaryKey),t["continue"]()}else n()}}})}function h(e,t,r){try{return{txn:e.transaction(t,r)}}catch(n){return{error:n}}}function p(e,t,r,n,o,i,s){function f(){var e=[D,B,j,P,M],t=h(o,e,"readwrite");return t.error?s(t.error):(k=t.txn,k.onabort=a(s),k.ontimeout=a(s),k.oncomplete=p,S=k.objectStore(D),E=k.objectStore(B),q=k.objectStore(j),N=k.objectStore(M),void m(function(e){return e?(V=!0,s(e)):void d()}))}function l(){O.processDocs(e.revs_limit,C,n,H,k,W,g,r)}function d(){function e(){++r===C.length&&l()}function t(t){var r=c(t.target.result);r&&H.set(r.id,r),e()}if(C.length)for(var r=0,n=0,o=C.length;o>n;n++){var i=C[n];if(i._id&&O.isLocalId(i._id))e();else{var a=S.get(i.metadata.id);a.onsuccess=t}}}function p(){V||(i.notify(n._meta.name),n._meta.docCount+=L,s(null,W))}function v(e,t){var r=q.get(e);r.onsuccess=function(r){if(r.target.result)t();else{var n=R.createError(R.MISSING_STUB,"unknown stub attachment with digest "+e);n.status=412,t(n)}}}function m(e){function t(){++o===r.length&&e(n)}var r=[];if(C.forEach(function(e){e.data&&e.data._attachments&&Object.keys(e.data._attachments).forEach(function(t){var n=e.data._attachments[t];n.stub&&r.push(n.digest)})}),!r.length)return e();var n,o=0;r.forEach(function(e){v(e,function(e){e&&!n&&(n=e),t()})})}function g(e,t,r,n,o,i,a,u){L+=i,e.metadata.winningRev=t,e.metadata.deleted=r;var c=e.data;c._id=e.metadata.id,c._rev=e.metadata.rev,n&&(c._deleted=!0);var s=c._attachments&&Object.keys(c._attachments).length;return s?b(e,t,r,o,a,u):void y(e,t,r,o,a,u)}function y(e,t,r,o,i,a){function c(i){var a=e.stemmedRevs||[];o&&n.auto_compaction&&(a=a.concat(T.compactTree(e.metadata))),a&&a.length&&_(a,e.metadata.id,k),d.seq=i.target.result,delete d.rev;var c=u(d,t,r),s=S.put(c);s.onsuccess=f}function s(e){e.preventDefault(),e.stopPropagation();var t=E.index("_doc_id_rev"),r=t.getKey(l._doc_id_rev);r.onsuccess=function(e){var t=E.put(l,e.target.result);t.onsuccess=c}}function f(){W[i]={ok:!0,id:d.id,rev:t},H.set(e.metadata.id,e.metadata),w(e,d.seq,a)}var l=e.data,d=e.metadata;l._doc_id_rev=d.id+"::"+d.rev,delete l._id,delete l._rev;var h=E.put(l);h.onsuccess=c,h.onerror=s}function b(e,t,r,n,o,i){function a(){s===f.length&&y(e,t,r,n,o,i)}function u(){s++,a()}var c=e.data,s=0,f=Object.keys(c._attachments);f.forEach(function(r){var n=e.data._attachments[r];if(n.stub)s++,a();else{var o=n.data;delete n.data,n.revpos=parseInt(t,10);var i=n.digest;A(i,o,u)}})}function w(e,t,r){function n(){++i===a.length&&r()}function o(r){var o=e.data._attachments[r].digest,i=N.put({seq:t,digestSeq:o+"::"+t});i.onsuccess=n,i.onerror=function(e){e.preventDefault(),e.stopPropagation(),n()}}var i=0,a=Object.keys(e.data._attachments||{});if(!a.length)return r();for(var u=0;u<a.length;u++)o(a[u])}function A(e,t,r){var n=q.count(e);n.onsuccess=function(n){var o=n.target.result;if(o)return r();var i={digest:e,body:t},a=q.put(i);a.onsuccess=r}}for(var k,S,E,q,N,I,C=t.docs,L=0,F=0,U=C.length;U>F;F++){var J=C[F];J._id&&O.isLocalId(J._id)||(J=C[F]=O.parseDoc(J,r.new_edits),J.error&&!I&&(I=J))}if(I)return s(I);var W=new Array(C.length),H=new x.Map,V=!1,z=n._meta.blobSupport?"blob":"base64";O.preprocessAttachments(C,z,function(e){return e?s(e):void f()})}function v(e,t,r,n,o){try{if(e&&t)return o?IDBKeyRange.bound(t,e,!r,!1):IDBKeyRange.bound(e,t,!1,!r);if(e)return o?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(t)return o?IDBKeyRange.lowerBound(t,!r):IDBKeyRange.upperBound(t,!r);if(n)return IDBKeyRange.only(n)}catch(i){return{error:i}}return null}function m(e,t,r,n){return"DataError"===r.name&&0===r.code?n(null,{total_rows:e._meta.docCount,offset:t.skip,rows:[]}):void n(R.createError(R.IDB_ERROR,r.name,r.message))}function g(e,t,r,n){function o(e,n){function o(t,r,n){var o=t.id+"::"+n;N.get(o).onsuccess=function(n){r.doc=s(n.target.result),e.conflicts&&(r.doc._conflicts=T.collectConflicts(t)),l(r.doc,e,x)}}function i(t,r,n){var i={id:n.id,key:n.id,value:{rev:r}},a=n.deleted;if("ok"===e.deleted)I.push(i),a?(i.value.deleted=!0,i.doc=null):e.include_docs&&o(n,i,r);else if(!a&&y--<=0&&(I.push(i),e.include_docs&&o(n,i,r),0===--b))return;t["continue"]()}function a(e){C=t._meta.docCount;var r=e.target.result;if(r){var n=c(r.value),o=n.winningRev;i(r,o,n)}}function u(){n(null,{total_rows:C,offset:e.skip,rows:I})}function f(){e.attachments?d(I,e.binary).then(u):u()}var _="startkey"in e?e.startkey:!1,p="endkey"in e?e.endkey:!1,g="key"in e?e.key:!1,y=e.skip||0,b="number"==typeof e.limit?e.limit:-1,w=e.inclusive_end!==!1,A="descending"in e&&e.descending?"prev":null,k=v(_,p,w,g,A);if(k&&k.error)return m(t,e,k.error,n);var S=[D,B];e.attachments&&S.push(j);var E=h(r,S,"readonly");if(E.error)return n(E.error);var x=E.txn,R=x.objectStore(D),O=x.objectStore(B),q=A?R.openCursor(k,A):R.openCursor(k),N=O.index("_doc_id_rev"),I=[],C=0;x.oncomplete=f,q.onsuccess=a}function i(e,r){return 0===e.limit?r(null,{total_rows:t._meta.docCount,offset:e.skip,rows:[]}):void o(e,r)}i(e,n)}function y(e){return new N(function(t){var r=C.blob([""]);e.objectStore(U).put(r,"key"),e.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},e.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);t(r||!e||parseInt(e[1],10)>=43)}})["catch"](function(){return!1})}function b(e,t){var r=this;J.queue.push({action:function(t){w(r,e,t)},callback:t}),i(r.constructor)}function w(e,r,n){function o(e){var t=e.createObjectStore(D,{keyPath:"id"});e.createObjectStore(B,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),e.createObjectStore(j,{keyPath:"digest"}),e.createObjectStore(F,{keyPath:"id",autoIncrement:!1}),e.createObjectStore(U),t.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),e.createObjectStore(P,{keyPath:"_id"});var r=e.createObjectStore(M,{autoIncrement:!0});r.createIndex("seq","seq"),r.createIndex("digestSeq","digestSeq",{unique:!0})}function i(e,t){var r=e.objectStore(D);r.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),r.openCursor().onsuccess=function(e){var n=e.target.result;if(n){var o=n.value,i=T.isDeleted(o);o.deletedOrLocal=i?"1":"0",r.put(o),n["continue"]()}else t()}}function v(e){e.createObjectStore(P,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}function m(e,t){var r=e.objectStore(P),n=e.objectStore(D),o=e.objectStore(B),i=n.openCursor();i.onsuccess=function(e){var i=e.target.result;if(i){var a=i.value,u=a.id,c=T.isLocalId(u),s=T.winningRev(a);if(c){var f=u+"::"+s,l=u+"::",d=u+"::~",_=o.index("_doc_id_rev"),h=IDBKeyRange.bound(l,d,!1,!1),p=_.openCursor(h);p.onsuccess=function(e){if(p=e.target.result){var t=p.value;t._doc_id_rev===f&&r.put(t),o["delete"](p.primaryKey),p["continue"]()}else n["delete"](i.primaryKey),i["continue"]()}}else i["continue"]()}else t&&t()}}function b(e){var t=e.createObjectStore(M,{autoIncrement:!0});t.createIndex("seq","seq"),t.createIndex("digestSeq","digestSeq",{unique:!0})}function w(e,t){var r=e.objectStore(B),n=e.objectStore(j),o=e.objectStore(M),i=n.count();i.onsuccess=function(e){var n=e.target.result;return n?void(r.openCursor().onsuccess=function(e){var r=e.target.result;if(!r)return t();for(var n=r.value,i=r.primaryKey,a=Object.keys(n._attachments||{}),u={},c=0;c<a.length;c++){var s=n._attachments[a[c]];u[s.digest]=!0}var f=Object.keys(u);for(c=0;c<f.length;c++){var l=f[c];o.put({seq:i,digestSeq:l+"::"+i})}r["continue"]()}):t()}}function k(e){function t(e){return e.data?c(e):(e.deleted="1"===e.deletedOrLocal,e)}var r=e.objectStore(B),n=e.objectStore(D),o=n.openCursor();o.onsuccess=function(e){function o(){var e=c.id+"::",t=c.id+"::",n=r.index("_doc_id_rev").openCursor(IDBKeyRange.bound(e,t)),o=0;n.onsuccess=function(e){var t=e.target.result;if(!t)return c.seq=o,i();var r=t.primaryKey;r>o&&(o=r),t["continue"]()}}function i(){var e=u(c,c.winningRev,c.deleted),t=n.put(e);t.onsuccess=function(){a["continue"]()}}var a=e.target.result;if(a){var c=t(a.value);return c.winningRev=c.winningRev||T.winningRev(c),c.seq?i():void o()}}}var O=r.name,q=null;e._meta=null,e.type=function(){return"idb"},e._id=E.toPromise(function(t){t(null,e._meta.instanceId)}),e._bulkDocs=function(t,n,o){p(r,t,n,e,q,H,o)},e._get=function(e,t,r){function n(){r(a,{doc:o,metadata:i,ctx:u})}var o,i,a,u=t.ctx;if(!u){var f=h(q,[D,B,j],"readonly");if(f.error)return r(f.error);u=f.txn}u.objectStore(D).get(e).onsuccess=function(e){if(i=c(e.target.result),!i)return a=R.createError(R.MISSING_DOC,"missing"),n();if(T.isDeleted(i)&&!t.rev)return a=R.createError(R.MISSING_DOC,"deleted"),n();var r=u.objectStore(B),f=t.rev||i.winningRev,l=i.id+"::"+f;r.index("_doc_id_rev").get(l).onsuccess=function(e){return o=e.target.result,o&&(o=s(o)),o?void n():(a=R.createError(R.MISSING_DOC,"missing"),n())}}},e._getAttachment=function(e,t,r,n,o){var i;if(n.ctx)i=n.ctx;else{var a=h(q,[D,B,j],"readonly");if(a.error)return o(a.error);i=a.txn}var u=r.digest,c=r.content_type;i.objectStore(j).get(u).onsuccess=function(e){var t=e.target.result.body;f(t,c,n.binary,function(e){o(null,e)})}},e._info=function(t){if(null===q||!W.has(O)){var r=new Error("db isn't open");return r.id="idbNull",t(r)}var n,o,i=h(q,[B],"readonly");if(i.error)return t(i.error);var a=i.txn,u=a.objectStore(B).openCursor(null,"prev");u.onsuccess=function(t){var r=t.target.result;n=r?r.key:0,o=e._meta.docCount},a.oncomplete=function(){t(null,{doc_count:o,update_seq:n,idb_attachment_format:e._meta.blobSupport?"binary":"base64"})}},e._allDocs=function(t,r){g(t,e,q,r)},e._changes=function(t){function r(e){function r(){return u.seq!==a?e["continue"]():(_=a,u.winningRev===i._rev?o(i):void n())}function n(){var e=i._id+"::"+u.winningRev,t=b.get(e);t.onsuccess=function(e){o(s(e.target.result))}}function o(r){var n=t.processChange(r,u,t);n.seq=u.seq;var o=k(n);return"object"==typeof o?t.complete(o):(o&&(A++,v&&w.push(n),t.attachments&&t.include_docs?l(r,t,m,function(){d([n],t.binary).then(function(){t.onChange(n)})}):t.onChange(n)),void(A!==p&&e["continue"]()))}var i=s(e.value),a=e.key;if(f&&!f.has(i._id))return e["continue"]();var u;return(u=S.get(i._id))?r():void(y.get(i._id).onsuccess=function(e){u=c(e.target.result),S.set(i._id,u),r()})}function n(e){var t=e.target.result;t&&r(t)}function o(){var e=[D,B];t.attachments&&e.push(j);var r=h(q,e,"readonly");if(r.error)return t.complete(r.error);m=r.txn,m.onabort=a(t.complete),m.oncomplete=i,g=m.objectStore(B),y=m.objectStore(D),b=g.index("_doc_id_rev");var o;o=t.descending?g.openCursor(null,"prev"):g.openCursor(IDBKeyRange.lowerBound(t.since,!0)),o.onsuccess=n}function i(){function e(){t.complete(null,{results:w,last_seq:_})}!t.continuous&&t.attachments?d(w).then(e):e()}if(t=E.clone(t),t.continuous){var u=O+":"+E.uuid();return H.addListener(O,u,e,t),H.notify(O),{cancel:function(){H.removeListener(O,u)}}}var f=t.doc_ids&&new x.Set(t.doc_ids);t.since=t.since||0;var _=t.since,p="limit"in t?t.limit:-1;0===p&&(p=1);var v;v="return_docs"in t?t.return_docs:"returnDocs"in t?t.returnDocs:!0;var m,g,y,b,w=[],A=0,k=E.filterChange(t),S=new x.Map;o()},e._close=function(e){return null===q?e(R.createError(R.NOT_OPEN)):(q.close(),W["delete"](O),q=null,void e())},e._getRevisionTree=function(e,t){var r=h(q,[D],"readonly");if(r.error)return t(r.error);var n=r.txn,o=n.objectStore(D).get(e);o.onsuccess=function(e){var r=c(e.target.result);r?t(null,r.rev_tree):t(R.createError(R.MISSING_DOC))}},e._doCompaction=function(e,t,r){var n=[D,B,j,M],o=h(q,n,"readwrite");if(o.error)return r(o.error);var i=o.txn,s=i.objectStore(D);s.get(e).onsuccess=function(r){var n=c(r.target.result);T.traverseRevTree(n.rev_tree,function(e,r,n,o,i){var a=r+"-"+n;-1!==t.indexOf(a)&&(i.status="missing")}),_(t,e,i);var o=n.winningRev,a=n.deleted;i.objectStore(D).put(u(n,o,a))},i.onabort=a(r),i.oncomplete=function(){r()}},e._getLocal=function(e,t){
var r=h(q,[P],"readonly");if(r.error)return t(r.error);var n=r.txn,o=n.objectStore(P).get(e);o.onerror=a(t),o.onsuccess=function(e){var r=e.target.result;r?(delete r._doc_id_rev,t(null,r)):t(R.createError(R.MISSING_DOC))}},e._putLocal=function(e,t,r){"function"==typeof t&&(r=t,t={}),delete e._revisions;var n=e._rev,o=e._id;n?e._rev="0-"+(parseInt(n.split("-")[1],10)+1):e._rev="0-1";var i,u=t.ctx;if(!u){var c=h(q,[P],"readwrite");if(c.error)return r(c.error);u=c.txn,u.onerror=a(r),u.oncomplete=function(){i&&r(null,i)}}var s,f=u.objectStore(P);n?(s=f.get(o),s.onsuccess=function(o){var a=o.target.result;if(a&&a._rev===n){var u=f.put(e);u.onsuccess=function(){i={ok:!0,id:e._id,rev:e._rev},t.ctx&&r(null,i)}}else r(R.createError(R.REV_CONFLICT))}):(s=f.add(e),s.onerror=function(e){r(R.createError(R.REV_CONFLICT)),e.preventDefault(),e.stopPropagation()},s.onsuccess=function(){i={ok:!0,id:e._id,rev:e._rev},t.ctx&&r(null,i)})},e._removeLocal=function(e,t,r){"function"==typeof t&&(r=t,t={});var n=t.ctx;if(!n){var o=h(q,[P],"readwrite");if(o.error)return r(o.error);n=o.txn,n.oncomplete=function(){i&&r(null,i)}}var i,u=e._id,c=n.objectStore(P),s=c.get(u);s.onerror=a(r),s.onsuccess=function(n){var o=n.target.result;o&&o._rev===e._rev?(c["delete"](u),i={ok:!0,id:u,rev:"0-0"},t.ctx&&r(null,i)):r(R.createError(R.MISSING_DOC))}},e._destroy=function(e,t){H.removeAllListeners(O);var r=V.get(O);r&&r.result&&(r.result.close(),W["delete"](O));var n=indexedDB.deleteDatabase(O);n.onsuccess=function(){V["delete"](O),E.hasLocalStorage()&&O in localStorage&&delete localStorage[O],t(null,{ok:!0})},n.onerror=a(t)};var N=W.get(O);if(N)return q=N.idb,e._meta=N.global,void t.nextTick(function(){n(null,e)});var I;I=r.storage?A(O,r.storage):indexedDB.open(O,L),V.set(O,I),I.onupgradeneeded=function(e){function t(){var e=a[u-1];u++,e&&e(n,t)}var r=e.target.result;if(e.oldVersion<1)return o(r);var n=e.currentTarget.transaction;e.oldVersion<3&&v(r),e.oldVersion<4&&b(r);var a=[i,m,w,k],u=e.oldVersion;t()},I.onsuccess=function(t){q=t.target.result,q.onversionchange=function(){q.close(),W["delete"](O)},q.onabort=function(e){E.guardedConsole("error","Database has a global failure",e.target.error),q.close(),W["delete"](O)};var r=q.transaction([F,U,D],"readwrite"),o=r.objectStore(F).get(F),i=null,a=null,u=null;o.onsuccess=function(t){var o=function(){null!==i&&null!==a&&null!==u&&(e._meta={name:O,instanceId:u,blobSupport:i,docCount:a},W.set(O,{idb:q,global:e._meta}),n(null,e))},c=t.target.result||{id:F};O+"_id"in c?(u=c[O+"_id"],o()):(u=E.uuid(),c[O+"_id"]=u,r.objectStore(F).put(c).onsuccess=function(){o()}),S||(S=y(r)),S.then(function(e){i=e,o()});var s=r.objectStore(D).index("deletedOrLocal");s.count(IDBKeyRange.only("0")).onsuccess=function(e){a=e.target.result,o()}}},I.onerror=function(){var e="Failed to open indexedDB, are you in private browsing mode?";E.guardedConsole("error",e),n(R.createError(R.IDB_ERROR,e))}}function A(e,t){try{return indexedDB.open(e,{version:L,storage:t})}catch(r){return indexedDB.open(e,L)}}function k(e){e.adapter("idb",b,!0)}var S,E=r(16),T=r(18),x=r(13),R=r(17),O=r(21),q=r(5),N=n(r(10)),I=r(25),C=r(22),L=5,D="document-store",B="by-sequence",j="attach-store",M="attach-seq-store",F="meta-store",P="local-store",U="detect-blob-support",J={running:!1,queue:[]},W=new x.Map,H=new E.changesHandler,V=new x.Map;b.valid=function(){var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform);return!e&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange},e.exports=k}).call(t,r(4))},function(e,t,r){"use strict";function n(e){return e.reduce(function(e,t){return e[t]=!0,e},{})}function o(e){if(!/^\d+\-./.test(e))return d.createError(d.INVALID_REV);var t=e.indexOf("-"),r=e.substring(0,t),n=e.substring(t+1);return{prefix:parseInt(r,10),id:n}}function i(e,t){for(var r=e.start-e.ids.length+1,n=e.ids,o=[n[0],t,[]],i=1,a=n.length;a>i;i++)o=[n[i],{status:"missing"},[o]];return[{pos:r,ids:o}]}function a(e,t){var r,n,a,u={status:"available"};if(e._deleted&&(u.deleted=!0),t)if(e._id||(e._id=l.uuid()),n=l.uuid(32,16).toLowerCase(),e._rev){if(a=o(e._rev),a.error)return a;e._rev_tree=[{pos:a.prefix,ids:[a.id,{status:"missing"},[[n,u,[]]]]}],r=a.prefix+1}else e._rev_tree=[{pos:1,ids:[n,u,[]]}],r=1;else if(e._revisions&&(e._rev_tree=i(e._revisions,u),r=e._revisions.start,n=e._revisions.ids[0]),!e._rev_tree){if(a=o(e._rev),a.error)return a;r=a.prefix,n=a.id,e._rev_tree=[{pos:r,ids:[n,u,[]]}]}l.invalidIdError(e._id),e._rev=r+"-"+n;var c={metadata:{},data:{}};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var f="_"===s[0];if(f&&!m[s]){var _=d.createError(d.DOC_VALIDATION,s);throw _.message=d.DOC_VALIDATION.message+": "+s,_}f&&!g[s]?c.metadata[s.slice(1)]=e[s]:c.data[s]=e[s]}return c}function u(e,t,r){function n(e){try{return h.atob(e)}catch(t){var r=d.createError(d.BAD_ARG,"Attachment is not a valid base64 string");return{error:r}}}function o(e,r){if(e.stub)return r();if("string"==typeof e.data){var o=n(e.data);if(o.error)return r(o.error);e.length=o.length,"blob"===t?e.data=h.binaryStringToBlobOrBuffer(o,e.content_type):"base64"===t?e.data=h.btoa(o):e.data=o,p.binaryMd5(o,function(t){e.digest="md5-"+t,r()})}else h.readAsArrayBuffer(e.data,function(n){"binary"===t?e.data=h.arrayBufferToBinaryString(n):"base64"===t&&(e.data=h.arrayBufferToBase64(n)),p.binaryMd5(n,function(t){e.digest="md5-"+t,e.length=n.byteLength,r()})})}function i(){u++,e.length===u&&(a?r(a):r())}if(!e.length)return r();var a,u=0;e.forEach(function(e){function t(e){a=e,n++,n===r.length&&i()}var r=e.data&&e.data._attachments?Object.keys(e.data._attachments):[],n=0;if(!r.length)return i();for(var u in e.data._attachments)e.data._attachments.hasOwnProperty(u)&&o(e.data._attachments[u],t)})}function c(e,t,r,n,o,i,u,c){if(_.revExists(t.rev_tree,r.metadata.rev))return n[o]=r,i();var s=t.winningRev||_.winningRev(t),f="deleted"in t?t.deleted:_.isDeleted(t,s),l="deleted"in r.metadata?r.metadata.deleted:_.isDeleted(r.metadata),h=/^1-/.test(r.metadata.rev);if(f&&!l&&c&&h){var p=r.data;p._rev=s,p._id=r.metadata.id,r=a(p,c)}var v=_.merge(t.rev_tree,r.metadata.rev_tree[0],e),m=c&&(f&&l||!f&&"new_leaf"!==v.conflicts||f&&!l&&"new_branch"===v.conflicts);if(m){var g=d.createError(d.REV_CONFLICT);return n[o]=g,i()}var y=r.metadata.rev;r.metadata.rev_tree=v.tree,r.stemmedRevs=v.stemmedRevs||[],t.rev_map&&(r.metadata.rev_map=t.rev_map);var b,w=_.winningRev(r.metadata),A=_.isDeleted(r.metadata,w),k=f===A?0:A>f?-1:1;b=y===w?A:_.isDeleted(r.metadata,y),u(r,w,A,b,!0,k,o,i)}function s(e){return"missing"===e.metadata.rev_tree[0].ids[1].status}function f(e,t,r,n,o,i,a,u,f){function l(e,t,r){var n=_.winningRev(e.metadata),o=_.isDeleted(e.metadata,n);if("was_delete"in u&&o)return i[t]=d.createError(d.MISSING_DOC,"deleted"),r();var c=p&&s(e);if(c){var f=d.createError(d.REV_CONFLICT);return i[t]=f,r()}var l=o?0:1;a(e,n,o,o,!1,l,t,r)}function h(){++g===y&&f&&f()}e=e||1e3;var p=u.new_edits,m=new v.Map,g=0,y=t.length;t.forEach(function(e,t){if(e._id&&_.isLocalId(e._id)){var n=e._deleted?"_removeLocal":"_putLocal";return void r[n](e,{ctx:o},function(e,r){i[t]=e||r,h()})}var a=e.metadata.id;m.has(a)?(y--,m.get(a).push([e,t])):m.set(a,[[e,t]])}),m.forEach(function(t,r){function o(){++s<t.length?u():h()}function u(){var u=t[s],f=u[0],d=u[1];if(n.has(r))c(e,n.get(r),f,i,d,o,a,p);else{var h=_.merge([],f.metadata.rev_tree[0],e);f.metadata.rev_tree=h.tree,f.stemmedRevs=h.stemmedRevs||[],l(f,d,o)}}var s=0;u()})}Object.defineProperty(t,"__esModule",{value:!0});var l=r(16),d=r(17),_=r(18),h=r(22),p=r(23),v=r(13),m=n(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),g=n(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);t.invalidIdError=l.invalidIdError,t.isDeleted=_.isDeleted,t.isLocalId=_.isLocalId,t.normalizeDdocFunctionName=l.normalizeDdocFunctionName,t.parseDdocFunctionName=l.parseDdocFunctionName,t.parseDoc=a,t.preprocessAttachments=u,t.processDocs=f,t.updateDoc=c},function(e,t){"use strict";function r(e){for(var t="",r=new Uint8Array(e),n=r.byteLength,o=0;n>o;o++)t+=String.fromCharCode(r[o]);return t}function n(e){return _(r(e))}function o(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(r){if("TypeError"!==r.name)throw r;for(var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,o=new n,i=0;i<e.length;i+=1)o.append(e[i]);return o.getBlob(t.type)}}function i(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),o=0;t>o;o++)n[o]=e.charCodeAt(o);return r}function a(e,t){return o([i(e)],{type:t})}function u(e,t){return a(d(e),t)}function c(e,t){if("undefined"==typeof FileReader)return t(r((new FileReaderSync).readAsArrayBuffer(e)));var n=new FileReader,o="function"==typeof n.readAsBinaryString;n.onloadend=function(e){var n=e.target.result||"";return o?t(n):void t(r(n))},o?n.readAsBinaryString(e):n.readAsArrayBuffer(e)}function s(e,t){c(e,function(e){t(_(e))})}function f(e,t){if("undefined"==typeof FileReader)return t((new FileReaderSync).readAsArrayBuffer(e));var r=new FileReader;r.onloadend=function(e){var r=e.target.result||new ArrayBuffer(0);t(r)},r.readAsArrayBuffer(e)}function l(){}Object.defineProperty(t,"__esModule",{value:!0});var d=function(e){return atob(e)},_=function(e){return btoa(e)};t.arrayBufferToBase64=n,t.arrayBufferToBinaryString=r,t.atob=d,t.btoa=_,t.base64StringToBlobOrBuffer=u,t.binaryStringToArrayBuffer=i,t.binaryStringToBlobOrBuffer=a,t.blob=o,t.blobOrBufferToBase64=s,t.readAsArrayBuffer=f,t.readAsBinaryString=c,t.typedBuffer=l},function(e,t,r){(function(e){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(e){return s.btoa(e)}function i(e,t,r,n){(r>0||n<t.byteLength)&&(t=new Uint8Array(t,r,Math.min(n,t.byteLength)-r)),e.append(t)}function a(e,t,r,n){(r>0||n<t.length)&&(t=t.substring(r,n)),e.appendBinary(t)}function u(e,t){function r(){var n=_*c,i=n+c;if(_++,s>_)p(h,e,n,i),l(r);else{p(h,e,n,i);var a=h.end(!0),u=o(a);t(u),h.destroy()}}var n="string"==typeof e,u=n?e.length:e.byteLength,c=Math.min(d,u),s=Math.ceil(u/c),_=0,h=n?new f:new f.ArrayBuffer,p=n?a:i;r()}function c(e){return f.hash(e)}Object.defineProperty(t,"__esModule",{value:!0});var s=r(22),f=n(r(24)),l=e.setImmediate||e.setTimeout,d=32768;t.binaryMd5=u,t.stringMd5=c}).call(t,function(){return this}())},function(e,t,r){!function(t){e.exports=t()}(function(e){"use strict";function t(e,t,r,n,o,i){return t=y(y(t,e),y(n,i)),y(t<<o|t>>>32-o,r)}function r(e,r,n,o,i,a,u){return t(r&n|~r&o,e,r,i,a,u)}function n(e,r,n,o,i,a,u){return t(r&o|n&~o,e,r,i,a,u)}function o(e,r,n,o,i,a,u){return t(r^n^o,e,r,i,a,u)}function i(e,r,n,o,i,a,u){return t(n^(r|~o),e,r,i,a,u)}function a(e,t){var a=e[0],u=e[1],c=e[2],s=e[3];a=r(a,u,c,s,t[0],7,-680876936),s=r(s,a,u,c,t[1],12,-389564586),c=r(c,s,a,u,t[2],17,606105819),u=r(u,c,s,a,t[3],22,-1044525330),a=r(a,u,c,s,t[4],7,-176418897),s=r(s,a,u,c,t[5],12,1200080426),c=r(c,s,a,u,t[6],17,-1473231341),u=r(u,c,s,a,t[7],22,-45705983),a=r(a,u,c,s,t[8],7,1770035416),s=r(s,a,u,c,t[9],12,-1958414417),c=r(c,s,a,u,t[10],17,-42063),u=r(u,c,s,a,t[11],22,-1990404162),a=r(a,u,c,s,t[12],7,1804603682),s=r(s,a,u,c,t[13],12,-40341101),c=r(c,s,a,u,t[14],17,-1502002290),u=r(u,c,s,a,t[15],22,1236535329),a=n(a,u,c,s,t[1],5,-165796510),s=n(s,a,u,c,t[6],9,-1069501632),c=n(c,s,a,u,t[11],14,643717713),u=n(u,c,s,a,t[0],20,-373897302),a=n(a,u,c,s,t[5],5,-701558691),s=n(s,a,u,c,t[10],9,38016083),c=n(c,s,a,u,t[15],14,-660478335),u=n(u,c,s,a,t[4],20,-405537848),a=n(a,u,c,s,t[9],5,568446438),s=n(s,a,u,c,t[14],9,-1019803690),c=n(c,s,a,u,t[3],14,-187363961),u=n(u,c,s,a,t[8],20,1163531501),a=n(a,u,c,s,t[13],5,-1444681467),s=n(s,a,u,c,t[2],9,-51403784),c=n(c,s,a,u,t[7],14,1735328473),u=n(u,c,s,a,t[12],20,-1926607734),a=o(a,u,c,s,t[5],4,-378558),s=o(s,a,u,c,t[8],11,-2022574463),c=o(c,s,a,u,t[11],16,1839030562),u=o(u,c,s,a,t[14],23,-35309556),a=o(a,u,c,s,t[1],4,-1530992060),s=o(s,a,u,c,t[4],11,1272893353),c=o(c,s,a,u,t[7],16,-155497632),u=o(u,c,s,a,t[10],23,-1094730640),a=o(a,u,c,s,t[13],4,681279174),s=o(s,a,u,c,t[0],11,-358537222),c=o(c,s,a,u,t[3],16,-722521979),u=o(u,c,s,a,t[6],23,76029189),a=o(a,u,c,s,t[9],4,-640364487),s=o(s,a,u,c,t[12],11,-421815835),c=o(c,s,a,u,t[15],16,530742520),u=o(u,c,s,a,t[2],23,-995338651),a=i(a,u,c,s,t[0],6,-198630844),s=i(s,a,u,c,t[7],10,1126891415),c=i(c,s,a,u,t[14],15,-1416354905),u=i(u,c,s,a,t[5],21,-57434055),a=i(a,u,c,s,t[12],6,1700485571),s=i(s,a,u,c,t[3],10,-1894986606),c=i(c,s,a,u,t[10],15,-1051523),u=i(u,c,s,a,t[1],21,-2054922799),a=i(a,u,c,s,t[8],6,1873313359),s=i(s,a,u,c,t[15],10,-30611744),c=i(c,s,a,u,t[6],15,-1560198380),u=i(u,c,s,a,t[13],21,1309151649),a=i(a,u,c,s,t[4],6,-145523070),s=i(s,a,u,c,t[11],10,-1120210379),c=i(c,s,a,u,t[2],15,718787259),u=i(u,c,s,a,t[9],21,-343485551),e[0]=y(a,e[0]),e[1]=y(u,e[1]),e[2]=y(c,e[2]),e[3]=y(s,e[3])}function u(e){var t,r=[];for(t=0;64>t;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}function c(e){var t,r=[];for(t=0;64>t;t+=4)r[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return r}function s(e){var t,r,n,o,i,c,s=e.length,f=[1732584193,-271733879,-1732584194,271733878];for(t=64;s>=t;t+=64)a(f,u(e.substring(t-64,t)));for(e=e.substring(t-64),r=e.length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;r>t;t+=1)n[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(a(f,n),t=0;16>t;t+=1)n[t]=0;return o=8*s,o=o.toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(o[2],16),c=parseInt(o[1],16)||0,n[14]=i,n[15]=c,a(f,n),f}function f(e){var t,r,n,o,i,u,s=e.length,f=[1732584193,-271733879,-1732584194,271733878];for(t=64;s>=t;t+=64)a(f,c(e.subarray(t-64,t)));for(e=s>t-64?e.subarray(t-64):new Uint8Array(0),r=e.length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;r>t;t+=1)n[t>>2]|=e[t]<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(a(f,n),t=0;16>t;t+=1)n[t]=0;return o=8*s,o=o.toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(o[2],16),u=parseInt(o[1],16)||0,n[14]=i,n[15]=u,a(f,n),f}function l(e){var t,r="";for(t=0;4>t;t+=1)r+=b[e>>8*t+4&15]+b[e>>8*t&15];return r}function d(e){var t;for(t=0;t<e.length;t+=1)e[t]=l(e[t]);return e.join("")}function _(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function h(e,t){var r,n=e.length,o=new ArrayBuffer(n),i=new Uint8Array(o);for(r=0;n>r;r+=1)i[r]=e.charCodeAt(r);return t?i:o}function p(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function v(e,t,r){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e)),n.set(new Uint8Array(t),e.byteLength),r?n:n.buffer}function m(e){var t,r=[],n=e.length;for(t=0;n-1>t;t+=2)r.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,r)}function g(){this.reset()}var y=function(e,t){return e+t&4294967295},b=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return"5d41402abc4b2a76b9719d911017c592"!==d(s("hello"))&&(y=function(e,t){var r=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(r>>16);return n<<16|65535&r}),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||!function(){function t(e,t){return e=0|e||0,0>e?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(r,n){var o,i,a,u,c=this.byteLength,s=t(r,c),f=c;return n!==e&&(f=t(n,c)),s>f?new ArrayBuffer(0):(o=f-s,i=new ArrayBuffer(o),a=new Uint8Array(i),u=new Uint8Array(this,s,o),a.set(u),i)}}(),g.prototype.append=function(e){return this.appendBinary(_(e)),this},g.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,r=this._buff.length;for(t=64;r>=t;t+=64)a(this._hash,u(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},g.prototype.end=function(e){var t,r,n=this._buff,o=n.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;o>t;t+=1)i[t>>2]|=n.charCodeAt(t)<<(t%4<<3);return this._finish(i,o),r=d(this._hash),e&&(r=m(r)),this.reset(),r},g.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},g.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},g.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},g.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},g.prototype._finish=function(e,t){var r,n,o,i=t;if(e[i>>2]|=128<<(i%4<<3),i>55)for(a(this._hash,e),i=0;16>i;i+=1)e[i]=0;r=8*this._length,r=r.toString(16).match(/(.*?)(.{0,8})$/),n=parseInt(r[2],16),o=parseInt(r[1],16)||0,e[14]=n,e[15]=o,a(this._hash,e)},g.hash=function(e,t){return g.hashBinary(_(e),t)},g.hashBinary=function(e,t){var r=s(e),n=d(r);return t?m(n):n},g.ArrayBuffer=function(){this.reset()},g.ArrayBuffer.prototype.append=function(e){var t,r=v(this._buff.buffer,e,!0),n=r.length;for(this._length+=e.byteLength,t=64;n>=t;t+=64)a(this._hash,c(r.subarray(t-64,t)));return this._buff=n>t-64?new Uint8Array(r.buffer.slice(t-64)):new Uint8Array(0),this},g.ArrayBuffer.prototype.end=function(e){var t,r,n=this._buff,o=n.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;o>t;t+=1)i[t>>2]|=n[t]<<(t%4<<3);return this._finish(i,o),r=d(this._hash),e&&(r=m(r)),this.reset(),r},g.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},g.ArrayBuffer.prototype.getState=function(){var e=g.prototype.getState.call(this);return e.buff=p(e.buff),e},g.ArrayBuffer.prototype.setState=function(e){return e.buff=h(e.buff,!0),g.prototype.setState.call(this,e)},g.ArrayBuffer.prototype.destroy=g.prototype.destroy,g.ArrayBuffer.prototype._finish=g.prototype._finish,g.ArrayBuffer.hash=function(e,t){var r=f(new Uint8Array(e)),n=d(r);return t?m(n):n},g})},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(e){try{return JSON.parse(e)}catch(t){return u.parse(e)}}function i(e){return e.length<5e4?JSON.parse(e):o(e)}function a(e){try{return JSON.stringify(e)}catch(t){return u.stringify(e)}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(r(26));t.safeJsonParse=i,t.safeJsonStringify=a},function(e,t){"use strict";function r(e,t,r){var n=r[r.length-1];e===n.element&&(r.pop(),n=r[r.length-1]);var o=n.element,i=n.index;if(Array.isArray(o))o.push(e);else if(i===t.length-2){var a=t.pop();o[a]=e}else t.push(e)}t.stringify=function(e){var t=[];t.push({obj:e});for(var r,n,o,i,a,u,c,s,f,l,d,_="";r=t.pop();)if(n=r.obj,o=r.prefix||"",i=r.val||"",_+=o,i)_+=i;else if("object"!=typeof n)_+="undefined"==typeof n?null:JSON.stringify(n);else if(null===n)_+="null";else if(Array.isArray(n)){for(t.push({val:"]"}),a=n.length-1;a>=0;a--)u=0===a?"":",",t.push({obj:n[a],prefix:u});t.push({val:"["})}else{c=[];for(s in n)n.hasOwnProperty(s)&&c.push(s);for(t.push({val:"}"}),a=c.length-1;a>=0;a--)f=c[a],l=n[f],d=a>0?",":"",d+=JSON.stringify(f)+":",t.push({obj:l,prefix:d});t.push({val:"{"})}return _},t.parse=function(e){for(var t,n,o,i,a,u,c,s,f,l=[],d=[],_=0;;)if(t=e[_++],"}"!==t&&"]"!==t&&"undefined"!=typeof t)switch(t){case" ":case"	":case"\n":case":":case",":break;case"n":_+=3,r(null,l,d);break;case"t":_+=3,r(!0,l,d);break;case"f":_+=4,r(!1,l,d);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(n="",_--;;){if(o=e[_++],!/[\d\.\-e\+]/.test(o)){_--;break}n+=o}r(parseFloat(n),l,d);break;case'"':for(i="",a=void 0,u=0;;){if(c=e[_++],'"'===c&&("\\"!==a||u%2!==1))break;i+=c,a=c,"\\"===a?u++:u=0}r(JSON.parse('"'+i+'"'),l,d);break;case"[":s={element:[],index:l.length},l.push(s.element),d.push(s);break;case"{":f={element:{},index:l.length},l.push(f.element),d.push(f);break;default:throw new Error("unexpectedly reached end of input: "+t)}else{if(1===l.length)return l.pop();r(l.pop(),l,d)}}},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(){try{return openDatabase("_pouch_validate_websql",1,"",1),!0}catch(e){return!1}}function i(){if("undefined"==typeof indexedDB||null===indexedDB||!/iP(hone|od|ad)/.test(navigator.userAgent))return!0;var e=d.hasLocalStorage(),t="_pouch__websqldb_valid_"+navigator.userAgent;if(e&&localStorage[t])return"1"===localStorage[t];var r=o();return e&&(localStorage[t]=r?"1":"0"),r}function a(){return"undefined"!=typeof SQLitePlugin?!0:"undefined"==typeof openDatabase?!1:i()}function u(e){return function(t,r,n,o){if("undefined"!=typeof sqlitePlugin){var i=l.extend({},e,{name:t,version:r,description:n,size:o});return sqlitePlugin.openDatabase(i)}return openDatabase(t,r,n,o)}}function c(e,t){var r=u(e),n=l.extend({websql:r},e);f.call(this,n,t)}function s(e){e.adapter("websql",c,!0)}var f=n(r(28)),l=r(5),d=r(16);c.valid=a,c.use_prefix=!0,e.exports=s},function(e,t,r){"use strict";function n(e){return decodeURIComponent(escape(e))}function o(e){return 65>e?e-48:e-55}function i(e,t,r){for(var n="";r>t;)n+=String.fromCharCode(o(e.charCodeAt(t++))<<4|o(e.charCodeAt(t++)));return n}function a(e,t,r){for(var n="";r>t;)n+=String.fromCharCode(o(e.charCodeAt(t+2))<<12|o(e.charCodeAt(t+3))<<8|o(e.charCodeAt(t))<<4|o(e.charCodeAt(t+1))),t+=4;return n}function u(e,t){return"UTF-8"===t?n(i(e,0,e.length)):a(e,0,e.length)}function c(e){return"'"+e+"'"}function s(e){return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"")}function f(e){return e.replace(/\u0001\u0001/g,"\x00").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,"")}function l(e){return delete e._id,delete e._rev,JSON.stringify(e)}function d(e,t,r){return e=JSON.parse(e),e._id=t,e._rev=r,e}function _(e){for(var t="(";e--;)t+="?",e&&(t+=",");return t+")"}function h(e,t,r,n,o){return"SELECT "+e+" FROM "+("string"==typeof t?t:t.join(" JOIN "))+(r?" ON "+r:"")+(n?" WHERE "+("string"==typeof n?n:n.join(" AND ")):"")+(o?" ORDER BY "+o:"")}function p(e,t,r){function n(){++i===e.length&&o()}function o(){if(a.length){var e="SELECT DISTINCT digest AS digest FROM "+M+" WHERE seq IN "+_(a.length);r.executeSql(e,a,function(e,t){for(var r=[],n=0;n<t.rows.length;n++)r.push(t.rows.item(n).digest);if(r.length){var o="DELETE FROM "+M+" WHERE seq IN ("+a.map(function(){return"?"}).join(",")+")";e.executeSql(o,a,function(e){var t="SELECT digest FROM "+M+" WHERE digest IN ("+r.map(function(){return"?"}).join(",")+")";e.executeSql(t,r,function(e,t){for(var n=new q.Set,o=0;o<t.rows.length;o++)n.add(t.rows.item(o).digest);r.forEach(function(t){n.has(t)||(e.executeSql("DELETE FROM "+M+" WHERE digest=?",[t]),e.executeSql("DELETE FROM "+D+" WHERE digest=?",[t]))})})})}})}}if(e.length){var i=0,a=[];e.forEach(function(e){var o="SELECT seq FROM "+L+" WHERE doc_id=? AND rev=?";r.executeSql(o,[t,e],function(e,t){if(!t.rows.length)return n();var r=t.rows.item(0).seq;a.push(r),e.executeSql("DELETE FROM "+L+" WHERE seq=?",[r],n)})})}}function v(e){return function(t){E.guardedConsole("error","WebSQL threw an error",t);var r=t&&t.constructor.toString().match(/function ([^\(]+)/),n=r&&r[1]||t.type,o=t.target||t.message;e(N.createError(N.WSQ_ERROR,o,n))}}function m(e){if("size"in e)return 1e6*e.size;var t="undefined"!=typeof navigator&&/Android/.test(navigator.userAgent);return t?5e6:1}function g(e,t,r,n,o,i,a){function u(){return S?a(S):(i.notify(n._name),n._docCount=-1,void a(null,E))}function c(e,t){var r="SELECT count(*) as cnt FROM "+D+" WHERE digest=?";k.executeSql(r,[e],function(r,n){if(0===n.rows.item(0).cnt){var o=N.createError(N.MISSING_STUB,"unknown stub attachment with digest "+e);t(o)}else t()})}function f(e){function t(){++o===r.length&&e(n)}var r=[];if(w.forEach(function(e){e.data&&e.data._attachments&&Object.keys(e.data._attachments).forEach(function(t){var n=e.data._attachments[t];n.stub&&r.push(n.digest)})}),!r.length)return e();var n,o=0;r.forEach(function(e){c(e,function(e){e&&!n&&(n=e),t()})})}function d(e,t,r,o,i,a,u,c){function s(){function t(e,t){function n(){return++i===a.length&&t(),!1}function o(t){var o="INSERT INTO "+M+" (digest, seq) VALUES (?,?)",i=[r._attachments[t].digest,e];k.executeSql(o,i,n,n)}var i=0,a=Object.keys(r._attachments||{});if(!a.length)return t();for(var u=0;u<a.length;u++)o(a[u])}var r=e.data,n=o?1:0,i=r._id,a=r._rev,u=l(r),c="INSERT INTO "+L+" (doc_id, rev, json, deleted) VALUES (?, ?, ?, ?);",s=[i,a,u,n];k.executeSql(c,s,function(e,r){var n=r.insertId;t(n,function(){_(e,n)})},function(){var e=h("seq",L,null,"doc_id=? AND rev=?");return k.executeSql(e,[i,a],function(e,r){var o=r.rows.item(0).seq,c="UPDATE "+L+" SET json=?, deleted=? WHERE doc_id=? AND rev=?;",s=[u,n,i,a];e.executeSql(c,s,function(e){t(o,function(){_(e,o)})})}),!1})}function f(e){v||(e?(v=e,c(v)):m===y.length&&s())}function d(e){m++,f(e)}function _(r,o){var a=e.metadata.id,s=e.stemmedRevs||[];i&&n.auto_compaction&&(s=x.compactTree(e.metadata).concat(s)),s.length&&p(s,a,r),e.metadata.seq=o,delete e.metadata.rev;var f=i?"UPDATE "+C+" SET json=?, max_seq=?, winningseq=(SELECT seq FROM "+L+" WHERE doc_id="+C+".id AND rev=?) WHERE id=?":"INSERT INTO "+C+" (id, winningseq, max_seq, json) VALUES (?,?,?,?);",l=R.safeJsonStringify(e.metadata),d=i?[l,o,t,a]:[a,o,o,l];r.executeSql(f,d,function(){E[u]={ok:!0,id:e.metadata.id,rev:t},O.set(a,e.metadata),c()})}var v=null,m=0;e.data._id=e.metadata.id,e.data._rev=e.metadata.rev;var y=Object.keys(e.data._attachments||{});o&&(e.data._deleted=!0),y.forEach(function(r){var n=e.data._attachments[r];if(n.stub)m++,f();else{var o=n.data;delete n.data,n.revpos=parseInt(t,10);var i=n.digest;g(i,o,d)}}),y.length||s()}function _(){T.processDocs(e.revs_limit,w,n,O,k,E,d,r)}function m(e){function t(){++r===w.length&&e()}if(!w.length)return e();var r=0;w.forEach(function(e){if(e._id&&T.isLocalId(e._id))return t();var r=e.metadata.id;k.executeSql("SELECT json FROM "+C+" WHERE id = ?",[r],function(e,n){if(n.rows.length){var o=R.safeJsonParse(n.rows.item(0).json);O.set(r,o)}t()})})}function g(e,t,r){var n="SELECT digest FROM "+D+" WHERE digest=?";k.executeSql(n,[e],function(o,i){return i.rows.length?r():(n="INSERT INTO "+D+" (digest, body, escaped) VALUES (?,?,1)",void o.executeSql(n,[e,s(t)],function(){r()},function(){return r(),!1}))})}var y=r.new_edits,b=t.docs,w=b.map(function(e){if(e._id&&T.isLocalId(e._id))return e;var t=T.parseDoc(e,y);return t}),A=w.filter(function(e){return e.error});if(A.length)return a(A[0]);var k,S,E=new Array(w.length),O=new q.Map;T.preprocessAttachments(w,"binary",function(e){return e?a(e):void o.transaction(function(e){k=e,f(function(e){e?S=e:m(_)})},v(a),u)})}function y(e){return e.websql(e.name,e.version,e.description,e.size)}function b(e){try{return{db:y(e)}}catch(t){return{error:t}}}function w(e){var t=F.get(e.name);return t||(t=b(e),F.set(e.name,t),t.db&&(t.db._sqlitePlugin="undefined"!=typeof sqlitePlugin)),t}function A(e,t,r,n,o){function i(){++c===u.length&&o&&o()}function a(e,o){var a=e._attachments[o],u={binary:t.binary,ctx:n};r._getAttachment(e._id,o,a,u,function(t,r){e._attachments[o]=S.extend(E.pick(a,["digest","content_type"]),{data:r}),i()})}var u=Object.keys(e._attachments||{});if(!u.length)return o&&o();var c=0;u.forEach(function(r){t.attachments&&t.include_docs?a(e,r):(e._attachments[r].stub=!0,i())})}function k(e,t){function r(){E.hasLocalStorage()&&(window.localStorage["_pouch__websqldb_"+X._name]=!0),t(null,X)}function n(e,t){e.executeSql(H),e.executeSql("ALTER TABLE "+L+" ADD COLUMN deleted TINYINT(1) DEFAULT 0",[],function(){e.executeSql(J),e.executeSql("ALTER TABLE "+C+" ADD COLUMN local TINYINT(1) DEFAULT 0",[],function(){e.executeSql("CREATE INDEX IF NOT EXISTS 'doc-store-local-idx' ON "+C+" (local, id)");var r="SELECT "+C+".winningseq AS seq, "+C+".json AS metadata FROM "+L+" JOIN "+C+" ON "+L+".seq = "+C+".winningseq";e.executeSql(r,[],function(e,r){for(var n=[],o=[],i=0;i<r.rows.length;i++){var a=r.rows.item(i),u=a.seq,c=JSON.parse(a.metadata);T.isDeleted(c)&&n.push(u),T.isLocalId(c.id)&&o.push(c.id)}e.executeSql("UPDATE "+C+"SET local = 1 WHERE id IN "+_(o.length),o,function(){e.executeSql("UPDATE "+L+" SET deleted = 1 WHERE seq IN "+_(n.length),n,t)})})})})}function o(e,t){var r="CREATE TABLE IF NOT EXISTS "+B+" (id UNIQUE, rev, json)";e.executeSql(r,[],function(){var r="SELECT "+C+".id AS id, "+L+".json AS data FROM "+L+" JOIN "+C+" ON "+L+".seq = "+C+".winningseq WHERE local = 1";e.executeSql(r,[],function(e,r){function n(){if(!o.length)return t(e);var r=o.shift(),i=JSON.parse(r.data)._rev;e.executeSql("INSERT INTO "+B+" (id, rev, json) VALUES (?,?,?)",[r.id,i,r.data],function(e){e.executeSql("DELETE FROM "+C+" WHERE id=?",[r.id],function(e){e.executeSql("DELETE FROM "+L+" WHERE seq=?",[r.seq],function(){n()})})})}for(var o=[],i=0;i<r.rows.length;i++)o.push(r.rows.item(i));n()})})}function i(e,t){function r(r){function n(){if(!r.length)return t(e);var o=r.shift(),i=u(o.hex,Q),a=i.lastIndexOf("::"),c=i.substring(0,a),s=i.substring(a+2),f="UPDATE "+L+" SET doc_id=?, rev=? WHERE doc_id_rev=?";e.executeSql(f,[c,s,i],function(){n()})}n()}var n="ALTER TABLE "+L+" ADD COLUMN doc_id";e.executeSql(n,[],function(e){var t="ALTER TABLE "+L+" ADD COLUMN rev";e.executeSql(t,[],function(e){e.executeSql(W,[],function(e){var t="SELECT hex(doc_id_rev) as hex FROM "+L;e.executeSql(t,[],function(e,t){for(var n=[],o=0;o<t.rows.length;o++)n.push(t.rows.item(o));r(n)})})})})}function a(e,t){function r(e){var r="SELECT COUNT(*) AS cnt FROM "+D;e.executeSql(r,[],function(e,r){function n(){var r=h(K+", "+C+".id AS id",[C,L],G,null,C+".id ");r+=" LIMIT "+a+" OFFSET "+i,i+=a,e.executeSql(r,[],function(e,r){function o(e,t){var r=i[e]=i[e]||[];-1===r.indexOf(t)&&r.push(t)}if(!r.rows.length)return t(e);for(var i={},a=0;a<r.rows.length;a++)for(var u=r.rows.item(a),c=d(u.data,u.id,u.rev),s=Object.keys(c._attachments||{}),f=0;f<s.length;f++){var l=c._attachments[s[f]];o(l.digest,u.seq)}var _=[];if(Object.keys(i).forEach(function(e){var t=i[e];t.forEach(function(t){_.push([e,t])})}),!_.length)return n();var h=0;_.forEach(function(t){var r="INSERT INTO "+M+" (digest, seq) VALUES (?,?)";e.executeSql(r,t,function(){++h===_.length&&n()})})})}var o=r.rows.item(0).cnt;if(!o)return t(e);var i=0,a=10;n()})}var n="CREATE TABLE IF NOT EXISTS "+M+" (digest, seq INTEGER)";e.executeSql(n,[],function(e){e.executeSql(z,[],function(e){e.executeSql(V,[],r)})})}function c(e,t){var r="ALTER TABLE "+D+" ADD COLUMN escaped TINYINT(1) DEFAULT 0";e.executeSql(r,[],t)}function s(e,t){var r="ALTER TABLE "+C+" ADD COLUMN max_seq INTEGER";e.executeSql(r,[],function(e){var r="UPDATE "+C+" SET max_seq=(SELECT MAX(seq) FROM "+L+" WHERE doc_id=id)";e.executeSql(r,[],function(e){var r="CREATE UNIQUE INDEX IF NOT EXISTS 'doc-max-seq-idx' ON "+C+" (max_seq)";e.executeSql(r,[],t)})})}function y(e,t){e.executeSql('SELECT HEX("a") AS hex',[],function(e,r){var n=r.rows.item(0).hex;Q=2===n.length?"UTF-8":"UTF-16",t()})}function b(){for(;ee.length>0;){var e=ee.pop();e(null,Y)}}function k(e,t){if(0===t){var r="CREATE TABLE IF NOT EXISTS "+j+" (dbid, db_version INTEGER)",u="CREATE TABLE IF NOT EXISTS "+D+" (digest UNIQUE, escaped TINYINT(1), body BLOB)",f="CREATE TABLE IF NOT EXISTS "+M+" (digest, seq INTEGER)",l="CREATE TABLE IF NOT EXISTS "+C+" (id unique, json, winningseq, max_seq INTEGER UNIQUE)",d="CREATE TABLE IF NOT EXISTS "+L+" (seq INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, json, deleted TINYINT(1), doc_id, rev)",_="CREATE TABLE IF NOT EXISTS "+B+" (id UNIQUE, rev, json)";e.executeSql(u),e.executeSql(_),e.executeSql(f,[],function(){e.executeSql(V),e.executeSql(z)}),e.executeSql(l,[],function(){e.executeSql(H),e.executeSql(d,[],function(){e.executeSql(J),e.executeSql(W),e.executeSql(r,[],function(){var t="INSERT INTO "+j+" (db_version, dbid) VALUES (?,?)";
Y=E.uuid();var r=[I,Y];e.executeSql(t,r,function(){b()})})})})}else{var h=function(){var r=I>t;r&&e.executeSql("UPDATE "+j+" SET db_version = "+I);var n="SELECT dbid FROM "+j;e.executeSql(n,[],function(e,t){Y=t.rows.item(0).dbid,b()})},p=[n,o,i,a,c,s,h],v=t,m=function(e){p[v-1](e,m),v++};m(e)}}function q(){ne.transaction(function(e){y(e,function(){F(e)})},v(t),r)}function F(e){var t="SELECT sql FROM sqlite_master WHERE tbl_name = "+j;e.executeSql(t,[],function(e,t){t.rows.length?/db_version/.test(t.rows.item(0).sql)?e.executeSql("SELECT db_version FROM "+j,[],function(e,t){var r=t.rows.item(0).db_version;k(e,r)}):e.executeSql("ALTER TABLE "+j+" ADD COLUMN db_version INTEGER",[],function(){k(e,1)}):k(e,0)})}function $(e,t){if(-1!==X._docCount)return t(X._docCount);var r=h("COUNT("+C+".id) AS 'num'",[C,L],G,L+".deleted=0");e.executeSql(r,[],function(e,r){X._docCount=r.rows.item(0).num,t(X._docCount)})}var Q,X=this,Y=null,Z=m(e),ee=[];X._docCount=-1,X._name=e.name;var te=S.extend({},e,{version:U,description:e.name,size:Z}),re=w(te);if(re.error)return v(t)(re.error);var ne=re.db;"function"!=typeof ne.readTransaction&&(ne.readTransaction=ne.transaction),q(),X.type=function(){return"websql"},X._id=E.toPromise(function(e){e(null,Y)}),X._info=function(e){ne.readTransaction(function(t){$(t,function(r){var n="SELECT MAX(seq) AS seq FROM "+L;t.executeSql(n,[],function(t,n){var o=n.rows.item(0).seq||0;e(null,{doc_count:r,update_seq:o,sqlite_plugin:ne._sqlitePlugin,websql_encoding:Q})})})},v(e))},X._bulkDocs=function(t,r,n){g(e,t,r,X,ne,P,n)},X._get=function(e,t,r){function n(){r(a,{doc:o,metadata:i,ctx:u})}var o,i,a,u=t.ctx;if(!u)return ne.readTransaction(function(n){X._get(e,S.extend({ctx:n},t),r)});var c,s;t.rev?(c=h(K,[C,L],C+".id="+L+".doc_id",[L+".doc_id=?",L+".rev=?"]),s=[e,t.rev]):(c=h(K,[C,L],G,C+".id=?"),s=[e]),u.executeSql(c,s,function(e,r){if(!r.rows.length)return a=N.createError(N.MISSING_DOC,"missing"),n();var u=r.rows.item(0);return i=R.safeJsonParse(u.metadata),u.deleted&&!t.rev?(a=N.createError(N.MISSING_DOC,"deleted"),n()):(o=d(u.data,i.id,u.rev),void n())})},X._allDocs=function(e,t){var r,n=[],o="startkey"in e?e.startkey:!1,i="endkey"in e?e.endkey:!1,a="key"in e?e.key:!1,u="descending"in e?e.descending:!1,c="limit"in e?e.limit:-1,s="skip"in e?e.skip:0,f=e.inclusive_end!==!1,l=[],_=[];if(a!==!1)_.push(C+".id = ?"),l.push(a);else if(o!==!1||i!==!1){if(o!==!1&&(_.push(C+".id "+(u?"<=":">=")+" ?"),l.push(o)),i!==!1){var p=u?">":"<";f&&(p+="="),_.push(C+".id "+p+" ?"),l.push(i)}a!==!1&&(_.push(C+".id = ?"),l.push(a))}"ok"!==e.deleted&&_.push(L+".deleted = 0"),ne.readTransaction(function(t){$(t,function(o){if(r=o,0!==c){var i=h(K,[C,L],G,_,C+".id "+(u?"DESC":"ASC"));i+=" LIMIT "+c+" OFFSET "+s,t.executeSql(i,l,function(t,r){for(var o=0,i=r.rows.length;i>o;o++){var a=r.rows.item(o),u=R.safeJsonParse(a.metadata),c=u.id,s=d(a.data,c,a.rev),f=s._rev,l={id:c,key:c,value:{rev:f}};if(e.include_docs&&(l.doc=s,l.doc._rev=f,e.conflicts&&(l.doc._conflicts=x.collectConflicts(u)),A(l.doc,e,X,t)),a.deleted){if("ok"!==e.deleted)continue;l.value.deleted=!0,l.doc=null}n.push(l)}})}})},v(t),function(){t(null,{total_rows:r,offset:e.skip,rows:n})})},X._changes=function(e){function t(){var t=C+".json AS metadata, "+C+".max_seq AS maxSeq, "+L+".json AS winningDoc, "+L+".rev AS winningRev ",r=C+" JOIN "+L,c=C+".id="+L+".doc_id AND "+C+".winningseq="+L+".seq",s=["maxSeq > ?"],f=[e.since];e.doc_ids&&(s.push(C+".id IN "+_(e.doc_ids.length)),f=f.concat(e.doc_ids));var l="maxSeq "+(n?"DESC":"ASC"),p=h(t,r,c,s,l),m=E.filterChange(e);e.view||e.filter||(p+=" LIMIT "+o);var g=e.since||0;ne.readTransaction(function(t){t.executeSql(p,f,function(t,r){function n(t){return function(){e.onChange(t)}}for(var c=0,s=r.rows.length;s>c;c++){var f=r.rows.item(c),l=R.safeJsonParse(f.metadata);g=f.maxSeq;var _=d(f.winningDoc,l.id,f.winningRev),h=e.processChange(_,l,e);h.seq=f.maxSeq;var p=m(h);if("object"==typeof p)return e.complete(p);if(p&&(u++,i&&a.push(h),e.attachments&&e.include_docs?A(_,e,X,t,n(h)):n(h)()),u===o)break}})},v(e.complete),function(){e.continuous||e.complete(null,{results:a,last_seq:g})})}if(e=E.clone(e),e.continuous){var r=X._name+":"+E.uuid();return P.addListener(X._name,r,X,e),P.notify(X._name),{cancel:function(){P.removeListener(X._name,r)}}}var n=e.descending;e.since=e.since&&!n?e.since:0;var o="limit"in e?e.limit:-1;0===o&&(o=1);var i;i="return_docs"in e?e.return_docs:"returnDocs"in e?e.returnDocs:!0;var a=[],u=0;t()},X._close=function(e){e()},X._getAttachment=function(e,t,r,n,o){var i,a=n.ctx,c=r.digest,s=r.content_type,l="SELECT escaped, CASE WHEN escaped = 1 THEN body ELSE HEX(body) END AS body FROM "+D+" WHERE digest=?";a.executeSql(l,[c],function(e,t){var r=t.rows.item(0),a=r.escaped?f(r.body):u(r.body,Q);i=n.binary?O.binaryStringToBlobOrBuffer(a,s):O.btoa(a),o(null,i)})},X._getRevisionTree=function(e,t){ne.readTransaction(function(r){var n="SELECT json AS metadata FROM "+C+" WHERE id = ?";r.executeSql(n,[e],function(e,r){if(r.rows.length){var n=R.safeJsonParse(r.rows.item(0).metadata);t(null,n.rev_tree)}else t(N.createError(N.MISSING_DOC))})})},X._doCompaction=function(e,t,r){return t.length?void ne.transaction(function(r){var n="SELECT json AS metadata FROM "+C+" WHERE id = ?";r.executeSql(n,[e],function(r,n){var o=R.safeJsonParse(n.rows.item(0).metadata);x.traverseRevTree(o.rev_tree,function(e,r,n,o,i){var a=r+"-"+n;-1!==t.indexOf(a)&&(i.status="missing")});var i="UPDATE "+C+" SET json = ? WHERE id = ?";r.executeSql(i,[R.safeJsonStringify(o),e])}),p(t,e,r)},v(r),function(){r()}):r()},X._getLocal=function(e,t){ne.readTransaction(function(r){var n="SELECT json, rev FROM "+B+" WHERE id=?";r.executeSql(n,[e],function(r,n){if(n.rows.length){var o=n.rows.item(0),i=d(o.json,e,o.rev);t(null,i)}else t(N.createError(N.MISSING_DOC))})})},X._putLocal=function(e,t,r){function n(e){var n,s;i?(n="UPDATE "+B+" SET rev=?, json=? WHERE id=? AND rev=?",s=[o,c,a,i]):(n="INSERT INTO "+B+" (id, rev, json) VALUES (?,?,?)",s=[a,o,c]),e.executeSql(n,s,function(e,n){n.rowsAffected?(u={ok:!0,id:a,rev:o},t.ctx&&r(null,u)):r(N.createError(N.REV_CONFLICT))},function(){return r(N.createError(N.REV_CONFLICT)),!1})}"function"==typeof t&&(r=t,t={}),delete e._revisions;var o,i=e._rev,a=e._id;o=i?e._rev="0-"+(parseInt(i.split("-")[1],10)+1):e._rev="0-1";var u,c=l(e);t.ctx?n(t.ctx):ne.transaction(n,v(r),function(){u&&r(null,u)})},X._removeLocal=function(e,t,r){function n(n){var i="DELETE FROM "+B+" WHERE id=? AND rev=?",a=[e._id,e._rev];n.executeSql(i,a,function(n,i){return i.rowsAffected?(o={ok:!0,id:e._id,rev:"0-0"},void(t.ctx&&r(null,o))):r(N.createError(N.MISSING_DOC))})}"function"==typeof t&&(r=t,t={});var o;t.ctx?n(t.ctx):ne.transaction(n,v(r),function(){o&&r(null,o)})},X._destroy=function(e,t){P.removeAllListeners(X._name),ne.transaction(function(e){var t=[C,L,D,j,B,M];t.forEach(function(t){e.executeSql("DROP TABLE IF EXISTS "+t,[])})},v(t),function(){E.hasLocalStorage()&&(delete window.localStorage["_pouch__websqldb_"+X._name],delete window.localStorage[X._name]),t(null,{ok:!0})})}}var S=r(5),E=r(16),T=r(21),x=r(18),R=r(25),O=r(22),q=r(13),N=r(17),I=7,C=c("document-store"),L=c("by-sequence"),D=c("attach-store"),B=c("local-store"),j=c("metadata-store"),M=c("attach-seq-store"),F=new q.Map,P=new E.changesHandler,U=1,J="CREATE INDEX IF NOT EXISTS 'by-seq-deleted-idx' ON "+L+" (seq, deleted)",W="CREATE UNIQUE INDEX IF NOT EXISTS 'by-seq-doc-id-rev' ON "+L+" (doc_id, rev)",H="CREATE INDEX IF NOT EXISTS 'doc-winningseq-idx' ON "+C+" (winningseq)",V="CREATE INDEX IF NOT EXISTS 'attach-seq-seq-idx' ON "+M+" (seq)",z="CREATE UNIQUE INDEX IF NOT EXISTS 'attach-seq-digest-idx' ON "+M+" (digest, seq)",G=L+".seq = "+C+".winningseq",K=L+".seq AS seq, "+L+".deleted AS deleted, "+L+".json AS data, "+L+".rev AS rev, "+C+".json AS metadata";e.exports=k},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(e){var t=e.doc&&e.doc._attachments;t&&Object.keys(t).forEach(function(e){var r=t[e];r.data=g.base64StringToBlobOrBuffer(r.data,r.content_type)})}function i(e){return/^_design/.test(e)?"_design/"+encodeURIComponent(e.slice(8)):/^_local/.test(e)?"_local/"+encodeURIComponent(e.slice(7)):encodeURIComponent(e)}function a(e){return e._attachments&&Object.keys(e._attachments)?h.all(Object.keys(e._attachments).map(function(t){var r=e._attachments[t];return r.data&&"string"!=typeof r.data?new h(function(e){g.blobOrBufferToBase64(r.data,e)}).then(function(e){r.data=e}):void 0})):h.resolve()}function u(e){var t=m.parseUri(e);(t.user||t.password)&&(t.auth={username:t.user,password:t.password});var r=t.path.replace(/(^\/|\/$)/g,"").split("/");return t.db=r.pop(),-1===t.db.indexOf("%")&&(t.db=encodeURIComponent(t.db)),t.path=r.join("/"),t}function c(e,t){return s(e,e.db+"/"+t)}function s(e,t){var r=e.path?"/":"";return e.protocol+"://"+e.host+(e.port?":"+e.port:"")+"/"+e.path+r+t}function f(e){return"?"+Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&")}function l(e,t){function r(e,t,r){var n=e.ajax||{},o=_.extend(m.clone(q),n,t);return E(o.method+" "+o.url),T._ajax(o,r)}function n(e,t){return new h(function(n,o){r(e,t,function(e,t){return e?o(e):void n(t)})})}function l(e,t){return m.adapterFun(e,v(function(e){d().then(function(){return t.apply(this,e)})["catch"](function(t){var r=e.pop();r(t)})}))}function d(){if(e.skipSetup||e.skip_setup)return h.resolve();if(L)return L;var t={method:"GET",url:O};return L=n({},t)["catch"](function(e){return e&&e.status&&404===e.status?(m.explainError(404,"PouchDB is just detecting if the remote exists."),n({},{method:"PUT",url:O})):h.reject(e)})["catch"](function(e){return e&&e.status&&412===e.status?!0:h.reject(e)}),L["catch"](function(){L=null}),L}function b(e){return e.split("/").map(encodeURIComponent).join("/")}var T=this,x=u;e.getHost&&(x=e.getHost);var R=x(e.name,e),O=c(R,"");e=m.clone(e);var q=e.ajax||{};if(T.getUrl=function(){return O},T.getHeaders=function(){return q.headers||{}},e.auth||R.auth){var N=e.auth||R.auth,I=N.username+":"+N.password,C=g.btoa(unescape(encodeURIComponent(I)));q.headers=q.headers||{},q.headers.Authorization="Basic "+C}T._ajax=p;var L;setTimeout(function(){t(null,T)}),T.type=function(){return"http"},T.id=l("id",function(e){r({},{method:"GET",url:s(R,"")},function(t,r){var n=r&&r.uuid?r.uuid+R.db:c(R,"");e(null,n)})}),T.request=l("request",function(e,t){e.url=c(R,e.url),r({},e,t)}),T.compact=l("compact",function(e,t){"function"==typeof e&&(t=e,e={}),e=m.clone(e),r(e,{url:c(R,"_compact"),method:"POST"},function(){function r(){T.info(function(n,o){o&&!o.compact_running?t(null,{ok:!0}):setTimeout(r,e.interval||200)})}r()})}),T.bulkGet=m.adapterFun("bulkGet",function(e,t){function n(t){var n={};e.revs&&(n.revs=!0),e.attachments&&(n.attachments=!0),r({},{url:c(R,"_bulk_get"+f(n)),method:"POST",body:{docs:e.docs}},t)}function o(){function r(e){return function(r,n){u[e]=n.results,++a===o&&t(null,{results:m.flatten(u)})}}for(var n=A,o=Math.ceil(e.docs.length/n),a=0,u=new Array(o),c=0;o>c;c++){var s=m.pick(e,["revs","attachments"]);s.ajax=q,s.docs=e.docs.slice(c*n,Math.min(e.docs.length,(c+1)*n)),m.bulkGetShim(i,s,r(c))}}var i=this,a=s(R,""),u=k[a];"boolean"!=typeof u?n(function(e,r){if(e){var n=Math.floor(e.status/100);4===n||5===n?(k[a]=!1,m.explainError(e.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),o()):t(e)}else k[a]=!0,t(null,r)}):u?n(t):o()}),T._info=function(e){d().then(function(){r({},{method:"GET",url:c(R,"")},function(t,r){return t?e(t):(r.host=c(R,""),void e(null,r))})})["catch"](e)},T.get=l("get",function(e,t,r){function o(e){var r=e._attachments,o=r&&Object.keys(r);return r&&o.length?h.all(o.map(function(o){var a=r[o],u=i(e._id)+"/"+b(o)+"?rev="+e._rev;return n(t,{method:"GET",url:c(R,u),binary:!0}).then(function(e){return t.binary?e:new h(function(t){g.blobOrBufferToBase64(e,t)})}).then(function(e){delete a.stub,delete a.length,a.data=e})})):void 0}function a(e){return Array.isArray(e)?h.all(e.map(function(e){return e.ok?o(e.ok):void 0})):o(e)}"function"==typeof t&&(r=t,t={}),t=m.clone(t);var u={};t.revs&&(u.revs=!0),t.revs_info&&(u.revs_info=!0),t.open_revs&&("all"!==t.open_revs&&(t.open_revs=JSON.stringify(t.open_revs)),u.open_revs=t.open_revs),t.rev&&(u.rev=t.rev),t.conflicts&&(u.conflicts=t.conflicts),e=i(e);var s={method:"GET",url:c(R,e+f(u))};n(t,s).then(function(e){return h.resolve().then(function(){return t.attachments?a(e):void 0}).then(function(){r(null,e)})})["catch"](r)}),T.remove=l("remove",function(e,t,n,o){var a;"string"==typeof t?(a={_id:e,_rev:t},"function"==typeof n&&(o=n,n={})):(a=e,"function"==typeof t?(o=t,n={}):(o=n,n=t));var u=a._rev||n.rev;r(n,{method:"DELETE",url:c(R,i(a._id))+"?rev="+u},o)}),T.getAttachment=l("getAttachment",function(e,t,n,o){"function"==typeof n&&(o=n,n={});var a=n.rev?"?rev="+n.rev:"",u=c(R,i(e))+"/"+b(t)+a;r(n,{method:"GET",url:u,binary:!0},o)}),T.removeAttachment=l("removeAttachment",function(e,t,n,o){var a=c(R,i(e)+"/"+b(t))+"?rev="+n;r({},{method:"DELETE",url:a},o)}),T.putAttachment=l("putAttachment",function(e,t,n,o,a,u){"function"==typeof a&&(u=a,a=o,o=n,n=null);var s=i(e)+"/"+b(t),f=c(R,s);if(n&&(f+="?rev="+n),"string"==typeof o){var l;try{l=g.atob(o)}catch(d){return u(y.createError(y.BAD_ARG,"Attachment is not a valid base64 string"))}o=l?g.binaryStringToBlobOrBuffer(l,a):""}var _={headers:{"Content-Type":a},method:"PUT",url:f,processData:!1,body:o,timeout:q.timeout||6e4};r({},_,u)}),T._bulkDocs=function(e,t,n){e.new_edits=t.new_edits,d().then(function(){return h.all(e.docs.map(a))}).then(function(){r(t,{method:"POST",url:c(R,"_bulk_docs"),body:e},function(e,t){return e?n(e):(t.forEach(function(e){e.ok=!0}),void n(null,t))})})["catch"](n)},T.allDocs=l("allDocs",function(e,t){"function"==typeof e&&(t=e,e={}),e=m.clone(e);var r,i={},a="GET";e.conflicts&&(i.conflicts=!0),e.descending&&(i.descending=!0),e.include_docs&&(i.include_docs=!0),e.attachments&&(i.attachments=!0),e.key&&(i.key=JSON.stringify(e.key)),e.start_key&&(e.startkey=e.start_key),e.startkey&&(i.startkey=JSON.stringify(e.startkey)),e.end_key&&(e.endkey=e.end_key),e.endkey&&(i.endkey=JSON.stringify(e.endkey)),"undefined"!=typeof e.inclusive_end&&(i.inclusive_end=!!e.inclusive_end),"undefined"!=typeof e.limit&&(i.limit=e.limit),"undefined"!=typeof e.skip&&(i.skip=e.skip);var u=f(i);if("undefined"!=typeof e.keys){var s="keys="+encodeURIComponent(JSON.stringify(e.keys));s.length+u.length+1<=S?u+="&"+s:(a="POST",r={keys:e.keys})}n(e,{method:a,url:c(R,"_all_docs"+u),body:r}).then(function(r){e.include_docs&&e.attachments&&e.binary&&r.rows.forEach(o),t(null,r)})["catch"](t)}),T._changes=function(e){var t="batch_size"in e?e.batch_size:w;e=m.clone(e),e.timeout="timeout"in e?e.timeout:"timeout"in q?q.timeout:3e4;var n,i=e.timeout?{timeout:e.timeout-5e3}:{},a="undefined"!=typeof e.limit?e.limit:!1;n="return_docs"in e?e.return_docs:"returnDocs"in e?e.returnDocs:!0;var u=a;if(e.style&&(i.style=e.style),(e.include_docs||e.filter&&"function"==typeof e.filter)&&(i.include_docs=!0),e.attachments&&(i.attachments=!0),e.continuous&&(i.feed="longpoll"),e.conflicts&&(i.conflicts=!0),e.descending&&(i.descending=!0),"heartbeat"in e?e.heartbeat&&(i.heartbeat=e.heartbeat):i.heartbeat=1e4,e.filter&&"string"==typeof e.filter&&(i.filter=e.filter),e.view&&"string"==typeof e.view&&(i.filter="_view",i.view=e.view),e.query_params&&"object"==typeof e.query_params)for(var s in e.query_params)e.query_params.hasOwnProperty(s)&&(i[s]=e.query_params[s]);var l,_="GET";if(e.doc_ids){i.filter="_doc_ids";var h=JSON.stringify(e.doc_ids);h.length<S?i.doc_ids=h:(_="POST",l={doc_ids:e.doc_ids})}var p,v,g=function(n,o){if(!e.aborted){i.since=n,"object"==typeof i.since&&(i.since=JSON.stringify(i.since)),e.descending?a&&(i.limit=u):i.limit=!a||u>t?t:u;var s={method:_,url:c(R,"_changes"+f(i)),timeout:e.timeout,body:l};v=n,e.aborted||d().then(function(){p=r(e,s,o)})["catch"](o)}},y={results:[]},b=function(r,i){if(!e.aborted){var c=0;if(i&&i.results){c=i.results.length,y.last_seq=i.last_seq;var s={};s.query=e.query_params,i.results=i.results.filter(function(t){u--;var r=m.filterChange(e)(t);return r&&(e.include_docs&&e.attachments&&e.binary&&o(t),n&&y.results.push(t),e.onChange(t)),r})}else if(r)return e.aborted=!0,void e.complete(r);i&&i.last_seq&&(v=i.last_seq);var f=a&&0>=u||i&&t>c||e.descending;(!e.continuous||a&&0>=u)&&f?e.complete(null,y):setTimeout(function(){g(v,b)},0)}};return g(e.since||0,b),{cancel:function(){e.aborted=!0,p&&p.abort()}}},T.revsDiff=l("revsDiff",function(e,t,n){"function"==typeof t&&(n=t,t={}),r(t,{method:"POST",url:c(R,"_revs_diff"),body:e},n)}),T._close=function(e){e()},T._destroy=function(e,t){r(e,{url:c(R,""),method:"DELETE"},function(e,r){return e&&e.status&&404!==e.status?t(e):void t(null,r)})}}function d(e){e.adapter("http",l,!1),e.adapter("https",l,!1)}var _=r(5),h=n(r(10)),p=n(r(30)),v=n(r(14)),m=r(16),g=r(22),y=r(17),b=n(r(6)),w=25,A=50,k={},S=1800,E=b("pouchdb:http");l.valid=function(){return!0},e.exports=d},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(){for(var e={},t=new _(function(t,r){e.resolve=t,e.reject=r}),r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.promise=t,_.resolve().then(function(){return fetch.apply(null,r)}).then(function(t){e.resolve(t)})["catch"](function(t){e.reject(t)}),e}function i(e,t){var r,n,i,a=new Headers,u={method:e.method,credentials:"include",headers:a};return e.json&&(a.set("Accept","application/json"),a.set("Content-Type",e.headers["Content-Type"]||"application/json")),e.body&&e.body instanceof Blob?d.readAsArrayBuffer(e.body,function(e){u.body=e}):e.body&&e.processData&&"string"!=typeof e.body?u.body=JSON.stringify(e.body):"body"in e?u.body=e.body:u.body=null,Object.keys(e.headers).forEach(function(t){e.headers.hasOwnProperty(t)&&a.set(t,e.headers[t])}),r=o(e.url,u),e.timeout>0&&(n=setTimeout(function(){r.reject(new Error("Load timeout for resource: "+e.url))},e.timeout)),r.promise.then(function(t){return i={statusCode:t.status},e.timeout>0&&clearTimeout(n),i.statusCode>=200&&i.statusCode<300?e.binary?t.blob():t.text():t.json()}).then(function(e){i.statusCode>=200&&i.statusCode<300?t(null,i,e):t(e,i)})["catch"](function(e){t(e,i)}),{abort:r.reject}}function a(e,t){var r,n,o=!1,i=function(){r.abort()},a=function(){o=!0,r.abort()};r=e.xhr?new e.xhr:new XMLHttpRequest;try{r.open(e.method,e.url)}catch(u){t(u,{statusCode:413})}r.withCredentials="withCredentials"in e?e.withCredentials:!0,"GET"===e.method?delete e.headers["Content-Type"]:e.json&&(e.headers.Accept="application/json",e.headers["Content-Type"]=e.headers["Content-Type"]||"application/json",e.body&&e.processData&&"string"!=typeof e.body&&(e.body=JSON.stringify(e.body))),e.binary&&(r.responseType="arraybuffer"),"body"in e||(e.body=null);for(var c in e.headers)e.headers.hasOwnProperty(c)&&r.setRequestHeader(c,e.headers[c]);return e.timeout>0&&(n=setTimeout(a,e.timeout),r.onprogress=function(){clearTimeout(n),4!==r.readyState&&(n=setTimeout(a,e.timeout))},"undefined"!=typeof r.upload&&(r.upload.onprogress=r.onprogress)),r.onreadystatechange=function(){if(4===r.readyState){var n={statusCode:r.status};if(r.status>=200&&r.status<300){var i;i=e.binary?d.blob([r.response||""],{type:r.getResponseHeader("Content-Type")}):r.responseText,t(null,n,i)}else{var a={};if(o)a=new Error("ETIMEDOUT"),n.statusCode=400;else try{a=JSON.parse(r.response)}catch(u){}t(a,n)}}},e.body&&e.body instanceof Blob?d.readAsArrayBuffer(e.body,function(e){r.send(e)}):r.send(e.body),{abort:i}}function u(){try{return new XMLHttpRequest,!0}catch(e){return!1}}function c(e,t){return m||e.xhr?a(e,t):i(e,t)}function s(){return""}function f(e,t){function r(t,r,n){if(!e.binary&&e.json&&"string"==typeof t)try{t=JSON.parse(t)}catch(o){return n(o)}Array.isArray(t)&&(t=t.map(function(e){return e.error||e.missing?p.generateErrorFromResponse(e):e})),e.binary&&g(t,r),n(null,t,r)}function n(e,t){var r,n;if(e.code&&e.status){var o=new Error(e.message||e.code);return o.status=e.status,t(o)}if(e.message&&"ETIMEDOUT"===e.message)return t(e);try{r=JSON.parse(e.responseText),n=p.generateErrorFromResponse(r)}catch(i){n=p.generateErrorFromResponse(e)}t(n)}e=v.clone(e);var o={method:"GET",headers:{},json:!0,processData:!0,timeout:1e4,cache:!1};return e=h.extend(o,e),e.json&&(e.binary||(e.headers.Accept="application/json"),e.headers["Content-Type"]=e.headers["Content-Type"]||"application/json"),e.binary&&(e.encoding=null,e.json=!1),e.processData||(e.json=!1),c(e,function(o,i,a){if(o)return o.status=i?i.statusCode:400,n(o,t);var u,c=i.headers&&i.headers["content-type"],f=a||s();if(!e.binary&&(e.json||!e.processData)&&"object"!=typeof f&&(/json/.test(c)||/^[\s]*\{/.test(f)&&/\}[\s]*$/.test(f)))try{f=JSON.parse(f.toString())}catch(l){}i.statusCode>=200&&i.statusCode<300?r(f,i,t):(u=p.generateErrorFromResponse(f),u.status=i.statusCode,t(u))})}function l(e,t){var r=navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",n=-1!==r.indexOf("safari")&&-1===r.indexOf("chrome"),o=-1!==r.indexOf("msie"),i=-1!==r.indexOf("edge"),a=n||(o||i)&&"GET"===e.method,u="cache"in e?e.cache:!0,c=/^blob:/.test(e.url);if(!c&&(a||!u)){var s=-1!==e.url.indexOf("?");e.url+=(s?"&":"?")+"_nonce="+Date.now()}return f(e,t)}var d=r(22),_=n(r(10)),h=r(5),p=r(17),v=r(16),m=u(),g=function(){};e.exports=l},function(e,t,r){(function(t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(){this.promise=new H(function(e){e()})}function i(e){var t=e.db,r=e.viewName,n=e.map,o=e.reduce,i=e.temporary,a=n.toString()+(o&&o.toString())+"undefined";if(!i&&t._cachedViews){var u=t._cachedViews[a];if(u)return H.resolve(u)}return t.info().then(function(e){function u(e){e.views=e.views||{};var t=r;-1===t.indexOf("/")&&(t=r+"/"+r);var n=e.views[t]=e.views[t]||{};if(!n[c])return n[c]=!0,e}var c=e.db_name+"-mrview-"+(i?"temp":V.stringMd5(a));return U.upsert(t,"_local/mrviews",u).then(function(){return t.registerDependentDatabase(c).then(function(e){var r=e.db;r.auto_compaction=!0;var u={name:c,db:r,sourceDB:t,adapter:t.adapter,mapFun:n,reduceFun:o};return u.db.get("_local/lastSeq")["catch"](function(e){if(404!==e.status)throw e}).then(function(e){return u.seq=e?e.seq:0,i||(t._cachedViews=t._cachedViews||{},t._cachedViews[a]=u,u.db.once("destroyed",function(){delete t._cachedViews[a]})),u})})})})}function a(e,t,r,n,o,i){return z("return ("+e.replace(/;\s*$/,"")+");",{emit:t,sum:r,log:n,isArray:o,toJSON:i})}function u(e){return-1===e.indexOf("/")?[e,e]:e.split("/")}function c(e){return 1===e.length&&/^1-/.test(e[0].rev)}function s(e,t){try{e.emit("error",t)}catch(r){U.guardedConsole("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),U.guardedConsole("error",t)}}function f(e,t,r){try{return{output:t.apply(null,r)}}catch(n){return s(e,n),{error:n}}}function l(e,t){var r=W.collate(e.key,t.key);return 0!==r?r:W.collate(e.value,t.value)}function d(e,t,r){return r=r||0,"number"==typeof t?e.slice(r,t+r):r>0?e.slice(r):e}function _(e){var t=e.value,r=t&&"object"==typeof t&&t._id||e.id;return r}function h(e){e.rows.forEach(function(e){var t=e.doc&&e.doc._attachments;t&&Object.keys(t).forEach(function(e){var r=t[e];t[e].data=J.base64StringToBlobOrBuffer(r.data,r.content_type)})})}function p(e){return function(t){return e.include_docs&&e.attachments&&e.binary&&h(t),t}}function v(e){var t="builtin "+e+" function requires map values to be numbers or number arrays";return new P(t)}function m(e){for(var t=0,r=0,n=e.length;n>r;r++){var o=e[r];if("number"!=typeof o){if(!Array.isArray(o))throw v("_sum");t="number"==typeof t?[t]:t;for(var i=0,a=o.length;a>i;i++){var u=o[i];if("number"!=typeof u)throw v("_sum");"undefined"==typeof t[i]?t.push(u):t[i]+=u}}else"number"==typeof t?t+=o:t[0]+=o}return t}function g(e,t,r,n){var o=t[e];"undefined"!=typeof o&&(n&&(o=encodeURIComponent(JSON.stringify(o))),r.push(e+"="+o))}function y(e){if("undefined"!=typeof e){var t=Number(e);return isNaN(t)||t!==parseInt(e,10)?e:t}}function b(e){return e.group_level=y(e.group_level),e.limit=y(e.limit),e.skip=y(e.skip),e}function w(e){if(e){if("number"!=typeof e)return new M('Invalid value for integer: "'+e+'"');if(0>e)return new M('Invalid value for positive integer: "'+e+'"')}}function A(e,t){var r=e.descending?"endkey":"startkey",n=e.descending?"startkey":"endkey";if("undefined"!=typeof e[r]&&"undefined"!=typeof e[n]&&W.collate(e[r],e[n])>0)throw new M("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(t.reduce&&e.reduce!==!1){if(e.include_docs)throw new M("{include_docs:true} is invalid for reduce");if(e.keys&&e.keys.length>1&&!e.group&&!e.group_level)throw new M("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(t){var r=w(e[t]);if(r)throw r})}function k(e,t,r){var n,o=[],i="GET";if(g("reduce",r,o),g("include_docs",r,o),g("attachments",r,o),g("limit",r,o),g("descending",r,o),g("group",r,o),g("group_level",r,o),g("skip",r,o),g("stale",r,o),g("conflicts",r,o),g("startkey",r,o,!0),g("start_key",r,o,!0),g("endkey",r,o,!0),g("end_key",r,o,!0),g("inclusive_end",r,o),g("key",r,o,!0),o=o.join("&"),o=""===o?"":"?"+o,"undefined"!=typeof r.keys){var a=2e3,c="keys="+encodeURIComponent(JSON.stringify(r.keys));c.length+o.length+1<=a?o+=("?"===o[0]?"&":"?")+c:(i="POST","string"==typeof t?n={keys:r.keys}:t.keys=r.keys)}if("string"==typeof t){var s=u(t);return e.request({method:i,url:"_design/"+s[0]+"/_view/"+s[1]+o,body:n}).then(p(r))}return n=n||{},Object.keys(t).forEach(function(e){Array.isArray(t[e])?n[e]=t[e]:n[e]=t[e].toString()}),e.request({method:"POST",url:"_temp_view"+o,body:n}).then(p(r))}function S(e,t,r){return new H(function(n,o){e._query(t,r,function(e,t){return e?o(e):void n(t)})})}function E(e){return new H(function(t,r){e._viewCleanup(function(e,n){return e?r(e):void t(n)})})}function T(e){return function(t){if(404===t.status)return e;throw t}}function x(e,t,r){function n(){return c(l)?H.resolve(u):t.db.get(a)["catch"](T(u))}function o(e){return e.keys.length?t.db.allDocs({keys:e.keys,include_docs:!0}):H.resolve({rows:[]})}function i(e,t){for(var r=[],n={},o=0,i=t.rows.length;i>o;o++){var a=t.rows[o],u=a.doc;if(u&&(r.push(u),n[u._id]=!0,u._deleted=!f[u._id],!u._deleted)){var c=f[u._id];"value"in c&&(u.value=c.value)}}var s=Object.keys(f);return s.forEach(function(e){if(!n[e]){var t={_id:e},o=f[e];"value"in o&&(t.value=o.value),r.push(t)}}),e.keys=G.uniq(s.concat(e.keys)),r.push(e),r}var a="_local/doc_"+e,u={_id:a,keys:[]},s=r[e],f=s.indexableKeysToKeyValues,l=s.changes;return n().then(function(e){return o(e).then(function(t){return i(e,t)})})}function R(e,t,r){var n="_local/lastSeq";return e.db.get(n)["catch"](T({_id:n,seq:0})).then(function(n){var o=Object.keys(t);return H.all(o.map(function(r){return x(r,e,t)})).then(function(t){var o=U.flatten(t);return n.seq=r,o.push(n),e.db.bulkDocs({docs:o})})})}function O(e){var t="string"==typeof e?e:e.name,r=$[t];return r||(r=$[t]=new o),r}function q(e){return G.sequentialize(O(e),function(){return N(e)})()}function N(e){function t(e,t){var r={id:i._id,key:W.normalizeKey(e)};"undefined"!=typeof t&&null!==t&&(r.value=W.normalizeKey(t)),n.push(r)}function r(t,r){return function(){return R(e,t,r)}}var n,i,u;if("function"==typeof e.mapFun&&2===e.mapFun.length){var c=e.mapFun;u=function(e){return c(e,t)}}else u=a(e.mapFun.toString(),t,m,Y,Array.isArray,JSON.parse);var s=e.seq||0,d=new o;return new H(function(t,o){function a(){d.finish().then(function(){e.seq=s,t()})}function c(){function t(e){o(e)}e.sourceDB.changes({conflicts:!0,include_docs:!0,style:"all_docs",since:s,limit:X}).on("complete",function(t){var o=t.results;if(!o.length)return a();for(var _={},h=0,p=o.length;p>h;h++){var v=o[h];if("_"!==v.doc._id[0]){n=[],i=v.doc,i._deleted||f(e.sourceDB,u,[i]),n.sort(l);for(var m,g={},y=0,b=n.length;b>y;y++){var w=n[y],A=[w.key,w.id];0===W.collate(w.key,m)&&A.push(y);var k=W.toIndexableString(A);g[k]=w,m=w.key}_[v.doc._id]={indexableKeysToKeyValues:g,changes:v.changes}}s=v.seq}return d.add(r(_,s)),o.length<X?a():c()}).on("error",t)}c()})}function I(e,t,r){0===r.group_level&&delete r.group_level;var n,o=r.group||r.group_level;n=Z[e.reduceFun]?Z[e.reduceFun]:a(e.reduceFun.toString(),null,m,Y,Array.isArray,JSON.parse);var i=[],u=isNaN(r.group_level)?Number.POSITIVE_INFINITY:r.group_level;t.forEach(function(e){var t=i[i.length-1],r=o?e.key:null;return o&&Array.isArray(r)&&(r=r.slice(0,u)),t&&0===W.collate(t.groupKey,r)?(t.keys.push([e.key,e.id]),void t.values.push(e.value)):void i.push({keys:[[e.key,e.id]],values:[e.value],groupKey:r})}),t=[];for(var c=0,s=i.length;s>c;c++){var l=i[c],_=f(e.sourceDB,n,[l.keys,l.values,!1]);if(_.error&&_.error instanceof P)throw _.error;t.push({value:_.error?null:_.output,key:l.groupKey})}return{rows:d(t,r.limit,r.skip)}}function C(e,t){return G.sequentialize(O(e),function(){return L(e,t)})()}function L(e,t){function r(t){return t.include_docs=!0,e.db.allDocs(t).then(function(e){return o=e.total_rows,e.rows.map(function(e){if("value"in e.doc&&"object"==typeof e.doc.value&&null!==e.doc.value){var t=Object.keys(e.doc.value).sort(),r=["id","key","value"];if(!(r>t||t>r))return e.doc.value}var n=W.parseIndexableString(e.doc._id);return{key:n[0],id:n[1],value:"value"in e.doc?e.doc.value:null}})})}function n(r){var n;if(n=i?I(e,r,t):{total_rows:o,offset:a,rows:r},t.include_docs){var u=G.uniq(r.map(_));return e.sourceDB.allDocs({keys:u,include_docs:!0,conflicts:t.conflicts,attachments:t.attachments,binary:t.binary}).then(function(e){var t={};return e.rows.forEach(function(e){e.doc&&(t["$"+e.id]=e.doc)}),r.forEach(function(e){var r=_(e),n=t["$"+r];n&&(e.doc=n)}),n})}return n}var o,i=e.reduceFun&&t.reduce!==!1,a=t.skip||0;if("undefined"==typeof t.keys||t.keys.length||(t.limit=0,delete t.keys),"undefined"!=typeof t.keys){var u=t.keys,c=u.map(function(e){var t={startkey:W.toIndexableString([e]),endkey:W.toIndexableString([e,{}])};return r(t)});return H.all(c).then(U.flatten).then(n)}var s={descending:t.descending};if(t.start_key&&(t.startkey=t.start_key),t.end_key&&(t.endkey=t.end_key),"undefined"!=typeof t.startkey&&(s.startkey=t.descending?W.toIndexableString([t.startkey,{}]):W.toIndexableString([t.startkey])),"undefined"!=typeof t.endkey){var f=t.inclusive_end!==!1;t.descending&&(f=!f),s.endkey=W.toIndexableString(f?[t.endkey,{}]:[t.endkey])}if("undefined"!=typeof t.key){var l=W.toIndexableString([t.key]),d=W.toIndexableString([t.key,{}]);s.descending?(s.endkey=l,s.startkey=d):(s.startkey=l,s.endkey=d)}return i||("number"==typeof t.limit&&(s.limit=t.limit),s.skip=a),r(s).then(n)}function D(e){return e.request({method:"POST",url:"_view_cleanup"})}function B(e){return e.get("_local/mrviews").then(function(t){var r={};Object.keys(t.views).forEach(function(e){var t=u(e),n="_design/"+t[0],o=t[1];r[n]=r[n]||{},r[n][o]=!0});var n={keys:Object.keys(r),include_docs:!0};return e.allDocs(n).then(function(n){var o={};n.rows.forEach(function(e){var n=e.key.substring(8);Object.keys(r[e.key]).forEach(function(r){var i=n+"/"+r;t.views[i]||(i=r);var a=Object.keys(t.views[i]),u=e.doc&&e.doc.views&&e.doc.views[r];a.forEach(function(e){o[e]=o[e]||u})})});var i=Object.keys(o).filter(function(e){return!o[e]}),a=i.map(function(t){return G.sequentialize(O(t),function(){return new e.constructor(t,e.__opts).destroy()})()});return H.all(a).then(function(){return{ok:!0}})})},T({ok:!0}))}function j(e,r,n){if("http"===e.type())return k(e,r,n);if("function"==typeof e._query)return S(e,r,n);if("string"!=typeof r){A(n,r);var o={db:e,viewName:"temp_view/temp_view",map:r.map,reduce:r.reduce,temporary:!0};return Q.add(function(){return i(o).then(function(e){function t(){return e.db.destroy()}return G.fin(q(e).then(function(){
return C(e,n)}),t)})}),Q.finish()}var a=r,c=u(a),s=c[0],f=c[1];return e.get("_design/"+s).then(function(r){var o=r.views&&r.views[f];if(!o||"string"!=typeof o.map)throw new F("ddoc "+s+" has no view named "+f);A(n,o);var u={db:e,viewName:a,map:o.map,reduce:o.reduce};return i(u).then(function(e){return"ok"===n.stale||"update_after"===n.stale?("update_after"===n.stale&&t.nextTick(function(){q(e)}),C(e,n)):q(e).then(function(){return C(e,n)})})})}function M(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,M)}catch(t){}}function F(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,F)}catch(t){}}function P(e){this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,P)}catch(t){}}var U=r(16),J=r(22),W=r(32),H=n(r(10)),V=r(23),z=n(r(19)),G=r(34),K=n(r(9));o.prototype.add=function(e){return this.promise=this.promise["catch"](function(){}).then(function(){return e()}),this.promise},o.prototype.finish=function(){return this.promise};var $={},Q=new o,X=50,Y=U.guardedConsole.bind(null,"log"),Z={_sum:function(e,t){return m(t)},_count:function(e,t){return t.length},_stats:function(e,t){function r(e){for(var t=0,r=0,n=e.length;n>r;r++){var o=e[r];t+=o*o}return t}return{sum:m(t),min:Math.min.apply(null,t),max:Math.max.apply(null,t),count:t.length,sumsqr:r(t)}}},ee=G.callbackify(function(){var e=this;return"http"===e.type()?D(e):"function"==typeof e._viewCleanup?E(e):B(e)}),te=function(e,t,r){"function"==typeof t&&(r=t,t={}),t=t?b(t):{},"function"==typeof e&&(e={map:e});var n=this,o=H.resolve().then(function(){return j(n,e,t)});return G.promisedCallback(o,r),o};K(M,Error),K(F,Error),K(P,Error);var re={query:te,viewCleanup:ee};e.exports=re}).call(t,r(4))},function(e,t,r){"use strict";function n(e){if(null!==e)switch(typeof e){case"boolean":return e?1:0;case"number":return f(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var r=Array.isArray(e),n=r?e:Object.keys(e),o=-1,i=n.length,a="";if(r)for(;++o<i;)a+=t.toIndexableString(n[o]);else for(;++o<i;){var u=n[o];a+=t.toIndexableString(u)+t.toIndexableString(e[u])}return a}return""}function o(e,t){var r,n=t,o="1"===e[t];if(o)r=0,t++;else{var i="0"===e[t];t++;var a="",u=e.substring(t,t+d),c=parseInt(u,10)+l;for(i&&(c=-c),t+=d;;){var s=e[t];if("\x00"===s)break;a+=s,t++}a=a.split("."),r=1===a.length?parseInt(a,10):parseFloat(a[0]+"."+a[1]),i&&(r-=10),0!==c&&(r=parseFloat(r+"e"+c))}return{num:r,length:t-n}}function i(e,t){var r=e.pop();if(t.length){var n=t[t.length-1];r===n.element&&(t.pop(),n=t[t.length-1]);var o=n.element,i=n.index;if(Array.isArray(o))o.push(r);else if(i===e.length-2){var a=e.pop();o[a]=r}else e.push(r)}}function a(e,r){for(var n=Math.min(e.length,r.length),o=0;n>o;o++){var i=t.collate(e[o],r[o]);if(0!==i)return i}return e.length===r.length?0:e.length>r.length?1:-1}function u(e,t){return e===t?0:e>t?1:-1}function c(e,r){for(var n=Object.keys(e),o=Object.keys(r),i=Math.min(n.length,o.length),a=0;i>a;a++){var u=t.collate(n[a],o[a]);if(0!==u)return u;if(u=t.collate(e[n[a]],r[o[a]]),0!==u)return u}return n.length===o.length?0:n.length>o.length?1:-1}function s(e){var t=["boolean","number","string","object"],r=t.indexOf(typeof e);return~r?null===e?1:Array.isArray(e)?5:3>r?r+2:r+3:Array.isArray(e)?5:void 0}function f(e){if(0===e)return"1";var t=e.toExponential().split(/e\+?/),r=parseInt(t[1],10),n=0>e,o=n?"0":"2",i=(n?-r:r)-l,a=h.padLeft(i.toString(),"0",d);o+=_+a;var u=Math.abs(parseFloat(t[0]));n&&(u=10-u);var c=u.toFixed(20);return c=c.replace(/\.?0+$/,""),o+=_+c}var l=-324,d=3,_="",h=r(33);t.collate=function(e,r){if(e===r)return 0;e=t.normalizeKey(e),r=t.normalizeKey(r);var n=s(e),o=s(r);if(n-o!==0)return n-o;if(null===e)return 0;switch(typeof e){case"number":return e-r;case"boolean":return e===r?0:r>e?-1:1;case"string":return u(e,r)}return Array.isArray(e)?a(e,r):c(e,r)},t.normalizeKey=function(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-(1/0)||isNaN(e)?null:e;case"object":var r=e;if(Array.isArray(e)){var n=e.length;e=new Array(n);for(var o=0;n>o;o++)e[o]=t.normalizeKey(r[o])}else{if(e instanceof Date)return e.toJSON();if(null!==e){e={};for(var i in r)if(r.hasOwnProperty(i)){var a=r[i];"undefined"!=typeof a&&(e[i]=t.normalizeKey(a))}}}}return e},t.toIndexableString=function(e){var r="\x00";return e=t.normalizeKey(e),s(e)+_+n(e)+r},t.parseIndexableString=function(e){for(var t=[],r=[],n=0;;){var a=e[n++];if("\x00"!==a)switch(a){case"1":t.push(null);break;case"2":t.push("1"===e[n]),n++;break;case"3":var u=o(e,n);t.push(u.num),n+=u.length;break;case"4":for(var c="";;){var s=e[n];if("\x00"===s)break;c+=s,n++}c=c.replace(/\u0001\u0001/g,"\x00").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(c);break;case"5":var f={element:[],index:t.length};t.push(f.element),r.push(f);break;case"6":var l={element:{},index:t.length};t.push(l.element),r.push(l);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+a)}else{if(1===t.length)return t.pop();i(t,r)}}}},function(e,t){"use strict";function r(e,t,r){for(var n="",o=r-e.length;n.length<o;)n+=t;return n}t.padLeft=function(e,t,n){var o=r(e,t,n);return o+e},t.padRight=function(e,t,n){var o=r(e,t,n);return e+o},t.stringLexCompare=function(e,t){var r,n=e.length,o=t.length;for(r=0;n>r;r++){if(r===o)return 1;var i=e.charAt(r),a=t.charAt(r);if(i!==a)return a>i?-1:1}return o>n?-1:0},t.intToDecimalForm=function(e){var t=0>e,r="";do{var n=t?-Math.ceil(e%10):Math.floor(e%10);r=n+r,e=t?Math.ceil(e/10):Math.floor(e/10)}while(e);return t&&"0"!==r&&(r="-"+r),r}},function(e,t,r){(function(e){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(14)),i=function(t,r){return r&&t.then(function(t){e.nextTick(function(){r(null,t)})},function(t){e.nextTick(function(){r(t)})}),t},a=function(e){return o(function(t){var r=t.pop(),n=e.apply(this,t);return"function"==typeof r&&i(n,r),n})},u=function(e,t){return e.then(function(e){return t().then(function(){return e})},function(e){return t().then(function(){throw e})})},c=function(e,t){return function(){var r=arguments,n=this;return e.add(function(){return t.apply(n,r)})}},s=function(e){for(var t={},r=0,n=e.length;n>r;r++)t["$"+e[r]]=!0;var o=Object.keys(t),i=new Array(o.length);for(r=0,n=o.length;n>r;r++)i[r]=o[r].substring(1);return i};t.uniq=s,t.sequentialize=c,t.fin=u,t.callbackify=a,t.promisedCallback=i}).call(t,r(4))},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(e){return/^1-/.test(e)}function i(e,t,r){return!e._attachments||!e._attachments[r]||e._attachments[r].digest!==t._attachments[r].digest}function a(e,t){var r=Object.keys(t._attachments);return y.all(r.map(function(r){return e.getAttachment(t._id,r,{rev:t._rev})}))}function u(e,t,r){var n="http"===t.type()&&"http"!==e.type(),o=Object.keys(r._attachments);return n?e.get(r._id).then(function(n){return y.all(o.map(function(o){return i(n,r,o)?t.getAttachment(r._id,o):e.getAttachment(n._id,o)}))})["catch"](function(e){if(404!==e.status)throw e;return a(t,r)}):a(t,r)}function c(e){var t=[];return Object.keys(e).forEach(function(r){var n=e[r].missing;n.forEach(function(e){t.push({id:r,rev:e})})}),{docs:t,revs:!0}}function s(e,t,r,n){function i(){var o=c(r);if(o.docs.length)return e.bulkGet(o).then(function(r){if(n.cancelled)throw new Error("cancelled");return y.all(r.results.map(function(r){return y.all(r.docs.map(function(r){var n=r.ok;return r.error&&(_=!1),n&&n._attachments?u(t,e,n).then(function(e){var t=Object.keys(n._attachments);return e.forEach(function(e,r){var o=n._attachments[t[r]];delete o.stub,delete o.length,o.data=e}),n}):n}))})).then(function(e){d=d.concat(g.flatten(e).filter(Boolean))})})}function a(e){return e._attachments&&Object.keys(e._attachments).length>0}function s(t){return e.allDocs({keys:t,include_docs:!0}).then(function(e){if(n.cancelled)throw new Error("cancelled");e.rows.forEach(function(e){!e.deleted&&e.doc&&o(e.value.rev)&&!a(e.doc)&&(d.push(e.doc),delete r[e.id])})})}function f(){var e=Object.keys(r).filter(function(e){var t=r[e].missing;return 1===t.length&&o(t[0])});return e.length>0?s(e):void 0}function l(){return{ok:_,docs:d}}r=g.clone(r);var d=[],_=!0;return y.resolve().then(f).then(i).then(l)}function f(e,t,r,n){return e.retry===!1?(t.emit("error",r),void t.removeAllListeners()):("function"!=typeof e.back_off_function&&(e.back_off_function=g.defaultBackOff),t.emit("requestError",r),"active"!==t.state&&"pending"!==t.state||(t.emit("paused",r),t.state="stopped",t.once("active",function(){e.current_back_off=T})),e.current_back_off=e.current_back_off||T,e.current_back_off=e.back_off_function(e.current_back_off),void setTimeout(n,e.current_back_off))}function l(e,t,r,n,o){function i(){return O?y.resolve():w(e,t,r).then(function(r){R=r,O=new b(e,t,R,n)})}function a(){if(J=[],0!==x.docs.length){var e=x.docs;return t.bulkDocs({docs:e,new_edits:!1}).then(function(t){if(n.cancelled)throw v(),new Error("cancelled");var r=[],i={};t.forEach(function(e){e.error&&(o.doc_write_failures++,r.push(e),i[e.id]=e)}),U=U.concat(r),o.docs_written+=x.docs.length-r.length;var a=r.filter(function(e){return"unauthorized"!==e.name&&"forbidden"!==e.name});if(e.forEach(function(e){var t=i[e._id];t?n.emit("denied",g.clone(t)):J.push(e)}),a.length>0){var u=new Error("bulkDocs error");throw u.other_errors=r,p("target.bulkDocs failed to write docs",u),new Error("bulkWrite partial failure")}},function(t){throw o.doc_write_failures+=e.length,t})}}function u(){if(x.error)throw new Error("There was a problem getting docs.");o.last_seq=D=x.seq;var e=g.clone(o);return J.length&&(e.docs=J,n.emit("change",e)),I=!0,O.writeCheckpoint(x.seq,W).then(function(){if(I=!1,n.cancelled)throw v(),new Error("cancelled");x=void 0,S()})["catch"](T)}function c(){var e={};return x.changes.forEach(function(t){"_user/"!==t.id&&(e[t.id]=t.changes.map(function(e){return e.rev}))}),t.revsDiff(e).then(function(e){if(n.cancelled)throw v(),new Error("cancelled");x.diffs=e})}function d(){return s(e,t,x.diffs,n).then(function(e){x.error=!e.ok,e.docs.forEach(function(e){delete x.diffs[e._id],o.docs_read++,x.docs.push(e)})})}function _(){if(!n.cancelled&&!x){if(0===q.length)return void h(!0);x=q.shift(),c().then(d).then(a).then(u).then(_)["catch"](function(e){p("batch processing terminated with error",e)})}}function h(e){return 0===N.changes.length?void(0!==q.length||x||((B&&H.live||C)&&(n.state="pending",n.emit("paused")),C&&v())):void((e||C||N.changes.length>=j)&&(q.push(N),N={seq:0,changes:[],docs:[]},"pending"!==n.state&&"stopped"!==n.state||(n.state="active",n.emit("active")),_()))}function p(e,t){L||(t.message||(t.message=e),o.ok=!1,o.status="aborting",o.errors.push(t),U=U.concat(t),q=[],N={seq:0,changes:[],docs:[]},v())}function v(){if(!(L||n.cancelled&&(o.status="cancelled",I))){o.status=o.status||"complete",o.end_time=new Date,o.last_seq=D,L=!0;var i=U.filter(function(e){return"unauthorized"!==e.name&&"forbidden"!==e.name});if(i.length>0){var a=U.pop();U.length>0&&(a.other_errors=U),a.result=o,f(r,n,a,function(){l(e,t,r,n)})}else o.errors=U,n.emit("complete",o),n.removeAllListeners()}}function m(e){if(n.cancelled)return v();var t=g.filterChange(r)(e);t&&(N.seq=e.seq,N.changes.push(e),h(0===q.length&&H.live))}function A(e){if(F=!1,n.cancelled)return v();if(e.results.length>0)H.since=e.last_seq,S(),h(!0);else{var t=function(){B?(H.live=!0,S()):C=!0,h(!0)};x||0!==e.results.length?t():(I=!0,O.writeCheckpoint(e.last_seq,W).then(function(){I=!1,o.last_seq=D=e.last_seq,t()})["catch"](T))}}function k(e){return F=!1,n.cancelled?v():void p("changes rejected",e)}function S(){function t(){i.cancel()}function o(){n.removeListener("cancel",t)}if(!F&&!C&&q.length<M){F=!0,n._changes&&(n.removeListener("cancel",n._abortChanges),n._changes.cancel()),n.once("cancel",t);var i=e.changes(H).on("change",m);i.then(o,o),i.then(A)["catch"](k),r.retry&&(n._changes=i,n._abortChanges=t)}}function E(){i().then(function(){return n.cancelled?void v():O.getCheckpoint().then(function(e){D=e,H={since:D,limit:j,batch_size:j,style:"all_docs",doc_ids:P,return_docs:!0},r.filter&&("string"!=typeof r.filter?H.include_docs=!0:H.filter=r.filter),"heartbeat"in r&&(H.heartbeat=r.heartbeat),"timeout"in r&&(H.timeout=r.timeout),r.query_params&&(H.query_params=r.query_params),r.view&&(H.view=r.view),S()})})["catch"](function(e){p("getCheckpoint rejected with ",e)})}function T(e){throw I=!1,p("writeCheckpoint completed with error",e),e}var x,R,O,q=[],N={seq:0,changes:[],docs:[]},I=!1,C=!1,L=!1,D=0,B=r.continuous||r.live||!1,j=r.batch_size||100,M=r.batches_limit||10,F=!1,P=r.doc_ids,U=[],J=[],W=g.uuid();o=o||{ok:!0,start_time:new Date,docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var H={};return n.ready(e,t),n.cancelled?void v():(n._addedListeners||(n.once("cancel",v),"function"==typeof r.complete&&(n.once("error",r.complete),n.once("complete",function(e){r.complete(null,e)})),n._addedListeners=!0),void("undefined"==typeof r.since?E():i().then(function(){return I=!0,O.writeCheckpoint(r.since,W)}).then(function(){return I=!1,n.cancelled?void v():(D=r.since,void E())})["catch"](T)))}function d(){A.EventEmitter.call(this),this.cancelled=!1,this.state="pending";var e=this,t=new y(function(t,r){e.once("complete",t),e.once("error",r)});e.then=function(e,r){return t.then(e,r)},e["catch"]=function(e){return t["catch"](e)},e["catch"](function(){})}function _(e,t){var r=t.PouchConstructor;return"string"==typeof e?new r(e,t):e}function h(e,t,r,n){if("function"==typeof r&&(n=r,r={}),"undefined"==typeof r&&(r={}),r.doc_ids&&!Array.isArray(r.doc_ids))throw S.createError(S.BAD_REQUEST,"`doc_ids` filter parameter is not a list.");r.complete=n,r=g.clone(r),r.continuous=r.continuous||r.live,r.retry="retry"in r?r.retry:!1,r.PouchConstructor=r.PouchConstructor||this;var o=new d(r),i=_(e,r),a=_(t,r);return l(i,a,r,o),o}function p(e,t,r,n){return"function"==typeof r&&(n=r,r={}),"undefined"==typeof r&&(r={}),r=g.clone(r),r.PouchConstructor=r.PouchConstructor||this,e=_(e,r),t=_(t,r),new v(e,t,r,n)}function v(e,t,r,n){function o(e){_.emit("change",{direction:"pull",change:e})}function i(e){_.emit("change",{direction:"push",change:e})}function a(e){_.emit("denied",{direction:"push",doc:e})}function u(e){_.emit("denied",{direction:"pull",doc:e})}function c(){_.pushPaused=!0,_.pullPaused&&_.emit("paused")}function s(){_.pullPaused=!0,_.pushPaused&&_.emit("paused")}function f(){_.pushPaused=!1,_.pullPaused&&_.emit("active",{direction:"push"})}function l(){_.pullPaused=!1,_.pushPaused&&_.emit("active",{direction:"pull"})}function d(e){return function(t,r){var n="change"===t&&(r===o||r===i),d="denied"===t&&(r===u||r===a),h="paused"===t&&(r===s||r===c),p="active"===t&&(r===l||r===f);(n||d||h||p)&&(t in m||(m[t]={}),m[t][e]=!0,2===Object.keys(m[t]).length&&_.removeAllListeners(t))}}var _=this;this.canceled=!1;var p=r.push?E.extend({},r,r.push):r,v=r.pull?E.extend({},r,r.pull):r;this.push=h(e,t,p),this.pull=h(t,e,v),this.pushPaused=!0,this.pullPaused=!0;var m={};r.live&&(this.push.on("complete",_.pull.cancel.bind(_.pull)),this.pull.on("complete",_.push.cancel.bind(_.push))),this.on("newListener",function(e){"change"===e?(_.pull.on("change",o),_.push.on("change",i)):"denied"===e?(_.pull.on("denied",u),_.push.on("denied",a)):"active"===e?(_.pull.on("active",l),_.push.on("active",f)):"paused"===e&&(_.pull.on("paused",s),_.push.on("paused",c))}),this.on("removeListener",function(e){"change"===e?(_.pull.removeListener("change",o),_.push.removeListener("change",i)):"denied"===e?(_.pull.removeListener("denied",u),_.push.removeListener("denied",a)):"active"===e?(_.pull.removeListener("active",l),_.push.removeListener("active",f)):"paused"===e&&(_.pull.removeListener("paused",s),_.push.removeListener("paused",c))}),this.pull.on("removeListener",d("pull")),this.push.on("removeListener",d("push"));var g=y.all([this.push,this.pull]).then(function(e){var t={push:e[0],pull:e[1]};return _.emit("complete",t),n&&n(null,t),_.removeAllListeners(),t},function(e){if(_.cancel(),n?n(e):_.emit("error",e),_.removeAllListeners(),n)throw e});this.then=function(e,t){return g.then(e,t)},this["catch"]=function(e){return g["catch"](e)}}function m(e){e.replicate=h,e.sync=p}var g=r(16),y=n(r(10)),b=n(r(36)),w=n(r(37)),A=r(15),k=n(r(9)),S=r(17),E=r(5),T=0;k(d,A.EventEmitter),d.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")},d.prototype.ready=function(e,t){function r(){o.cancel()}function n(){e.removeListener("destroyed",r),t.removeListener("destroyed",r)}var o=this;o._readyCalled||(o._readyCalled=!0,e.once("destroyed",r),t.once("destroyed",r),o.once("complete",n))},k(v,A.EventEmitter),v.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())},e.exports=m},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(e,t,r,n,i){return e.get(t)["catch"](function(r){if(404===r.status)return"http"===e.type()&&l.explainError(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:n,_id:t,history:[],replicator:h,version:_};throw r}).then(function(a){return i.cancelled?void 0:(a.history=(a.history||[]).filter(function(e){return e.session_id!==n}),a.history.unshift({last_seq:r,session_id:n}),a.history=a.history.slice(0,p),a.version=_,a.replicator=h,a.session_id=n,a.last_seq=r,e.put(a)["catch"](function(a){if(409===a.status)return o(e,t,r,n,i);throw a}))})}function i(e,t,r,n){this.src=e,this.target=t,this.id=r,this.returnValue=n}function a(e,t){return e.session_id===t.session_id?{last_seq:e.last_seq,history:e.history}:u(e.history,t.history)}function u(e,t){var r=e[0],n=e.slice(1),o=t[0],i=t.slice(1);if(!r||0===t.length)return{last_seq:v,history:[]};var a=r.session_id;if(c(a,t))return{last_seq:r.last_seq,history:e};var s=o.session_id;return c(s,n)?{last_seq:o.last_seq,history:i}:u(n,i)}function c(e,t){var r=t[0],n=t.slice(1);return e&&0!==t.length?e===r.session_id?!0:c(e,n):!1}function s(e){return"number"==typeof e.status&&4===Math.floor(e.status/100)}var f=n(r(10)),l=r(16),d=r(32),_=1,h="pouchdb",p=5,v=0;i.prototype.writeCheckpoint=function(e,t){var r=this;return this.updateTarget(e,t).then(function(){return r.updateSource(e,t)})},i.prototype.updateTarget=function(e,t){return o(this.target,this.id,e,t,this.returnValue)},i.prototype.updateSource=function(e,t){var r=this;return this.readOnlySource?f.resolve(!0):o(this.src,this.id,e,t,this.returnValue)["catch"](function(e){if(s(e))return r.readOnlySource=!0,!0;throw e})};var m={undefined:function(e,t){return 0===d.collate(e.last_seq,t.last_seq)?t.last_seq:0},1:function(e,t){return a(t,e).last_seq}};i.prototype.getCheckpoint=function(){var e=this;return e.target.get(e.id).then(function(t){return e.readOnlySource?f.resolve(t.last_seq):e.src.get(e.id).then(function(e){if(t.version!==e.version)return v;var r;return r=t.version?t.version.toString():"undefined",r in m?m[r](t,e):v},function(r){if(404===r.status&&t.last_seq)return e.src.put({_id:e.id,last_seq:v}).then(function(){return v},function(r){return s(r)?(e.readOnlySource=!0,t.last_seq):v});throw r})})["catch"](function(e){if(404!==e.status)throw e;return v})},e.exports=i},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(e){return Object.keys(e).sort(c.collate).reduce(function(t,r){return t[r]=e[r],t},{})}function i(e,t,r){var n=r.doc_ids?r.doc_ids.sort(c.collate):"",i=r.filter?r.filter.toString():"",s="",f="";return r.filter&&r.query_params&&(s=JSON.stringify(o(r.query_params))),r.filter&&"_view"===r.filter&&(f=r.view.toString()),a.all([e.id(),t.id()]).then(function(e){var t=e[0]+e[1]+i+f+s+n;return new a(function(e){u.binaryMd5(t,e)})}).then(function(e){return e=e.replace(/\//g,".").replace(/\+/g,"_"),"_local/"+e})}var a=n(r(10)),u=r(23),c=r(32);e.exports=i},function(e,t){(function(){"use strict";function t(e){function t(t){return function(r){return e(t,r)}}return t.arity=2,t.func=e,t}function r(e){function t(t){return function(r){return function(n){return e(t,r,n)}}}return t.arity=3,t.func=e,t}function n(e){function t(t){return function(r){return function(n){return function(o){return e(t,r,n,o)}}}}return t.arity=4,t.func=e,t}function o(e){function t(t){return function(r){return function(n){return function(o){return function(i){return e(t,r,n,o,i)}}}}}return t.arity=5,t.func=e,t}function i(e){function t(t){return function(r){return function(n){return function(o){return function(i){return function(a){return e(t,r,n,o,i,a)}}}}}}return t.arity=6,t.func=e,t}function a(e){function t(t){return function(r){return function(n){return function(o){return function(i){return function(a){return function(u){return e(t,r,n,o,i,a,u)}}}}}}}return t.arity=7,t.func=e,t}function u(e){function t(t){return function(r){return function(n){return function(o){return function(i){return function(a){return function(u){return function(c){return e(t,r,n,o,i,a,u,c)}}}}}}}}return t.arity=8,t.func=e,t}function c(e){function t(t){return function(r){return function(n){return function(o){return function(i){return function(a){return function(u){return function(c){return function(s){return e(t,r,n,o,i,a,u,c,s)}}}}}}}}}return t.arity=9,t.func=e,t}function s(e,t,r){return 2===e.arity?e.func(t,r):e(t)(r)}function f(e,t,r,n){return 3===e.arity?e.func(t,r,n):e(t)(r)(n)}function l(e,t,r,n,o){return 4===e.arity?e.func(t,r,n,o):e(t)(r)(n)(o)}function d(e,t,r,n,o,i){return 5===e.arity?e.func(t,r,n,o,i):e(t)(r)(n)(o)(i)}function _(e,t,r,n,o,i,a){return 6===e.arity?e.func(t,r,n,o,i,a):e(t)(r)(n)(o)(i)(a)}function h(e,t,r,n,o,i,a,u){return 7===e.arity?e.func(t,r,n,o,i,a,u):e(t)(r)(n)(o)(i)(a)(u)}var p=function(){function e(e,t){return e/t|0}function n(e,t){return e%t}function o(e,t){if(0===t)throw new Error("Cannot perform mod 0. Division by zero error.");var r=e%t,n=0===e?0:t>0?e>=0?r:r+t:-o(-e,-t);return n===t?0:n}function i(e,t){return Math.log(t)/Math.log(e)}function a(e){return-e}function u(e){return 0>e?-e:e}function c(e,t){return v.cmp(e,t)<0?e:t}function s(e,t){return v.cmp(e,t)>0?e:t}function f(e,t,r){return v.cmp(r,e)<0?e:v.cmp(r,t)>0?t:r}function l(e,t){return{ctor:w[v.cmp(e,t)+1]}}function d(e,t){return e!==t}function _(e){return!e}function h(e){return e===1/0||e===-(1/0)}function p(e){return 0|e}function m(e){return e*Math.PI/180}function g(e){return 2*Math.PI*e}function y(e){var t=e._0,r=e._1;return v.Tuple2(t*Math.cos(r),t*Math.sin(r))}function b(e){var t=e._0,r=e._1;return v.Tuple2(Math.sqrt(t*t+r*r),Math.atan2(r,t))}var w=["LT","EQ","GT"];return{div:t(e),rem:t(n),mod:t(o),pi:Math.PI,e:Math.E,cos:Math.cos,sin:Math.sin,tan:Math.tan,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:t(Math.atan2),degrees:m,turns:g,fromPolar:y,toPolar:b,sqrt:Math.sqrt,logBase:t(i),negate:a,abs:u,min:t(c),max:t(s),clamp:r(f),compare:t(l),xor:t(d),not:_,truncate:p,ceiling:Math.ceil,floor:Math.floor,round:Math.round,toFloat:function(e){return e},isNaN:isNaN,isInfinite:h}}(),v=function(){function e(e,t){for(var r=[{x:e,y:t}];r.length>0;){var n=r.pop(),o=n.x,i=n.y;if(o!==i){if("object"!=typeof o){if("function"==typeof o)throw new Error("Equality error: general function equality is undecidable, and therefore, unsupported");return!1}var a=0;for(var u in o){if(++a,!(u in i))return!1;"ctor"!==u&&r.push({x:o[u],y:i[u]})}if("ctor"in o&&r.push({x:o.ctor,y:i.ctor}),a!==Object.keys(i).length)return!1}}return!0}function r(e,t){var n;if("object"!=typeof e)return e===t?v:t>e?p:m;if(e instanceof String){var o=e.valueOf(),i=t.valueOf();return o===i?v:i>o?p:m}if("::"!==e.ctor&&"[]"!==e.ctor){if("_Tuple"===e.ctor.slice(0,6)){var a=e.ctor.slice(6)-0,u="cannot compare tuples with more than 6 elements.";if(0===a)return v;if(a>=1){if(n=r(e._0,t._0),n!==v)return n;if(a>=2){if(n=r(e._1,t._1),n!==v)return n;if(a>=3){if(n=r(e._2,t._2),n!==v)return n;if(a>=4){if(n=r(e._3,t._3),n!==v)return n;if(a>=5){if(n=r(e._4,t._4),n!==v)return n;if(a>=6){if(n=r(e._5,t._5),n!==v)return n;if(a>=7)throw new Error("Comparison error: "+u)}}}}}}return v}throw new Error("Comparison error: comparison is only defined on ints, floats, times, chars, strings, lists of comparable values, and tuples of comparable values.")}for(;;){if("[]"===e.ctor&&"[]"===t.ctor)return v;if(e.ctor!==t.ctor)return"[]"===e.ctor?p:m;if(n=r(e._0,t._0),n!==v)return n;e=e._1,t=t._1}}function n(e,t){return{ctor:"_Tuple2",_0:e,_1:t}}function o(e){return new String(e)}function i(e){return y++}function a(e,t){var r={};for(var n in e){var o=n in t?t[n]:e[n];r[n]=o}return r}function u(e,t){return{ctor:"::",_0:e,_1:t}}function c(e,t){if("string"==typeof e)return e+t;if("[]"===e.ctor)return t;var r=u(e._0,b),n=r;for(e=e._1;"[]"!==e.ctor;)n._1=u(e._0,b),e=e._1,n=n._1;return n._1=t,r}function f(e,t){return function(r){throw new Error("Ran into a `Debug.crash` in module `"+e+"` "+d(t)+"\nThe message provided by the code author is:\n\n    "+r)}}function l(e,t,r){return function(n){throw new Error("Ran into a `Debug.crash` in module `"+e+"`\n\nThis was caused by the `case` expression "+d(t)+".\nOne of the branches ended with a crash and the following value got through:\n\n    "+_(r)+"\n\nThe message provided by the code author is:\n\n    "+n)}}function d(e){return e.start.line==e.end.line?"on line "+e.start.line:"between lines "+e.start.line+" and "+e.end.line}function _(e){var t=typeof e;if("function"===t){var r=e.func?e.func.name:e.name;return"<function"+(""===r?"":":")+r+">"}if("boolean"===t)return e?"True":"False";if("number"===t)return e+"";if(e instanceof String)return"'"+h(e,!0)+"'";if("string"===t)return'"'+h(e,!1)+'"';if(null===e)return"null";if("object"===t&&"ctor"in e){var n=e.ctor.substring(0,5);if("_Tupl"===n){var o=[];for(var i in e)"ctor"!==i&&o.push(_(e[i]));return"("+o.join(",")+")"}if("_Task"===n)return"<task>";if("_Array"===e.ctor){var a=Oe(e);return"Array.fromList "+_(a)}if("<decoder>"===e.ctor)return"<decoder>";if("_Process"===e.ctor)return"<process:"+e.id+">";if("::"===e.ctor){var o="["+_(e._0);for(e=e._1;"::"===e.ctor;)o+=","+_(e._0),e=e._1;return o+"]"}if("[]"===e.ctor)return"[]";if("RBNode_elm_builtin"===e.ctor||"RBEmpty_elm_builtin"===e.ctor||"Set_elm_builtin"===e.ctor){var r,a;return"Set_elm_builtin"===e.ctor?(r="Set",a=s(ne,function(e){return e._0},ze(e._0))):(r="Dict",a=ze(e)),r+".fromList "+_(a)}var o="";for(var u in e)if("ctor"!==u){var c=_(e[u]),f=c[0],l="{"===f||"("===f||"<"===f||'"'===f||c.indexOf(" ")<0;o+=" "+(l?c:"("+c+")")}return e.ctor+o}if("object"===t){var o=[];for(var i in e)o.push(i+" = "+_(e[i]));return 0===o.length?"{}":"{ "+o.join(", ")+" }"}return"<internal structure>"}function h(e,t){var r=e.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return t?r.replace(/\'/g,"\\'"):r.replace(/\"/g,'\\"')}var p=-1,v=0,m=1,g={ctor:"_Tuple0"},y=0,b={ctor:"[]"};return{eq:e,cmp:r,Tuple0:g,Tuple2:n,chr:o,update:a,guid:i,append:t(c),crash:f,crashCase:l,toString:_}}(),m=(t(function(e,t){var r=t;return s(e,r._0,r._1)}),r(function(e,t,r){return e({ctor:"_Tuple2",_0:t,_1:r})}),r(function(e,t,r){return s(e,r,t)})),g=function(e){var t=e;return t._1},y=function(e){var t=e;return t._0},b=t(function(e,t){return e}),w=function(e){return e},A=A||{};A["<|"]=t(function(e,t){return e(t)});var A=A||{};A["|>"]=t(function(e,t){return t(e)});var A=A||{};A[">>"]=r(function(e,t,r){return t(e(r))});var A=A||{};A["<<"]=r(function(e,t,r){return e(t(r))});var A=A||{};A["++"]=v.append;var k=v.toString,S=(p.isInfinite,p.isNaN,p.toFloat),E=(p.ceiling,p.floor),T=(p.truncate,p.round,p.not),A=(p.xor,A||{});A["||"]=p.or;var A=A||{};A["&&"]=p.and;var x=p.max,R=p.min,O=p.compare,A=A||{};A[">="]=p.ge;var A=A||{};A["<="]=p.le;var A=A||{};A[">"]=p.gt;var A=A||{};A["<"]=p.lt;var A=A||{};A["/="]=p.neq;var A=A||{};A["=="]=p.eq;var q=(p.e,p.pi,p.clamp),N=(p.logBase,p.abs),I=p.negate,A=(p.sqrt,p.atan2,p.atan,p.asin,p.acos,p.tan,p.sin,p.cos,A||{});A["^"]=p.exp;var A=A||{};A["%"]=p.mod;var A=(p.rem,A||{});A["//"]=p.div;var A=A||{};A["/"]=p.floatDiv;var A=A||{};A["*"]=p.mul;var A=A||{};A["-"]=p.sub;var A=A||{};A["+"]=p.add;var C=(p.toPolar,p.fromPolar,p.turns,p.degrees,function(){function e(e,t){var r=e+": "+v.toString(t),n=n||{};return n.stdout?n.stdout.write(r):console.log(r),t}function r(e){throw new Error(e)}return{crash:r,log:t(e)}}()),L=(C.crash,C.log,t(function(e,t){var r=t;return"Just"===r.ctor?r._0:e})),D={ctor:"Nothing"},B=function(e){for(;;){var t=e;if("[]"===t.ctor)return D;var r=t._0,n=r;{if("Nothing"!==n.ctor)return r;var o=t._1;e=o}}},j=t(function(e,t){var r=e;return"Just"===r.ctor?t(r._0):D}),M=function(e){return{ctor:"Just",_0:e}},F=t(function(e,t){var r=t;return"Just"===r.ctor?M(e(r._0)):D}),P=(r(function(e,t,r){var n={ctor:"_Tuple2",_0:t,_1:r};return"_Tuple2"===n.ctor&&"Just"===n._0.ctor&&"Just"===n._1.ctor?M(s(e,n._0._0,n._1._0)):D}),n(function(e,t,r,n){var o={ctor:"_Tuple3",_0:t,_1:r,_2:n};return"_Tuple3"===o.ctor&&"Just"===o._0.ctor&&"Just"===o._1.ctor&&"Just"===o._2.ctor?M(f(e,o._0._0,o._1._0,o._2._0)):D}),o(function(e,t,r,n,o){var i={ctor:"_Tuple4",_0:t,_1:r,_2:n,_3:o};return"_Tuple4"===i.ctor&&"Just"===i._0.ctor&&"Just"===i._1.ctor&&"Just"===i._2.ctor&&"Just"===i._3.ctor?M(l(e,i._0._0,i._1._0,i._2._0,i._3._0)):D}),i(function(e,t,r,n,o,i){var a={ctor:"_Tuple5",_0:t,_1:r,_2:n,_3:o,_4:i};return"_Tuple5"===a.ctor&&"Just"===a._0.ctor&&"Just"===a._1.ctor&&"Just"===a._2.ctor&&"Just"===a._3.ctor&&"Just"===a._4.ctor?M(d(e,a._0._0,a._1._0,a._2._0,a._3._0,a._4._0)):D}),function(){function e(e,t){return{ctor:"::",_0:e,_1:t}}function a(t){for(var r=w,n=t.length;n--;)r=e(t[n],r);return r}function u(e){for(var t=[];"[]"!==e.ctor;)t.push(e._0),e=e._1;return t}function c(t,r){var n=w;if(r>=t)do n=e(r,n);while(r-- >t);return n}function _(e,t,r){for(var n=u(r),o=t,i=n.length;i--;)o=s(e,n[i],o);return o}function h(e,t,r){for(var n=[];"[]"!==t.ctor&&"[]"!==r.ctor;)n.push(s(e,t._0,r._0)),t=t._1,r=r._1;return a(n)}function p(e,t,r,n){for(var o=[];"[]"!==t.ctor&&"[]"!==r.ctor&&"[]"!==n.ctor;)o.push(f(e,t._0,r._0,n._0)),t=t._1,r=r._1,n=n._1;return a(o)}function m(e,t,r,n,o){for(var i=[];"[]"!==t.ctor&&"[]"!==r.ctor&&"[]"!==n.ctor&&"[]"!==o.ctor;)i.push(l(e,t._0,r._0,n._0,o._0)),t=t._1,r=r._1,n=n._1,o=o._1;return a(i)}function g(e,t,r,n,o,i){for(var u=[];"[]"!==t.ctor&&"[]"!==r.ctor&&"[]"!==n.ctor&&"[]"!==o.ctor&&"[]"!==i.ctor;)u.push(d(e,t._0,r._0,n._0,o._0,i._0)),t=t._1,r=r._1,n=n._1,o=o._1,i=i._1;return a(u)}function y(e,t){return a(u(t).sort(function(t,r){return v.cmp(e(t),e(r))}))}function b(e,t){return a(u(t).sort(function(t,r){var n=e(t)(r).ctor;return"EQ"===n?0:"LT"===n?-1:1}))}var w={ctor:"[]"};return{Nil:w,Cons:e,cons:t(e),toArray:u,fromArray:a,range:c,foldr:r(_),map2:r(h),map3:n(p),map4:o(m),map5:i(g),sortBy:t(y),sortWith:t(b)}}()),U=(P.sortWith,P.sortBy,t(function(e,t){for(;;){if(v.cmp(e,0)<1)return t;var r=t;if("[]"===r.ctor)return t;var n=e-1,o=r._1;e=n,t=o}})),J=P.map5,W=P.map4,H=P.map3,V=P.map2,z=t(function(e,t){for(;;){var r=t;if("[]"===r.ctor)return!1;if(e(r._0))return!0;var n=e,o=r._1;e=n,t=o}}),G=t(function(e,t){return T(s(z,function(t){return T(e(t))},t))}),K=P.foldr,$=r(function(e,t,r){for(;;){var n=r;if("[]"===n.ctor)return t;var o=e,i=s(e,n._0,t),a=n._1;e=o,t=i,r=a}}),Q=function(e){return f($,t(function(e,t){return t+1}),0,e)},X=t(function(e,t){return f(V,e,P.range(0,Q(t)-1),t)}),Y=t(function(e,t){return s(z,function(t){return v.eq(t,e)},t)}),Z=function(e){var t=e;return"[]"===t.ctor},ee=function(e){var t=e;return"::"===t.ctor?M(t._1):D},te=function(e){var t=e;return"::"===t.ctor?M(t._0):D},re=re||{};re["::"]=P.cons;var ne=t(function(e,r){return f(K,t(function(t,r){return s(re["::"],e(t),r)}),P.fromArray([]),r)}),oe=t(function(e,r){var n=t(function(t,r){
return e(t)?s(re["::"],t,r):r});return f(K,n,P.fromArray([]),r)}),ie=r(function(e,t,r){var n=e(t);return"Just"===n.ctor?s(re["::"],n._0,r):r}),ae=(t(function(e,t){return f(K,ie(e),P.fromArray([]),t)}),function(e){return f($,t(function(e,t){return s(re["::"],e,t)}),P.fromArray([]),e)}),ue=r(function(e,r,n){var o=t(function(t,r){var n=r;return"::"===n.ctor?s(re["::"],s(e,t,n._0),r):P.fromArray([])});return ae(f($,o,P.fromArray([r]),n))}),ce=t(function(e,r){var n=r;return"[]"===n.ctor?e:f(K,t(function(e,t){return s(re["::"],e,t)}),r,e)}),se=function(e){return f(K,ce,P.fromArray([]),e)},fe=t(function(e,t){return se(s(ne,e,t))}),le=(t(function(e,r){var n=t(function(t,r){var n=r,o=n._0,i=n._1;return e(t)?{ctor:"_Tuple2",_0:s(re["::"],t,o),_1:i}:{ctor:"_Tuple2",_0:o,_1:s(re["::"],t,i)}});return f(K,n,{ctor:"_Tuple2",_0:P.fromArray([]),_1:P.fromArray([])},r)}),function(e){var r=t(function(e,t){var r=e,n=t;return{ctor:"_Tuple2",_0:s(re["::"],r._0,n._0),_1:s(re["::"],r._1,n._1)}});return f(K,r,{ctor:"_Tuple2",_0:P.fromArray([]),_1:P.fromArray([])},e)}),de=t(function(e,r){var n=r;if("[]"===n.ctor)return P.fromArray([]);var o=t(function(t,r){return s(re["::"],e,s(re["::"],t,r))}),i=f(K,o,P.fromArray([]),n._1);return s(re["::"],n._0,i)}),_e=t(function(e,t){if(v.cmp(e,0)<1)return P.fromArray([]);var r=t;return"[]"===r.ctor?t:s(re["::"],r._0,s(_e,e-1,r._1))}),he=r(function(e,t,r){for(;;){if(v.cmp(t,0)<1)return e;var n=s(re["::"],r,e),o=t-1,i=r;e=n,t=o,r=i}}),pe=(t(function(e,t){return f(he,P.fromArray([]),e,t)}),function(e){var t=e;return"Ok"===t.ctor?M(t._0):D}),ve=(t(function(e,t){var r=t;return"Ok"===r.ctor?r._0:e}),function(e){return{ctor:"Err",_0:e}}),me=(t(function(e,t){var r=e;return"Ok"===r.ctor?t(r._0):ve(r._0)}),function(e){return{ctor:"Ok",_0:e}}),ge=(t(function(e,t){var r=t;return"Ok"===r.ctor?me(e(r._0)):ve(r._0)}),r(function(e,t,r){var n={ctor:"_Tuple2",_0:t,_1:r};return"Ok"===n._0.ctor?"Ok"===n._1.ctor?me(s(e,n._0._0,n._1._0)):ve(n._1._0):ve(n._0._0)}),n(function(e,t,r,n){var o={ctor:"_Tuple3",_0:t,_1:r,_2:n};return"Ok"===o._0.ctor?"Ok"===o._1.ctor?"Ok"===o._2.ctor?me(f(e,o._0._0,o._1._0,o._2._0)):ve(o._2._0):ve(o._1._0):ve(o._0._0)}),o(function(e,t,r,n,o){var i={ctor:"_Tuple4",_0:t,_1:r,_2:n,_3:o};return"Ok"===i._0.ctor?"Ok"===i._1.ctor?"Ok"===i._2.ctor?"Ok"===i._3.ctor?me(l(e,i._0._0,i._1._0,i._2._0,i._3._0)):ve(i._3._0):ve(i._2._0):ve(i._1._0):ve(i._0._0)}),i(function(e,t,r,n,o,i){var a={ctor:"_Tuple5",_0:t,_1:r,_2:n,_3:o,_4:i};return"Ok"===a._0.ctor?"Ok"===a._1.ctor?"Ok"===a._2.ctor?"Ok"===a._3.ctor?"Ok"===a._4.ctor?me(d(e,a._0._0,a._1._0,a._2._0,a._3._0,a._4._0)):ve(a._4._0):ve(a._3._0):ve(a._2._0):ve(a._1._0):ve(a._0._0)}),t(function(e,t){var r=t;return"Ok"===r.ctor?me(r._0):ve(e(r._0))}),t(function(e,t){var r=t;return"Just"===r.ctor?me(r._0):ve(e)}),function(){function e(e,t,r){var o=r?i(t,r):n(t);e.worker=function(e){return o(void 0,e,!1)},e.embed=function(e,t){return o(e,t,!0)},e.fullscreen=function(e){return o(document.body,e,!0)}}function n(e){return function(t){var r="Cannot initialize module `"+e+"` because it has no `main` value!\nWhat should I show on screen?";throw t.innerHTML=o(r),new Error(r)}}function o(e){return'<div style="padding-left:1em;"><h2 style="font-weight:normal;"><b>Oops!</b> Something went wrong when starting your Elm program.</h2><pre style="padding-left:1em;">'+e+"</pre></div>"}function i(e,t){return function(r,n,i){try{var c=u(e,t);return i||(c.renderer=a),_(e,c,r,n)}catch(s){throw r.innerHTML=o(s.message),s}}}function a(){return{update:function(){}}}function u(e,r){var n=r.main;if("undefined"==typeof n.init){var o=w(P.Nil),i=v.Tuple2(v.Tuple0,o);return Gn({init:function(){return i},view:function(){return n},update:t(function(){return i}),subscriptions:function(){return o}})}var a=r.flags,u=a?d(e,n.init,a):c(e,n.init);return Gn({init:u,view:n.view,update:n.update,subscriptions:n.subscriptions})}function c(e,t){return function(r){if("undefined"!=typeof r)throw new Error("You are giving module `"+e+"` an argument in JavaScript.\nThis module does not take arguments though! You probably need to change the\ninitialization code to something like `Elm."+e+".fullscreen()`");return t()}}function d(e,t,r){return function(n){var o=s(Bt.run,r,n);if("Err"===o.ctor)throw new Error("You are trying to initialize module `"+e+"` with an unexpected argument.\nWhen trying to convert it to a usable Elm value, I run into this problem:\n\n"+o._0);return t(o._0)}}function _(e,t,r,n){function o(e,t){return ye.nativeBinding(function(r){var n=s(c,e,t);t=n._0,a.update(l(t));var o=n._1,i=f(t);k(_,o,i),r(ye.succeed(t))})}function i(e){ye.rawSend(v,e)}var a,u=t.init,c=t.update,f=t.subscriptions,l=t.view,d=t.renderer,_={},p=ye.nativeBinding(function(e){var t=u(n),o=t._0;a=d(r,i,l(o));var c=t._1,s=f(o);k(_,c,s),e(ye.succeed(o))}),v=y(p,o),m=h(_,i);return m?{ports:m}:{}}function h(e,t){var r;for(var n in I){var o=I[n];o.isForeign&&(r=r||{},r[n]="cmd"===o.tag?O(n):N(n,t)),e[n]=p(o,t)}return r}function p(e,t){function r(e,t){if("self"===e.ctor)return f(a,n,e._0,t);var r=e._0;switch(o){case"cmd":return f(i,n,r.cmds,t);case"sub":return f(i,n,r.subs,t);case"fx":return l(i,n,r.cmds,r.subs,t)}}var n={main:t,self:void 0},o=e.tag,i=e.onEffects,a=e.onSelfMsg,u=y(e.init,r);return n.self=u,u}function m(e,t){return ye.nativeBinding(function(r){e.main(t),r(ye.succeed(v.Tuple0))})}function g(e,t){return s(ye.send,e.self,{ctor:"self",_0:t})}function y(e,t){function r(e){var o=ye.receive(function(r){return t(r,e)});return s(n,o,r)}var n=ye.andThen,o=s(n,e,r);return ye.rawSpawn(o)}function b(e){return function(t){return{type:"leaf",home:e,value:t}}}function w(e){return{type:"node",branches:e}}function A(e,t){return{type:"map",tagger:e,tree:t}}function k(e,t,r){var n={};S(!0,t,n,null),S(!1,r,n,null);for(var o in e){var i=o in n?n[o]:{cmds:P.Nil,subs:P.Nil};ye.rawSend(e[o],{ctor:"fx",_0:i})}}function S(e,t,r,n){switch(t.type){case"leaf":var o=t.home,i=E(e,o,n,t.value);return void(r[o]=T(e,i,r[o]));case"node":for(var a=t.branches;"[]"!==a.ctor;)S(e,a._0,r,n),a=a._1;return;case"map":return void S(e,t.tree,r,{tagger:t.tagger,rest:n})}}function E(e,t,r,n){function o(e){for(;r;)e=r.tagger(e),r=r.rest;return e}var i=e?I[t].cmdMap:I[t].subMap;return s(i,o,n)}function T(e,t,r){return r=r||{cmds:P.Nil,subs:P.Nil},e?(r.cmds=P.Cons(t,r.cmds),r):(r.subs=P.Cons(t,r.subs),r)}function x(e){if(e in I)throw new Error("There can only be one port named `"+e+"`, but your program has multiple.")}function R(e,t){return x(e),I[e]={tag:"cmd",cmdMap:C,converter:t,isForeign:!0},b(e)}function O(e){function t(e,t,r){for(;"[]"!==t.ctor;){for(var n=a(t._0),o=0;o<i.length;o++)i[o](n);t=t._1}return u}function n(e){i.push(e)}function o(e){var t=i.indexOf(e);t>=0&&i.splice(t,1)}var i=[],a=I[e].converter,u=ye.succeed(null);return I[e].init=u,I[e].onEffects=r(t),{subscribe:n,unsubscribe:o}}function q(e,t){return x(e),I[e]={tag:"sub",subMap:L,converter:t,isForeign:!0},b(e)}function N(e,t){function n(e,t,r){return i=t,u}function o(r){var n=s(Jt,a,r);if("Err"===n.ctor)throw new Error("Trying to send an unexpected type of value through port `"+e+"`:\n"+n._0);for(var r=n._0,o=i;"[]"!==o.ctor;)t(o._0(r)),o=o._1}var i=P.Nil,a=I[e].converter,u=ye.succeed(null);return I[e].init=u,I[e].onEffects=r(n),{send:o}}var I={},C=t(function(e,t){return t}),L=t(function(e,t){return function(r){return e(t(r))}});return{sendToApp:t(m),sendToSelf:t(g),mainToProgram:u,effectManagers:I,outgoingPort:R,incomingPort:q,addPublicModule:e,leaf:b,batch:w,map:t(A)}}()),ye=function(){function e(e){return{ctor:"_Task_succeed",value:e}}function r(e){return{ctor:"_Task_fail",value:e}}function n(e){return{ctor:"_Task_nativeBinding",callback:e,cancel:null}}function o(e,t){return{ctor:"_Task_andThen",task:e,callback:t}}function i(e,t){return{ctor:"_Task_onError",task:e,callback:t}}function a(e){return{ctor:"_Task_receive",callback:e}}function u(e){var t={ctor:"_Process",id:v.guid(),root:e,stack:null,mailbox:[]};return h(t),t}function c(t){return n(function(r){var n=u(t);r(e(n))})}function s(e,t){e.mailbox.push(t),h(e)}function f(t,r){return n(function(n){s(t,r),n(e(v.Tuple0))})}function l(t){return n(function(r){var n=t.root;"_Task_nativeBinding"===n.ctor&&n.cancel&&n.cancel(),t.root=null,r(e(v.Tuple0))})}function d(t){return n(function(r){var n=setTimeout(function(){r(e(v.Tuple0))},t);return function(){clearTimeout(n)}})}function _(e,t){for(;m>e;){var r=t.root.ctor;if("_Task_succeed"!==r)if("_Task_fail"!==r)if("_Task_andThen"!==r)if("_Task_onError"!==r){if("_Task_nativeBinding"===r){t.root.cancel=t.root.callback(function(e){t.root=e,h(t)});break}if("_Task_receive"!==r)throw new Error(r);var n=t.mailbox;if(0===n.length)break;t.root=t.root.callback(n.shift()),++e}else t.stack={ctor:"_Task_onError",callback:t.root.callback,rest:t.stack},t.root=t.root.task,++e;else t.stack={ctor:"_Task_andThen",callback:t.root.callback,rest:t.stack},t.root=t.root.task,++e;else{for(;t.stack&&"_Task_andThen"===t.stack.ctor;)t.stack=t.stack.rest;if(null===t.stack)break;t.root=t.stack.callback(t.root.value),t.stack=t.stack.rest,++e}else{for(;t.stack&&"_Task_onError"===t.stack.ctor;)t.stack=t.stack.rest;if(null===t.stack)break;t.root=t.stack.callback(t.root.value),t.stack=t.stack.rest,++e}}return m>e?e+1:(h(t),e)}function h(e){y.push(e),g||(setTimeout(p,0),g=!0)}function p(){for(var e,t=0;m>t&&(e=y.shift());)t=_(t,e);return e?void setTimeout(p,0):void(g=!1)}var m=1e4,g=!1,y=[];return{succeed:e,fail:r,nativeBinding:n,andThen:t(o),onError:t(i),receive:a,spawn:c,kill:l,sleep:d,send:t(f),rawSpawn:u,rawSend:s}}(),be=(ye.succeed,ge.sendToSelf),we=ge.sendToApp,Ae=ge.batch,ke=Ae(P.fromArray([])),Se=Se||{};Se["!"]=t(function(e,t){return{ctor:"_Tuple2",_0:e,_1:Ae(t)}});var Ee=ge.map,Te=ge.batch,xe=(Te(P.fromArray([])),ge.map),Re=function(){function e(e,t){if(0>e||e>=B(t))throw new Error("Index "+e+" is out of range. Check the length of your array first or use getMaybe or getWithDefault.");return n(e,t)}function n(e,t){for(var r=t.height;r>0;r--){for(var n=e>>5*r;t.lengths[n]<=e;)n++;n>0&&(e-=t.lengths[n-1]),t=t.table[n]}return t.table[e]}function o(e,t,r){return 0>e||B(r)<=e?r:i(e,t,r)}function i(e,t,r){if(r=D(r),0===r.height)r.table[e]=t;else{var n=j(e,r);n>0&&(e-=r.lengths[n-1]),r.table[n]=i(e,t,r.table[n])}return r}function a(e,t){if(0>=e)return K;var r=Math.floor(Math.log(e)/Math.log(z));return u(t,r,0,e)}function u(e,t,r,n){if(0===t){for(var o=new Array((n-r)%(z+1)),i=0;i<o.length;i++)o[i]=e(r+i);return{ctor:"_Array",height:0,table:o}}for(var a=Math.pow(z,t),o=new Array(Math.ceil((n-r)/a)),c=new Array(o.length),i=0;i<o.length;i++)o[i]=u(e,t-1,r+i*a,Math.min(r+(i+1)*a,n)),c[i]=B(o[i])+(i>0?c[i-1]:0);return{ctor:"_Array",height:t,table:o,lengths:c}}function c(e){if("[]"===e.ctor)return K;for(var t=new Array(z),r=[],n=0;"[]"!==e.ctor;)if(t[n]=e._0,e=e._1,n++,n===z){var o={ctor:"_Array",height:0,table:t};f(o,r),t=new Array(z),n=0}if(n>0){var o={ctor:"_Array",height:0,table:t.splice(0,n)};f(o,r)}for(var i=0;i<r.length-1;i++)r[i].table.length>0&&f(r[i],r);var a=r[r.length-1];return a.height>0&&1===a.table.length?a.table[0]:a}function f(e,t){var r=e.height;if(t.length===r){var n={ctor:"_Array",height:r+1,table:[],lengths:[]};t.push(n)}t[r].table.push(e);var o=B(e);t[r].lengths.length>0&&(o+=t[r].lengths[t[r].lengths.length-1]),t[r].lengths.push(o),t[r].table.length===z&&(f(t[r],t),t[r]={ctor:"_Array",height:r+1,table:[],lengths:[]})}function l(e,t){var r=d(e,t);if(null!==r)return r;var n=M(e,t.height);return U(t,n)}function d(e,t){if(0===t.height){if(t.table.length<z){var r={ctor:"_Array",height:0,table:t.table.slice()};return r.table.push(e),r}return null}var n=d(e,C(t));if(null!==n){var r=D(t);return r.table[r.table.length-1]=n,r.lengths[r.lengths.length-1]++,r}if(t.table.length<z){var o=M(e,t.height-1),r=D(t);return r.table.push(o),r.lengths.push(r.lengths[r.lengths.length-1]+B(o)),r}return null}function _(e){return h(P.Nil,e)}function h(e,t){for(var r=t.table.length-1;r>=0;r--)e=0===t.height?P.Cons(t.table[r],e):h(e,t.table[r]);return e}function p(e,t){var r={ctor:"_Array",height:t.height,table:new Array(t.table.length)};t.height>0&&(r.lengths=t.lengths);for(var n=0;n<t.table.length;n++)r.table[n]=0===t.height?e(t.table[n]):p(e,t.table[n]);return r}function v(e,t){return m(e,t,0)}function m(e,t,r){var n={ctor:"_Array",height:t.height,table:new Array(t.table.length)};t.height>0&&(n.lengths=t.lengths);for(var o=0;o<t.table.length;o++)n.table[o]=0===t.height?s(e,r+o,t.table[o]):m(e,t.table[o],0==o?r:r+t.lengths[o-1]);return n}function g(e,t,r){if(0===r.height)for(var n=0;n<r.table.length;n++)t=s(e,r.table[n],t);else for(var n=0;n<r.table.length;n++)t=g(e,t,r.table[n]);return t}function y(e,t,r){if(0===r.height)for(var n=r.table.length;n--;)t=s(e,r.table[n],t);else for(var n=r.table.length;n--;)t=y(e,t,r.table[n]);return t}function b(e,t,r){return 0>e&&(e+=B(r)),0>t&&(t+=B(r)),A(e,w(t,r))}function w(e,t){if(e===B(t))return t;if(0===t.height){var r={ctor:"_Array",height:0};return r.table=t.table.slice(0,e),r}var n=j(e,t),o=w(e-(n>0?t.lengths[n-1]:0),t.table[n]);if(0===n)return o;var r={ctor:"_Array",height:t.height,table:t.table.slice(0,n),lengths:t.lengths.slice(0,n)};return o.table.length>0&&(r.table[n]=o,r.lengths[n]=B(o)+(n>0?r.lengths[n-1]:0)),r}function A(e,t){if(0===e)return t;if(0===t.height){var r={ctor:"_Array",height:0};return r.table=t.table.slice(e,t.table.length+1),r}var n=j(e,t),o=A(e-(n>0?t.lengths[n-1]:0),t.table[n]);if(n===t.table.length-1)return o;var r={ctor:"_Array",height:t.height,table:t.table.slice(n,t.table.length+1),lengths:new Array(t.table.length-n)};r.table[0]=o;for(var i=0,a=0;a<r.table.length;a++)i+=B(r.table[a]),r.lengths[a]=i;return r}function k(e,t){if(0===e.table.length)return t;if(0===t.table.length)return e;var r=S(e,t);if(r[0].table.length+r[1].table.length<=z){if(0===r[0].table.length)return r[1];if(0===r[1].table.length)return r[0];if(r[0].table=r[0].table.concat(r[1].table),r[0].height>0){for(var n=B(r[0]),o=0;o<r[1].lengths.length;o++)r[1].lengths[o]+=n;r[0].lengths=r[0].lengths.concat(r[1].lengths)}return r[0]}if(r[0].height>0){var i=x(e,t);i>G&&(r=I(r[0],r[1],i))}return U(r[0],r[1])}function S(e,t){if(0===e.height&&0===t.height)return[e,t];if(1!==e.height||1!==t.height)if(e.height===t.height){e=D(e),t=D(t);var r=S(C(e),L(t));E(e,r[1]),T(t,r[0])}else if(e.height>t.height){e=D(e);var r=S(C(e),t);E(e,r[0]),t=F(r[1],r[1].height+1)}else{t=D(t);var r=S(e,L(t)),n=0===r[0].table.length?0:1,o=0===n?1:0;T(t,r[n]),e=F(r[o],r[o].height+1)}if(0===e.table.length||0===t.table.length)return[e,t];var i=x(e,t);return G>=i?[e,t]:I(e,t,i)}function E(e,t){var r=e.table.length-1;e.table[r]=t,e.lengths[r]=B(t),e.lengths[r]+=r>0?e.lengths[r-1]:0}function T(e,t){if(t.table.length>0){e.table[0]=t,e.lengths[0]=B(t);for(var r=B(e.table[0]),n=1;n<e.lengths.length;n++)r+=B(e.table[n]),e.lengths[n]=r}else{e.table.shift();for(var n=1;n<e.lengths.length;n++)e.lengths[n]=e.lengths[n]-e.lengths[0];e.lengths.shift()}}function x(e,t){for(var r=0,n=0;n<e.table.length;n++)r+=e.table[n].table.length;for(var n=0;n<t.table.length;n++)r+=t.table[n].table.length;var o=e.table.length+t.table.length;return o-(Math.floor((r-1)/z)+1)}function R(e,t,r){return r<e.length?e[r]:t[r-e.length]}function O(e,t,r,n){r<e.length?e[r]=n:t[r-e.length]=n}function q(e,t,r,n){O(e.table,t.table,r,n);var o=0===r||r===e.lengths.length?0:R(e.lengths,e.lengths,r-1);O(e.lengths,t.lengths,r,o+B(n))}function N(e,t){0>t&&(t=0);var r={ctor:"_Array",height:e,table:new Array(t)};return e>0&&(r.lengths=new Array(t)),r}function I(e,t,r){for(var n=N(e.height,Math.min(z,e.table.length+t.table.length-r)),o=N(e.height,n.table.length-(e.table.length+t.table.length-r)),i=0;R(e.table,t.table,i).table.length%z===0;)O(n.table,o.table,i,R(e.table,t.table,i)),O(n.lengths,o.lengths,i,R(e.lengths,t.lengths,i)),i++;for(var a=i,u=new N(e.height-1,0),c=0;i-a-(u.table.length>0?1:0)<r;){var s=R(e.table,t.table,i),f=Math.min(z-u.table.length,s.table.length);if(u.table=u.table.concat(s.table.slice(c,f)),u.height>0)for(var l=u.lengths.length,d=l;l+f-c>d;d++)u.lengths[d]=B(u.table[d]),u.lengths[d]+=d>0?u.lengths[d-1]:0;c+=f,s.table.length<=f&&(i++,c=0),u.table.length===z&&(q(n,o,a,u),u=N(e.height-1,0),a++)}for(u.table.length>0&&(q(n,o,a,u),a++);i<e.table.length+t.table.length;)q(n,o,a,R(e.table,t.table,i)),i++,a++;return[n,o]}function C(e){return e.table[e.table.length-1]}function L(e){return e.table[0]}function D(e){var t={ctor:"_Array",height:e.height,table:e.table.slice()};return e.height>0&&(t.lengths=e.lengths.slice()),t}function B(e){return 0===e.height?e.table.length:e.lengths[e.lengths.length-1]}function j(e,t){for(var r=e>>5*t.height;t.lengths[r]<=e;)r++;return r}function M(e,t){return 0===t?{ctor:"_Array",height:0,table:[e]}:{ctor:"_Array",height:t,table:[M(e,t-1)],lengths:[1]}}function F(e,t){return t===e.height?e:{ctor:"_Array",height:t,table:[F(e,t-1)],lengths:[B(e)]}}function U(e,t){return{ctor:"_Array",height:e.height+1,table:[e,t],lengths:[B(e),B(e)+B(t)]}}function J(e){var t=new Array(B(e));return W(t,0,e),t}function W(e,t,r){for(var n=0;n<r.table.length;n++)if(0===r.height)e[t+n]=r.table[n];else{var o=0===n?0:r.lengths[n-1];W(e,t+o,r.table[n])}}function H(e){if(0===e.length)return K;var t=Math.floor(Math.log(e.length)/Math.log(z));return V(e,t,0,e.length)}function V(e,t,r,n){if(0===t)return{ctor:"_Array",height:0,table:e.slice(r,n)};for(var o=Math.pow(z,t),i=new Array(Math.ceil((n-r)/o)),a=new Array(i.length),u=0;u<i.length;u++)i[u]=V(e,t-1,r+u*o,Math.min(r+(u+1)*o,n)),a[u]=B(i[u])+(u>0?a[u-1]:0);return{ctor:"_Array",height:t,table:i,lengths:a}}var z=32,G=2,K={ctor:"_Array",height:0,table:[]};return{empty:K,fromList:c,toList:_,initialize:t(a),append:t(k),push:t(l),slice:r(b),get:t(e),set:r(o),map:t(p),indexedMap:t(v),foldl:r(g),foldr:r(y),length:B,toJSArray:J,fromJSArray:H}}(),Oe=(Re.append,Re.length,Re.slice,Re.set,t(function(e,t){return v.cmp(0,e)<1&&v.cmp(e,Re.length(t))<0?M(s(Re.get,e,t)):D}),Re.push,Re.empty,t(function(e,r){var n=t(function(t,r){return e(t)?s(Re.push,t,r):r});return f(Re.foldl,n,Re.empty,r)}),Re.foldr,Re.foldl,Re.indexedMap,Re.map,Re.toList),qe=(Re.fromList,Re.initialize),Ne=(t(function(e,t){return s(qe,e,b(t))}),function(){function e(e){return 0===e.length}function n(e,t){return e+t}function o(e){var t=e[0];return t?M(v.Tuple2(v.chr(t),e.slice(1))):D}function i(e,t){return e+t}function a(e){return P.toArray(e).join("")}function u(e){return e.length}function c(e,t){for(var r=t.split(""),n=r.length;n--;)r[n]=e(v.chr(r[n]));return r.join("")}function f(e,t){return t.split("").map(v.chr).filter(e).join("")}function l(e){return e.split("").reverse().join("")}function d(e,t,r){for(var n=r.length,o=0;n>o;++o)t=s(e,v.chr(r[o]),t);return t}function _(e,t,r){for(var n=r.length;n--;)t=s(e,v.chr(r[n]),t);return t}function h(e,t){return P.fromArray(t.split(e))}function p(e,t){return P.toArray(t).join(e)}function m(e,t){for(var r="";e>0;)1&e&&(r+=t),e>>=1,t+=t;return r}function g(e,t,r){return r.slice(e,t)}function y(e,t){return 1>e?"":t.slice(0,e)}function b(e,t){return 1>e?"":t.slice(-e)}function w(e,t){return 1>e?t:t.slice(e)}function A(e,t){return 1>e?t:t.slice(0,-e)}function k(e,t,r){var n=(e-r.length)/2;return m(Math.ceil(n),t)+r+m(0|n,t)}function S(e,t,r){return r+m(e-r.length,t)}function E(e,t,r){return m(e-r.length,t)+r}function T(e){return e.trim()}function x(e){return e.replace(/^\s+/,"")}function R(e){return e.replace(/\s+$/,"")}function O(e){return P.fromArray(e.trim().split(/\s+/g))}function q(e){return P.fromArray(e.split(/\r\n|\r|\n/g))}function N(e){return e.toUpperCase()}function I(e){return e.toLowerCase()}function C(e,t){for(var r=t.length;r--;)if(e(v.chr(t[r])))return!0;return!1}function L(e,t){for(var r=t.length;r--;)if(!e(v.chr(t[r])))return!1;return!0}function B(e,t){return t.indexOf(e)>-1}function j(e,t){return 0===t.indexOf(e)}function F(e,t){return t.length>=e.length&&t.lastIndexOf(e)===t.length-e.length}function U(e,t){for(var r=e.length,n=0,o=[];(n=t.indexOf(e,n))>-1;)o.push(n),n+=r;return P.fromArray(o)}function J(e){var t=e.length;if(0===t)return ve("could not convert string '"+e+"' to an Int");var r=0;if("-"===e[0]){if(1===t)return ve("could not convert string '"+e+"' to an Int");r=1}for(var n=r;t>n;++n){var o=e[n];if("0">o||o>"9")return ve("could not convert string '"+e+"' to an Int")}return me(parseInt(e,10))}function W(e){var t=e.length;if(0===t)return ve("could not convert string '"+e+"' to a Float");var r=0;if("-"===e[0]){if(1===t)return ve("could not convert string '"+e+"' to a Float");r=1}for(var n=0,o=r;t>o;++o){var i=e[o];if(!(i>="0"&&"9">=i||"."===i&&(n+=1,1>=n)))return ve("could not convert string '"+e+"' to a Float")}return me(parseFloat(e))}function H(e){return P.fromArray(e.split("").map(v.chr))}function V(e){return P.toArray(e).join("")}return{isEmpty:e,cons:t(n),uncons:o,append:t(i),concat:a,length:u,map:t(c),filter:t(f),reverse:l,foldl:r(d),foldr:r(_),split:t(h),join:t(p),repeat:t(m),slice:r(g),left:t(y),right:t(b),dropLeft:t(w),dropRight:t(A),pad:r(k),padLeft:r(E),padRight:r(S),trim:T,trimLeft:x,trimRight:R,words:O,lines:q,toUpper:N,toLower:I,any:t(C),all:t(L),contains:t(B),startsWith:t(j),endsWith:t(F),indexes:t(U),toInt:J,toFloat:W,toList:H,fromList:V}}()),Ie=function(){return{fromCode:function(e){return v.chr(String.fromCharCode(e))},toCode:function(e){return e.charCodeAt(0)},toUpper:function(e){return v.chr(e.toUpperCase())},toLower:function(e){return v.chr(e.toLowerCase())},toLocaleUpper:function(e){return v.chr(e.toLocaleUpperCase())},toLocaleLower:function(e){return v.chr(e.toLocaleLowerCase())}}}(),Ce=(Ie.fromCode,Ie.toCode),Le=(Ie.toLocaleLower,Ie.toLocaleUpper,Ie.toLower,Ie.toUpper,r(function(e,t,r){var n=Ce(r);return v.cmp(n,Ce(e))>-1&&v.cmp(n,Ce(t))<1})),De=(s(Le,v.chr("A"),v.chr("Z")),s(Le,v.chr("a"),v.chr("z")),s(Le,v.chr("0"),v.chr("9")),s(Le,v.chr("0"),v.chr("7")),Ne.fromList,Ne.toList,Ne.toFloat,Ne.toInt,Ne.indexes,Ne.indexes,Ne.endsWith,Ne.startsWith,Ne.contains,Ne.all,Ne.any,Ne.toLower,Ne.toUpper),Be=(Ne.lines,Ne.words,Ne.trimRight,Ne.trimLeft,Ne.trim),je=(Ne.padRight,Ne.padLeft),Me=(Ne.pad,Ne.dropRight,Ne.dropLeft,Ne.right,Ne.left,Ne.slice),Fe=(Ne.repeat,Ne.join),Pe=Ne.split,Ue=(Ne.foldr,Ne.foldl,Ne.reverse,Ne.filter,Ne.map,Ne.length),Je=Ne.concat,We=(Ne.append,Ne.uncons,Ne.cons,Ne.isEmpty),He=r(function(e,t,r){for(;;){var n=r;if("RBEmpty_elm_builtin"===n.ctor)return t;var o=e,i=f(e,n._1,n._2,f(He,e,t,n._4)),a=n._3;e=o,t=i,r=a}}),Ve=function(e){return f(He,r(function(e,t,r){return s(re["::"],e,r)}),P.fromArray([]),e)},ze=function(e){return f(He,r(function(e,t,r){return s(re["::"],{ctor:"_Tuple2",_0:e,_1:t},r)}),P.fromArray([]),e)},Ge=r(function(e,t,r){for(;;){var n=r;if("RBEmpty_elm_builtin"===n.ctor)return t;var o=e,i=f(e,n._1,n._2,f(Ge,e,t,n._3)),a=n._4;e=o,t=i,r=a}}),Ke=i(function(e,n,o,i,a,u){var c=r(function(t,r,i){var a=i,u=a._1,c=a._0,s=c;if("[]"===s.ctor)return{ctor:"_Tuple2",_0:c,_1:f(o,t,r,u)};var d=s._1,_=s._0._1,h=s._0._0;return v.cmp(h,t)<0?{ctor:"_Tuple2",_0:d,_1:f(e,h,_,u)}:v.cmp(h,t)>0?{ctor:"_Tuple2",_0:c,_1:f(o,t,r,u)}:{ctor:"_Tuple2",_0:d,_1:l(n,h,_,r,u)}}),s=f(Ge,c,{ctor:"_Tuple2",_0:ze(i),_1:u},a),d=s._0,_=s._1;return f($,t(function(t,r){var n=t;return f(e,n._0,n._1,r)}),_,d)}),$e=n(function(e,t,r,n){return C.crash(Je(P.fromArray(["Internal red-black tree invariant violated, expected ",e," and got ",k(t),"/",r,"/",n,"\nPlease report this bug to <https://github.com/elm-lang/core/issues>"])))}),Qe=function(e){var t=e;e:do{if("RBNode_elm_builtin"===t.ctor){if("BBlack"===t._0.ctor)return!0;break e}if("LBBlack"===t._0.ctor)return!0;break e}while(!1);return!1},Xe=t(function(e,t){for(;;){var r=t;if("RBEmpty_elm_builtin"===r.ctor)return e;var n=s(Xe,e+1,r._4),o=r._3;e=n,t=o}}),Ye=t(function(e,t){e:for(;;){var r=t;if("RBEmpty_elm_builtin"===r.ctor)return D;var n=s(O,e,r._1);switch(n.ctor){case"LT":var o=e,i=r._3;e=o,t=i;continue e;case"EQ":return M(r._2);default:var a=e,u=r._4;e=a,t=u;continue e}}}),Ze=t(function(e,t){var r=s(Ye,e,t);return"Just"===r.ctor}),et=r(function(e,t,r){for(;;){var n=r;if("RBEmpty_elm_builtin"===n.ctor)return{ctor:"_Tuple2",_0:e,_1:t};var o=n._1,i=n._2,a=n._4;e=o,t=i,r=a}}),tt={ctor:"NBlack"},rt={ctor:"BBlack"},nt={ctor:"Black"},ot=function(e){var t=e;if("RBNode_elm_builtin"===t.ctor){var r=t._0;return v.eq(r,nt)||v.eq(r,rt)}return!0},it={ctor:"Red"},at=function(e){var t=e;switch(t.ctor){case"Black":return rt;case"Red":return nt;case"NBlack":return it;default:return C.crash("Can't make a double black node more black!")}},ut=function(e){var t=e;switch(t.ctor){case"BBlack":return nt;case"Black":return it;case"Red":return tt;default:return C.crash("Can't make a negative black node less black!")}},ct={ctor:"LBBlack"},st={ctor:"LBlack"},ft=function(e){return{ctor:"RBEmpty_elm_builtin",_0:e}},lt=ft(st),dt=o(function(e,t,r,n,o){return{ctor:"RBNode_elm_builtin",_0:e,_1:t,_2:r,_3:n,_4:o}}),_t=function(e){var t=e;return"RBNode_elm_builtin"===t.ctor&&"Red"===t._0.ctor?d(dt,nt,t._1,t._2,t._3,t._4):e},ht=function(e){var t=e;return"RBNode_elm_builtin"===t.ctor?d(dt,ut(t._0),t._1,t._2,t._3,t._4):ft(st)},pt=function(e){return function(t){return function(r){return function(n){return function(o){return function(i){return function(a){return function(u){return function(c){return function(s){return function(f){return d(dt,ut(e),n,o,d(dt,nt,t,r,u,c),d(dt,nt,i,a,s,f))}}}}}}}}}}},vt=function(e){var t=e;return"RBEmpty_elm_builtin"===t.ctor?ft(st):d(dt,nt,t._1,t._2,t._3,t._4)},mt=function(e){var t=e;return"RBEmpty_elm_builtin"===t.ctor?C.crash("can't make a Leaf red"):d(dt,it,t._1,t._2,t._3,t._4)},gt=function(e){var t=e;e:do{t:do{r:do{n:do{o:do{i:do{a:do{if("RBNode_elm_builtin"!==t.ctor)break e;if("RBNode_elm_builtin"===t._3.ctor)if("RBNode_elm_builtin"===t._4.ctor)switch(t._3._0.ctor){case"Red":switch(t._4._0.ctor){case"Red":if("RBNode_elm_builtin"===t._3._3.ctor&&"Red"===t._3._3._0.ctor)break a;if("RBNode_elm_builtin"===t._3._4.ctor&&"Red"===t._3._4._0.ctor)break i;if("RBNode_elm_builtin"===t._4._3.ctor&&"Red"===t._4._3._0.ctor)break o;if("RBNode_elm_builtin"===t._4._4.ctor&&"Red"===t._4._4._0.ctor)break n;break e;case"NBlack":if("RBNode_elm_builtin"===t._3._3.ctor&&"Red"===t._3._3._0.ctor)break a;if("RBNode_elm_builtin"===t._3._4.ctor&&"Red"===t._3._4._0.ctor)break i;if("BBlack"===t._0.ctor&&"RBNode_elm_builtin"===t._4._3.ctor&&"Black"===t._4._3._0.ctor&&"RBNode_elm_builtin"===t._4._4.ctor&&"Black"===t._4._4._0.ctor)break r;break e;default:if("RBNode_elm_builtin"===t._3._3.ctor&&"Red"===t._3._3._0.ctor)break a;if("RBNode_elm_builtin"===t._3._4.ctor&&"Red"===t._3._4._0.ctor)break i;break e}case"NBlack":switch(t._4._0.ctor){case"Red":if("RBNode_elm_builtin"===t._4._3.ctor&&"Red"===t._4._3._0.ctor)break o;if("RBNode_elm_builtin"===t._4._4.ctor&&"Red"===t._4._4._0.ctor)break n;if("BBlack"===t._0.ctor&&"RBNode_elm_builtin"===t._3._3.ctor&&"Black"===t._3._3._0.ctor&&"RBNode_elm_builtin"===t._3._4.ctor&&"Black"===t._3._4._0.ctor)break t;break e;case"NBlack":if("BBlack"===t._0.ctor){if("RBNode_elm_builtin"===t._4._3.ctor&&"Black"===t._4._3._0.ctor&&"RBNode_elm_builtin"===t._4._4.ctor&&"Black"===t._4._4._0.ctor)break r;if("RBNode_elm_builtin"===t._3._3.ctor&&"Black"===t._3._3._0.ctor&&"RBNode_elm_builtin"===t._3._4.ctor&&"Black"===t._3._4._0.ctor)break t;break e}break e;default:if("BBlack"===t._0.ctor&&"RBNode_elm_builtin"===t._3._3.ctor&&"Black"===t._3._3._0.ctor&&"RBNode_elm_builtin"===t._3._4.ctor&&"Black"===t._3._4._0.ctor)break t;break e}default:switch(t._4._0.ctor){case"Red":if("RBNode_elm_builtin"===t._4._3.ctor&&"Red"===t._4._3._0.ctor)break o;if("RBNode_elm_builtin"===t._4._4.ctor&&"Red"===t._4._4._0.ctor)break n;break e;case"NBlack":if("BBlack"===t._0.ctor&&"RBNode_elm_builtin"===t._4._3.ctor&&"Black"===t._4._3._0.ctor&&"RBNode_elm_builtin"===t._4._4.ctor&&"Black"===t._4._4._0.ctor)break r;break e;default:break e}}else switch(t._3._0.ctor){case"Red":if("RBNode_elm_builtin"===t._3._3.ctor&&"Red"===t._3._3._0.ctor)break a;if("RBNode_elm_builtin"===t._3._4.ctor&&"Red"===t._3._4._0.ctor)break i;break e;case"NBlack":if("BBlack"===t._0.ctor&&"RBNode_elm_builtin"===t._3._3.ctor&&"Black"===t._3._3._0.ctor&&"RBNode_elm_builtin"===t._3._4.ctor&&"Black"===t._3._4._0.ctor)break t;break e;default:break e}else{if("RBNode_elm_builtin"!==t._4.ctor)break e;switch(t._4._0.ctor){case"Red":if("RBNode_elm_builtin"===t._4._3.ctor&&"Red"===t._4._3._0.ctor)break o;if("RBNode_elm_builtin"===t._4._4.ctor&&"Red"===t._4._4._0.ctor)break n;break e;case"NBlack":if("BBlack"===t._0.ctor&&"RBNode_elm_builtin"===t._4._3.ctor&&"Black"===t._4._3._0.ctor&&"RBNode_elm_builtin"===t._4._4.ctor&&"Black"===t._4._4._0.ctor)break r;break e;default:break e}}}while(!1);return pt(t._0)(t._3._3._1)(t._3._3._2)(t._3._1)(t._3._2)(t._1)(t._2)(t._3._3._3)(t._3._3._4)(t._3._4)(t._4)}while(!1);return pt(t._0)(t._3._1)(t._3._2)(t._3._4._1)(t._3._4._2)(t._1)(t._2)(t._3._3)(t._3._4._3)(t._3._4._4)(t._4)}while(!1);return pt(t._0)(t._1)(t._2)(t._4._3._1)(t._4._3._2)(t._4._1)(t._4._2)(t._3)(t._4._3._3)(t._4._3._4)(t._4._4)}while(!1);return pt(t._0)(t._1)(t._2)(t._4._1)(t._4._2)(t._4._4._1)(t._4._4._2)(t._3)(t._4._3)(t._4._4._3)(t._4._4._4)}while(!1);return d(dt,nt,t._4._3._1,t._4._3._2,d(dt,nt,t._1,t._2,t._3,t._4._3._3),d(yt,nt,t._4._1,t._4._2,t._4._3._4,mt(t._4._4)))}while(!1);return d(dt,nt,t._3._4._1,t._3._4._2,d(yt,nt,t._3._1,t._3._2,mt(t._3._3),t._3._4._3),d(dt,nt,t._1,t._2,t._3._4._4,t._4))}while(!1);return e},yt=o(function(e,t,r,n,o){var i=d(dt,e,t,r,n,o);return ot(i)?gt(i):i}),bt=o(function(e,t,r,n,o){return Qe(n)||Qe(o)?d(yt,at(e),t,r,ht(n),ht(o)):d(dt,e,t,r,n,o)}),wt=o(function(e,t,r,n,o){var i=o;return"RBEmpty_elm_builtin"===i.ctor?f(At,e,n,o):d(bt,e,t,r,n,d(wt,i._0,i._1,i._2,i._3,i._4))}),At=r(function(e,t,r){var n={ctor:"_Tuple2",_0:t,_1:r};if("RBEmpty_elm_builtin"!==n._0.ctor){if("RBEmpty_elm_builtin"===n._1.ctor){var o=n._1._0,i=n._0._0,a={ctor:"_Tuple3",_0:e,_1:i,_2:o};return"_Tuple3"===a.ctor&&"Black"===a._0.ctor&&"Red"===a._1.ctor&&"LBlack"===a._2.ctor?d(dt,nt,n._0._1,n._0._2,n._0._3,n._0._4):l($e,"Black/Red/LBlack",e,k(i),k(o))}var u=n._0._2,c=n._0._4,s=n._0._1,_=d(wt,n._0._0,s,u,n._0._3,c),h=f(et,s,u,c),p=h._0,v=h._1;return d(bt,e,p,v,_,r)}if("RBEmpty_elm_builtin"!==n._1.ctor){var m=n._1._0,g=n._0._0,y={ctor:"_Tuple3",_0:e,_1:g,_2:m};return"_Tuple3"===y.ctor&&"Black"===y._0.ctor&&"LBlack"===y._1.ctor&&"Red"===y._2.ctor?d(dt,nt,n._1._1,n._1._2,n._1._3,n._1._4):l($e,"Black/LBlack/Red",e,k(g),k(m))}var b=e;switch(b.ctor){case"Red":return ft(st);case"Black":return ft(ct);default:return C.crash("cannot have bblack or nblack nodes at this point")}}),kt=t(function(e,t){var r=t;if("RBEmpty_elm_builtin"===r.ctor)return ft(st);var n=r._1;return d(dt,r._0,n,s(e,n,r._2),s(kt,e,r._3),s(kt,e,r._4))}),St={ctor:"Same"},Et={ctor:"Remove"},Tt={ctor:"Insert"},xt=r(function(e,t,r){var n=function(r){var o=r;if("RBEmpty_elm_builtin"===o.ctor){var i=t(D);return"Nothing"===i.ctor?{ctor:"_Tuple2",_0:St,_1:lt}:{ctor:"_Tuple2",_0:Tt,_1:d(dt,it,e,i._0,lt,lt)}}var a=o._2,u=o._4,c=o._3,l=o._1,_=o._0,h=s(O,e,l);switch(h.ctor){case"EQ":var p=t(M(a));return"Nothing"===p.ctor?{ctor:"_Tuple2",_0:Et,_1:f(At,_,c,u)}:{ctor:"_Tuple2",_0:St,_1:d(dt,_,l,p._0,c,u)};case"LT":var v=n(c),m=v._0,g=v._1,y=m;switch(y.ctor){case"Same":return{ctor:"_Tuple2",_0:St,_1:d(dt,_,l,a,g,u)};case"Insert":return{ctor:"_Tuple2",_0:Tt,_1:d(yt,_,l,a,g,u)};default:return{ctor:"_Tuple2",_0:Et,_1:d(bt,_,l,a,g,u)}}default:var b=n(u),m=b._0,w=b._1,A=m;switch(A.ctor){case"Same":return{ctor:"_Tuple2",_0:St,_1:d(dt,_,l,a,c,w)};case"Insert":return{ctor:"_Tuple2",_0:Tt,_1:d(yt,_,l,a,c,w)};default:return{ctor:"_Tuple2",_0:Et,_1:d(bt,_,l,a,c,w)}}}},o=n(r),i=o._0,a=o._1,u=i;switch(u.ctor){case"Same":return a;case"Insert":return _t(a);default:return vt(a)}}),Rt=r(function(e,t,r){return f(xt,e,b(M(t)),r)}),Ot=(t(function(e,t){return f(Rt,e,t,lt)}),t(function(e,t){return f(Ge,Rt,t,e)})),qt=t(function(e,t){var n=r(function(t,r,n){return s(e,t,r)?f(Rt,t,r,n):n});return f(Ge,n,lt,t);
}),Nt=t(function(e,r){return s(qt,t(function(e,t){return s(Ze,e,r)}),e)}),It=t(function(e,t){var n=r(function(t,r,n){var o=n,i=o._1,a=o._0;return s(e,t,r)?{ctor:"_Tuple2",_0:f(Rt,t,r,a),_1:i}:{ctor:"_Tuple2",_0:a,_1:f(Rt,t,r,i)}});return f(Ge,n,{ctor:"_Tuple2",_0:lt,_1:lt},t)}),Ct=function(e){return f($,t(function(e,t){var r=e;return f(Rt,r._0,r._1,t)}),lt,e)},Lt=t(function(e,t){return f(xt,e,b(D),t)}),Dt=t(function(e,t){return f(Ge,r(function(e,t,r){return s(Lt,e,r)}),e,t)}),Bt=function(){function e(e){return{ctor:"<decoder>",tag:"succeed",msg:e}}function s(e){return{ctor:"<decoder>",tag:"fail",msg:e}}function f(e){return{ctor:"<decoder>",tag:e}}function l(e,t){return{ctor:"<decoder>",tag:e,decoder:t}}function d(e){return{ctor:"<decoder>",tag:"null",value:e}}function _(e,t){return{ctor:"<decoder>",tag:"field",field:e,decoder:t}}function h(e){return{ctor:"<decoder>",tag:"key-value",decoder:e}}function p(e,t){return{ctor:"<decoder>",tag:"map-many",func:e,decoders:t}}function m(e,t){return{ctor:"<decoder>",tag:"tuple",func:e,decoders:t}}function g(e,t){return{ctor:"<decoder>",tag:"andThen",decoder:e,callback:t}}function y(e,t){return{ctor:"<decoder>",tag:"customAndThen",decoder:e,callback:t}}function b(e){return{ctor:"<decoder>",tag:"oneOf",decoders:e}}function w(e,t){return p(e,[t])}function A(e,t,r){return p(e,[t,r])}function k(e,t,r,n){return p(e,[t,r,n])}function S(e,t,r,n,o){return p(e,[t,r,n,o])}function E(e,t,r,n,o,i){return p(e,[t,r,n,o,i])}function T(e,t,r,n,o,i,a){return p(e,[t,r,n,o,i,a])}function x(e,t,r,n,o,i,a,u){return p(e,[t,r,n,o,i,a,u])}function R(e,t,r,n,o,i,a,u,c){return p(e,[t,r,n,o,i,a,u,c])}function O(e,t){return m(e,[t])}function q(e,t,r){return m(e,[t,r])}function N(e,t,r,n){return m(e,[t,r,n])}function I(e,t,r,n,o){return m(e,[t,r,n,o])}function C(e,t,r,n,o,i){return m(e,[t,r,n,o,i])}function L(e,t,r,n,o,i,a){return m(e,[t,r,n,o,i,a])}function B(e,t,r,n,o,i,a,u){return m(e,[t,r,n,o,i,a,u])}function j(e,t,r,n,o,i,a,u,c){return m(e,[t,r,n,o,i,a,u,c])}function F(e){return{tag:"ok",value:e}}function U(e,t){return{tag:"primitive",type:e,value:t}}function J(e,t){return{tag:"index",index:e,rest:t}}function W(e,t){return{tag:"field",field:e,rest:t}}function H(e){return{tag:"oneOf",problems:e}}function V(e){for(var t="_";e;)switch(e.tag){case"primitive":return"Expecting "+e.type+("_"===t?"":" at "+t)+" but instead got: "+z(e.value);case"index":t+="["+e.index+"]",e=e.rest;break;case"field":t+="."+e.field,e=e.rest;break;case"oneOf":for(var r=e.problems,n=0;n<r.length;n++)r[n]=V(r[n]);return"I ran into the following problems"+("_"===t?"":" at "+t)+":\n\n"+r.join("\n");case"fail":return"I ran into a `fail` decoder"+("_"===t?"":" at "+t)}}function z(e){return void 0===e?"undefined":JSON.stringify(e)}function G(e,t){var r;try{r=JSON.parse(t)}catch(n){return ve("Given an invalid JSON: "+n.message)}return K(e,r)}function K(e,t){var r=$(e,t);return"ok"===r.tag?me(r.value):ve(V(r))}function $(e,t){switch(e.tag){case"bool":return"boolean"==typeof t?F(t):U("a Bool",t);case"int":var r="number"!=typeof t||!(t>-2147483647&&2147483647>t&&(0|t)===t)||!(isFinite(t)&&!(t%1));return r?U("an Int",t):F(t);case"float":return"number"==typeof t?F(t):U("a Float",t);case"string":return"string"==typeof t?F(t):t instanceof String?F(t+""):U("a String",t);case"null":return null===t?F(e.value):U("null",t);case"value":return F(t);case"list":if(!(t instanceof Array))return U("a List",t);for(var n=P.Nil,o=t.length;o--;){var i=$(e.decoder,t[o]);if("ok"!==i.tag)return J(o,i);n=P.Cons(i.value,n)}return F(n);case"array":if(!(t instanceof Array))return U("an Array",t);for(var a=t.length,u=new Array(a),o=a;o--;){var i=$(e.decoder,t[o]);if("ok"!==i.tag)return J(o,i);u[o]=i.value}return F(Re.fromJSArray(u));case"maybe":var i=$(e.decoder,t);return F("ok"===i.tag?M(i.value):D);case"field":var c=e.field;if("object"!=typeof t||null===t||!(c in t))return U("an object with a field named `"+c+"`",t);var i=$(e.decoder,t[c]);return"ok"===i.tag?i:W(c,i);case"key-value":if("object"!=typeof t||null===t||t instanceof Array)return err("an object",t);var s=P.Nil;for(var f in t){var i=$(e.decoder,t[f]);if("ok"!==i.tag)return W(f,i);var l=v.Tuple2(f,i.value);s=P.Cons(l,s)}return F(s);case"map-many":for(var d=e.func,_=e.decoders,o=0;o<_.length;o++){var i=$(_[o],t);if("ok"!==i.tag)return i;d=d(i.value)}return F(d);case"tuple":var _=e.decoders,a=_.length;if(!(t instanceof Array)||t.length!==a)return U("a Tuple with "+a+" entries",t);for(var d=e.func,o=0;a>o;o++){var i=$(_[o],t[o]);if("ok"!==i.tag)return J(o,i);d=d(i.value)}return F(d);case"customAndThen":var i=$(e.decoder,t);if("ok"!==i.tag)return i;var h=e.callback(i.value);return"Err"===h.ctor?U("something custom",t):F(h._0);case"andThen":var i=$(e.decoder,t);return"ok"!==i.tag?i:$(e.callback(i.value),t);case"oneOf":for(var p=[],m=e.decoders;"[]"!==m.ctor;){var i=$(m._0,t);if("ok"===i.tag)return i;p.push(i),m=m._1}return H(p);case"fail":return te;case"succeed":return F(e.msg)}}function Q(e,t){if(e===t)return!0;if(e.tag!==t.tag)return!1;switch(e.tag){case"succeed":case"fail":return e.msg===t.msg;case"bool":case"int":case"float":case"string":case"value":return!0;case"null":return e.value===t.value;case"list":case"array":case"maybe":case"key-value":return Q(e.decoder,t.decoder);case"field":return e.field===t.field&&Q(e.decoder,t.decoder);case"map-many":case"tuple":return e.func!==t.func?!1:X(e.decoders,t.decoders);case"andThen":case"customAndThen":return e.callback===t.callback&&Q(e.decoder,t.decoder);case"oneOf":return X(e.decoders,t.decoders)}}function X(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;r>n;n++)if(!Q(e[n],t[n]))return!1;return!0}function Y(e,t){return JSON.stringify(t,null,e)}function Z(e){return e}function ee(e){for(var t={};"[]"!==e.ctor;){var r=e._0;t[r._0]=r._1,e=e._1}return t}var te={tag:"fail"};return{encode:t(Y),runOnString:t(G),run:t(K),decodeNull:d,decodePrimitive:f,decodeContainer:t(l),decodeField:t(_),decodeObject1:t(w),decodeObject2:r(A),decodeObject3:n(k),decodeObject4:o(S),decodeObject5:i(E),decodeObject6:a(T),decodeObject7:u(x),decodeObject8:c(R),decodeKeyValuePairs:h,decodeTuple1:t(O),decodeTuple2:r(q),decodeTuple3:n(N),decodeTuple4:o(I),decodeTuple5:i(C),decodeTuple6:a(L),decodeTuple7:u(B),decodeTuple8:c(j),andThen:t(g),customAndThen:t(y),fail:s,succeed:e,oneOf:b,identity:Z,encodeNull:null,encodeArray:Re.toJSArray,encodeList:P.toArray,encodeObject:ee,equality:Q}}(),jt=(Bt.encodeList,Bt.encodeArray,Bt.encodeObject,Bt.encodeNull,Bt.identity),Mt=(Bt.identity,Bt.identity,Bt.identity),Ft=(Bt.encode,Bt.decodeTuple8,Bt.decodeTuple7,Bt.decodeTuple6,Bt.decodeTuple5,Bt.decodeTuple4,Bt.decodeTuple3,Bt.decodeTuple2,Bt.decodeTuple1,Bt.succeed),Pt=(Bt.fail,Bt.andThen),Ut=Bt.customAndThen,Jt=Bt.run,Wt=Bt.decodePrimitive("value"),Ht=function(e){return s(Bt.decodeContainer,"maybe",e)},Vt=Bt.decodeNull,zt=function(e){return s(Bt.decodeContainer,"list",e)},Gt=Bt.decodePrimitive("bool"),Kt=Bt.decodePrimitive("int"),$t=Bt.decodePrimitive("float"),Qt=Bt.decodePrimitive("string"),Xt=Bt.oneOf,Yt=(Bt.decodeKeyValuePairs,Bt.decodeObject8,Bt.decodeObject7,Bt.decodeObject6,Bt.decodeObject5,Bt.decodeObject4,Bt.decodeObject3,Bt.decodeObject2,Bt.decodeObject1,Yt||{});Yt[":="]=Bt.decodeField;var Zt=t(function(e,r){return f(K,t(function(e,t){return s(Yt[":="],e,t)}),r,e)}),er=Bt.runOnString,tr=Bt.decodeObject1,rr=Ft,nr=t(function(e,t){return s(Pt,t,function(t){return s(tr,t,e)})}),or=(t(function(e,t){return s(Pt,t,function(t){return s(tr,t,Ft(e))})}),r(function(e,t,r){var n=function(n){var o=s(Jt,e,n);return"Ok"===o.ctor?s(Jt,t,o._0):me(r)};return s(Ut,Wt,n)})),ir=(n(function(e,t,r,n){return s(nr,f(or,s(Zt,e,Wt),t,r),n)}),n(function(e,t,r,n){return s(nr,f(or,s(Yt[":="],e,Wt),t,r),n)}),r(function(e,t,r){return s(nr,s(Zt,e,t),r)}),r(function(e,t,r){return s(nr,s(Yt[":="],e,t),r)})),ar=(r(function(e,t,n){var o=n;return f(He,r(function(t,r,n){return s(e,t,n)}),t,o._0)}),r(function(e,t,n){var o=n;return f(Ge,r(function(t,r,n){return s(e,t,n)}),t,o._0)}),function(e){var t=e;return Ve(t._0)}),ur=t(function(e,t){var r=t;return s(Ze,e,r._0)}),cr=function(e){return{ctor:"Set_elm_builtin",_0:e}},sr=cr(lt),fr=t(function(e,t){var r=t;return cr(f(Rt,e,{ctor:"_Tuple0"},r._0))}),lr=function(e){return f($,fr,sr,e)},dr=(t(function(e,t){return lr(s(ne,e,ar(t)))}),t(function(e,t){var r=t;return cr(s(Lt,e,r._0))}),t(function(e,t){var r=e,n=t;return cr(s(Ot,r._0,n._0))}),t(function(e,t){var r=e,n=t;return cr(s(Nt,r._0,n._0))}),t(function(e,t){var r=e,n=t;return cr(s(Dt,r._0,n._0))}),t(function(e,r){var n=r;return cr(s(qt,t(function(t,r){return e(t)}),n._0))}),t(function(e,r){var n=r,o=s(It,t(function(t,r){return e(t)}),n._0),i=o._0,a=o._1;return{ctor:"_Tuple2",_0:cr(i),_1:cr(a)}}),r(function(e,t,r){var n=v.cmp(Q(r),0)>0,o=v.cmp(e,0)>0&&v.cmp(t,0)>0,i=s(U,t,r),a=s(_e,e,r);return o&&n?s(re["::"],a,f(dr,e,t,i)):P.fromArray([])})),_r=(t(function(e,t){return f(dr,e,e,t)}),r(function(e,t,r){var n=v.cmp(e,0)>0&&v.cmp(t,0)>0,o=s(U,t,r),i=s(_e,e,r),a=v.eq(e,Q(i));return n&&a?s(re["::"],i,f(_r,e,t,o)):P.fromArray([])})),hr=(t(function(e,t){return f(_r,e,e,t)}),J(o(function(e,t,r,n,o){return{ctor:"_Tuple5",_0:e,_1:t,_2:r,_3:n,_4:o}})),W(n(function(e,t,r,n){return{ctor:"_Tuple4",_0:e,_1:t,_2:r,_3:n}})),H(r(function(e,t,r){return{ctor:"_Tuple3",_0:e,_1:t,_2:r}})),V(t(function(e,t){return{ctor:"_Tuple2",_0:e,_1:t}})),function(e){return function(r){return s(G,w,f(V,t(function(e,t){return v.eq(e,t)}),e,r))}}),pr=(t(function(e,t){return s(hr,ae(e),ae(t))}),function(e){var t=e;if("[]"===t.ctor)return P.fromArray([]);var r=t._1,n=t._0;return s(re["::"],{ctor:"_Tuple2",_0:n,_1:r},s(ne,function(e){var t=e;return{ctor:"_Tuple2",_0:t._0,_1:s(re["::"],n,t._1)}},pr(r)))}),vr=t(function(e,t){var r=t;if("::"===r.ctor){var n=r._0;return s(re["::"],s(re["::"],e,n),s(re["::"],n,r._1))}return P.fromArray([])}),mr=s(K,vr,P.fromArray([P.fromArray([])])),gr=(t(function(e,t){return s(z,hr(e),mr(t))}),s(K,t(function(e,r){return s(re["::"],P.fromArray([]),s(ne,t(function(e,t){return s(re["::"],e,t)})(e),r))}),P.fromArray([P.fromArray([])])),t(function(e,t){var r=t;if("[]"===r.ctor)return P.fromArray([]);if("[]"===r._1.ctor)return P.fromArray([P.fromArray([r._0])]);var n=r._0,o=s(gr,e,r._1);return"::"===o.ctor?s(e,n,r._1._0)?s(re["::"],s(re["::"],n,o._0),o._1):s(re["::"],P.fromArray([n]),o):P.fromArray([])})),yr=(t(function(e,r){var n=t(function(e,t){var r=t;return"Nothing"===r.ctor?D:"[]"===r._0.ctor?D:v.eq(e,r._0._0)?M(r._0._1):D});return f($,n,M(r),e)}),t(function(e,t){return{ctor:"_Tuple2",_0:s(_e,e,t),_1:s(U,e,t)}}),t(function(e,t){var r=e(t);return"Nothing"===r.ctor?P.fromArray([]):s(re["::"],r._0._0,s(yr,e,r._0._1))})),br=t(function(e,t){var r=t;if("[]"===r.ctor)return P.fromArray([]);if("[]"===r._1.ctor)return P.fromArray([r._0]);var n=s(br,e,r._1);return"::"===n.ctor?s(re["::"],s(e,r._0,n._0),n):P.fromArray([])}),wr=r(function(e,t,r){var n=r;if("[]"===n.ctor)return P.fromArray([t]);var o=f(wr,e,t,n._1);return"::"===o.ctor?s(re["::"],s(e,n._0,o._0),o):P.fromArray([])}),Ar=(t(function(e,t){var r=t;return"[]"===r.ctor?P.fromArray([]):f(ue,e,r._0,r._1)}),t(function(e,r){var n=t(function(t,r){return M(function(){var n=r;return"Nothing"===n.ctor?t:s(e,t,n._0)}())});return f(K,n,D,r)}),t(function(e,r){var n=t(function(t,r){return M(function(){var n=r;return"Nothing"===n.ctor?t:s(e,n._0,t)}())});return f($,n,D,r)})),kr=r(function(e,t,r){e:for(;;){var n={ctor:"_Tuple2",_0:e,_1:t};t:do{if("::"===n._0.ctor){if("::"===n._1.ctor){var o=n._0._1,i=n._1._1,a=s(A["++"],r,P.fromArray([n._0._0,n._1._0]));e=o,t=i,r=a;continue e}break t}if("[]"===n._1.ctor)break t;return s(A["++"],r,n._1)}while(!1);return s(A["++"],r,n._0)}}),Sr=(t(function(e,t){return f(kr,e,t,P.fromArray([]))}),function(e){var r=e;if("[]"===r.ctor)return P.fromArray([P.fromArray([])]);var n=function(e){var r=e;return s(ne,t(function(e,t){return s(re["::"],e,t)})(r._0),Sr(r._1))};return s(fe,n,pr(r))}),Er=(t(function(e,t){return s(Y,e,Sr(t))}),function(e){var r=e;if("[]"===r.ctor)return P.fromArray([]);var n=r._0,o=t(function(e,t){return s(re["::"],e,s(re["::"],s(re["::"],n,e),t))});return s(re["::"],P.fromArray([n]),f(K,o,P.fromArray([]),Er(r._1)))}),Tr=function(e){return s(re["::"],P.fromArray([]),Er(e))},xr=(t(function(e,t){return s(Y,e,Tr(t))}),t(function(e,t){return s(oe,function(t){return T(e(t))},t)}),t(function(e,t){if(v.cmp(e,0)<0)return t;var r=ee(s(U,e,t)),n=s(_e,e,t),o=r;return"Nothing"===o.ctor?t:s(ce,n,o._0)}),r(function(e,t,r){if(v.cmp(e,0)<0)return D;var n=ee(s(U,e,r)),o=s(_e,e,r),i=n;return"Nothing"===i.ctor?D:M(s(ce,o,s(re["::"],t,i._0)))}),t(function(e,t){return s(oe,function(t){return T(e(t))},t)}),r(function(e,r,n){return s(X,t(function(t,n){return e(t)?r(n):n}),n)})),Rr=(r(function(e,r,n){return v.cmp(e,0)<0||v.cmp(e,Q(n))>-1?D:M(f(xr,t(function(e,t){return v.eq(e,t)})(e),r,n))}),r(function(e,t,r){return s(ne,function(r){return e(r)?t(r):r},r)})),Or=(r(function(e,t,r){return f(Rr,e,b(t),r)}),t(function(e,t){for(;;){var r=t;if("[]"===r.ctor)return D;var n=r._0;if(e(n))return M(n);var o=e,i=r._1;e=o,t=i}})),qr=m(fe),Nr=(r(function(e,t,r){return s(qr,t,function(t){return s(qr,r,function(r){return P.fromArray([s(e,t,r)])})})}),n(function(e,t,r,n){return s(qr,t,function(t){return s(qr,r,function(r){return s(qr,n,function(n){return P.fromArray([f(e,t,r,n)])})})})}),o(function(e,t,r,n,o){return s(qr,t,function(t){return s(qr,r,function(r){return s(qr,n,function(n){return s(qr,o,function(o){return P.fromArray([l(e,t,r,n,o)])})})})})}),t(function(e,r){return f(V,t(function(e,t){return e(t)}),e,r)}),t(function(e,t){for(;;){var r=t;if("[]"===r.ctor)return P.fromArray([]);var n=r._1,o=r._0;{if(!s(ur,o,e))return s(re["::"],o,s(Nr,s(fr,o,e),n));var i=e,a=n;e=i,t=a}}})),Ir=t(function(e,t){for(;;){var r=t;if("[]"===r.ctor)return P.fromArray([]);{if(!e(r._0))return t;var n=e,o=r._1;e=n,t=o}}}),Cr=t(function(e,t){var r=t;if("[]"===r.ctor)return P.fromArray([]);var n=r._0;return e(n)?s(re["::"],n,s(Cr,e,r._1)):P.fromArray([])}),Lr=t(function(e,t){return{ctor:"_Tuple2",_0:s(Cr,e,t),_1:s(Ir,e,t)}}),Dr=t(function(e,t){var r=t;if("[]"===r.ctor)return P.fromArray([]);var n=r._0,o=s(Lr,e(n),r._1),i=o._0,a=o._1;return s(re["::"],s(re["::"],n,i),s(Dr,e,a))}),Br=(Dr(t(function(e,t){return v.eq(e,t)})),t(function(e,r){var n=t(function(t,r){var n=r,o=n._1,i=e(t);return v.cmp(i,o)<0?{ctor:"_Tuple2",_0:t,_1:i}:{ctor:"_Tuple2",_0:n._0,_1:o}}),o=r;if("::"===o.ctor){if("[]"===o._1.ctor)return M(o._0);var i=o._0;return M(y(f($,n,{ctor:"_Tuple2",_0:i,_1:e(i)},o._1)))}return D}),t(function(e,r){var n=t(function(t,r){var n=r,o=n._1,i=e(t);return v.cmp(i,o)>0?{ctor:"_Tuple2",_0:t,_1:i}:{ctor:"_Tuple2",_0:n._0,_1:o}}),o=r;if("::"===o.ctor){if("[]"===o._1.ctor)return M(o._0);var i=o._0;return M(y(f($,n,{ctor:"_Tuple2",_0:i,_1:e(i)},o._1)))}return D}),t(function(e,t){var r=e(t);return"Just"===r.ctor?s(re["::"],t,s(Br,e,r._0)):P.fromArray([t])})),jr=t(function(e,t){return v.cmp(e,0)<0?D:te(s(U,e,t))}),Mr=Mr||{};Mr["!!"]=m(jr);var Fr=(function(){var e=t(function(e,t){return function(r){return s(L,e,s(F,t,r))}});return s(K,function(r){return s(t(function(e,t){return function(r){return e(t(r))}}),M,s(e,P.fromArray([]),t(function(e,t){return s(re["::"],e,t)})(r)))},D)}(),Ar(m(b)),function(){function e(e){var t=new Date(e);return isNaN(t.getTime())?ve("unable to parse '"+e+"' as a date"):me(t)}var t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return{fromString:e,year:function(e){return e.getFullYear()},month:function(e){return{ctor:r[e.getMonth()]}},day:function(e){return e.getDate()},hour:function(e){return e.getHours()},minute:function(e){return e.getMinutes()},second:function(e){return e.getSeconds()},millisecond:function(e){return e.getMilliseconds()},toTime:function(e){return e.getTime()},fromTime:function(e){return new Date(e)},dayOfWeek:function(e){return{ctor:t[e.getDay()]}}}}()),Pr=ye.onError,Ur=ye.andThen,Jr=t(function(e,t){var r=t;return ye.spawn(s(Ur,r._0,we(e)))}),Wr=ye.fail,Hr=t(function(e,t){return s(Pr,t,function(t){return Wr(e(t))})}),Vr=ye.succeed,zr=t(function(e,t){return s(Ur,t,function(t){return Vr(e(t))})}),Gr=r(function(e,t,r){return s(Ur,t,function(t){return s(Ur,r,function(r){return Vr(s(e,t,r))})})}),Kr=(n(function(e,t,r,n){return s(Ur,t,function(t){return s(Ur,r,function(r){return s(Ur,n,function(n){return Vr(f(e,t,r,n))})})})}),o(function(e,t,r,n,o){return s(Ur,t,function(t){return s(Ur,r,function(r){return s(Ur,n,function(n){return s(Ur,o,function(o){return Vr(l(e,t,r,n,o))})})})})}),i(function(e,t,r,n,o,i){return s(Ur,t,function(t){return s(Ur,r,function(r){return s(Ur,n,function(n){return s(Ur,o,function(o){return s(Ur,i,function(i){return Vr(d(e,t,r,n,o,i))})})})})})}),t(function(e,t){return s(Ur,e,function(e){return s(Ur,t,function(t){return Vr(e(t))})})}),function(e){var r=e;return"[]"===r.ctor?Vr(P.fromArray([])):f(Gr,t(function(e,t){return s(re["::"],e,t)}),r._0,Kr(r._1))}),$r=r(function(e,t,r){return s(zr,function(e){return{ctor:"_Tuple0"}},Kr(s(ne,Jr(e),t)))}),Qr=(t(function(e,t){var r=t;return"Just"===r.ctor?Vr(r._0):Wr(e)}),Vr({ctor:"_Tuple0"})),Xr=r(function(e,t,r){return Vr({ctor:"_Tuple0"})}),Yr=ge.leaf("Task"),Zr=function(e){return{ctor:"T",_0:e}},en=r(function(e,t,r){return Yr(Zr(s(Pr,s(zr,t,r),function(t){return Vr(e(t))})))}),tn=t(function(e,t){var r=t;return Zr(s(zr,e,r._0))});ge.effectManagers.Task={pkg:"elm-lang/core",init:Qr,onEffects:$r,onSelfMsg:Xr,tag:"cmd",cmdMap:tn};var rn=function(){function e(e,t){return ye.nativeBinding(function(r){var n=setInterval(function(){ye.rawSpawn(t)},e);return function(){clearInterval(n)}})}var r=ye.nativeBinding(function(e){e(ye.succeed(Date.now()))});return{now:r,setInterval_:t(e)}}(),nn=rn.setInterval_,on=r(function(e,t,r){var n=t;if("[]"===n.ctor)return Vr(r);var o=n._0;return s(Ur,ye.spawn(s(nn,o,s(be,e,o))),function(t){return f(on,e,n._1,f(Rt,o,t,r))})}),an=t(function(e,t){var r=e,n=r._1,o=r._0,i=s(Ye,o,t);return"Nothing"===i.ctor?f(Rt,o,P.fromArray([n]),t):f(Rt,o,s(re["::"],n,i._0),t)}),un=1,cn=rn.now,sn=r(function(e,t,r){var n=s(Ye,t,r.taggers);return"Nothing"===n.ctor?Vr(r):s(Ur,cn,function(t){return s(Ur,Kr(s(ne,function(r){return s(we,e,r(t))},n._0)),function(e){return Vr(r)})})}),fn=ge.leaf("Time"),ln=t(function(e,t){return{taggers:e,processes:t}}),dn=Vr(s(ln,lt,lt)),_n=r(function(e,t,o){var i=o,a=r(function(e,t,r){var n=r;return{ctor:"_Tuple3",_0:n._0,_1:n._1,_2:s(Ur,ye.kill(t),function(e){return n._2})}}),u=n(function(e,t,r,n){var o=n;return{ctor:"_Tuple3",_0:o._0,_1:f(Rt,e,r,o._1),_2:o._2}}),c=r(function(e,t,r){var n=r;return{ctor:"_Tuple3",_0:s(re["::"],e,n._0),_1:n._1,_2:n._2}}),l=f($,an,lt,t),d=_(Ke,c,u,a,l,i.processes,{ctor:"_Tuple3",_0:P.fromArray([]),_1:lt,_2:Vr({ctor:"_Tuple0"})}),h=d._0,p=d._1,v=d._2;return s(Ur,v,function(t){return s(Ur,f(on,e,h,p),function(e){return Vr(s(ln,l,e))})})}),hn=t(function(e,t){return{ctor:"Every",_0:e,_1:t}}),pn=(t(function(e,t){return fn(s(hn,e,t))}),t(function(e,t){var r=t;return s(hn,r._0,function(t){return e(r._1(t))})}));ge.effectManagers.Time={pkg:"elm-lang/core",init:dn,onEffects:_n,onSelfMsg:sn,tag:"sub",subMap:pn};var vn=Fr.millisecond,mn=Fr.second,gn=Fr.minute,yn=Fr.hour,bn=Fr.dayOfWeek,wn=Fr.day,An=Fr.month,kn=Fr.year,Sn=Fr.fromTime,En=Fr.toTime,Tn=Fr.fromString,xn=s(zr,Sn,cn),Rn={ctor:"Sun"},On={ctor:"Dec"},qn={ctor:"Nov"},Nn={ctor:"Oct"},In={ctor:"Sep"},Cn={ctor:"Aug"},Ln={ctor:"Jul"},Dn={ctor:"Jun"},Bn={ctor:"May"},jn={ctor:"Apr"},Mn={ctor:"Mar"},Fn={ctor:"Feb"},Pn={ctor:"Jan"},Un=function(){function e(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function o(e){return new RegExp(e.source,"gi")}function i(e){return new RegExp(e,"g")}function a(e,t){return null!==t.match(e)}function u(e,t,r){e="All"===e.ctor?1/0:e._0;for(var n,o=[],i=0,a=r,u=t.lastIndex,c=-1;i++<e&&(n=t.exec(a))&&c!==t.lastIndex;){for(var s=n.length-1,f=new Array(s);s>0;){var l=n[s];f[--s]=void 0===l?D:M(l)}o.push({match:n[0],submatches:P.fromArray(f),index:n.index,number:i}),c=t.lastIndex}return t.lastIndex=u,P.fromArray(o)}function c(e,t,r,n){function o(t){if(i++>=e)return t;for(var n=arguments.length-3,o=new Array(n);n>0;){var a=arguments[n];o[--n]=void 0===a?D:M(a)}return r({match:t,submatches:P.fromArray(o),index:arguments[n-1],number:i})}e="All"===e.ctor?1/0:e._0;var i=0;return n.replace(t,o)}function s(e,t,r){if(e="All"===e.ctor?1/0:e._0,e===1/0)return P.fromArray(r.split(t));for(var n,o=r,i=[],a=t.lastIndex;e--&&(n=t.exec(o));)i.push(o.slice(a,n.index)),a=t.lastIndex;return i.push(o.slice(a)),P.fromArray(i)}return{regex:i,caseInsensitive:o,escape:e,contains:t(a),find:r(u),replace:n(c),split:r(s)}}(),Jn=(Un.split,Un.replace),Wn=(Un.find,Un.contains),Hn=(Un.caseInsensitive,Un.regex),Vn=(Un.escape,n(function(e,t,r,n){return{match:e,submatches:t,index:r,number:n}}),{ctor:"All"}),zn=function(){function e(e){return{type:"text",text:e}}function o(e){return t(function(t,r){return i(e,t,r)})}function i(e,t,r){for(var n=h(t),o=n.namespace,i=n.facts,a=[],u=0;"[]"!==r.ctor;){var c=r._0;u+=c.descendantsCount||0,a.push(c),r=r._1}return u+=a.length,{type:"node",tag:e,facts:i,children:a,namespace:o,descendantsCount:u}}function a(e,t,r){var n=h(e).facts;return{type:"custom",facts:n,model:t,impl:r}}function u(e,t){return{type:"tagger",tagger:e,node:t,descendantsCount:1+(t.descendantsCount||0)}}function c(e,t,r){return{type:"thunk",func:e,args:t,thunk:r,node:null}}function l(e,t){return c(e,[t],function(){return e(t)})}function d(e,t,r){return c(e,[t,r],function(){return s(e,t,r)})}function _(e,t,r,n){return c(e,[t,r,n],function(){return f(e,t,r,n)})}function h(e){for(var t,r={};"[]"!==e.ctor;){var n=e._0,o=n.key;if(o===H||o===V||o===W){var i=r[o]||{};i[n.realKey]=n.value,r[o]=i}else if(o===J){for(var a=r[o]||{},u=n.value;"[]"!==u.ctor;){var c=u._0;a[c._0]=c._1,u=u._1}r[o]=a}else"namespace"===o?t=n.value:r[o]=n.value;e=e._1}return{facts:r,namespace:t}}function p(e){return{key:J,value:e}}function v(e,t){return{key:e,value:t}}function m(e,t){return{key:H,realKey:e,value:t}}function g(e,t,r){return{key:V,realKey:t,value:{value:r,namespace:e}}}function y(e,t,r){return{key:W,realKey:e,value:{options:t,decoder:r}}}function b(e,t){return!e.options!==t.options||e.stopPropagation===t.stopPropagation&&e.preventDefault===t.preventDefault?Bt.equality(e.decoder,t.decoder):!1}function w(e,t,r){function n(e){"NO_REQUEST"===u&&z(o),u="PENDING_REQUEST",s=e}function o(){switch(u){case"NO_REQUEST":throw new Error("Unexpected draw callback.\nPlease report this to <https://github.com/elm-lang/core/issues>.");case"PENDING_REQUEST":z(o),u="EXTRA_REQUEST";var e=O(c,s);return a=j(a,c,e,i),void(c=s);case"EXTRA_REQUEST":return void(u="NO_REQUEST")}}var i={tagger:t,parent:null},a=A(r,i);e.appendChild(a);var u="NO_REQUEST",c=r,s=r;return{update:n}}function A(e,t){switch(e.type){case"thunk":return e.node||(e.node=e.thunk()),A(e.node,t);case"tagger":for(var r=e.node,n=e.tagger;"tagger"===r.type;)"object"!=typeof n?n=[n,r.tagger]:n.push(r.tagger),r=r.node;var o={tagger:n,parent:t},i=A(r,o);return i.elm_event_node_ref=o,i;case"text":return document.createTextNode(e.text);case"node":var i=e.namespace?document.createElementNS(e.namespace,e.tag):document.createElement(e.tag);k(i,t,e.facts);for(var a=e.children,u=0;u<a.length;u++)i.appendChild(A(a[u],t));return i;case"custom":var i=e.impl.render(e.model);return k(i,t,e.facts),i}}function k(e,t,r){for(var n in r){var o=r[n];switch(n){case J:S(e,o);break;case W:E(e,t,o);break;case H:x(e,o);break;case V:R(e,o);break;case"value":e[n]!==o&&(e[n]=o);break;default:e[n]=o}}}function S(e,t){var r=e.style;for(var n in t)r[n]=t[n]}function E(e,t,r){var n=e.elm_handlers||{};for(var o in r){var i=n[o],a=r[o];if("undefined"==typeof a)e.removeEventListener(o,i),n[o]=void 0;else if("undefined"==typeof i){var i=T(t,a);e.addEventListener(o,i),n[o]=i}else i.info=a}e.elm_handlers=n}function T(e,t){function r(t){var n=r.info,o=s(Bt.run,n.decoder,t);if("Ok"===o.ctor){var i=n.options;i.stopPropagation&&t.stopPropagation(),i.preventDefault&&t.preventDefault();for(var a=o._0,u=e;u;){var c=u.tagger;if("function"==typeof c)a=c(a);else for(var f=c.length;f--;)a=c[f](a);u=u.parent}}}return r.info=t,r}function x(e,t){for(var r in t){var n=t[r];"undefined"==typeof n?e.removeAttribute(r):e.setAttribute(r,n)}}function R(e,t){for(var r in t){var n=t[r],o=n.namespace,i=n.value;"undefined"==typeof i?e.removeAttributeNS(o,r):e.setAttributeNS(o,r,i)}}function O(e,t){var r=[];return N(e,t,r,0),r}function q(e,t,r){return{index:t,type:e,data:r,domNode:null,eventNode:null}}function N(e,t,r,n){if(e!==t){var o=e.type,i=t.type;if(o!==i)return void r.push(q("p-redraw",n,t));switch(i){case"thunk":for(var a=e.args,u=t.args,c=a.length,s=e.func===t.func&&c===u.length;s&&c--;)s=a[c]===u[c];if(s)return void(t.node=e.node);t.node=t.thunk();var f=[];return N(e.node,t.node,f,0),void(f.length>0&&r.push(q("p-thunk",n,f)));case"tagger":for(var l=e.tagger,d=t.tagger,_=!1,h=e.node;"tagger"===h.type;)_=!0,"object"!=typeof l?l=[l,h.tagger]:l.push(h.tagger),h=h.node;for(var p=t.node;"tagger"===p.type;)_=!0,"object"!=typeof d?d=[d,p.tagger]:d.push(p.tagger),p=p.node;return _&&l.length!==d.length?void r.push(q("p-redraw",n,t)):((_?I(l,d):l===d)||r.push(q("p-tagger",n,d)),void N(h,p,r,n+1));case"text":if(e.text!==t.text)return void r.push(q("p-text",n,t.text));return;case"node":if(e.tag!==t.tag||e.namespace!==t.namespace)return void r.push(q("p-redraw",n,t));var v=C(e.facts,t.facts);return"undefined"!=typeof v&&r.push(q("p-facts",n,v)),void L(e,t,r,n);case"custom":if(e.impl!==t.impl)return void r.push(q("p-redraw",n,t));var v=C(e.facts,t.facts);"undefined"!=typeof v&&r.push(q("p-facts",n,v));var m=t.impl.diff(e,t);if(m)return void r.push(q("p-custom",n,m));return}}}function I(e,t){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function C(e,t,r){var n;for(var o in e)if(o!==J&&o!==W&&o!==H&&o!==V)if(o in t){var i=e[o],a=t[o];i===a&&"value"!==o||r===W&&b(i,a)||(n=n||{},n[o]=a)}else n=n||{},n[o]="undefined"==typeof r?"string"==typeof e[o]?"":null:r===J?"":r===W||r===H?void 0:{namespace:e[o].namespace,value:void 0};else{var u=C(e[o],t[o]||{},o);u&&(n=n||{},n[o]=u)}for(var c in t)c in e||(n=n||{},n[c]=t[c]);return n}function L(e,t,r,n){var o=e.children,i=t.children,a=o.length,u=i.length;a>u?r.push(q("p-remove",n,a-u)):u>a&&r.push(q("p-insert",n,i.slice(a)));for(var c=n,s=u>a?a:u,f=0;s>f;f++){c++;var l=o[f];N(l,i[f],r,c),c+=l.descendantsCount||0}}function D(e,t,r,n){B(e,t,r,0,0,t.descendantsCount,n)}function B(e,t,r,n,o,i,a){for(var u=r[n],c=u.index;c===o;){var s=u.type;if("p-thunk"===s?D(e,t.node,u.data,a):(u.domNode=e,u.eventNode=a),n++,!(u=r[n])||(c=u.index)>i)return n}switch(t.type){case"tagger":for(var f=t.node;"tagger"===f.type;)f=f.node;return B(e,f,r,n,o+1,i,e.elm_event_node_ref);case"node":for(var l=t.children,d=e.childNodes,_=0;_<l.length;_++){o++;var h=l[_],p=o+(h.descendantsCount||0);if(c>=o&&p>=c&&(n=B(d[_],h,r,n,o,p,a),!(u=r[n])||(c=u.index)>i))return n;o=p}return n;case"text":case"thunk":throw new Error("should never traverse `text` or `thunk` nodes like this")}}function j(e,t,r,n){return 0===r.length?e:(D(e,t,r,n),M(e,r))}function M(e,t){for(var r=0;r<t.length;r++){var n=t[r],o=n.domNode,i=F(o,n);o===e&&(e=i)}return e}function F(e,t){switch(t.type){case"p-redraw":return P(e,t.data,t.eventNode);case"p-facts":return k(e,t.eventNode,t.data),e;case"p-text":return e.replaceData(0,e.length,t.data),e;case"p-thunk":return M(e,t.data);case"p-tagger":return e.elm_event_node_ref.tagger=t.data,e;case"p-remove":for(var r=t.data;r--;)e.removeChild(e.lastChild);return e;case"p-insert":for(var n=t.data,r=0;r<n.length;r++)e.appendChild(A(n[r],t.eventNode));return e;case"p-custom":var o=t.data;return o.applyPatch(e,o.data);default:throw new Error("Ran into an unknown patch!")}}function P(e,t,r){var n=e.parentNode,o=A(t,r);return"undefined"==typeof o.elm_event_node_ref&&(o.elm_event_node_ref=e.elm_event_node_ref),n&&o!==e&&n.replaceChild(o,e),o}function U(e){return{init:e.init,update:e.update,subscriptions:e.subscriptions,view:e.view,renderer:w}}var J="STYLE",W="EVENT",H="ATTR",V="ATTR_NS",z="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:function(e){setTimeout(e,1e3/60)};return{node:o,text:e,custom:a,map:t(u),on:r(y),style:p,property:t(v),attribute:t(m),attributeNS:r(g),lazy:t(l),lazy2:r(d),lazy3:n(_),programWithFlags:U}}(),Gn=zn.programWithFlags,Kn=(zn.lazy3,zn.lazy2,zn.lazy,{stopPropagation:!1,preventDefault:!1}),$n=zn.on,Qn=t(function(e,t){return f($n,e,Kn,t)}),Xn=zn.style,Yn=(zn.attributeNS,zn.attribute,zn.property),Zn=zn.map,eo=zn.text,to=zn.node,ro=(t(function(e,t){return{stopPropagation:e,preventDefault:t}}),eo),no=to,oo=(no("body"),no("section"),no("nav"),no("article"),no("aside"),no("h1"),no("h2"),no("h3"),no("h4"),no("h5"),no("h6"),no("header"),no("footer"),no("address"),no("main"),no("p"),no("hr")),io=(no("pre"),no("blockquote"),no("ol"),no("ul"),no("li"),no("dl"),no("dt"),no("dd"),no("figure"),no("figcaption"),no("div")),ao=(no("a"),no("em"),no("strong"),no("small"),no("s"),no("cite"),no("q"),no("dfn"),no("abbr"),no("time"),no("code"),no("var"),no("samp"),no("kbd"),no("sub"),no("sup"),no("i"),no("b"),no("u"),no("mark"),no("ruby"),no("rt"),no("rp"),no("bdi"),no("bdo"),no("span")),uo=(no("br"),no("wbr"),no("ins"),no("del"),no("img")),co=(no("iframe"),no("embed"),no("object"),no("param"),no("video"),no("audio"),no("source"),no("track"),no("canvas"),no("svg"),no("math"),no("table"),no("caption"),no("colgroup"),no("col"),no("tbody"),no("thead"),no("tfoot"),no("tr"),no("td"),no("th"),no("form")),so=(no("fieldset"),no("legend"),no("label")),fo=no("input"),lo=no("button"),_o=(no("select"),no("datalist"),no("optgroup"),no("option"),no("textarea"),no("keygen"),no("output"),no("progress"),no("meter"),no("details"),no("summary"),no("menuitem"),no("menu"),Gn),ho=function(e){return _o(v.update(e,{init:function(t){return e.init}}))},po=Zn,vo=Yn,mo=t(function(e,t){return s(vo,e,Mt(t))}),go=function(e){return s(mo,"className",e)},yo=function(e){return s(mo,"id",e)},bo=function(e){return s(mo,"src",e)},wo=function(e){return s(mo,"type",e)},Ao=t(function(e,t){return s(vo,e,jt(t))}),ko=function(e){return s(Ao,"disabled",e)},So=Xn,Eo=(s(Yt[":="],"keyCode",Kt),s(Zt,P.fromArray(["target","checked"]),Gt),s(Zt,P.fromArray(["target","value"]),Qt)),To=Kn,xo=$n,Ro=Qn,Oo=v.update(To,{preventDefault:!0}),qo=function(e){return f(xo,"submit",Oo,Ft(e))},No=function(e){return s(Ro,"input",s(tr,e,Eo))},Io=function(e){return s(Ro,"click",Ft(e))},Co=(t(function(e,t){return{stopPropagation:e,preventDefault:t}}),function(){function e(e,t){return ye.nativeBinding(function(n){function o(e){i.setRequestHeader(e._0,e._1)}var i=new XMLHttpRequest;return"Just"===e.onStart.ctor&&i.addEventListener("loadStart",function(){var t=e.onStart._0;ye.rawSpawn(t)}),"Just"===e.onProgress.ctor&&i.addEventListener("progress",function(t){var r=t.lengthComputable?M({loaded:t.loaded,total:t.total}):D,n=e.onProgress._0(r);ye.rawSpawn(n)}),i.addEventListener("error",function(){return n(ye.fail({ctor:"RawNetworkError"}))}),i.addEventListener("timeout",function(){return n(ye.fail({ctor:"RawTimeout"}))}),i.addEventListener("load",function(){return n(ye.succeed(r(i)))}),i.open(t.verb,t.url,!0),s(ne,o,t.headers),i.timeout=e.timeout,i.withCredentials=e.withCredentials,"Just"===e.desiredResponseType.ctor&&i.overrideMimeType(e.desiredResponseType._0),"BodyFormData"===t.body.ctor?i.send(t.body.formData):i.send(t.body._0),function(){i.abort()}})}function r(e){var t="blob"===e.responseType?"Blob":"Text",r="Blob"===t?e.response:e.responseText;return{status:e.status,statusText:e.statusText,headers:n(e.getAllResponseHeaders()),url:e.responseURL,value:{ctor:t,_0:r}}}function n(e){var t=lt;if(!e)return t;for(var r=e.split("\r\n"),n=r.length;n--;){var o=r[n],i=o.indexOf(": ");if(i>0){var a=o.substring(0,i),u=o.substring(i+2);t=f(xt,a,function(e){return M("Just"===e.ctor?u+", "+e._0:u)},t)}}return t}function o(e){
for(var t=new FormData;"[]"!==e.ctor;){var r=e._0;if("StringData"===r.ctor)t.append(r._0,r._1);else{var n="Nothing"===r._1.ctor?void 0:r._1._0;t.append(r._0,r._2,n)}e=e._1}return{ctor:"BodyFormData",formData:t}}function i(e){return encodeURIComponent(e)}function a(e){return decodeURIComponent(e)}return{send:t(e),multipart:o,uriEncode:i,uriDecode:a}}()),Lo=Co.send,Do={timeout:0,onStart:D,onProgress:D,desiredResponseType:D,withCredentials:!1},Bo=(Co.multipart,Co.uriDecode,Co.uriEncode),jo=function(e){return s(Fe,"+",s(Pe,"%20",Bo(e)))},Mo=function(e){var t=e;return s(A["++"],jo(t._0),s(A["++"],"=",jo(t._1)))},Fo=(t(function(e,t){var r=t;return"[]"===r.ctor?e:s(A["++"],e,s(A["++"],"?",s(Fe,"&",s(ne,Mo,t))))}),n(function(e,t,r,n){return{verb:e,headers:t,url:r,body:n}}),o(function(e,t,r,n,o){return{timeout:e,onStart:t,onProgress:r,desiredResponseType:n,withCredentials:o}}),o(function(e,t,r,n,o){return{status:e,statusText:t,headers:r,url:n,value:o}}),{ctor:"Empty"}),Po=Fo,Uo=(r(function(e,t,r){return{ctor:"FileData",_0:e,_1:t,_2:r}}),r(function(e,t,r){return{ctor:"BlobData",_0:e,_1:t,_2:r}}),t(function(e,t){return{ctor:"StringData",_0:e,_1:t}}),t(function(e,t){return{ctor:"BadResponse",_0:e,_1:t}})),Jo=function(e){return{ctor:"UnexpectedPayload",_0:e}},Wo=t(function(e,t){if(v.cmp(200,t.status)<1&&v.cmp(t.status,300)<0){var r=t.value;return"Text"===r.ctor?e(r._0):Wr(Jo("Response body is a blob, expecting a string."))}return Wr(s(Uo,t.status,t.statusText))}),Ho={ctor:"NetworkError"},Vo={ctor:"Timeout"},zo=function(e){var t=e;return"RawTimeout"===t.ctor?Vo:Ho},Go=t(function(e,t){var r=function(t){var r=s(er,e,t);return"Ok"===r.ctor?Vr(r._0):Wr(Jo(r._0))};return s(Ur,s(Hr,zo,t),Wo(r))}),Ko=t(function(e,t){var r={verb:"GET",headers:P.fromArray([]),url:t,body:Po};return s(Go,e,s(Lo,Do,r))}),$o=(r(function(e,t,r){var n={verb:"POST",headers:P.fromArray([]),url:t,body:r};return s(Go,e,s(Lo,Do,n))}),function(){function e(e,t,r){var n={options:e,markdown:r};return zn.custom(t,n,a)}function t(e){var t=u(e.markdown,i(e.options)),r=document.createElement("div");return r.innerHTML=t,r}function n(e,t){return e.model.markdown===t.model.markdown&&e.model.options===t.model.options?null:{applyPatch:o,data:u(t.model.markdown,i(t.model.options))}}function o(e,t){return e.innerHTML=t,e}function i(e){function t(t,r){return r||"Just"!==e.defaultHighlighting.ctor||(r=e.defaultHighlighting._0),"undefined"!=typeof hljs&&r&&hljs.listLanguages().indexOf(r)>=0?hljs.highlight(r,t,!0).value:t}var r=e.githubFlavored;return"Just"===r.ctor?{highlight:t,gfm:!0,tables:r._0.tables,breaks:r._0.breaks,sanitize:e.sanitize,smartypants:e.smartypants}:{highlight:t,gfm:!1,tables:!1,breaks:!1,sanitize:e.sanitize,smartypants:e.smartypants}}var a={render:t,diff:n},u=function(){var e={},t=e.exports={};return function(){function r(e){this.tokens=[],this.tokens.links={},this.options=e||l.defaults,this.rules=d.normal,this.options.gfm&&(this.options.tables?this.rules=d.tables:this.rules=d.gfm)}function n(e,t){if(this.options=t||l.defaults,this.links=e,this.rules=_.normal,this.renderer=this.options.renderer||new o,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=_.breaks:this.rules=_.gfm:this.options.pedantic&&(this.rules=_.pedantic)}function o(e){this.options=e||{}}function i(e){this.tokens=[],this.token=null,this.options=e||l.defaults,this.options.renderer=this.options.renderer||new o,this.renderer=this.options.renderer,this.renderer.options=this.options}function a(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function u(e){return e.replace(/&([#\w]+);/g,function(e,t){return t=t.toLowerCase(),"colon"===t?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function c(e,t){return e=e.source,t=t||"",function r(n,o){return n?(o=o.source||o,o=o.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(n,o),r):new RegExp(e,t)}}function s(){}function f(e){for(var t,r,n=1;n<arguments.length;n++){t=arguments[n];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}function l(e,t,n){if(n||"function"==typeof t){n||(n=t,t=null),t=f({},l.defaults,t||{});var o,u,c=t.highlight,s=0;try{o=r.lex(e,t)}catch(d){return n(d)}u=o.length;var _=function(e){if(e)return t.highlight=c,n(e);var r;try{r=i.parse(o,t)}catch(a){e=a}return t.highlight=c,e?n(e):n(null,r)};if(!c||c.length<3)return _();if(delete t.highlight,!u)return _();for(;s<o.length;s++)!function(e){return"code"!==e.type?--u||_():c(e.text,e.lang,function(t,r){return t?_(t):null==r||r===e.text?--u||_():(e.text=r,e.escaped=!0,void(--u||_()))})}(o[s])}else try{return t&&(t=f({},l.defaults,t)),i.parse(r.lex(e,t),t)}catch(d){if(d.message+="\nPlease report this to https://github.com/chjj/marked.",(t||l.defaults).silent)return"<p>An error occured:</p><pre>"+a(d.message+"",!0)+"</pre>";throw d}}var d={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:s,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:s,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:s,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};d.bullet=/(?:[*+-]|\d+\.)/,d.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,d.item=c(d.item,"gm")(/bull/g,d.bullet)(),d.list=c(d.list)(/bull/g,d.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+d.def.source+")")(),d.blockquote=c(d.blockquote)("def",d.def)(),d._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",d.html=c(d.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,d._tag)(),d.paragraph=c(d.paragraph)("hr",d.hr)("heading",d.heading)("lheading",d.lheading)("blockquote",d.blockquote)("tag","<"+d._tag)("def",d.def)(),d.normal=f({},d),d.gfm=f({},d.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),d.gfm.paragraph=c(d.paragraph)("(?!","(?!"+d.gfm.fences.source.replace("\\1","\\2")+"|"+d.list.source.replace("\\1","\\3")+"|")(),d.tables=f({},d.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),r.rules=d,r.lex=function(e,t){var n=new r(t);return n.lex(e)},r.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},r.prototype.token=function(e,t,r){for(var n,o,i,a,u,c,s,f,l,e=e.replace(/^ +$/gm,"");e;)if((i=this.rules.newline.exec(e))&&(e=e.substring(i[0].length),i[0].length>1&&this.tokens.push({type:"space"})),i=this.rules.code.exec(e))e=e.substring(i[0].length),i=i[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?i:i.replace(/\n+$/,"")});else if(i=this.rules.fences.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"code",lang:i[2],text:i[3]});else if(i=this.rules.heading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:i[1].length,text:i[2]});else if(t&&(i=this.rules.nptable.exec(e))){for(e=e.substring(i[0].length),c={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/\n$/,"").split("\n")},f=0;f<c.align.length;f++)/^ *-+: *$/.test(c.align[f])?c.align[f]="right":/^ *:-+: *$/.test(c.align[f])?c.align[f]="center":/^ *:-+ *$/.test(c.align[f])?c.align[f]="left":c.align[f]=null;for(f=0;f<c.cells.length;f++)c.cells[f]=c.cells[f].split(/ *\| */);this.tokens.push(c)}else if(i=this.rules.lheading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:"="===i[2]?1:2,text:i[1]});else if(i=this.rules.hr.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"hr"});else if(i=this.rules.blockquote.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"blockquote_start"}),i=i[0].replace(/^ *> ?/gm,""),this.token(i,t,!0),this.tokens.push({type:"blockquote_end"});else if(i=this.rules.list.exec(e)){for(e=e.substring(i[0].length),a=i[2],this.tokens.push({type:"list_start",ordered:a.length>1}),i=i[0].match(this.rules.item),n=!1,l=i.length,f=0;l>f;f++)c=i[f],s=c.length,c=c.replace(/^ *([*+-]|\d+\.) +/,""),~c.indexOf("\n ")&&(s-=c.length,c=this.options.pedantic?c.replace(/^ {1,4}/gm,""):c.replace(new RegExp("^ {1,"+s+"}","gm"),"")),this.options.smartLists&&f!==l-1&&(u=d.bullet.exec(i[f+1])[0],a===u||a.length>1&&u.length>1||(e=i.slice(f+1).join("\n")+e,f=l-1)),o=n||/\n\n(?!\s*$)/.test(c),f!==l-1&&(n="\n"===c.charAt(c.length-1),o||(o=n)),this.tokens.push({type:o?"loose_item_start":"list_item_start"}),this.token(c,!1,r),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(i=this.rules.html.exec(e))e=e.substring(i[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===i[1]||"script"===i[1]||"style"===i[1],text:i[0]});else if(!r&&t&&(i=this.rules.def.exec(e)))e=e.substring(i[0].length),this.tokens.links[i[1].toLowerCase()]={href:i[2],title:i[3]};else if(t&&(i=this.rules.table.exec(e))){for(e=e.substring(i[0].length),c={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/(?: *\| *)?\n$/,"").split("\n")},f=0;f<c.align.length;f++)/^ *-+: *$/.test(c.align[f])?c.align[f]="right":/^ *:-+: *$/.test(c.align[f])?c.align[f]="center":/^ *:-+ *$/.test(c.align[f])?c.align[f]="left":c.align[f]=null;for(f=0;f<c.cells.length;f++)c.cells[f]=c.cells[f].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(c)}else if(t&&(i=this.rules.paragraph.exec(e)))e=e.substring(i[0].length),this.tokens.push({type:"paragraph",text:"\n"===i[1].charAt(i[1].length-1)?i[1].slice(0,-1):i[1]});else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"text",text:i[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var _={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:s,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:s,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};_._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,_._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,_.link=c(_.link)("inside",_._inside)("href",_._href)(),_.reflink=c(_.reflink)("inside",_._inside)(),_.normal=f({},_),_.pedantic=f({},_.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),_.gfm=f({},_.normal,{escape:c(_.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:c(_.text)("]|","~]|")("|","|https?://|")()}),_.breaks=f({},_.gfm,{br:c(_.br)("{2,}","*")(),text:c(_.gfm.text)("{2,}","*")()}),n.rules=_,n.output=function(e,t,r){var o=new n(t,r);return o.output(e)},n.prototype.output=function(e){for(var t,r,n,o,i="";e;)if(o=this.rules.escape.exec(e))e=e.substring(o[0].length),i+=o[1];else if(o=this.rules.autolink.exec(e))e=e.substring(o[0].length),"@"===o[2]?(r=":"===o[1].charAt(6)?this.mangle(o[1].substring(7)):this.mangle(o[1]),n=this.mangle("mailto:")+r):(r=a(o[1]),n=r),i+=this.renderer.link(n,null,r);else if(this.inLink||!(o=this.rules.url.exec(e))){if(o=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(o[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(o[0])&&(this.inLink=!1),e=e.substring(o[0].length),i+=this.options.sanitize?a(o[0]):o[0];else if(o=this.rules.link.exec(e))e=e.substring(o[0].length),this.inLink=!0,i+=this.outputLink(o,{href:o[2],title:o[3]}),this.inLink=!1;else if((o=this.rules.reflink.exec(e))||(o=this.rules.nolink.exec(e))){if(e=e.substring(o[0].length),t=(o[2]||o[1]).replace(/\s+/g," "),t=this.links[t.toLowerCase()],!t||!t.href){i+=o[0].charAt(0),e=o[0].substring(1)+e;continue}this.inLink=!0,i+=this.outputLink(o,t),this.inLink=!1}else if(o=this.rules.strong.exec(e))e=e.substring(o[0].length),i+=this.renderer.strong(this.output(o[2]||o[1]));else if(o=this.rules.em.exec(e))e=e.substring(o[0].length),i+=this.renderer.em(this.output(o[2]||o[1]));else if(o=this.rules.code.exec(e))e=e.substring(o[0].length),i+=this.renderer.codespan(a(o[2],!0));else if(o=this.rules.br.exec(e))e=e.substring(o[0].length),i+=this.renderer.br();else if(o=this.rules.del.exec(e))e=e.substring(o[0].length),i+=this.renderer.del(this.output(o[1]));else if(o=this.rules.text.exec(e))e=e.substring(o[0].length),i+=a(this.smartypants(o[0]));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else e=e.substring(o[0].length),r=a(o[1]),n=r,i+=this.renderer.link(n,null,r);return i},n.prototype.outputLink=function(e,t){var r=a(t.href),n=t.title?a(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(r,n,this.output(e[1])):this.renderer.image(r,n,a(e[1]))},n.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/--/g,"").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,""):e},n.prototype.mangle=function(e){for(var t,r="",n=e.length,o=0;n>o;o++)t=e.charCodeAt(o),Math.random()>.5&&(t="x"+t.toString(16)),r+="&#"+t+";";return r},o.prototype.code=function(e,t,r){if(this.options.highlight){var n=this.options.highlight(e,t);null!=n&&n!==e&&(r=!0,e=n)}return t?'<pre><code class="'+this.options.langPrefix+a(t,!0)+'">'+(r?e:a(e,!0))+"\n</code></pre>\n":"<pre><code>"+(r?e:a(e,!0))+"\n</code></pre>"},o.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},o.prototype.html=function(e){return e},o.prototype.heading=function(e,t,r){return"<h"+t+' id="'+this.options.headerPrefix+r.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},o.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},o.prototype.list=function(e,t){var r=t?"ol":"ul";return"<"+r+">\n"+e+"</"+r+">\n"},o.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},o.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},o.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},o.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},o.prototype.tablecell=function(e,t){var r=t.header?"th":"td",n=t.align?"<"+r+' style="text-align:'+t.align+'">':"<"+r+">";return n+e+"</"+r+">\n"},o.prototype.strong=function(e){return"<strong>"+e+"</strong>"},o.prototype.em=function(e){return"<em>"+e+"</em>"},o.prototype.codespan=function(e){return"<code>"+e+"</code>"},o.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},o.prototype.del=function(e){return"<del>"+e+"</del>"},o.prototype.link=function(e,t,r){if(this.options.sanitize){try{var n=decodeURIComponent(u(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(o){return""}if(0===n.indexOf("javascript:"))return""}var i='<a href="'+e+'"';return t&&(i+=' title="'+t+'"'),i+=">"+r+"</a>"},o.prototype.image=function(e,t,r){var n='<img src="'+e+'" alt="'+r+'"';return t&&(n+=' title="'+t+'"'),n+=this.options.xhtml?"/>":">"},i.parse=function(e,t,r){var n=new i(t,r);return n.parse(e)},i.prototype.parse=function(e){this.inline=new n(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},i.prototype.next=function(){return this.token=this.tokens.pop()},i.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},i.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},i.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,r,n,o,i="",a="";for(r="",e=0;e<this.token.header.length;e++)n={header:!0,align:this.token.align[e]},r+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(i+=this.renderer.tablerow(r),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],r="",o=0;o<t.length;o++)r+=this.renderer.tablecell(this.inline.output(t[o]),{header:!1,align:this.token.align[o]});a+=this.renderer.tablerow(r)}return this.renderer.table(i,a);case"blockquote_start":for(var a="";"blockquote_end"!==this.next().type;)a+=this.tok();return this.renderer.blockquote(a);case"list_start":for(var a="",u=this.token.ordered;"list_end"!==this.next().type;)a+=this.tok();return this.renderer.list(a,u);case"list_item_start":for(var a="";"list_item_end"!==this.next().type;)a+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(a);case"loose_item_start":for(var a="";"list_item_end"!==this.next().type;)a+=this.tok();return this.renderer.listitem(a);case"html":var c=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(c);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},s.exec=s,l.options=l.setOptions=function(e){return f(l.defaults,e),l},l.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new o,xhtml:!1},l.Parser=i,l.parser=i.parse,l.Renderer=o,l.Lexer=r,l.lexer=r.lex,l.InlineLexer=n,l.inlineLexer=n.output,l.parse=l,"undefined"!=typeof e&&"object"==typeof t?e.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):this.marked=l}.call(function(){return this||("undefined"!=typeof window?window:global)}()),e.exports}();return{toHtml:r(e)}}()),Qo=($o.toHtml,{githubFlavored:M({tables:!1,breaks:!1}),defaultHighlighting:D,sanitize:!1,smartypants:!1}),Xo=t(function(e,t){return f($o.toHtml,Qo,e,t)}),Yo=(n(function(e,t,r,n){return{githubFlavored:e,defaultHighlighting:t,sanitize:r,smartypants:n}}),function(e){var t=e;switch(t.ctor){case"Jan":return 1;case"Feb":return 2;case"Mar":return 3;case"Apr":return 4;case"May":return 5;case"Jun":return 6;case"Jul":return 7;case"Aug":return 8;case"Sep":return 9;case"Oct":return 10;case"Nov":return 11;default:return 12}}),Zo=function(e){return v.eq(s(A["%"],e,4),0)&&!v.eq(s(A["%"],e,100),0)||v.eq(s(A["%"],e,400),0)},ei=t(function(e,t){var r=t;switch(r.ctor){case"Jan":return 31;case"Feb":return Zo(e)?29:28;case"Mar":return 31;case"Apr":return 30;case"May":return 31;case"Jun":return 30;case"Jul":return 31;case"Aug":return 31;case"Sep":return 30;case"Oct":return 31;case"Nov":return 30;default:return 31}}),ti=(P.fromArray([Pn,Fn,Mn,jn,Bn,Dn,Ln,Cn,In,Nn,qn,On]),function(e){return E(En(e))}),ri=function(e){return Sn(S(e))},ni=function(e){var t=e;switch(t.ctor){case"Mon":return 1;case"Tue":return 2;case"Wed":return 3;case"Thu":return 4;case"Fri":return 5;case"Sat":return 6;default:return 7}},oi=(t(function(e,t){var r=ni(t),n=ni(e);return v.cmp(n,r)<0?7+n-r:n-r}),E(un)),ii=1e3*oi,ai=60*ii,ui=60*ai,ci=24*ui,si=7*ci,fi=(n(function(e,t,r,n){var o=ti(n),i=ti(r),a=s(x,i,o),u=s(R,i,o),c=ti(t),f=e;switch(f.ctor){case"Between":return v.cmp(c,u)>0&&v.cmp(c,a)<0;case"BetweenOpenStart":return v.cmp(c,u)>-1&&v.cmp(c,a)<0;case"BetweenOpenEnd":return v.cmp(c,u)>0&&v.cmp(c,a)<1;default:return v.cmp(c,u)>-1&&v.cmp(c,a)<1}}),r(function(e,t,r){var n=ti(r),o=ti(t),i=e;switch(i.ctor){case"Before":return v.cmp(o,n)<0;case"After":return v.cmp(o,n)>0;case"Same":return v.eq(o,n);case"SameOrBefore":return v.cmp(o,n)<1;default:return v.cmp(o,n)>-1}})),li={ctor:"After"},di=(t(function(e,t){return{i18n:e,format:t}}),function(e){var t=e;switch(t.ctor){case"Jan":return"January";case"Feb":return"February";case"Mar":return"March";case"Apr":return"April";case"May":return"May";case"Jun":return"June";case"Jul":return"July";case"Aug":return"August";case"Sep":return"September";case"Oct":return"October";case"Nov":return"November";default:return"December"}}),_i=function(e){var t=e;switch(t.ctor){case"Jan":return"Jan";case"Feb":return"Feb";case"Mar":return"Mar";case"Apr":return"Apr";case"May":return"May";case"Jun":return"Jun";case"Jul":return"Jul";case"Aug":return"Aug";case"Sep":return"Sep";case"Oct":return"Oct";case"Nov":return"Nov";default:return"Dec"}},hi=function(e){var t=e;switch(t.ctor){case"Mon":return"Monday";case"Tue":return"Tuesday";case"Wed":return"Wednesday";case"Thu":return"Thursday";case"Fri":return"Friday";case"Sat":return"Saturday";default:return"Sunday"}},pi=function(e){var t=e;switch(t.ctor){case"Mon":return"Mon";case"Tue":return"Tue";case"Wed":return"Wed";case"Thu":return"Thu";case"Fri":return"Fri";case"Sat":return"Sat";default:return"Sun"}},vi={i18n:{dayShort:pi,dayName:hi,monthShort:_i,monthName:di},format:{date:"%-m/%-d/%Y",longDate:"%A, %B %d, %Y",time:"%-H:%M %p",longTime:"%-H:%M:%S %p",dateTime:"%-m/%-d/%Y %-I:%M %p",firstDayOfWeek:Rn}},mi=(t(function(e,t){var r=vn(e)-vn(t),n=mn(e)-mn(t),o=gn(e)-gn(t),i=yn(e)-yn(t),a=ti(e)-ti(t),u=a-i*ui-o*ai-n*ii-r*oi,c=u/ci|0,f=function(){if(v.cmp(c,0)<0){var e=N(c);return{ctor:"_Tuple2",_0:I(e/7|0),_1:I(s(A["%"],e,7))}}return{ctor:"_Tuple2",_0:c/7|0,_1:s(A["%"],c,7)}}(),l=f._0,d=f._1;return{week:l,day:d,hour:i,minute:o,second:n,millisecond:r}}),r(function(e,r,n){return ri(s(t(function(e,t){return e+t}),r*e,ti(n)))})),gi=function(e){var t=e;switch(t.ctor){case"Millisecond":return oi;case"Second":return ii;case"Minute":return ai;case"Hour":return ui;case"Day":return ci;case"Week":return si;default:var r=t._0;return oi*r.millisecond+ii*r.second+ai*r.minute+ui*r.hour+ci*r.day+si*r.week}},yi=function(e){return mi(gi(e))},bi=(i(function(e,t,r,n,o,i){return{week:e,day:t,hour:r,minute:n,second:o,millisecond:i}}),function(e){return{ctor:"Delta",_0:e}}),wi={ctor:"Millisecond"},Ai=r(function(e,t,r){var n=((153*(t+(v.cmp(t,2)>0?-3:9))+2)/5|0)+r-1,o=e-(v.cmp(t,2)<1?1:0),i=(v.cmp(o,0)>-1?o:o-399)/400|0,a=o-400*i,u=365*a+(a/4|0)-(a/100|0)+n;return 146097*i+u-719468}),ki=a(function(e,t,r,n,o,i,a){var u=Yo(t),c=v.cmp(e,0)<0?0:e,l=f(q,1,s(ei,c,t),r),d=f(Ai,c,u,l);return gi(bi({millisecond:f(q,0,999,a),second:f(q,0,59,i),minute:f(q,0,59,o),hour:f(q,0,23,n),day:d,week:0}))}),Si=function(e){return h(ki,kn(e),An(e),wn(e),yn(e),gn(e),mn(e),vn(e))},Ei=function(e){var t=Si(e),r=E(En(e));return(r-t)/ai|0},Ti=t(function(e,r){return ri(s(t(function(e,t){return e+t}),e*ai,ti(r)))}),xi=Sn(0),Ri=function(){var e=60*yn(xi)+gn(xi);return v.eq(kn(xi),1969)?e-1440:e}(),Oi=function(e){return f(yi,wi,e-Ri*ai,xi)},qi=a(function(e,t,r,n,o,i,a){return Oi(h(ki,e,t,r,n,o,i,a))}),Ni=(f(qi,1970,Pn,1),Ei),Ii=function(e){return{ctor:"_Tuple2",_0:e/60|0,_1:s(A["%"],e,60)}},Ci=t(function(e,t){return function(r){return f(je,e,t,k(r))}}),Li=function(e){return function(t){return f(je,2,e,k(t))}},Di=function(e){return v.eq(s(A["%"],e,12),0)?12:s(A["%"],e,12)},Bi=t(function(e,t){var r=Ii(N(t)),n=r._0,o=r._1;return s(A["++"],v.cmp(t,0)<1?"+":"-",s(A["++"],s(Li,v.chr("0"),n),s(A["++"],e,s(Li,v.chr("0"),o))))}),ji=function(e){return s(j,e,w)},Mi=n(function(e,t,r,n){var o=s(L," ",ji(te(n.submatches))),i=o;switch(i){case"Y":return f(Ci,4,v.chr("0"),kn(r));case"m":return s(Li,v.chr("0"),Yo(An(r)));case"_m":return s(Li,v.chr(" "),Yo(An(r)));case"-m":return k(Yo(An(r)));case"B":return e.i18n.monthName(An(r));case"^B":return De(e.i18n.monthName(An(r)));case"b":return e.i18n.monthShort(An(r));case"^b":return De(e.i18n.monthShort(An(r)));case"d":return s(Li,v.chr("0"),wn(r));case"-d":return k(wn(r));case"e":return s(Li,v.chr(" "),wn(r));case"A":return e.i18n.dayName(bn(r));case"^A":return De(e.i18n.dayName(bn(r)));case"a":return e.i18n.dayShort(bn(r));case"^a":return De(e.i18n.dayShort(bn(r)));case"H":return s(Li,v.chr("0"),yn(r));case"-H":return k(yn(r));case"k":return s(Li,v.chr(" "),yn(r));case"I":return s(Li,v.chr("0"),Di(yn(r)));case"-I":return k(Di(yn(r)));case"l":return s(Li,v.chr(" "),Di(yn(r)));case"p":return v.cmp(yn(r),12)<0?"AM":"PM";case"P":return v.cmp(yn(r),12)<0?"am":"pm";case"M":return s(Li,v.chr("0"),gn(r));case"S":return s(Li,v.chr("0"),mn(r));case"L":return f(Ci,3,v.chr("0"),vn(r));case"%":return o;case"z":return s(Bi,"",t);case":z":return s(Bi,":",t);default:return""}}),Fi=Hn("%(Y|m|_m|-m|B|^B|b|^b|d|-d|e|A|^A|a|^a|H|-H|k|I|-I|l|p|P|M|S|%|L|z|:z)"),Pi=n(function(e,t,r,n){var o=Ni(n),i=o-t;return l(Jn,Vn,Fi,f(Mi,e,t,s(Ti,i,n)),r)}),Ui=r(function(e,t,r){return l(Pi,e,Ni(r),t,r)}),Ji=(r(function(e,t,r){return l(Pi,e,0,t,r)}),"%Y-%m-%dT%H:%M:%S.%L%z"),Wi=(s(Ui,vi,Ji),"%Y-%m-%dT%H:%M:%S.%L"),Hi=(s(Ui,vi,Wi),function(e){return l(Jn,Vn,Hn("[^a-zA-Z0-9_-]"),function(e){return""},l(Jn,Vn,Hn("\\s+"),function(e){return"-"},Be(k(e))))}),Vi=t(function(e,t){return s(A["++"],Hi(e),Hi(t))}),zi=t(function(e,t){var r=t;return"[]"===r.ctor?t:"[]"===r._1.ctor?e(r._0):s(re["::"],r._0,s(zi,e,r._1))}),Gi=t(function(e,t){var r=t;return"[]"===r.ctor?t:"[]"===r._1.ctor?P.fromArray([e(r._0)]):s(re["::"],r._0,s(Gi,e,r._1))}),Ki=(r(function(e,t,r){return{important:e,key:t,value:r}}),n(function(e,t,r,n){return{charset:e,imports:t,namespaces:r,declarations:n}}),function(e){return{ctor:"FontFeatureValues",_0:e}}),$i=function(e){return{ctor:"Viewport",_0:e}},Qi=t(function(e,t){return{ctor:"Keyframes",_0:e,_1:t}}),Xi=function(e){return{ctor:"FontFace",_0:e}},Yi=t(function(e,t){return{ctor:"PageRule",_0:e,_1:t}}),Zi=o(function(e,t,r,n,o){return{ctor:"DocumentRule",_0:e,_1:t,_2:r,_3:n,_4:o}}),ea=t(function(e,t){return{ctor:"SupportsRule",_0:e,_1:t}}),ta=t(function(e,t){return{ctor:"MediaRule",_0:e,_1:t}}),ra=function(e){return{ctor:"StyleBlockDeclaration",_0:e}},na=t(function(e,t){var r=t;e:do{if("[]"===r.ctor)return t;if("[]"!==r._1.ctor)break e;switch(r._0.ctor){case"StyleBlockDeclaration":return s(ne,ra,e(r._0._0));case"MediaRule":if("::"===r._0._1.ctor){if("[]"===r._0._1._1.ctor)return P.fromArray([s(ta,r._0._0,e(r._0._1._0))]);var n=s(na,e,P.fromArray([s(ta,r._0._0,r._0._1._1)]));return"::"===n.ctor&&"MediaRule"===n._0.ctor&&"[]"===n._1.ctor?P.fromArray([s(ta,n._0._0,s(re["::"],r._0._1._0,n._0._1))]):n}break e;case"SupportsRule":return P.fromArray([s(ea,r._0._0,s(na,e,r._0._1))]);case"DocumentRule":return s(ne,l(Zi,r._0._0,r._0._1,r._0._2,r._0._3),e(r._0._4));case"PageRule":return t;case"FontFace":return t;case"Keyframes":return t;case"Viewport":return t;case"CounterStyle":return t;default:return t}}while(!1);return s(re["::"],r._0,s(na,e,r._1))}),oa=r(function(e,t,r){return{ctor:"StyleBlock",_0:e,_1:t,_2:r}}),ia=t(function(e,t){var r=t;return f(oa,r._0,r._1,s(A["++"],r._2,P.fromArray([e])))}),aa=t(function(e,t){var r=t;if("[]"===r.ctor)return t;if("[]"!==r._1.ctor)return s(re["::"],r._0,s(aa,e,r._1));switch(r._0.ctor){case"StyleBlockDeclaration":return P.fromArray([ra(s(ia,e,r._0._0))]);case"MediaRule":return P.fromArray([s(ta,r._0._0,s(Gi,ia(e),r._0._1))]);default:return t}}),ua=function(e){return{ctor:"MediaQuery",_0:e}},ca=r(function(e,t,r){return{ctor:"Selector",_0:e,_1:t,_2:r}}),sa=t(function(e,t){return{ctor:"CustomSelector",_0:e,_1:t}}),fa=function(e){return{ctor:"UniversalSelectorSequence",_0:e}},la=t(function(e,t){return{ctor:"TypeSelectorSequence",_0:e,_1:t}}),da=t(function(e,t){var r=t;switch(r.ctor){case"TypeSelectorSequence":return s(la,r._0,s(A["++"],r._1,P.fromArray([e])));case"UniversalSelectorSequence":return fa(s(A["++"],r._0,P.fromArray([e])));default:return s(sa,r._0,s(A["++"],r._1,P.fromArray([e])))}}),_a=t(function(e,t){var r=t;return"[]"===r.ctor?P.fromArray([]):"_Tuple2"===r._0.ctor&&"[]"===r._1.ctor?P.fromArray([{ctor:"_Tuple2",_0:r._0._0,_1:s(da,e,r._0._1)}]):s(re["::"],r._0,s(_a,e,r._1))}),ha=t(function(e,t){var r=t;return"[]"===r._1.ctor?f(ca,s(da,e,r._0),P.fromArray([]),r._2):f(ca,r._0,s(_a,e,r._1),r._2)}),pa=t(function(e,t){var r=t;e:do{if("[]"===r.ctor)return t;if("[]"!==r._1.ctor)break e;switch(r._0.ctor){case"StyleBlockDeclaration":if("[]"===r._0._0._1.ctor)return P.fromArray([ra(f(oa,s(ha,e,r._0._0._0),P.fromArray([]),r._0._0._2))]);var n=s(Gi,ha(e),r._0._0._1);return P.fromArray([ra(f(oa,r._0._0._0,n,r._0._0._2))]);case"MediaRule":if("::"===r._0._1.ctor){if("[]"===r._0._1._1.ctor){if("[]"===r._0._1._0._1.ctor){var o=f(oa,s(ha,e,r._0._1._0._0),P.fromArray([]),r._0._1._0._2);return P.fromArray([s(ta,r._0._0,P.fromArray([o]))])}var n=s(Gi,ha(e),r._0._1._0._1),o=f(oa,r._0._1._0._0,n,r._0._1._0._2);return P.fromArray([s(ta,r._0._0,P.fromArray([o]))])}var i=s(pa,e,P.fromArray([s(ta,r._0._0,r._0._1._1)]));return"::"===i.ctor&&"MediaRule"===i._0.ctor&&"[]"===i._1.ctor?P.fromArray([s(ta,i._0._0,s(re["::"],r._0._1._0,i._0._1))]):i}break e;case"SupportsRule":return P.fromArray([s(ea,r._0._0,s(pa,e,r._0._1))]);case"DocumentRule":if("[]"===r._0._4._1.ctor){var o=f(oa,s(ha,e,r._0._4._0),P.fromArray([]),r._0._4._2);return P.fromArray([d(Zi,r._0._0,r._0._1,r._0._2,r._0._3,o)])}var n=s(Gi,ha(e),r._0._4._1),o=f(oa,r._0._4._0,n,r._0._4._2);return P.fromArray([d(Zi,r._0._0,r._0._1,r._0._2,r._0._3,o)]);case"PageRule":return t;case"FontFace":return t;case"Keyframes":return t;case"Viewport":return t;case"CounterStyle":return t;default:return t}}while(!1);return s(re["::"],r._0,s(pa,e,r._1))}),va=t(function(e,t){var r=t;if("[]"===r._1.ctor){var n=r._0;return P.fromArray([f(oa,n,P.fromArray([]),r._2),f(oa,s(ha,e,n),P.fromArray([]),P.fromArray([]))])}var o=r._1,i=r._0,a=s(Gi,ha(e),o);return P.fromArray([f(oa,i,o,r._2),f(oa,i,a,P.fromArray([]))])}),ma=function(e){return{ctor:"PseudoClassSelector",_0:e}},ga=function(e){return{ctor:"IdSelector",_0:e}},ya=function(e){return{ctor:"ClassSelector",_0:e}},ba=function(e){return{ctor:"TypeSelector",_0:e}},wa=function(e){return{ctor:"PseudoElement",_0:e}},Aa={ctor:"Descendant"},ka={ctor:"Child"},Sa={ctor:"GeneralSibling"},Ea={ctor:"AdjacentSibling"},Ta=function(e){var t=e;return t._0},xa=t(function(e,t){var r=t;switch(r.ctor){case"StyleBlockDeclaration":return s(ta,e,P.fromArray([r._0]));case"MediaRule":return s(ta,s(A["++"],e,r._0),r._1);case"SupportsRule":return s(ea,r._0,s(ne,xa(e),r._1));case"DocumentRule":return d(Zi,r._0,r._1,r._2,r._3,r._4);case"PageRule":return t;case"FontFace":return t;case"Keyframes":return t;case"Viewport":return t;case"CounterStyle":return t;default:return t}}),Ra=(n(function(e,t,r,n){return{key:e,value:t,important:r,warnings:n}}),n(function(e,t,r,n){return{charset:e,imports:t,namespaces:r,snippets:n}}),function(e){return{ctor:"ApplyMixins",_0:e}}),Oa=t(function(e,t){return{ctor:"WithMedia",_0:e,_1:t}}),qa=t(function(e,t){return{ctor:"WithPseudoElement",_0:e,_1:t}}),Na=t(function(e,t){return{ctor:"NestSnippet",_0:e,_1:t}}),Ia=t(function(e,t){return{ctor:"ExtendSelector",_0:e,_1:t}}),Ca=function(e){return{ctor:"AppendProperty",_0:e}},La=t(function(e,t){var r=t;switch(r.ctor){case"AppendProperty":return Ca(e(r._0));case"ExtendSelector":return s(Ia,r._0,s(Da,e,r._1));case"NestSnippet":return t;case"WithPseudoElement":return t;case"WithMedia":return t;default:return Ra(s(Gi,La(e),r._0))}}),Da=t(function(e,t){var r=t;return"[]"===r.ctor?t:"[]"===r._1.ctor?P.fromArray([s(La,e,r._0)]):s(re["::"],r._0,s(Da,e,r._1))}),Ba=function(e){return{ctor:"Snippet",_0:e}},ja=t(function(e,t){return{ctor:"Keyframes",_0:e,_1:t}}),Ma=(t(function(e,t){return{ctor:"PageRule",_0:e,_1:t}}),o(function(e,t,r,n,o){return{ctor:"DocumentRule",_0:e,_1:t,_2:r,_3:n,
_4:o}})),Fa=t(function(e,t){return{ctor:"SupportsRule",_0:e,_1:t}}),Pa=t(function(e,t){return{ctor:"MediaRule",_0:e,_1:t}}),Ua=function(e){return{ctor:"StyleBlockDeclaration",_0:e}},Ja=r(function(e,t,r){return{ctor:"StyleBlock",_0:e,_1:t,_2:r}}),Wa=function(e){for(;;){var t=e;if("[]"===t.ctor)return P.fromArray([]);if("StyleBlockDeclaration"===t._0.ctor)return s(A["++"],s(re["::"],t._0._0._0,t._0._0._1),Wa(t._1));var r=t._1;e=r}},Ha=function(e){var t=e;return{ctor:"_Tuple2",_0:t.warnings,_1:{key:t.key,value:t.value,important:t.important}}},Va=function(e){return{ctor:"_Tuple2",_0:s(fe,function(e){return e.warnings},e),_1:s(ne,function(e){return g(Ha(e))},e)}},za=o(function(e,t,r,n,o){var i=o;return"StyleBlockDeclaration"===i.ctor?d(Zi,e,t,r,n,i._0):o}),Ga=function(e){var t=e;if("[]"===t.ctor)return{declarations:P.fromArray([]),warnings:P.fromArray([])};var r=Ga(t._1);return{declarations:s(A["++"],t._0.declarations,r.declarations),warnings:s(A["++"],t._0.warnings,r.warnings)}},Ka=function(e){var t=function(e){var r=e;if("[]"===r.ctor)return{ctor:"_Tuple2",_0:P.fromArray([]),_1:P.fromArray([])};var n=t(r._1),o=n._0,i=n._1,a=Va(r._0._1),u=a._0,c=a._1;return{ctor:"_Tuple2",_0:s(A["++"],u,o),_1:s(re["::"],{ctor:"_Tuple2",_0:r._0._0,_1:c},i)}},r=t(e),n=r._0,o=r._1;return{declarations:P.fromArray([Ki(o)]),warnings:n}},$a=function(e){var t=Va(e),r=t._0,n=t._1;return{declarations:P.fromArray([$i(n)]),warnings:r}},Qa=function(e){var t=Va(e),r=t._0,n=t._1;return{declarations:P.fromArray([$i(n)]),warnings:r}},Xa=t(function(e,t){return{declarations:P.fromArray([s(Qi,e,t)]),warnings:P.fromArray([])}}),Ya=function(e){var t=Va(e),r=t._0,n=t._1;return{declarations:P.fromArray([Xi(n)]),warnings:r}},Za=t(function(e,t){var r=Va(t),n=r._0,o=r._1;return{declarations:P.fromArray([s(Yi,e,o)]),warnings:n}}),eu=t(function(e,t){var r=t;switch(r.ctor){case"StyleBlockDeclaration":return s(ta,e,P.fromArray([r._0]));case"MediaRule":return s(ta,s(A["++"],e,r._0),r._1);case"SupportsRule":return s(ea,r._0,s(ne,eu(e),r._1));case"DocumentRule":return d(Zi,r._0,r._1,r._2,r._3,r._4);case"PageRule":return t;case"FontFace":return t;case"Keyframes":return t;case"Viewport":return t;case"CounterStyle":return t;default:return t}}),tu=t(function(e,t){var r=function(t){var r=ru(t),n=r.declarations,o=r.warnings;return{declarations:s(ne,eu(e),n),warnings:o}},n=s(ne,r,t);return{warnings:s(fe,function(e){return e.warnings},n),declarations:s(fe,function(e){return e.declarations},n)}}),ru=function(e){var t=e;return s(nu,t._2,P.fromArray([ra(f(oa,t._0,t._1,P.fromArray([])))]))},nu=t(function(e,r){e:for(;;){var n=e;if("[]"===n.ctor)return{declarations:r,warnings:P.fromArray([])};switch(n._0.ctor){case"AppendProperty":var o=Ha(n._0._0),i=o._0,a=o._1,u=s(nu,n._1,s(aa,a,r));return{declarations:u.declarations,warnings:s(A["++"],i,u.warnings)};case"ExtendSelector":var c=function(e){var t=s(nu,n._0._1,e.declarations);return{warnings:s(A["++"],e.warnings,t.warnings),declarations:t.declarations}},l=Ga(s(Gi,c,s(ne,function(e){return{declarations:P.fromArray([e]),warnings:P.fromArray([])}},s(na,va(n._0._0),r)))),_=s(nu,n._1,l.declarations);return{warnings:s(A["++"],l.warnings,_.warnings),declarations:_.declarations};case"NestSnippet":var h=t(function(e,t){var r=e,o=t;return f(ca,r._0,s(A["++"],r._1,s(re["::"],{ctor:"_Tuple2",_0:n._0._0,_1:o._0},o._1)),B(P.fromArray([o._2,r._2])))}),p=function(e){var t=e;switch(t.ctor){case"StyleBlockDeclaration":var n=s(fe,function(e){return s(ne,h(e),s(re["::"],t._0._0,t._0._1))},Wa(r)),o=function(){var e=n;return"[]"===e.ctor?P.fromArray([]):P.fromArray([ra(f(oa,e._0,e._1,P.fromArray([])))])}();return Ga(P.fromArray([s(nu,t._0._2,o)]));case"MediaRule":return s(tu,t._0,t._1);case"SupportsRule":return s(iu,t._0,t._1);case"DocumentRule":return d(ou,t._0,t._1,t._2,t._3,t._4);case"PageRule":return s(Za,t._0,t._1);case"FontFace":return Ya(t._0);case"Keyframes":return s(Xa,t._0,t._1);case"Viewport":return Qa(t._0);case"CounterStyle":return $a(t._0);default:return Ka(t._0)}};return Ga(s(t(function(e,t){return s(A["++"],e,t)}),P.fromArray([s(nu,n._1,r)]),s(ne,p,s(fe,Ta,n._0._1))));case"WithPseudoElement":var v=n._1,m=r;e=v,r=m;continue e;case"WithMedia":var g=function(){var e=Wa(r);return"[]"===e.ctor?P.fromArray([]):P.fromArray([s(ta,n._0._0,P.fromArray([f(oa,e._0,e._1,P.fromArray([]))]))])}();return Ga(P.fromArray([s(nu,n._1,r),s(nu,n._0._1,g)]));default:var y=s(A["++"],n._0._0,n._1),b=r;e=y,r=b;continue e}}}),ou=o(function(e,t,r,n,o){var i=ru(o),a=i.declarations,u=i.warnings;return{declarations:s(ne,l(za,e,t,r,n),a),warnings:u}}),iu=t(function(e,t){var r=au(s(fe,Ta,t)),n=r.declarations,o=r.warnings;return{declarations:P.fromArray([s(ea,e,n)]),warnings:o}}),au=function(e){var t=e;if("[]"===t.ctor)return{declarations:P.fromArray([]),warnings:P.fromArray([])};var r=uu(t._0),n=r.declarations,o=r.warnings,i=au(t._1);return{declarations:s(A["++"],n,i.declarations),warnings:s(A["++"],o,i.warnings)}},uu=function(e){var t=e;switch(t.ctor){case"StyleBlockDeclaration":return ru(t._0);case"MediaRule":return s(tu,t._0,t._1);case"SupportsRule":return s(iu,t._0,t._1);case"DocumentRule":return d(ou,t._0,t._1,t._2,t._3,t._4);case"PageRule":return s(Za,t._0,t._1);case"FontFace":return Ya(t._0);case"Keyframes":return s(Xa,t._0,t._1);case"Viewport":return Qa(t._0);case"CounterStyle":return $a(t._0);default:return Ka(t._0)}},cu=(t(function(e,t){return{declarations:e,warnings:t}}),function(e){for(;;){var t=e;if("[]"===t.ctor)return P.fromArray([]);if("StyleBlockDeclaration"===t._0.ctor)return s(A["++"],s(re["::"],t._0._0._0,t._0._0._1),cu(t._1));var r=t._1;e=r}}),su=function(e){return Z(e)?{value:"none"}:{value:s(Fe,", ",s(ne,function(e){return e},e))}},fu=function(e){return k(e+0)},lu=function(e){return f(m,t(function(e,t){return s(A["++"],e,t)}),"%",fu(s(t(function(e,t){return e*t}),100,e)))},du=(t(function(e,r){var n=function(e){var t=e;return Ba("[]"===t.ctor?P.fromArray([]):P.fromArray([Ua(f(Ja,t._0,t._1,r))]))};return n(cu(s(fe,Ta,s(ne,t(function(e,t){return t(e)})(P.fromArray([])),e))))}),Na(Sa),Na(Ea),Na(Aa),Na(ka),qa(wa("selection")),qa(wa("first-line")),qa(wa("first-letter")),qa(wa("before")),qa(wa("after")),Ia(ma("valid")),Ia(ma("target")),Ia(ma("scope")),Ia(ma("root")),Ia(ma("required")),Ia(ma("read-write")),Ia(ma("out-of-range")),Ia(ma("optional")),Ia(ma("only-of-type")),Ia(ma("only-child")),Ia(ma("link")),Ia(ma("last-of-type")),Ia(ma("last-child")),Ia(ma("invalid")),Ia(ma("indeterminate")),Ia(ma("hover")),Ia(ma("focus")),Ia(ma("fullscreen")),Ia(ma("first-of-type")),Ia(ma("first-child")),Ia(ma("first")),Ia(ma("enabled")),Ia(ma("empty")),Ia(ma("disabled")),Ia(ma("checked")),Ia(ma("active")),r(function(e,t,r){return Ca({key:t,value:r,important:!1,warnings:e})})),_u=du(P.fromArray([])),hu=t(function(e,t){var r=f(ca,t,P.fromArray([]),D);return Ba(P.fromArray([Ua(f(Ja,r,P.fromArray([]),e))]))}),pu=pu||{};pu["."]=t(function(e,t){return s(hu,t,fa(P.fromArray([ya(s(Vi,"",e))])))});var pu=(t(function(e,t){return s(hu,t,s(sa,e,P.fromArray([])))}),pu||{});pu["#"]=t(function(e,t){return s(hu,t,fa(P.fromArray([ga(s(Vi,"",e))])))});var vu=function(e){return k(e)},mu=t(function(e,t){var r=function(t){e:for(;;){var n=t;if("[]"===n.ctor)return P.fromArray([]);switch(n._0.ctor){case"StyleBlockDeclaration":var o=n._1;t=o;continue e;case"MediaRule":return s(re["::"],s(Pa,s(A["++"],e,n._0._0),n._0._1),r(n._1));default:return s(re["::"],n._0,r(n._1))}}},n=function(e){for(;;){var t=e;if("[]"===t.ctor)return P.fromArray([]);if("StyleBlockDeclaration"===t._0.ctor)return s(re["::"],t._0._0,n(t._1));var r=t._1;e=r}},o=s(fe,Ta,t),i=s(Pa,e,n(o));return Ba(s(re["::"],i,r(o)))}),gu=t(function(e,t){return s(mu,P.fromArray([ua(e)]),t)}),yu=function(e){return f(du,e.warnings,"background-color",e.value)},bu=(n(function(e,t,r,n){var o=s(Fe," ",P.fromArray([e.value,t.value,r.value,n.value])),i=s(A["++"],e.warnings,s(A["++"],t.warnings,s(A["++"],r.warnings,n.warnings)));return f(du,i,"border-color",o)}),r(function(e,t,r){var n=s(Fe," ",P.fromArray([e.value,t.value,r.value])),o=s(A["++"],e.warnings,s(A["++"],t.warnings,r.warnings));return f(du,o,"border-color",n)}),t(function(e,t){var r=s(Fe," ",P.fromArray([e.value,t.value])),n=s(A["++"],e.warnings,t.warnings);return f(du,n,"border-color",r)}),s(_u,"display","flex"),o(function(e,t,r,n,o){return s(_u,e,s(Fe," ",P.fromArray([t.value,r.value,n.value,o.value])))})),wu=(bu("text-shadow"),bu("padding"),bu("margin"),bu("border-image-outset"),bu("border-image-width"),bu("border-radius"),n(function(e,t,r,n){return s(_u,e,s(Fe," ",P.fromArray([t.value,r.value,n.value])))})),Au=(wu("text-shadow"),wu("text-indent"),wu("padding"),wu("margin"),wu("border"),wu("border-top"),wu("border-bottom"),wu("border-left"),wu("border-right"),wu("border-block-start"),wu("border-block-end"),wu("border-block-start"),wu("border-block-end"),wu("border-image-outset"),wu("border-image-width"),wu("border-radius"),wu("font-variant"),wu("font-variant-numeric"),wu("text-decoration"),r(function(e,t,r){return s(_u,e,s(Fe," ",P.fromArray([t.value,r.value])))})),ku=(Au("text-shadow"),Au("text-indent"),Au("padding"),Au("margin"),Au("border"),Au("border-top"),Au("border-bottom"),Au("border-left"),Au("border-right"),Au("border-block-start"),Au("border-block-end"),Au("border-block-start"),Au("border-block-end"),Au("border-image-outset"),Au("border-image-width"),Au("border-top-width"),Au("border-bottom-left-radius"),Au("border-bottom-right-radius"),Au("border-top-left-radius"),Au("border-top-right-radius"),Au("border-radius"),Au("border-spacing"),Au("font-variant"),Au("font-variant-numeric"),Au("text-decoration"),t(function(e,t){return s(_u,e,t.value)})),Su=(ku("text-rendering"),ku("text-overflow"),ku("text-shadow"),ku("text-indent"),ku("text-transform"),ku("display"),ku("opacity"),ku("width")),Eu=(ku("max-width"),ku("min-width"),ku("height")),Tu=(ku("min-height"),ku("max-height"),ku("padding"),ku("padding-block-start"),ku("padding-block-end"),ku("padding-inline-start"),ku("padding-inline-end"),ku("padding-top"),ku("padding-bottom")),xu=(ku("padding-right"),ku("padding-left"),ku("margin"),ku("margin-top")),Ru=(ku("margin-bottom"),ku("margin-right")),Ou=(ku("margin-left"),ku("margin-block-start"),ku("margin-block-end"),ku("margin-inline-start"),ku("margin-inline-end"),ku("top"),ku("bottom")),qu=(ku("left"),ku("right")),Nu=(ku("border"),ku("border-top"),ku("border-bottom"),ku("border-left"),ku("border-right"),ku("border-block-start"),ku("border-block-end"),ku("border-block-start"),ku("border-block-end"),ku("border-image-outset"),ku("border-image-width"),ku("border-block-end-style"),ku("border-block-start-style"),ku("border-inline-end-style"),ku("border-bottom-style"),ku("border-inline-start-style"),ku("border-left-style"),ku("border-right-style"),ku("border-top-style"),ku("border-style"),ku("border-bottom-width"),ku("border-inline-end-width"),ku("border-left-width"),ku("border-right-width"),ku("border-top-width"),ku("border-bottom-left-radius"),ku("border-bottom-right-radius"),ku("border-top-left-radius"),ku("border-top-right-radius"),ku("border-radius"),ku("border-spacing"),ku("overflow"),ku("overflow-x"),ku("overflow-y"),ku("white-space"),ku("line-height"),ku("letter-spacing"),ku("font-family"),function(e){return s(ku,"font-family",su(e))}),Iu=(ku("font-size"),ku("font-style"),ku("font-variant"),ku("font-variant-ligatures"),ku("font-variant-caps"),ku("font-variant-numeric"),ku("text-decoration"),ku("text-decoration-line"),ku("text-decoration-style"),ku("position")),Cu=(ku("text-bottom"),ku("text-top"),ku("super"),ku("sub"),ku("baseline"),ku("middle"),ku("stretch"),ku("flex-end"),ku("flex-start"),ku("order"),Au("flex-flow"),ku("flex-flow"),ku("flex-direction"),ku("flex-wrap"),ku("flex-shrink"),ku("flex-grow"),ku("flex-basis"),wu("flex"),Au("flex"),ku("flex"),ku("transform-style"),ku("box-sizing"),ku("transform-box"),ku("true"),ku("match-parent"),ku("end"),ku("start"),ku("justify-all"),ku("text-justify"),ku("center"),La(function(e){return v.update(e,{important:!0})}),ku("all"),r(function(e,t,r){var n=s(Fe," ",s(oe,function(e){return T(We(e))},P.fromArray([k(s(e,t.numericValue,r.numericValue)),t.unitLabel])));return v.update(t,{value:n})})),pu=pu||{};pu["|*|"]=Cu(t(function(e,t){return e*t}));var pu=pu||{};pu["|/|"]=Cu(t(function(e,t){return e/t}));var pu=pu||{};pu["|-|"]=Cu(t(function(e,t){return e-t}));var pu=pu||{};pu["|+|"]=Cu(t(function(e,t){return e+t}));var Lu=(r(function(e,t,r){e:for(;;){var n=r;switch(n.ctor){case"AppendProperty":return s(_u,t,n._0.key);case"ExtendSelector":return f(du,P.fromArray([s(A["++"],"Cannot apply ",s(A["++"],e,s(A["++"]," with inapplicable mixin for selector ",k(n._0))))]),t,"");case"NestSnippet":return f(du,P.fromArray([s(A["++"],"Cannot apply ",s(A["++"],e,s(A["++"]," with inapplicable mixin for combinator ",k(n._0))))]),t,"");case"WithPseudoElement":return f(du,P.fromArray([s(A["++"],"Cannot apply ",s(A["++"],e,s(A["++"]," with inapplicable mixin for pseudo-element setter ",k(n._0))))]),t,"");case"WithMedia":return f(du,P.fromArray([s(A["++"],"Cannot apply ",s(A["++"],e,s(A["++"]," with inapplicable mixin for media query ",k(n._0))))]),t,"");default:if("[]"===n._0.ctor)return f(du,P.fromArray([s(A["++"],"Cannot apply ",s(A["++"],e," with empty mixin. "))]),t,"");if("[]"===n._0._1.ctor){var o=e,i=t,a=n._0._0;e=o,t=i,r=a;continue e}var u=e,c=t,l=Ra(n._0._1);e=u,t=c,r=l;continue e}}}),t(function(e,t){return s(A["++"],e,s(A["++"],"(",s(A["++"],s(Fe,", ",t),")")))})),Du=(ua("tv"),ua("projection"),ua("print"),ua("screen"),t(function(e,t){return{value:e,fontWeight:t}}),{ctor:"Compatible"}),Bu=({value:"transparent",color:Du,warnings:P.fromArray([])},{value:"currentColor",color:Du,warnings:P.fromArray([])},r(function(e,t,r){var n=v.cmp(e,0)<0||v.cmp(e,255)>0||v.cmp(t,0)<0||v.cmp(t,255)>0||v.cmp(r,0)<0||v.cmp(r,255)>0?P.fromArray([s(A["++"],"RGB color values must be between 0 and 255. rgb(",s(A["++"],k(e),s(A["++"],", ",s(A["++"],k(t),s(A["++"],", ",s(A["++"],k(r),") is not valid."))))))]):P.fromArray([]);return{value:s(Lu,"rgb",s(ne,fu,P.fromArray([e,t,r]))),color:Du,warnings:n,red:e,green:t,blue:r,alpha:1}}),n(function(e,t,r,n){var o=v.cmp(e,0)<0||v.cmp(e,255)>0||v.cmp(t,0)<0||v.cmp(t,255)>0||v.cmp(r,0)<0||v.cmp(r,255)>0||v.cmp(n,0)<0||v.cmp(n,1)>0?P.fromArray([s(A["++"],"RGB color values must be between 0 and 255, and the alpha in RGBA must be between 0 and 1. rgba(",s(A["++"],k(e),s(A["++"],", ",s(A["++"],k(t),s(A["++"],", ",s(A["++"],k(r),s(A["++"],", ",s(A["++"],k(n),") is not valid."))))))))]):P.fromArray([]);return{value:s(Lu,"rgba",s(ne,fu,P.fromArray([e,t,r,n]))),color:Du,warnings:o,red:e,green:t,blue:r,alpha:1}}),function(e){var t=v.eq(f(Me,0,1,e),"#")?e:s(A["++"],"#",e),r=s(Wn,Hn("^#([a-fA-F0-9]{8}|[a-fA-F0-9]{6}|[a-fA-F0-9]{4}|[a-fA-F0-9]{3})$"),t)?P.fromArray([]):P.fromArray([s(Fe," ",P.fromArray(["The syntax of a hex-color is a token whose value consists of 3, 4, 6, or 8 hexadecimal digits.",t,"is not valid.","Please see: https://drafts.csswg.org/css-color/#hex-notation"]))]);return{value:t,color:Du,red:0,green:0,blue:0,alpha:1,warnings:r}}),ju=i(function(e,t,r,n,o,i){var a=0,u=0,c=0;return{value:e,color:Du,red:c,green:u,blue:a,alpha:i,warnings:t}}),Mu=(r(function(e,t,r){var n=P.fromArray([fu(e),lu(t),lu(r)]),o=s(Lu,"hsl",n),i=v.cmp(e,360)>0||v.cmp(e,0)<0||v.cmp(t,1)>0||v.cmp(t,0)<0||v.cmp(r,1)>0||v.cmp(r,0)<0?P.fromArray([s(A["++"],"HSL color values must have an H value between 0 and 360 (as in degrees) and S and L values between 0 and 1. ",s(A["++"],o," is not valid."))]):P.fromArray([]);return _(ju,o,i,e,t,r,1)}),n(function(e,t,r,n){var o=P.fromArray([fu(e),lu(t),lu(r),fu(n)]),i=s(Lu,"hsla",o),a=v.cmp(e,360)>0||v.cmp(e,0)<0||v.cmp(t,1)>0||v.cmp(t,0)<0||v.cmp(r,1)>0||v.cmp(r,0)<0||v.cmp(n,1)>0||v.cmp(n,0)<0?P.fromArray([s(A["++"],"HSLA color values must have an H value between 0 and 360 (as in degrees) and S, L, and A values between 0 and 1. ",s(A["++"],i," is not valid."))]):P.fromArray([]);return _(ju,i,a,e,t,r,n)}),r(function(e,t,r){return{value:s(A["++"],fu(r),t),numericValue:r,units:e,unitLabel:t,length:Du,lengthOrAuto:Du,lengthOrNumber:Du,lengthOrNone:Du,lengthOrMinMaxDimension:Du,lengthOrNoneOrMinMaxDimension:Du,textIndent:Du,flexBasis:Du,lengthOrNumberOrAutoOrNoneOrContent:Du,fontSize:Du}})),Fu=t(function(e,t){return{value:s(A["++"],fu(t),e),angle:Du}}),Pu=(Fu("deg"),Fu("grad"),Fu("rad"),Fu("turn"),i(function(e,t,r,n,o,i){return{value:s(Lu,"matrix",s(ne,fu,P.fromArray([e,t,r,n,o,i]))),transform:Du}}),n(function(e,t,r,n){var o=n,i=s(ne,fu,P.fromArray([e,t,r]));return{value:s(Lu,"rotate3d",s(A["++"],i,P.fromArray([o.value]))),transform:Du}}),t(function(e,t){return{value:s(Lu,"scale",s(ne,fu,P.fromArray([e,t]))),transform:Du}}),r(function(e,t,r){return{value:s(Lu,"scale3d",s(ne,fu,P.fromArray([e,t,r]))),transform:Du}}),t(function(e,t){return{value:s(Lu,"skew",P.fromArray([e.value,t.value])),transform:Du}}),t(function(e,t){return{value:s(Lu,"translate",P.fromArray([e.value,t.value])),transform:Du}}),r(function(e,t,r){return{value:s(Lu,"translate3d",P.fromArray([e.value,t.value,r.value])),transform:Du}}),{value:"wrap",flexWrap:Du,flexDirectionOrWrap:Du}),Uu=(v.update(Pu,{value:"wrap-reverse"}),{value:"row",flexDirection:Du,flexDirectionOrWrap:Du}),Ju=(v.update(Uu,{value:"row-reverse"}),v.update(Uu,{value:"column"}),v.update(Uu,{value:"column-reverse"}),{value:"fill-available",minMaxDimension:Du,lengthOrMinMaxDimension:Du,lengthOrNoneOrMinMaxDimension:Du}),Wu=(v.update(Ju,{value:"max-content"}),v.update(Ju,{value:"min-content"}),v.update(Ju,{value:"fit-content"}),{value:"fixed",position:Du}),Hu=({value:"normal",warnings:P.fromArray([]),fontStyle:Du,featureTagValue:Du},t(function(e,t){var r=P.fromArray([{ctor:"_Tuple2",_0:!v.eq(Ue(e),4),_1:s(A["++"],"Feature tags must be exactly 4 characters long. ",s(A["++"],e," is invalid."))},{ctor:"_Tuple2",_0:v.cmp(t,0)<0,_1:s(A["++"],"Feature values cannot be negative. ",s(A["++"],k(t)," is invalid."))}]),n=s(ne,g,s(oe,y,r));return{value:s(A["++"],k(e),s(A["++"]," ",k(t))),featureTagValue:Du,warnings:n}}),t(function(e,t){return{ctor:"PseudoClass",_0:e,_1:t}}),t(function(e,t){return{ctor:"PseudoElement",_0:e,_1:t}}),{ctor:"PercentageUnits"}),Vu=(s(Mu,Hu,"%"),{ctor:"EmUnits"}),zu=(s(Mu,Vu,"em"),{ctor:"ExUnits"}),Gu=(s(Mu,zu,"ex"),{ctor:"ChUnits"}),Ku=(s(Mu,Gu,"ch"),{ctor:"RemUnits"}),$u=(s(Mu,Ku,"rem"),{ctor:"VhUnits"}),Qu=(s(Mu,$u,"vh"),{ctor:"VwUnits"}),Xu=(s(Mu,Qu,"vw"),{ctor:"VMinUnits"}),Yu=(s(Mu,Xu,"vmin"),{ctor:"VMaxUnits"}),Zu=(s(Mu,Yu,"vmax"),{ctor:"PxUnits"}),ec=s(Mu,Zu,"px"),tc={ctor:"MMUnits"},rc=(s(Mu,tc,"mm"),{ctor:"CMUnits"}),nc=(s(Mu,rc,"cm"),{ctor:"InchUnits"}),oc=(s(Mu,nc,"in"),{ctor:"PtUnits"}),ic=(s(Mu,oc,"pt"),{ctor:"PcUnits"}),ac=(s(Mu,ic,"pc"),{ctor:"IncompatibleUnits"}),uc={value:"initial",overflow:Du,none:Du,number:Du,textDecorationLine:Du,textRendering:Du,textIndent:Du,textDecorationStyle:Du,boxSizing:Du,display:Du,all:Du,alignItems:Du,length:Du,lengthOrAuto:Du,lengthOrNone:Du,lengthOrNumber:Du,lengthOrMinMaxDimension:Du,lengthOrNoneOrMinMaxDimension:Du,flexBasis:Du,flexWrap:Du,flexDirection:Du,flexDirectionOrWrap:Du,lengthOrNumberOrAutoOrNoneOrContent:Du,fontFamily:Du,fontSize:Du,fontStyle:Du,fontWeight:Du,fontVariant:Du,units:ac,numericValue:0,unitLabel:""},cc=(v.update(uc,{value:"unset"}),v.update(uc,{value:"inherit"}),f(Mu,ac,"",0),t(function(e,t){var r=s(la,ba(e),P.fromArray([])),n=f(ca,r,P.fromArray([]),D);return Ba(P.fromArray([Ua(f(Ja,n,P.fromArray([]),t))]))})),sc=(cc("html"),cc("body")),fc=(cc("article"),cc("header"),cc("footer"),cc("h1"),cc("h2"),cc("h3"),cc("h4"),cc("h5"),cc("h6"),cc("nav"),cc("section"),cc("div"),cc("hr"),cc("li"),cc("main"),cc("ol"),cc("p"),cc("ul"),cc("pre"),cc("a"),cc("code"),cc("small"),cc("span"),cc("strong"),cc("img"),cc("audio"),cc("video"),cc("canvas"),cc("caption"),cc("col"),cc("colgroup"),cc("table"),cc("tbody"),cc("td"),cc("tfoot"),cc("th"),cc("thead"),cc("tr"),cc("button"),cc("fieldset"),cc("form"),cc("input"),cc("label"),cc("legend"),cc("optgroup"),cc("option"),cc("progress"),cc("select"),t(function(e,t){var r=t.key;return"animation-name"===r?v.update(t,{value:s(A["++"],e,t.value)}):t})),lc=t(function(e,t){var r=t;switch(r.ctor){case"ClassSelector":return ya(s(A["++"],e,r._0));case"IdSelector":return ga(r._0);default:return ma(r._0)}}),dc=t(function(e,t){var r=t;switch(r.ctor){case"TypeSelectorSequence":return s(la,r._0,s(ne,lc(e),r._1));case"UniversalSelectorSequence":return fa(s(ne,lc(e),r._0));default:return s(sa,r._0,s(ne,lc(e),r._1))}}),_c=t(function(e,t){var r=t,n=dc(e);return f(ca,n(r._0),s(ne,function(e){var t=e;return{ctor:"_Tuple2",_0:t._0,_1:n(t._1)}},r._1),r._2)}),hc=t(function(e,t){var r=t;switch(r.ctor){case"AppendProperty":return Ca(s(fc,e,r._0));case"ExtendSelector":return s(Ia,s(lc,e,r._0),s(ne,hc(e),r._1));case"NestSnippet":return s(Na,r._0,s(ne,pc(e),r._1));case"WithPseudoElement":return s(qa,r._0,s(ne,hc(e),r._1));case"WithMedia":return s(Oa,r._0,s(ne,hc(e),r._1));default:return Ra(s(ne,hc(e),r._0))}}),pc=t(function(e,t){var r=t;return Ba(s(ne,vc(e),r._0))}),vc=t(function(e,t){var r=t;switch(r.ctor){case"StyleBlockDeclaration":return Ua(s(mc,e,r._0));case"MediaRule":return s(Pa,r._0,s(ne,mc(e),r._1));case"SupportsRule":return s(Fa,r._0,function(e){return P.fromArray([Ba(e)])}(s(ne,vc(e),s(fe,Ta,r._1))));case"DocumentRule":return d(Ma,r._0,r._1,r._2,r._3,s(mc,e,r._4));case"PageRule":return t;case"FontFace":return t;case"Keyframes":return s(ja,s(A["++"],e,r._0),r._1);case"Viewport":return t;case"CounterStyle":return t;default:return t}}),mc=t(function(e,t){var r=t;return f(Ja,s(_c,e,r._0),s(ne,_c(e),r._1),s(ne,hc(e),r._2))}),gc=t(function(e,t){return s(ne,pc(Hi(e)),t)}),yc=t(function(e,t){return go(s(Fe," ",s(ne,Vi(e),t)))}),bc=(yc(""),t(function(e,t){return s(yc,e,s(ne,y,s(oe,g,t)))})),wc=function(e){return{$class:yc(e),classList:bc(e),id:function(e){return yo(Hi(e))},name:e}},Ac=(r(function(e,t,r){return{$class:e,classList:t,id:r}}),n(function(e,t,r,n){return{$class:e,classList:t,id:r,name:n}}),function(e){return function(t){return function(r){return function(n){return function(o){return function(i){return function(a){return function(u){return function(c){return function(s){return{id:e,url:t,name:r,season:n,number:o,airdate:i,airtime:a,airstamp:u,runtime:c,summary:s}}}}}}}}}}}),kc=f(ir,"summary",Qt,f(ir,"runtime",Kt,f(ir,"airstamp",Qt,f(ir,"airtime",Qt,f(ir,"airdate",Qt,f(ir,"number",Kt,f(ir,"season",Kt,f(ir,"name",Qt,f(ir,"url",Qt,f(ir,"id",Kt,rr(Ac))))))))))),Sc=(t(function(e,t){return{medium:e,original:t}}),t(function(e,t){return{score:e,show:t}})),Ec=t(function(e,t){return{time:e,days:t}}),Tc=f(ir,"days",zt(Qt),f(ir,"time",Qt,rr(Ec))),xc=function(e){return{average:e}},Rc=f(ir,"average",Ht($t),rr(xc)),Oc=r(function(e,t,r){return{name:e,code:t,timezone:r}}),qc=f(ir,"timezone",Qt,f(ir,"code",Qt,f(ir,"name",Qt,rr(Oc)))),Nc=r(function(e,t,r){return{id:e,name:t,country:r}}),Ic=f(ir,"country",qc,f(ir,"name",Qt,f(ir,"id",Kt,rr(Nc)))),Cc=r(function(e,t,r){return{tvrage:e,thetvdb:t,imdb:r}}),Lc=f(ir,"imdb",Ht(Qt),f(ir,"thetvdb",Ht(Kt),f(ir,"tvrage",Ht(Kt),rr(Cc)))),Dc=t(function(e,t){return{medium:e,original:t}}),Bc=f(ir,"original",Qt,f(ir,"medium",Qt,rr(Dc))),jc=(t(function(e,t){return{self:e,previousepisode:t}}),function(e){return function(t){return function(r){return function(n){return function(o){return function(i){return function(a){return function(u){return function(c){return function(s){return function(f){return function(l){return function(d){return function(_){return function(h){return function(p){return function(v){return{id:e,url:t,name:r,type$:n,language:o,genres:i,status:a,runtime:u,premiered:c,schedule:s,rating:f,weight:l,network:d,externals:_,image:h,summary:p,updated:v}}}}}}}}}}}}}}}}}}),Mc=f(ir,"updated",Kt,f(ir,"summary",Qt,f(ir,"image",Ht(Bc),f(ir,"externals",Lc,f(ir,"network",Ht(Ic),f(ir,"weight",Kt,f(ir,"rating",Rc,f(ir,"schedule",Tc,f(ir,"premiered",Ht(Qt),f(ir,"runtime",Ht(Kt),f(ir,"status",Qt,f(ir,"genres",zt(Qt),f(ir,"language",Qt,f(ir,"type",Qt,f(ir,"name",Qt,f(ir,"url",Qt,f(ir,"id",Kt,rr(jc)))))))))))))))))),Fc=f(ir,"show",Mc,f(ir,"score",$t,rr(Sc))),Pc=zt(kc),Uc=zt(Fc),Jc="/api",Wc=function(e){return s(Ko,Uc,s(A["++"],Jc,s(A["++"],"/search/shows?q=",Bo(e))))},Hc=function(e){return s(Ko,Pc,s(A["++"],Jc,s(A["++"],"/shows/",s(A["++"],k(e),"/episodes"))))},Vc="app-",zc={ctor:"AppContainer"},Gc=(s(gc,Vc,P.fromArray([sc(P.fromArray([Nu(P.fromArray(["Roboto",vu("Helvetica Neue"),"Helvetica","Arial"])),yu(Bu("f4f4f4"))])),s(t(function(e,t){return s(pu["."],e,t)}),zc,P.fromArray([Tu(ec(80))]))])),wc(Vc)),Kc=Gc.$class,$c=t(function(e,t){return s(io,P.fromArray([Kc(P.fromArray([zc]))]),P.fromArray([s(io,P.fromArray([go("mui-appbar")]),P.fromArray([s(io,P.fromArray([go("mui-container mui--appbar-height mui--appbar-line-height")]),P.fromArray([s(ao,P.fromArray([go("mui--text-headline")]),P.fromArray([ro(e)]))]))])),s(io,P.fromArray([go("mui-container")]),P.fromArray([t]))]))}),Qc="c-search-",Xc={ctor:"SearchCollapsed"},Yc=(s(gc,Qc,P.fromArray([s(t(function(e,t){return s(pu["."],e,t)}),Xc,P.fromArray([Tu(ec(60)),xu(ec(-32))])),s(gu,"screen and ( max-width: 450px )",P.fromArray([s(t(function(e,t){return s(pu["."],e,t)}),Xc,P.fromArray([Tu(ec(0)),xu(ec(0)),Iu(Wu),Ou(ec(15)),qu(ec(15)),s(_u,"z-index","2")]))]))])),function(e){return s(io,P.fromArray([go("mui-panel")]),P.fromArray([ro(s(L,"",e))]))}),Zc=function(e){var t={medium:"http://lorempixel.com/72/100/abstract"},r=e;return"Nothing"===r.ctor?t.medium:r._0.medium},es={term:"",visible:!1,results:P.fromArray([]),error:D},ts=wc(Qc),rs=ts.$class,ns=(n(function(e,t,r,n){return{visible:e,term:t,results:r,error:n}}),function(e){return{ctor:"AddShow",_0:e}}),os=t(function(e,t){return s(io,P.fromArray([]),P.fromArray([s(io,P.fromArray([So(P.fromArray([{ctor:"_Tuple2",_0:"display",_1:"flex"},{ctor:"_Tuple2",_0:"overflow",_1:"auto"},{ctor:"_Tuple2",_0:"min-height",_1:"100px"},{ctor:"_Tuple2",_0:"margin-bottom",_1:"15px"}]))]),P.fromArray([s(uo,P.fromArray([So(P.fromArray([{ctor:"_Tuple2",_0:"height",_1:"100px"}])),bo(Zc(t.show.image))]),P.fromArray([])),s(io,P.fromArray([So(P.fromArray([{ctor:"_Tuple2",_0:"padding-left",_1:"15px"},{ctor:"_Tuple2",_0:"flex",_1:"1"}]))]),P.fromArray([s(io,P.fromArray([go("mui--text-title")]),P.fromArray([ro(t.show.name)])),s(io,P.fromArray([go("mui--text-subhead")]),P.fromArray([ro(function(){var e=t.show.network;return"Nothing"===e.ctor?"":e._0.name}())])),s(io,P.fromArray([]),P.fromArray([s(Xo,P.fromArray([]),t.show.summary)]))]))])),s(io,P.fromArray([]),P.fromArray([function(){var r=s(ur,t.show.id,e);return r===!1?s(lo,P.fromArray([Io(ns(t)),go("mui-btn mui-btn--primary")]),P.fromArray([ro("Add")])):s(lo,P.fromArray([go("mui-btn mui-btn--primary"),ko(!0)]),P.fromArray([ro("Already added")]))}()]))]))}),is=t(function(e,t){return s(io,P.fromArray([go("mui-panel")]),s(de,s(oo,P.fromArray([]),P.fromArray([])),s(ne,os(t),e)))}),as={ctor:"HideSearch"},us={ctor:"ShowSearch"},cs=function(e){return s(io,P.fromArray([rs(P.fromArray([Xc]))]),P.fromArray([s(lo,P.fromArray([Io(us),go("mui-btn mui-btn--fab mui-btn--accent"),So(P.fromArray([{ctor:"_Tuple2",_0:"float",_1:"right"}]))]),P.fromArray([ro("+")]))]))},ss=function(e){return{ctor:"ShowError",_0:e}},fs=function(e){return{ctor:"ShowResults",_0:e}},ls=t(function(e,t){var r=e;switch(r.ctor){case"UpdateTerm":return{ctor:"_Tuple2",_0:v.update(t,{term:r._0}),_1:ke};case"Search":return{ctor:"_Tuple2",_0:t,_1:f(en,ss,fs,Wc(t.term))};case"ShowResults":return{ctor:"_Tuple2",_0:v.update(t,{results:r._0}),_1:ke};case"ShowError":var n=r._0;return"UnexpectedPayload"===n.ctor?{ctor:"_Tuple2",_0:v.update(t,{error:M(n._0)}),_1:ke}:{ctor:"_Tuple2",_0:v.update(t,{error:M("Something terrible has happened")}),_1:ke};case"ShowSearch":return{ctor:"_Tuple2",_0:v.update(t,{visible:!0}),_1:ke};case"HideSearch":return{ctor:"_Tuple2",_0:v.update(t,{visible:!1}),_1:ke};default:return{ctor:"_Tuple2",_0:v.update(t,{visible:!1}),_1:ke}}}),ds={ctor:"Search"},_s=function(e){return{ctor:"UpdateTerm",_0:e}},hs=t(function(e,t){return s(co,P.fromArray([qo(ds)]),P.fromArray([s(io,P.fromArray([So(P.fromArray([{ctor:"_Tuple2",_0:"padding-top",_1:"15px"},{ctor:"_Tuple2",_0:"padding-bottom",_1:"15px"}]))]),P.fromArray([s(io,P.fromArray([go("mui-textfield mui-textfield--float-label")]),P.fromArray([s(fo,P.fromArray([wo("text"),No(_s)]),P.fromArray([])),s(so,P.fromArray([]),P.fromArray([ro("Search for shows")]))])),s(lo,P.fromArray([Io(ds),go("mui-btn mui-btn--primary"),So(P.fromArray([{ctor:"_Tuple2",_0:"text-align",_1:"right"}]))]),P.fromArray([ro("Search")])),s(lo,P.fromArray([Io(as),go("mui-btn mui-btn--danger")]),P.fromArray([ro("Cancel")]))])),v.cmp(Q(e.results),0)>0?s(is,e.results,t):v.eq(e.error,D)?s(io,P.fromArray([]),P.fromArray([])):Yc(e.error)]))}),ps=t(function(e,t){return e.visible?s(hs,e,t):cs(e)}),vs="c-show-",ms={ctor:"Button"},gs={ctor:"ShowImage"},ys=(s(gc,vs,P.fromArray([s(t(function(e,t){return s(pu["."],e,t)}),gs,P.fromArray([Eu(ec(200))])),s(t(function(e,t){return s(pu["."],e,t)}),ms,P.fromArray([Su(ec(136))])),s(gu,"screen and ( max-width: 600px )",P.fromArray([s(t(function(e,t){return s(pu["."],e,t)}),gs,P.fromArray([Eu(ec(100))]))])),s(gu,"screen and ( max-width: 342px )",P.fromArray([s(t(function(e,t){return s(pu["."],e,t)}),ms,P.fromArray([Ru(ec(8))]))]))])),t(function(e,t){var r=pe(Tn(t.airstamp));return"Nothing"===r.ctor?!0:f(fi,li,e,r._0)})),bs=t(function(e,t){return s(oe,function(e){return!v.eq(e.episodes,P.fromArray([]))},s(ne,function(t){return v.update(t,{episodes:s(oe,ys(e),t.episodes)})},t))}),ws=t(function(e,t){var r=t.episodes;return"[]"===r.ctor?!1:v.cmp(e,r._0.id)>-1}),As=function(e){var t=e;return"[]"===t.ctor?0:t._0.season},ks=(t(function(e,t){var r=Ct(t);return s(ne,function(e){return v.update(e,{episodes:s(L,P.fromArray([]),s(Ye,e.id,r))})},e)}),function(e){return Hc(e.id)}),Ss=wc(vs),Es=Ss.$class,Ts=ge.outgoingPort("persistShow",function(e){return{id:e.id,lastEpisodeWatched:e.lastEpisodeWatched,name:e.name,image:"Nothing"===e.image.ctor?null:e.image._0,seasons:P.toArray(e.seasons).map(function(e){return{number:e.number,episodes:P.toArray(e.episodes).map(function(e){return{id:e.id,name:e.name,summary:e.summary,season:e.season,number:e.number,airstamp:e.airstamp}})}}),rev:e.rev}}),xs=(i(function(e,t,r,n,o,i){return{id:e,name:t,summary:r,season:n,number:o,airstamp:i}}),t(function(e,t){return{number:e,episodes:t}}),i(function(e,t,r,n,o,i){return{id:e,lastEpisodeWatched:t,name:r,image:n,seasons:o,rev:i}}),n(function(e,t,r,n){return{today:e,show:t,seasonsListVisible:r,visibleSeasons:n}}),function(e){return{ctor:"SetRev",_0:e}}),Rs=function(e){return{ctor:"SetTodaysDate",_0:e}},Os=function(e){return{ctor:"ShowTimeError",_0:e}},qs={ctor:"_Tuple2",_0:{today:Sn(0),seasonsListVisible:!1,visibleSeasons:lt,show:{id:0,name:"",lastEpisodeWatched:0,image:D,seasons:P.fromArray([]),rev:""}},_1:f(en,Os,Rs,xn)},Ns=function(e){return{ctor:"ShowError",_0:e}},Is=function(e){return{ctor:"UpdateEpisodes",_0:e}},Cs=t(function(e,r){var n=e;switch(n.ctor){case"MarkEpisodeWatched":var o=v.update(r,{lastEpisodeWatched:n._0});return{ctor:"_Tuple2",_0:o,_1:Ts(o)};case"MarkSeasonWatched":var i=s(Or,function(e){return v.eq(e.number,n._0)},r.seasons),a=i;if("Nothing"===a.ctor)return{ctor:"_Tuple2",_0:r,_1:ke};var u=a._0.episodes;if("[]"===u.ctor)return{ctor:"_Tuple2",_0:r,_1:ke};var o=v.update(r,{lastEpisodeWatched:u._0.id});return{ctor:"_Tuple2",_0:o,_1:Ts(o)};case"MarkAllEpisodesWatched":var c=function(){var e=r.seasons;if("[]"===e.ctor)return 0;var t=e._0.episodes;return"[]"===t.ctor?0:t._0.id}(),o=v.update(r,{lastEpisodeWatched:c});return{ctor:"_Tuple2",_0:o,_1:Ts(o)};case"UpdateEpisodes":var l=s(ne,function(e){return{episodes:e,number:As(e)}},s(Dr,t(function(e,t){return v.eq(e.season,t.season)}),s(ne,function(e){return{id:e.id,name:e.name,summary:e.summary,season:e.season,number:e.number,airstamp:e.airstamp}},ae(n._0)))),o=v.update(r,{seasons:l});return{ctor:"_Tuple2",_0:o,_1:v.eq(o,r)?ke:Ts(o)
};case"UpdateShow":return{ctor:"_Tuple2",_0:r,_1:f(en,Ns,Is,ks(r))};case"SetRev":return{ctor:"_Tuple2",_0:v.update(r,{rev:n._0}),_1:ke};default:return{ctor:"_Tuple2",_0:r,_1:ke}}}),Ls=t(function(e,t){var r=e;switch(r.ctor){case"SetTodaysDate":return{ctor:"_Tuple2",_0:v.update(t,{today:r._0}),_1:ke};case"ToggleSeasons":return{ctor:"_Tuple2",_0:v.update(t,{seasonsListVisible:r._0}),_1:ke};case"ToggleSeason":var n=f(Rt,r._0,r._1,t.visibleSeasons);return{ctor:"_Tuple2",_0:v.update(t,{visibleSeasons:n}),_1:ke};default:var o=s(Cs,e,t.show),i=o._0,a=o._1;return{ctor:"_Tuple2",_0:v.update(t,{show:i}),_1:a}}}),Ds={ctor:"UpdateShow"},Bs=function(e){return{ctor:"ToggleSeasons",_0:e}},js=function(e){return{ctor:"MarkEpisodeWatched",_0:e}},Ms=t(function(e,t){return s(io,P.fromArray([]),P.fromArray([s(io,P.fromArray([go("mui--text-subhead")]),P.fromArray([ro(s(A["++"],"Episode ",s(A["++"],k(t.number),s(A["++"]," - ",t.name))))])),s(io,P.fromArray([]),P.fromArray([s(Xo,P.fromArray([]),t.summary)])),v.cmp(t.id,e)>0?s(io,P.fromArray([So(P.fromArray([{ctor:"_Tuple2",_0:"display",_1:"flex"},{ctor:"_Tuple2",_0:"justify-content",_1:"flex-end"}]))]),P.fromArray([s(lo,P.fromArray([Io(js(t.id)),go("mui-btn mui-btn--primary mui-btn--small c-show-Button")]),P.fromArray([ro("I watched this")]))])):s(io,P.fromArray([]),P.fromArray([]))]))}),Fs=r(function(e,t,r){var n=t;return n===!0?s(io,P.fromArray([]),s(A["++"],s(de,s(oo,P.fromArray([]),P.fromArray([])),s(ne,Ms(e),r.episodes)),P.fromArray([s(oo,P.fromArray([]),P.fromArray([]))]))):s(io,P.fromArray([]),P.fromArray([]))}),Ps=function(e){return{ctor:"MarkSeasonWatched",_0:e}},Us={ctor:"MarkAllEpisodesWatched"},Js=t(function(e,t){return{ctor:"ToggleSeason",_0:e,_1:t}}),Ws=r(function(e,t,r){var n=function(){var e=s(Ye,r.number,t);return"Nothing"===e.ctor?!1:e._0}();return s(io,P.fromArray([]),P.fromArray([s(io,P.fromArray([So(P.fromArray([{ctor:"_Tuple2",_0:"display",_1:"flex"},{ctor:"_Tuple2",_0:"justify-content",_1:"space-between"},{ctor:"_Tuple2",_0:"flex-wrap",_1:"wrap"}]))]),P.fromArray([s(io,P.fromArray([go("mui--text-title"),So(P.fromArray([{ctor:"_Tuple2",_0:"line-height",_1:"43px"},{ctor:"_Tuple2",_0:"width",_1:"50%"}]))]),P.fromArray([ro(s(A["++"],"Season ",k(r.number)))])),s(io,P.fromArray([]),P.fromArray([s(io,P.fromArray([]),P.fromArray([v.eq(s(ws,e,r),!0)?s(io,P.fromArray([]),P.fromArray([])):s(lo,P.fromArray([Io(Ps(r.number)),go("mui-btn mui-btn--primary mui-btn--small c-show-Button")]),P.fromArray([ro("I watched this")]))])),s(io,P.fromArray([So(P.fromArray([{ctor:"_Tuple2",_0:"text-align",_1:"right"}]))]),P.fromArray([s(lo,P.fromArray([Io(s(Js,r.number,T(n))),go("mui-btn mui-btn--accent mui-btn--small c-show-Button")]),P.fromArray([ro(n?"Hide episodes":"Show episodes")]))]))]))])),s(oo,P.fromArray([]),P.fromArray([])),f(Fs,e,n,r)]))}),Hs=r(function(e,t,r){return s(io,P.fromArray([]),s(re["::"],s(oo,P.fromArray([]),P.fromArray([])),s(ne,s(Ws,e,r),t)))}),Vs=function(e){var t=e,r=t.show,n=t.seasonsListVisible,o=s(bs,t.today,r.seasons),i=se(s(ne,function(e){return e.episodes},o)),a=Q(i),u=function(){var e=r.lastEpisodeWatched;return 0===e?a:Q(s(oe,function(e){return v.cmp(e.id,r.lastEpisodeWatched)>0},i))}(),c=function(){var e=u;switch(e){case 0:return"All caught up";case 1:return s(A["++"],k(u)," episode to watch");default:return s(A["++"],k(u)," episodes to watch")}}();return s(io,P.fromArray([]),P.fromArray([s(io,P.fromArray([So(P.fromArray([{ctor:"_Tuple2",_0:"display",_1:"flex"},{ctor:"_Tuple2",_0:"overflow",_1:"auto"},{ctor:"_Tuple2",_0:"min-height",_1:"100px"},{ctor:"_Tuple2",_0:"margin-bottom",_1:"15px"}]))]),P.fromArray([s(uo,P.fromArray([Es(P.fromArray([gs])),bo(s(L,"http://lorempixel.com/72/100/abstract",r.image))]),P.fromArray([])),s(io,P.fromArray([So(P.fromArray([{ctor:"_Tuple2",_0:"padding-left",_1:"15px"},{ctor:"_Tuple2",_0:"flex",_1:"1"}]))]),P.fromArray([s(io,P.fromArray([go("mui--text-title")]),P.fromArray([ro(r.name)])),s(io,P.fromArray([go("mui--text-subhead")]),P.fromArray([ro(v.cmp(a,0)>0?c:"")]))]))])),s(lo,P.fromArray([Io(Bs(T(n))),go("mui-btn mui-btn--accent mui-btn--small c-show-Button")]),P.fromArray([ro(n?"Hide seasons":"Show seasons")])),v.eq(u,0)?s(io,P.fromArray([]),P.fromArray([])):s(lo,P.fromArray([go("mui-btn mui-btn--primary mui-btn--small c-show-Button"),Io(Us)]),P.fromArray([ro("I'm caught up")])),v.eq(n,!0)?f(Hs,r.lastEpisodeWatched,o,t.visibleSeasons):s(io,P.fromArray([]),P.fromArray([]))]))},zs={list:P.fromArray([]),error:D},Gs=ge.incomingPort("loadShows",zt(s(Pt,s(Yt[":="],"id",Kt),function(e){return s(Pt,s(Yt[":="],"lastEpisodeWatched",Kt),function(t){return s(Pt,s(Yt[":="],"name",Qt),function(r){return s(Pt,s(Yt[":="],"image",Xt(P.fromArray([Vt(D),s(tr,M,Qt)]))),function(n){return s(Pt,s(Yt[":="],"seasons",zt(s(Pt,s(Yt[":="],"number",Kt),function(e){return s(Pt,s(Yt[":="],"episodes",zt(s(Pt,s(Yt[":="],"id",Kt),function(e){return s(Pt,s(Yt[":="],"name",Qt),function(t){return s(Pt,s(Yt[":="],"summary",Qt),function(r){return s(Pt,s(Yt[":="],"season",Kt),function(n){return s(Pt,s(Yt[":="],"number",Kt),function(o){return s(Pt,s(Yt[":="],"airstamp",Qt),function(i){return Ft({id:e,name:t,summary:r,season:n,number:o,airstamp:i})})})})})})}))),function(t){return Ft({number:e,episodes:t})})}))),function(o){return s(Pt,s(Yt[":="],"rev",Qt),function(i){return Ft({id:e,lastEpisodeWatched:t,name:r,image:n,seasons:o,rev:i})})})})})})}))),Ks=ge.incomingPort("loadRev",s(Pt,s(Yt[":="],"id",Kt),function(e){return s(Pt,s(Yt[":="],"rev",Qt),function(t){return Ft({id:e,rev:t})})})),$s=(t(function(e,t){return{list:e,error:t}}),t(function(e,t){return{id:e,rev:t}}),function(e){return{ctor:"LoadRev",_0:e}}),Qs=t(function(e,t){return{ctor:"ShowMsg",_0:e,_1:t}}),Xs=r(function(e,t,r){if(v.eq(r.show.id,e)){var n=s(Ls,t,r),o=n._0,i=n._1;return{ctor:"_Tuple2",_0:o,_1:s(Ee,Qs(e),i)}}return{ctor:"_Tuple2",_0:r,_1:ke}}),Ys=function(e){var t=qs,r=t._0,n=t._1,o=s(Ls,Ds,v.update(r,{show:e})),i=o._0,a=o._1;return{ctor:"_Tuple2",_0:i,_1:Ae(P.fromArray([s(Ee,Qs(e.id),n),s(Ee,Qs(e.id),a)]))}},Zs=t(function(e,t){var r=e;switch(r.ctor){case"ShowMsg":var n=r._1,o=n;if("ShowError"===o.ctor){var i=o._0;return"UnexpectedPayload"===i.ctor?{ctor:"_Tuple2",_0:v.update(t,{error:M(i._0)}),_1:ke}:{ctor:"_Tuple2",_0:v.update(t,{error:M("Something terrible has happened")}),_1:ke}}var a=le(s(ne,s(Xs,r._0,n),t.list)),u=a._0,c=a._1;return{ctor:"_Tuple2",_0:v.update(t,{list:u}),_1:Ae(c)};case"AddToList":var f=r._0,l=qs,d=l._0,_=l._1,h=d.show,p=function(e){var t=e.image;return"Nothing"===t.ctor?D:M(t._0.medium)},m=v.update(h,{id:f.show.id,name:f.show.name,image:p(f.show)}),g=s(Ls,Ds,v.update(d,{show:m})),y=g._0,c=g._1,b=s(re["::"],y,t.list);return{ctor:"_Tuple2",_0:v.update(t,{list:b}),_1:Ae(P.fromArray([s(Ee,Qs(y.show.id),_),s(Ee,Qs(y.show.id),c)]))};case"LoadShows":var w=le(s(ne,Ys,r._0)),A=w._0,c=w._1;return{ctor:"_Tuple2",_0:v.update(t,{list:A}),_1:Ae(c)};default:var k=r._0,S=le(s(ne,s(Xs,k.id,xs(k.rev)),t.list)),u=S._0,c=S._1;return{ctor:"_Tuple2",_0:v.update(t,{list:u}),_1:Ae(c)}}}),ef=function(e){var t=e.list;if("[]"===t.ctor)return s(io,P.fromArray([]),P.fromArray([]));var r=e.error;return"Just"===r.ctor?s(io,P.fromArray([]),P.fromArray([ro(r._0)])):s(io,P.fromArray([go("mui-panel"),So(P.fromArray([{ctor:"_Tuple2",_0:"margin-top",_1:"15px"},{ctor:"_Tuple2",_0:"margin-bottom",_1:"15px"}]))]),s(de,s(oo,P.fromArray([]),P.fromArray([])),s(ne,function(e){return s(po,Qs(e.show.id),Vs(e))},t)))},tf=function(e){return{ctor:"LoadShows",_0:e}},rf=function(e){return Te(P.fromArray([Gs(tf),Ks($s)]))},nf=function(e){return{ctor:"AddToList",_0:e}},of=function(e){return f(K,t(function(e,t){return s(fr,e.show.id,t)}),sr,e.list)},af={search:es,shows:zs},uf=(t(function(e,t){return{search:e,shows:t}}),function(e){return{ctor:"ShowsMsg",_0:e}}),cf=function(e){return s(xe,uf,rf(e.shows))},sf=function(e){return{ctor:"SearchMsg",_0:e}},ff=t(function(e,t){var r=e;if("SearchMsg"===r.ctor){var n=r._0,o=n;if("AddShow"===o.ctor){var i=s(ls,n,t.search),a=i._0,u=i._1,c=s(Zs,nf(o._0),t.shows),f=c._0,l=c._1;return{ctor:"_Tuple2",_0:v.update(t,{shows:f,search:a}),_1:Ae(P.fromArray([s(Ee,uf,l),s(Ee,sf,u)]))}}var d=s(ls,n,t.search),a=d._0,_=d._1;return{ctor:"_Tuple2",_0:v.update(t,{search:a}),_1:s(Ee,sf,_)}}var h=s(Zs,r._0,t.shows),f=h._0,_=h._1;return{ctor:"_Tuple2",_0:v.update(t,{shows:f}),_1:s(Ee,uf,_)}}),lf=function(e){return s($c,"Elm TV",s(io,P.fromArray([]),P.fromArray([s(po,sf,s(ps,e.search,of(e.shows))),s(po,uf,ef(e.shows))])))},df={main:ho({init:{ctor:"_Tuple2",_0:af,_1:ke},view:lf,update:ff,subscriptions:cf})},_f={};if(_f.Main=_f.Main||{},ge.addPublicModule(_f.Main,"Main","undefined"==typeof df?null:df),"function"==typeof define&&define.amd)return void define([],function(){return _f});if("object"==typeof e)return void(e.exports=_f);var hf=this.Elm;if("undefined"==typeof hf)return void(this.Elm=_f);for(var pf in _f){if(pf in hf)throw new Error("There are two Elm modules called `"+pf+"` on this page! Rename one of them.");hf[pf]=_f[pf]}}).call(this)}]);