!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="/dist/",t(0)}([function(e,t,r){"use strict";function n(){a.fetchShows().then(function(e){i.ports.loadShows.send(e)})["catch"](function(e){console.log(e)})}r(1).polyfill(),r(6);var o,i,a,u,s=r(7),c=r(8),l=r(10),f=r(37);o=r(69),u=new f("shows"),a=s(u),c(),document.getElementById("elm").innerHTML="",i=o.Main.embed(document.getElementById("elm")),i.ports.persistShow.subscribe(function(e){a.saveShow(e).then(function(t){i.ports.loadRev.send({id:e.id,rev:t.rev})})["catch"](function(e){console.log(e)})}),i.ports.removeShow.subscribe(function(e){a.removeShow(e)["catch"](function(e){console.log(e)})}),i.ports.showNotification.subscribe(function(e){var t=document.querySelector(".js-elmtv__snackbar");t.MaterialSnackbar.showSnackbar({message:e})}),i.ports.scrollPosition.subscribe(function(e){document.body.scrollTop=e}),i.ports.focusElement.subscribe(function(e){setTimeout(function(){document.querySelector(e).focus()},40)}),i.ports.logInUser.subscribe(function(e){l.logInUser()}),i.ports.logOutUser.subscribe(function(e){l.logOutUser().then(function(e){e&&i.ports.loggedInState.send({loggedIn:!1,email:"",picture:""})})}),setTimeout(function(){l.authenticate().then(function(e){l.getProfile().then(function(e){i.ports.loggedInState.send({loggedIn:!0,email:e.email,picture:e.picture})})["catch"](function(e){console.log(e)}),l.start(u,function(e){"pull"===e.direction&&n()})}),n()},0),"serviceWorker"in navigator&&navigator.serviceWorker.register("service-worker.js")},function(e,t,r){var n;(function(e,o,i){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
	 * @version   3.2.1
	 */
(function(){"use strict";function a(e){return"function"==typeof e||"object"==typeof e&&null!==e}function u(e){return"function"==typeof e}function s(e){Q=e}function c(e){ee=e}function l(){return function(){e.nextTick(_)}}function f(){return function(){$(_)}}function d(){var e=0,t=new ne(_),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}function h(){var e=new MessageChannel;return e.port1.onmessage=_,function(){e.port2.postMessage(0)}}function p(){return function(){setTimeout(_,1)}}function _(){for(var e=0;Z>e;e+=2){var t=ae[e],r=ae[e+1];t(r),ae[e]=void 0,ae[e+1]=void 0}Z=0}function v(){try{var e=r(4);return $=e.runOnLoop||e.runOnContext,f()}catch(t){return p()}}function m(e,t){var r=this,n=new this.constructor(y);void 0===n[ce]&&M(n);var o=r._state;if(o){var i=arguments[o-1];ee(function(){L(o,n,i,r._result)})}else R(r,n,e,t);return n}function g(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var r=new t(y);return x(r,e),r}function y(){}function b(){return new TypeError("You cannot resolve a promise with itself")}function w(){return new TypeError("A promises callback cannot return that same promise.")}function k(e){try{return e.then}catch(t){return he.error=t,he}}function E(e,t,r,n){try{e.call(t,r,n)}catch(o){return o}}function S(e,t,r){ee(function(e){var n=!1,o=E(r,t,function(r){n||(n=!0,t!==r?x(e,r):C(e,r))},function(t){n||(n=!0,N(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&o&&(n=!0,N(e,o))},e)}function A(e,t){t._state===fe?C(e,t._result):t._state===de?N(e,t._result):R(t,void 0,function(t){x(e,t)},function(t){N(e,t)})}function T(e,t,r){t.constructor===e.constructor&&r===ue&&constructor.resolve===se?A(e,t):r===he?N(e,he.error):void 0===r?C(e,t):u(r)?S(e,t,r):C(e,t)}function x(e,t){e===t?N(e,b()):a(t)?T(e,t,k(t)):C(e,t)}function O(e){e._onerror&&e._onerror(e._result),I(e)}function C(e,t){e._state===le&&(e._result=t,e._state=fe,0!==e._subscribers.length&&ee(I,e))}function N(e,t){e._state===le&&(e._state=de,e._result=t,ee(O,e))}function R(e,t,r,n){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+fe]=r,o[i+de]=n,0===i&&e._state&&ee(I,e)}function I(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n,o,i=e._result,a=0;a<t.length;a+=3)n=t[a],o=t[a+r],n?L(r,n,o,i):o(i);e._subscribers.length=0}}function q(){this.error=null}function j(e,t){try{return e(t)}catch(r){return pe.error=r,pe}}function L(e,t,r,n){var o,i,a,s,c=u(r);if(c){if(o=j(r,n),o===pe?(s=!0,i=o.error,o=null):a=!0,t===o)return void N(t,w())}else o=n,a=!0;t._state!==le||(c&&a?x(t,o):s?N(t,i):e===fe?C(t,o):e===de&&N(t,o))}function D(e,t){try{t(function(t){x(e,t)},function(t){N(e,t)})}catch(r){N(e,r)}}function P(){return _e++}function M(e){e[ce]=_e++,e._state=void 0,e._result=void 0,e._subscribers=[]}function B(e){return new be(this,e).promise}function F(e){var t=this;return new t(Y(e)?function(r,n){for(var o=e.length,i=0;o>i;i++)t.resolve(e[i]).then(r,n)}:function(e,t){t(new TypeError("You must pass an array to race."))})}function U(e){var t=this,r=new t(y);return N(r,e),r}function J(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function H(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function W(e){this[ce]=P(),this._result=this._state=void 0,this._subscribers=[],y!==e&&("function"!=typeof e&&J(),this instanceof W?D(this,e):H())}function V(e,t){this._instanceConstructor=e,this.promise=new e(y),this.promise[ce]||M(this.promise),Y(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?C(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&C(this.promise,this._result))):N(this.promise,z())}function z(){return new Error("Array Methods must be provided an Array")}function G(){var e;if("undefined"!=typeof o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var r=e.Promise;r&&"[object Promise]"===Object.prototype.toString.call(r.resolve())&&!r.cast||(e.Promise=ye)}var K;K=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var $,Q,X,Y=K,Z=0,ee=function(e,t){ae[Z]=e,ae[Z+1]=t,Z+=2,2===Z&&(Q?Q(_):X())},te="undefined"!=typeof window?window:void 0,re=te||{},ne=re.MutationObserver||re.WebKitMutationObserver,oe="undefined"==typeof self&&"undefined"!=typeof e&&"[object process]"==={}.toString.call(e),ie="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ae=new Array(1e3);X=oe?l():ne?d():ie?h():void 0===te?v():p();var ue=m,se=g,ce=Math.random().toString(36).substring(16),le=void 0,fe=1,de=2,he=new q,pe=new q,_e=0,ve=B,me=F,ge=U,ye=W;W.all=ve,W.race=me,W.resolve=se,W.reject=ge,W._setScheduler=s,W._setAsap=c,W._asap=ee,W.prototype={constructor:W,then:ue,"catch":function(e){return this.then(null,e)}};var be=V;V.prototype._enumerate=function(){for(var e=this.length,t=this._input,r=0;this._state===le&&e>r;r++)this._eachEntry(t[r],r)},V.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===se){var o=k(e);if(o===ue&&e._state!==le)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(r===ye){var i=new r(y);T(i,e,o),this._willSettleAt(i,t)}else this._willSettleAt(new r(function(t){t(e)}),t)}else this._willSettleAt(n(e),t)},V.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===le&&(this._remaining--,e===de?N(n,r):this._result[t]=r),0===this._remaining&&C(n,this._result)},V.prototype._willSettleAt=function(e,t){var r=this;R(e,void 0,function(e){r._settledAt(fe,t,e)},function(e){r._settledAt(de,t,e)})};var we=G,ke={Promise:ye,polyfill:we};r(5).amd?(n=function(){return ke}.call(t,r,t,i),!(void 0!==n&&(i.exports=n))):"undefined"!=typeof i&&i.exports?i.exports=ke:"undefined"!=typeof this&&(this.ES6Promise=ke),we()}).call(this)}).call(t,r(2),function(){return this}(),r(3)(e))},function(e,t){function r(){c&&a&&(c=!1,a.length?s=a.concat(s):l=-1,s.length&&n())}function n(){if(!c){var e=setTimeout(r);c=!0;for(var t=s.length;t;){for(a=s,s=[];++l<t;)a&&a[l].run();l=-1,t=s.length}a=null,c=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function i(){}var a,u=e.exports={},s=[],c=!1,l=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];s.push(new o(e,t)),1!==s.length||c||setTimeout(n,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=i,u.addListener=i,u.once=i,u.off=i,u.removeListener=i,u.removeAllListeners=i,u.emit=i,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function r(e){return"string"!=typeof e&&(e=String(e)),e}function n(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return _.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function u(e){var t=new FileReader;return t.readAsArrayBuffer(e),a(t)}function s(e){var t=new FileReader;return t.readAsText(e),a(t)}function c(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(_.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(_.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(_.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(e){if(!_.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):_.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},_.blob?(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(u)},this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return s(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=i(this);return e?e:Promise.resolve(this._bodyText)},_.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function l(e){var t=e.toUpperCase();return v.indexOf(t)>-1?t:e}function f(e,t){t=t||{};var r=t.body;if(f.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,r||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=l(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function d(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}}),t}function h(e){var t=new o,r=(e.getAllResponseHeaders()||"").trim().split("\n");return r.forEach(function(e){var r=e.trim().split(":"),n=r.shift().trim(),o=r.join(":").trim();t.append(n,o)}),t}function p(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof o?t.headers:new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var _={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};o.prototype.append=function(e,n){e=t(e),n=r(n);var o=this.map[e];o||(o=[],this.map[e]=o),o.push(n)},o.prototype["delete"]=function(e){delete this.map[t(e)]},o.prototype.get=function(e){var r=this.map[t(e)];return r?r[0]:null},o.prototype.getAll=function(e){return this.map[t(e)]||[]},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,n){this.map[t(e)]=[r(n)]},o.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(n){e.call(t,n,r,this)},this)},this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),n(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),n(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),n(e)},_.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this)},c.call(f.prototype),c.call(p.prototype),p.prototype.clone=function(){return new p(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},p.error=function(){var e=new p(null,{status:0,statusText:""});return e.type="error",e};var m=[301,302,303,307,308];p.redirect=function(e,t){if(-1===m.indexOf(t))throw new RangeError("Invalid status code");return new p(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=f,e.Response=p,e.fetch=function(e,t){return new Promise(function(r,n){function o(){return"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0}var i;i=f.prototype.isPrototypeOf(e)&&!t?e:new f(e,t);var a=new XMLHttpRequest;a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:h(a),url:o()},t="response"in a?a.response:a.responseText;r(new p(t,e))},a.onerror=function(){n(new TypeError("Network request failed"))},a.ontimeout=function(){n(new TypeError("Network request failed"))},a.open(i.method,i.url,!0),"include"===i.credentials&&(a.withCredentials=!0),"responseType"in a&&_.blob&&(a.responseType="blob"),i.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(e,t){"use strict";function r(e){var t={};return t.fetchShows=function(){return e.allDocs({include_docs:!0}).then(function(e){if(e.total_rows>0){var t=e.rows.map(function(e){return e.doc.rev=e.doc._rev,e.doc.added=e.doc.added||"",e.doc});return t.sort(function(e,t){return e.added<t.added?1:e.added>t.added?-1:0}),t}return[]})},t.saveShow=function(t){return t._id=t.id.toString(),t._rev=t.rev,e.put(t)},t.removeShow=function(t){return e.remove(t.id.toString(),t.rev)},t}e.exports=r},function(e,t,r){"use strict";function n(e){e.forEach(function(e){e.added.forEach(function(e){componentHandler.upgradeElement(e)})})}var o=r(9);e.exports=function(){var e=new o({callback:n,queries:[{element:".mdl-textfield"},{element:".mdl-button"},{element:".mdl-snackbar"}]});return e}},function(e,t){function r(e){return'"'+e.replace(/"/,'\\"')+'"'}function n(e){if("string"!=typeof e)throw Error("Invalid request opion. attribute must be a non-zero length string.");if(e=e.trim(),!e)throw Error("Invalid request opion. attribute must be a non-zero length string.");if(!e.match(y))throw Error("Invalid request option. invalid attribute name: "+e);return e}function o(e){if(!e.trim().length)throw Error("Invalid request option: elementAttributes must contain at least one attribute.");for(var t={},r={},o=e.split(/\s+/),i=0;i<o.length;i++){var a=o[i];if(a){var a=n(a),u=a.toLowerCase();if(t[u])throw Error("Invalid request option: observing multiple case variations of the same attribute is not supported.");r[a]=!0,t[u]=!0}}return Object.keys(r)}function i(e){var t={};return e.forEach(function(e){e.qualifiers.forEach(function(e){t[e.attrName]=!0})}),Object.keys(t)}var a,u=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};if(a="undefined"!=typeof WebKitMutationObserver?WebKitMutationObserver:MutationObserver,void 0===a)throw console.error("DOM Mutation Observers are required."),console.error("https://developer.mozilla.org/en-US/docs/DOM/MutationObserver"),Error("DOM Mutation Observers are required");var s,c=function(){function e(){this.nodes=[],this.values=[]}return e.prototype.isIndex=function(e){return+e===e>>>0},e.prototype.nodeId=function(t){var r=t[e.ID_PROP];return r||(r=t[e.ID_PROP]=e.nextId_++),r},e.prototype.set=function(e,t){var r=this.nodeId(e);this.nodes[r]=e,this.values[r]=t},e.prototype.get=function(e){var t=this.nodeId(e);return this.values[t]},e.prototype.has=function(e){return this.nodeId(e)in this.nodes},e.prototype["delete"]=function(e){var t=this.nodeId(e);delete this.nodes[t],this.values[t]=void 0},e.prototype.keys=function(){var e=[];for(var t in this.nodes)this.isIndex(t)&&e.push(this.nodes[t]);return e},e.ID_PROP="__mutation_summary_node_map_id__",e.nextId_=1,e}();!function(e){e[e.STAYED_OUT=0]="STAYED_OUT",e[e.ENTERED=1]="ENTERED",e[e.STAYED_IN=2]="STAYED_IN",e[e.REPARENTED=3]="REPARENTED",e[e.REORDERED=4]="REORDERED",e[e.EXITED=5]="EXITED"}(s||(s={}));var l=function(){function e(e,t,r,n,o,i,a,u){"undefined"==typeof t&&(t=!1),"undefined"==typeof r&&(r=!1),"undefined"==typeof n&&(n=!1),"undefined"==typeof o&&(o=null),"undefined"==typeof i&&(i=!1),"undefined"==typeof a&&(a=null),"undefined"==typeof u&&(u=null),this.node=e,this.childList=t,this.attributes=r,this.characterData=n,this.oldParentNode=o,this.added=i,this.attributeOldValues=a,this.characterDataOldValue=u,this.isCaseInsensitive=this.node.nodeType===Node.ELEMENT_NODE&&this.node instanceof HTMLElement&&this.node.ownerDocument instanceof HTMLDocument}return e.prototype.getAttributeOldValue=function(e){return this.attributeOldValues?(this.isCaseInsensitive&&(e=e.toLowerCase()),this.attributeOldValues[e]):void 0},e.prototype.getAttributeNamesMutated=function(){var e=[];if(!this.attributeOldValues)return e;for(var t in this.attributeOldValues)e.push(t);return e},e.prototype.attributeMutated=function(e,t){this.attributes=!0,this.attributeOldValues=this.attributeOldValues||{},e in this.attributeOldValues||(this.attributeOldValues[e]=t)},e.prototype.characterDataMutated=function(e){this.characterData||(this.characterData=!0,this.characterDataOldValue=e)},e.prototype.removedFromParent=function(e){this.childList=!0,this.added||this.oldParentNode?this.added=!1:this.oldParentNode=e},e.prototype.insertedIntoParent=function(){this.childList=!0,this.added=!0},e.prototype.getOldParent=function(){if(this.childList){if(this.oldParentNode)return this.oldParentNode;if(this.added)return null}return this.node.parentNode},e}(),f=function(){function e(){this.added=new c,this.removed=new c,this.maybeMoved=new c,this.oldPrevious=new c,this.moved=void 0}return e}(),d=function(e){function t(t,r){e.call(this),this.rootNode=t,this.reachableCache=void 0,this.wasReachableCache=void 0,this.anyParentsChanged=!1,this.anyAttributesChanged=!1,this.anyCharacterDataChanged=!1;for(var n=0;n<r.length;n++){var o=r[n];switch(o.type){case"childList":this.anyParentsChanged=!0;for(var i=0;i<o.removedNodes.length;i++){var a=o.removedNodes[i];this.getChange(a).removedFromParent(o.target)}for(var i=0;i<o.addedNodes.length;i++){var a=o.addedNodes[i];this.getChange(a).insertedIntoParent()}break;case"attributes":this.anyAttributesChanged=!0;var u=this.getChange(o.target);u.attributeMutated(o.attributeName,o.oldValue);break;case"characterData":this.anyCharacterDataChanged=!0;var u=this.getChange(o.target);u.characterDataMutated(o.oldValue)}}}return u(t,e),t.prototype.getChange=function(e){var t=this.get(e);return t||(t=new l(e),this.set(e,t)),t},t.prototype.getOldParent=function(e){var t=this.get(e);return t?t.getOldParent():e.parentNode},t.prototype.getIsReachable=function(e){if(e===this.rootNode)return!0;if(!e)return!1;this.reachableCache=this.reachableCache||new c;var t=this.reachableCache.get(e);return void 0===t&&(t=this.getIsReachable(e.parentNode),this.reachableCache.set(e,t)),t},t.prototype.getWasReachable=function(e){if(e===this.rootNode)return!0;if(!e)return!1;this.wasReachableCache=this.wasReachableCache||new c;var t=this.wasReachableCache.get(e);return void 0===t&&(t=this.getWasReachable(this.getOldParent(e)),this.wasReachableCache.set(e,t)),t},t.prototype.reachabilityChange=function(e){return this.getIsReachable(e)?this.getWasReachable(e)?2:1:this.getWasReachable(e)?5:0},t}(c),h=function(){function e(e,t,r,n,o){this.rootNode=e,this.mutations=t,this.selectors=r,this.calcReordered=n,this.calcOldPreviousSibling=o,this.treeChanges=new d(e,t),this.entered=[],this.exited=[],this.stayedIn=new c,this.visited=new c,this.childListChangeMap=void 0,this.characterDataOnly=void 0,this.matchCache=void 0,this.processMutations()}return e.prototype.processMutations=function(){if(this.treeChanges.anyParentsChanged||this.treeChanges.anyAttributesChanged)for(var e=this.treeChanges.keys(),t=0;t<e.length;t++)this.visitNode(e[t],void 0)},e.prototype.visitNode=function(e,t){if(!this.visited.has(e)){this.visited.set(e,!0);var r=this.treeChanges.get(e),n=t;if((r&&r.childList||void 0==n)&&(n=this.treeChanges.reachabilityChange(e)),0!==n){if(this.matchabilityChange(e),1===n)this.entered.push(e);else if(5===n)this.exited.push(e),this.ensureHasOldPreviousSiblingIfNeeded(e);else if(2===n){var o=2;r&&r.childList&&(r.oldParentNode!==e.parentNode?(o=3,this.ensureHasOldPreviousSiblingIfNeeded(e)):this.calcReordered&&this.wasReordered(e)&&(o=4)),this.stayedIn.set(e,o)}if(2!==n)for(var i=e.firstChild;i;i=i.nextSibling)this.visitNode(i,n)}}},e.prototype.ensureHasOldPreviousSiblingIfNeeded=function(e){if(this.calcOldPreviousSibling){this.processChildlistChanges();var t=e.parentNode,r=this.treeChanges.get(e);r&&r.oldParentNode&&(t=r.oldParentNode);var n=this.childListChangeMap.get(t);n||(n=new f,this.childListChangeMap.set(t,n)),n.oldPrevious.has(e)||n.oldPrevious.set(e,e.previousSibling)}},e.prototype.getChanged=function(e,t,r){this.selectors=t,this.characterDataOnly=r;for(var n=0;n<this.entered.length;n++){var o=this.entered[n],i=this.matchabilityChange(o);1!==i&&2!==i||e.added.push(o)}for(var a=this.stayedIn.keys(),n=0;n<a.length;n++){var o=a[n],i=this.matchabilityChange(o);if(1===i)e.added.push(o);else if(5===i)e.removed.push(o);else if(2===i&&(e.reparented||e.reordered)){var u=this.stayedIn.get(o);e.reparented&&3===u?e.reparented.push(o):e.reordered&&4===u&&e.reordered.push(o)}}for(var n=0;n<this.exited.length;n++){var o=this.exited[n],i=this.matchabilityChange(o);5!==i&&2!==i||e.removed.push(o)}},e.prototype.getOldParentNode=function(e){var t=this.treeChanges.get(e);if(t&&t.childList)return t.oldParentNode?t.oldParentNode:null;var r=this.treeChanges.reachabilityChange(e);if(0===r||1===r)throw Error("getOldParentNode requested on invalid node.");return e.parentNode},e.prototype.getOldPreviousSibling=function(e){var t=e.parentNode,r=this.treeChanges.get(e);r&&r.oldParentNode&&(t=r.oldParentNode);var n=this.childListChangeMap.get(t);if(!n)throw Error("getOldPreviousSibling requested on invalid node.");return n.oldPrevious.get(e)},e.prototype.getOldAttribute=function(e,t){var r=this.treeChanges.get(e);if(!r||!r.attributes)throw Error("getOldAttribute requested on invalid node.");var n=r.getAttributeOldValue(t);if(void 0===n)throw Error("getOldAttribute requested for unchanged attribute name.");return n},e.prototype.attributeChangedNodes=function(e){if(!this.treeChanges.anyAttributesChanged)return{};var t,r;if(e){t={},r={};for(var n=0;n<e.length;n++){var o=e[n];t[o]=!0,r[o.toLowerCase()]=o}}for(var i={},a=this.treeChanges.keys(),n=0;n<a.length;n++){var u=a[n],s=this.treeChanges.get(u);if(s.attributes&&2===this.treeChanges.reachabilityChange(u)&&2===this.matchabilityChange(u))for(var c=u,l=s.getAttributeNamesMutated(),f=0;f<l.length;f++){var o=l[f];if(!t||t[o]||s.isCaseInsensitive&&r[o]){var d=s.getAttributeOldValue(o);d!==c.getAttribute(o)&&(r&&s.isCaseInsensitive&&(o=r[o]),i[o]=i[o]||[],i[o].push(c))}}}return i},e.prototype.getOldCharacterData=function(e){var t=this.treeChanges.get(e);if(!t||!t.characterData)throw Error("getOldCharacterData requested on invalid node.");return t.characterDataOldValue},e.prototype.getCharacterDataChanged=function(){if(!this.treeChanges.anyCharacterDataChanged)return[];for(var e=this.treeChanges.keys(),t=[],r=0;r<e.length;r++){var n=e[r];if(2===this.treeChanges.reachabilityChange(n)){var o=this.treeChanges.get(n);o.characterData&&n.textContent!=o.characterDataOldValue&&t.push(n)}}return t},e.prototype.computeMatchabilityChange=function(e,t){this.matchCache||(this.matchCache=[]),this.matchCache[e.uid]||(this.matchCache[e.uid]=new c);var r=this.matchCache[e.uid],n=r.get(t);return void 0===n&&(n=e.matchabilityChange(t,this.treeChanges.get(t)),r.set(t,n)),n},e.prototype.matchabilityChange=function(e){var t=this;if(this.characterDataOnly)switch(e.nodeType){case Node.COMMENT_NODE:case Node.TEXT_NODE:return 2;default:return 0}if(!this.selectors)return 2;if(e.nodeType!==Node.ELEMENT_NODE)return 0;for(var r=e,n=this.selectors.map(function(e){return t.computeMatchabilityChange(e,r)}),o=0,i=0;2!==o&&i<n.length;){switch(n[i]){case 2:o=2;break;case 1:o=5===o?2:1;break;case 5:o=1===o?2:5}i++}return o},e.prototype.getChildlistChange=function(e){var t=this.childListChangeMap.get(e);return t||(t=new f,this.childListChangeMap.set(e,t)),t},e.prototype.processChildlistChanges=function(){function e(e,t){!e||n.oldPrevious.has(e)||n.added.has(e)||n.maybeMoved.has(e)||t&&(n.added.has(t)||n.maybeMoved.has(t))||n.oldPrevious.set(e,t)}if(!this.childListChangeMap){this.childListChangeMap=new c;for(var t=0;t<this.mutations.length;t++){var r=this.mutations[t];if("childList"==r.type&&(2===this.treeChanges.reachabilityChange(r.target)||this.calcOldPreviousSibling)){for(var n=this.getChildlistChange(r.target),o=r.previousSibling,i=0;i<r.removedNodes.length;i++){var a=r.removedNodes[i];e(a,o),n.added.has(a)?n.added["delete"](a):(n.removed.set(a,!0),n.maybeMoved["delete"](a)),o=a}e(r.nextSibling,o);for(var i=0;i<r.addedNodes.length;i++){var a=r.addedNodes[i];n.removed.has(a)?(n.removed["delete"](a),n.maybeMoved.set(a,!0)):n.added.set(a,!0)}}}}},e.prototype.wasReordered=function(e){function t(e){if(!e)return!1;if(!a.maybeMoved.has(e))return!1;var t=a.moved.get(e);return void 0!==t?t:(u.has(e)?t=!0:(u.set(e,!0),t=n(e)!==r(e)),u.has(e)?(u["delete"](e),a.moved.set(e,t)):t=a.moved.get(e),t)}function r(e){var n=s.get(e);if(void 0!==n)return n;for(n=a.oldPrevious.get(e);n&&(a.removed.has(n)||t(n));)n=r(n);return void 0===n&&(n=e.previousSibling),s.set(e,n),n}function n(e){if(l.has(e))return l.get(e);for(var r=e.previousSibling;r&&(a.added.has(r)||t(r));)r=r.previousSibling;return l.set(e,r),r}if(!this.treeChanges.anyParentsChanged)return!1;this.processChildlistChanges();var o=e.parentNode,i=this.treeChanges.get(e);i&&i.oldParentNode&&(o=i.oldParentNode);var a=this.childListChangeMap.get(o);if(!a)return!1;if(a.moved)return a.moved.get(e);a.moved=new c;var u=new c,s=new c,l=new c;return a.maybeMoved.keys().forEach(t),a.moved.get(e)},e}(),p=function(){function e(e,t){var r=this;if(this.projection=e,this.added=[],this.removed=[],this.reparented=t.all||t.element?[]:void 0,this.reordered=t.all?[]:void 0,e.getChanged(this,t.elementFilter,t.characterData),t.all||t.attribute||t.attributeList){var n=t.attribute?[t.attribute]:t.attributeList,o=e.attributeChangedNodes(n);t.attribute?this.valueChanged=o[t.attribute]||[]:(this.attributeChanged=o,t.attributeList&&t.attributeList.forEach(function(e){r.attributeChanged.hasOwnProperty(e)||(r.attributeChanged[e]=[])}))}if(t.all||t.characterData){var i=e.getCharacterDataChanged();t.characterData?this.valueChanged=i:this.characterDataChanged=i}this.reordered&&(this.getOldPreviousSibling=e.getOldPreviousSibling.bind(e))}return e.prototype.getOldParentNode=function(e){return this.projection.getOldParentNode(e)},e.prototype.getOldAttribute=function(e,t){return this.projection.getOldAttribute(e,t)},e.prototype.getOldCharacterData=function(e){return this.projection.getOldCharacterData(e)},e.prototype.getOldPreviousSibling=function(e){return this.projection.getOldPreviousSibling(e)},e}(),_=/[a-zA-Z_]+/,v=/[a-zA-Z0-9_\-]+/,m=function(){function e(){}return e.prototype.matches=function(e){if(null===e)return!1;if(void 0===this.attrValue)return!0;if(!this.contains)return this.attrValue==e;for(var t=e.split(" "),r=0;r<t.length;r++)if(this.attrValue===t[r])return!0;return!1},e.prototype.toString=function(){return"class"===this.attrName&&this.contains?"."+this.attrValue:"id"!==this.attrName||this.contains?this.contains?"["+this.attrName+"~="+r(this.attrValue)+"]":"attrValue"in this?"["+this.attrName+"="+r(this.attrValue)+"]":"["+this.attrName+"]":"#"+this.attrValue},e}(),g=function(){function e(){this.uid=e.nextUid++,this.qualifiers=[]}return Object.defineProperty(e.prototype,"caseInsensitiveTagName",{get:function(){return this.tagName.toUpperCase()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectorString",{get:function(){return this.tagName+this.qualifiers.join("")},enumerable:!0,configurable:!0}),e.prototype.isMatching=function(t){return t[e.matchesSelector](this.selectorString)},e.prototype.wasMatching=function(e,t,r){if(!t||!t.attributes)return r;var n=t.isCaseInsensitive?this.caseInsensitiveTagName:this.tagName;if("*"!==n&&n!==e.tagName)return!1;for(var o=[],i=!1,a=0;a<this.qualifiers.length;a++){var u=this.qualifiers[a],s=t.getAttributeOldValue(u.attrName);o.push(s),i=i||void 0!==s}if(!i)return r;for(var a=0;a<this.qualifiers.length;a++){var u=this.qualifiers[a],s=o[a];if(void 0===s&&(s=e.getAttribute(u.attrName)),!u.matches(s))return!1}return!0},e.prototype.matchabilityChange=function(e,t){var r=this.isMatching(e);return r?this.wasMatching(e,t,r)?2:1:this.wasMatching(e,t,r)?5:0},e.parseSelectors=function(t){function r(){o&&(i&&(o.qualifiers.push(i),i=void 0),u.push(o)),o=new e}function n(){i&&o.qualifiers.push(i),i=new m}for(var o,i,a,u=[],s=/\s/,c="Invalid or unsupported selector syntax.",l=1,f=2,d=3,h=4,p=5,g=6,y=7,b=8,w=9,k=10,E=11,S=12,A=13,T=14,x=l,O=0;O<t.length;){var C=t[O++];switch(x){case l:if(C.match(_)){r(),o.tagName=C,x=f;break}if("*"==C){r(),o.tagName="*",x=d;break}if("."==C){r(),n(),o.tagName="*",i.attrName="class",i.contains=!0,x=h;break}if("#"==C){r(),n(),o.tagName="*",i.attrName="id",x=h;break}if("["==C){r(),n(),o.tagName="*",i.attrName="",x=g;break}if(C.match(s))break;throw Error(c);case f:if(C.match(v)){o.tagName+=C;break}if("."==C){n(),i.attrName="class",i.contains=!0,x=h;break}if("#"==C){n(),i.attrName="id",x=h;break}if("["==C){n(),i.attrName="",x=g;break}if(C.match(s)){x=T;break}if(","==C){x=l;break}throw Error(c);case d:if("."==C){n(),i.attrName="class",i.contains=!0,x=h;break}if("#"==C){n(),i.attrName="id",x=h;break}if("["==C){n(),i.attrName="",x=g;break}if(C.match(s)){x=T;break}if(","==C){x=l;break}throw Error(c);case h:if(C.match(_)){i.attrValue=C,x=p;break}throw Error(c);case p:if(C.match(v)){i.attrValue+=C;break}if("."==C){n(),i.attrName="class",i.contains=!0,x=h;break}if("#"==C){n(),i.attrName="id",x=h;break}if("["==C){n(),x=g;break}if(C.match(s)){x=T;break}if(","==C){x=l;break}throw Error(c);case g:if(C.match(_)){i.attrName=C,x=y;break}if(C.match(s))break;throw Error(c);case y:if(C.match(v)){i.attrName+=C;break}if(C.match(s)){x=b;break}if("~"==C){i.contains=!0,x=w;break}if("="==C){i.attrValue="",x=E;break}if("]"==C){x=d;break}throw Error(c);case b:if("~"==C){i.contains=!0,x=w;break}if("="==C){i.attrValue="",x=E;break}if("]"==C){x=d;break}if(C.match(s))break;throw Error(c);case w:if("="==C){i.attrValue="",x=E;break}throw Error(c);case k:if("]"==C){x=d;break}if(C.match(s))break;throw Error(c);case E:if(C.match(s))break;if('"'==C||"'"==C){a=C,x=A;break}i.attrValue+=C,x=S;break;case S:if(C.match(s)){x=k;break}if("]"==C){x=d;break}if("'"==C||'"'==C)throw Error(c);i.attrValue+=C;break;case A:if(C==a){x=k;break}i.attrValue+=C;break;case T:if(C.match(s))break;if(","==C){x=l;break}throw Error(c)}}switch(x){case l:case f:case d:case p:case T:r();break;default:throw Error(c)}if(!u.length)throw Error(c);return u},e.nextUid=1,e.matchesSelector=function(){var e=document.createElement("div");return"function"==typeof e.webkitMatchesSelector?"webkitMatchesSelector":"function"==typeof e.mozMatchesSelector?"mozMatchesSelector":"function"==typeof e.msMatchesSelector?"msMatchesSelector":"matchesSelector";
}(),e}(),y=/^([a-zA-Z:_]+[a-zA-Z0-9_\-:\.]*)$/,b=function(){function e(t){var r=this;this.connected=!1,this.options=e.validateOptions(t),this.observerOptions=e.createObserverOptions(this.options.queries),this.root=this.options.rootNode,this.callback=this.options.callback,this.elementFilter=Array.prototype.concat.apply([],this.options.queries.map(function(e){return e.elementFilter?e.elementFilter:[]})),this.elementFilter.length||(this.elementFilter=void 0),this.calcReordered=this.options.queries.some(function(e){return e.all}),this.queryValidators=[],e.createQueryValidator&&(this.queryValidators=this.options.queries.map(function(t){return e.createQueryValidator(r.root,t)})),this.observer=new a(function(e){r.observerCallback(e)}),this.reconnect()}return e.createObserverOptions=function(e){function t(e){if(!n.attributes||r){if(n.attributes=!0,n.attributeOldValue=!0,!e)return void(r=void 0);r=r||{},e.forEach(function(e){r[e]=!0,r[e.toLowerCase()]=!0})}}var r,n={childList:!0,subtree:!0};return e.forEach(function(e){if(e.characterData)return n.characterData=!0,void(n.characterDataOldValue=!0);if(e.all)return t(),n.characterData=!0,void(n.characterDataOldValue=!0);if(e.attribute)return void t([e.attribute.trim()]);var r=i(e.elementFilter).concat(e.attributeList||[]);r.length&&t(r)}),r&&(n.attributeFilter=Object.keys(r)),n},e.validateOptions=function(t){for(var r in t)if(!(r in e.optionKeys))throw Error("Invalid option: "+r);if("function"!=typeof t.callback)throw Error("Invalid options: callback is required and must be a function");if(!t.queries||!t.queries.length)throw Error("Invalid options: queries must contain at least one query request object.");for(var i={callback:t.callback,rootNode:t.rootNode||document,observeOwnChanges:!!t.observeOwnChanges,oldPreviousSibling:!!t.oldPreviousSibling,queries:[]},a=0;a<t.queries.length;a++){var u=t.queries[a];if(u.all){if(Object.keys(u).length>1)throw Error("Invalid request option. all has no options.");i.queries.push({all:!0})}else if("attribute"in u){var s={attribute:n(u.attribute)};if(s.elementFilter=g.parseSelectors("*["+s.attribute+"]"),Object.keys(u).length>1)throw Error("Invalid request option. attribute has no options.");i.queries.push(s)}else if("element"in u){var c=Object.keys(u).length,s={element:u.element,elementFilter:g.parseSelectors(u.element)};if(u.hasOwnProperty("elementAttributes")&&(s.attributeList=o(u.elementAttributes),c--),c>1)throw Error("Invalid request option. element only allows elementAttributes option.");i.queries.push(s)}else{if(!u.characterData)throw Error("Invalid request option. Unknown query request.");if(Object.keys(u).length>1)throw Error("Invalid request option. characterData has no options.");i.queries.push({characterData:!0})}}return i},e.prototype.createSummaries=function(e){if(!e||!e.length)return[];for(var t=new h(this.root,e,this.elementFilter,this.calcReordered,this.options.oldPreviousSibling),r=[],n=0;n<this.options.queries.length;n++)r.push(new p(t,this.options.queries[n]));return r},e.prototype.checkpointQueryValidators=function(){this.queryValidators.forEach(function(e){e&&e.recordPreviousState()})},e.prototype.runQueryValidators=function(e){this.queryValidators.forEach(function(t,r){t&&t.validate(e[r])})},e.prototype.changesToReport=function(e){return e.some(function(e){var t=["added","removed","reordered","reparented","valueChanged","characterDataChanged"];if(t.some(function(t){return e[t]&&e[t].length}))return!0;if(e.attributeChanged){var r=Object.keys(e.attributeChanged),n=r.some(function(t){return!!e.attributeChanged[t].length});if(n)return!0}return!1})},e.prototype.observerCallback=function(e){this.options.observeOwnChanges||this.observer.disconnect();var t=this.createSummaries(e);this.runQueryValidators(t),this.options.observeOwnChanges&&this.checkpointQueryValidators(),this.changesToReport(t)&&this.callback(t),!this.options.observeOwnChanges&&this.connected&&(this.checkpointQueryValidators(),this.observer.observe(this.root,this.observerOptions))},e.prototype.reconnect=function(){if(this.connected)throw Error("Already connected");this.observer.observe(this.root,this.observerOptions),this.connected=!0,this.checkpointQueryValidators()},e.prototype.takeSummaries=function(){if(!this.connected)throw Error("Not connected");var e=this.createSummaries(this.observer.takeRecords());return this.changesToReport(e)?e:void 0},e.prototype.disconnect=function(){var e=this.takeSummaries();return this.observer.disconnect(),this.connected=!1,e},e.NodeMap=c,e.parseElementFilter=g.parseSelectors,e.optionKeys={callback:!0,queries:!0,rootNode:!0,oldPreviousSibling:!0,observeOwnChanges:!0},e}();e.exports=b},function(e,t,r){"use strict";var n=r(11),o=r(37),i=window.location.protocol+"//"+window.location.host,a=i+"/db/",u=new n({domain:"jbalboni.auth0.com",clientID:"lwTkxKneMjbRu3L4oJjfbtbeAAzM0nTn",callbackURL:i,callbackOnLocationHash:!0}),t={};t.authenticate=function(){var e=new Promise(function(e,t){var r=u.parseHash(window.location.hash),n=localStorage.id_token;r?(history.replaceState("",document.title,window.location.pathname),r.error?(console.log("There was an error logging in",r.error),localStorage.removeItem("id_token"),t(r.error)):(localStorage.setItem("id_token",r.idToken),e(r.idToken))):n&&u.renewIdToken(n,function(r,n){r?(localStorage.removeItem("id_token"),t("Failed to get valid token")):(localStorage.setItem("id_token",n.id_token),e(n.id_token))})});return window.login=function(){u.login({connection:"google-oauth2"})},e},t.isAuthenticated=function(){return!!localStorage.id_token},t.logInUser=function(){u.login({connection:"google-oauth2"})},t.logOutUser=function(){return localStorage.clear("id_token"),fetch("https://jbalboni.auth0.com/v2/logout",{withCredentials:!0}).then(function(e){return e.ok?!0:void 0})},t.start=function(e,t){var r=localStorage.id_token;fetch("/db/name",{method:"POST",withCredentials:!0,headers:{Authorization:"Bearer "+r}}).then(function(e){if(e.ok)return e.json();throw new Error("Failed to get database name")}).then(function(n){var i=new o(a+n.name,{ajax:{headers:{Authorization:"Bearer "+r}}});return e.sync(i,{live:!0,retry:!0}).on("change",function(e){t&&t(e)}),r})},t.getProfile=function(){return new Promise(function(e,t){u.getProfile(localStorage.id_token,function(r,n){return r?void t(r):void e(n)})})},e.exports=t},function(e,t,r){(function(t){function n(){var e,t=-1,r=navigator.userAgent;return"Microsoft Internet Explorer"===navigator.appName?(e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!=e.exec(r)&&(t=parseFloat(RegExp.$1))):r.indexOf("Trident")>-1&&(e=new RegExp("rv:([0-9]{2,2}[.0-9]{0,})"),null!==e.exec(r)&&(t=parseFloat(RegExp.$1))),t}function o(e){var t="";for(var r in e)t+=r+"="+e[r]+",";return t.slice(0,-1)}function i(e,t){return!(!e||null==e[t])}function a(e,t){var r=e.status,o="string"==typeof e.responseText?e.responseText:e,i=10===n()||11===n(),a=!r||0===r,u=!!window.navigator.onLine;a&&!u?(r=0,o={code:"offline"}):a&&i?(r=401,o={code:"invalid_user_password"}):a&&(r=0,o={code:"connection_refused_timeout"});var s=new k(r,o);t(s)}function u(e,t,r){return e+"//"+t+r}function s(e){return this instanceof s?(l(e,"clientID"),l(e,"domain"),this._useJSONP=null!=e.forceJSONP?!!e.forceJSONP:E()&&!b("https:",e.domain),this._clientID=e.clientID,this._callbackURL=e.callbackURL||document.location.href,this._shouldRedirect=!!e.callbackURL,this._domain=e.domain,this._callbackOnLocationHash=e.callbackOnLocationHash,this._cordovaSocialPlugins={facebook:this._phonegapFacebookLogin},this._useCordovaSocialPlugins=e.useCordovaSocialPlugins,void(this._sendClientInfo=null!=e.sendSDKClientInfo?e.sendSDKClientInfo:!0)):new s(e)}var c=r(12),l=r(14),f=r(15),d=r(16),h=r(17),p=r(18),_=r(24),v=r(25),m=r(26),g=r(27),y={param:"cbx",timeout:8e3,prefix:"__auth0jp"},b=r(31),w=r(32),k=r(34),E=r(35);s.version=r(36).str,s.clientInfo={name:"auth0.js",version:s.version},s.prototype.openWindow=function(e,t,r){return window.open(e,t,o(r))},s.prototype._redirect=function(e){t.window.location=e},s.prototype._getCallbackOnLocationHash=function(e){return e&&"undefined"!=typeof e.callbackOnLocationHash?e.callbackOnLocationHash:this._callbackOnLocationHash},s.prototype._getCallbackURL=function(e){return e&&"undefined"!=typeof e.callbackURL?e.callbackURL:this._callbackURL},s.prototype._getClientInfoString=function(){var e=JSON.stringify(s.clientInfo);return c.encode(e)},s.prototype._getClientInfoHeader=function(){return{"Auth0-Client":this._getClientInfoString()}},s.prototype._renderAndSubmitWSFedForm=function(e,t){var r=document.createElement("div");r.innerHTML=t;var n=document.body.appendChild(r).children[0];e.popup&&!this._getCallbackOnLocationHash(e)&&(n.target="auth0_signup_popup"),n.submit()},s.prototype._getMode=function(e){return{scope:"openid",response_type:this._getCallbackOnLocationHash(e)?"token":"code"}},s.prototype._configureOfflineMode=function(e){e.scope&&e.scope.indexOf("offline_access")>=0&&(e.device=e.device||"Browser")},s.prototype._getUserInfo=function(e,t,r){if(!e||e.user_id)return r(null,e);var n="https:",o=this._domain,i="/tokeninfo",a=u(n,o,i),s=function(e,t){var n=new Error(e+": "+(t||""));n.error=e,n.error_description=t,r(n)};return this._useJSONP?g(a+"?"+h.stringify({id_token:t}),y,function(e,t){return e?s(0,e.toString()):200===t.status?r(null,t.user):s(t.status,t.err||t.error)}):v({url:b(n,o)?i:a,method:"post",type:"json",crossOrigin:!b(n,o),data:{id_token:t}}).fail(function(e){s(e.status,e.responseText)}).then(function(e){r(null,e)})},s.prototype.getProfile=function(e,t){if("function"!=typeof t)throw new Error("A callback function is required");return e&&"string"==typeof e?void this._getUserInfo(this.decodeJwt(e),e,t):t(new Error("Invalid token"))},s.prototype.validateUser=function(e,t){var r="https:",n=this._domain,o="/public/api/users/validate_userpassword",i=u(r,n,o),a=p(e,{client_id:this._clientID,username:_(e.username||e.email||"")});return this._useJSONP?g(i+"?"+h.stringify(a),y,function(e,r){return e?t(e):"error"in r&&404!==r.status?t(new Error(r.error)):void t(null,200===r.status)}):void v({url:b(r,n)?o:i,method:"post",type:"text",data:a,crossOrigin:!b(r,n),error:function(e){return 404!==e.status?t(new Error(e.responseText)):void t(null,!1)},success:function(e){t(null,200===e.status)}})},s.prototype.decodeJwt=function(e){var t=e&&e.split(".")[1];return w(c.decode(t))},s.prototype.parseHash=function(e){e=e||window.location.hash;var t;if(e.match(/error/)){e=e.substr(1).replace(/^\//,""),t=h.parse(e);var r={error:t.error,error_description:t.error_description};return r}if(!e.match(/access_token/))return null;e=e.substr(1).replace(/^\//,""),t=h.parse(e);var n=t.id_token,o=t.refresh_token,i=this.decodeJwt(n),a=function(e){var t={error:"invalid_token",error_description:e};return t},u=f(i.aud)?i.aud:[i.aud];return-1===d(u,this._clientID)?a("The clientID configured ("+this._clientID+") does not match with the clientID set in the token ("+u.join(", ")+")."):i.iss&&i.iss!=="https://"+this._domain+"/"?a("The domain configured (https://"+this._domain+"/) does not match with the domain set in the token ("+i.iss+")."):{accessToken:t.access_token,idToken:n,idTokenPayload:i,refreshToken:o,state:t.state}},s.prototype.signup=function(e,t){function r(){return e.auto_login?o.login(e,t):"function"==typeof t?t():void 0}function n(e,r){var n=new k(e,r);if(c&&"function"==typeof c.kill&&c.kill(),"function"==typeof t)return t(n);throw n}var o=this,a={client_id:this._clientID,redirect_uri:this._getCallbackURL(e),email:_(e.email||e.username||""),tenant:this._domain.split(".")[0]};"string"==typeof e.username&&(a.username=_(e.username));var s=p(this._getMode(e),e,a);this._configureOfflineMode(s),i(e,"sso")||(e.sso=!0),i(e,"auto_login")||(e.auto_login=!0);var c,l=e.auto_login&&e.popup&&(!this._getCallbackOnLocationHash(e)||e.sso);l&&(c=this._buildPopupWindow(e));var f="https:",d=this._domain,m="/dbconnections/signup",w=u(f,d,m);return this._useJSONP?g(w+"?"+h.stringify(s),y,function(e,t){return e?n(0,e):200==t.status?r():n(t.status,t.err||t.error)}):void v({url:b(f,d)?m:w,method:"post",type:"html",data:s,success:r,crossOrigin:!b(f,d),error:function(e){n(e.status,e.responseText)}})},s.prototype.changePassword=function(e,t){function r(e,r){var n=new k(e,r);return t?t(n):void 0}var n={tenant:this._domain.split(".")[0],client_id:this._clientID,connection:e.connection,email:_(e.email||"")};"string"==typeof e.password&&(n.password=e.password);var o="https:",i=this._domain,a="/dbconnections/change_password",s=u(o,i,a);return this._useJSONP?g(s+"?"+h.stringify(n),y,function(e,n){return e?r(0,e):200==n.status?t(null,n.message):r(n.status,n.err||n.error)}):void v({url:b(o,i)?a:s,method:"post",type:"html",data:n,crossOrigin:!b(o,i),error:function(e){r(e.status,e.responseText)},success:function(e){t(null,e)}})},s.prototype._buildAuthorizeQueryString=function(e,t){var r=this._buildAuthorizationParameters(e,t);return h.stringify(r)},s.prototype._buildAuthorizationParameters=function(e,t){var r=p.apply(null,e);this._configureOfflineMode(r),this._sendClientInfo&&(r.auth0Client=this._getClientInfoString()),t=t||["popup","popupOptions"];var n,o;for(n=0;n<t.length;n++)o=t[n],delete r[o];return r.connection_scope&&f(r.connection_scope)&&(r.connection_scope=r.connection_scope.join(",")),r},s.prototype.login=s.prototype.signin=function(e,t){return i(e,"sso")||(e.sso=!0),"undefined"!=typeof e.passcode?this.loginWithPasscode(e,t):"undefined"!=typeof e.username||"undefined"!=typeof e.email?this.loginWithUsernamePassword(e,t):window.cordova||window.electron?this.loginPhonegap(e,t):e.popup&&this._getCallbackOnLocationHash(e)?this.loginWithPopup(e,t):void this._authorize(e)},s.prototype._authorize=function(e){var t=[this._getMode(e),e,{client_id:this._clientID,redirect_uri:this._getCallbackURL(e)}],r=this._buildAuthorizeQueryString(t),n=u("https:",this._domain,"/authorize?"+r);e.popup?this._buildPopupWindow(e,n):this._redirect(n)},s.prototype._computePopupPosition=function(e){e=e||{};var t=e.width||500,r=e.height||600,n="undefined"!=typeof window.screenX?window.screenX:window.screenLeft,o="undefined"!=typeof window.screenY?window.screenY:window.screenTop,i="undefined"!=typeof window.outerWidth?window.outerWidth:document.body.clientWidth,a="undefined"!=typeof window.outerHeight?window.outerHeight:document.body.clientHeight-22,u=n+(i-t)/2,s=o+(a-r)/2;return{width:t,height:r,left:u,top:s}},s.prototype.loginPhonegap=function(e,t){function r(e){return h?void 0:(t(new Error(e.message),null,null,null,null),h=!0,d.close())}function n(e){if(!(h||e.url&&0!==e.url.indexOf(i+"#")&&0!==e.url.indexOf(i+"?"))){var r=a.parseHash(e.url.slice(i.length));return r?r.id_token?(setTimeout(function(){t(null,a._prepareResult(r))},0),h=!0,d.close()):(t(new Error(r.err||r.error||"Something went wrong"),null,null,null,null),h=!0,d.close()):(t(new Error("Error parsing hash"),null,null,null,null),h=!0,d.close())}}function o(){h||(t(new Error("Browser window closed"),null,null,null,null),d.removeEventListener("loaderror",r),d.removeEventListener("loadstart",n),d.removeEventListener("exit",o))}if(this._shouldAuthenticateWithCordovaPlugin(e.connection))return void this._socialPhonegapLogin(e,t);var i=u("https:",this._domain,"/mobile"),a=this,s=[this._getMode(e),e,{client_id:this._clientID,redirect_uri:i}];this._sendClientInfo&&s.push({auth0Client:this._getClientInfoString()});var c=this._buildAuthorizeQueryString(s),l=u("https:",this._domain,"/authorize?"+c),f=p({location:"yes"},e.popupOptions);delete f.width,delete f.height;var d=this.openWindow(l,"_blank",f),h=!1;d.addEventListener("loaderror",r),d.addEventListener("loadstart",n),d.addEventListener("exit",o)},s.prototype.loginWithPopup=function(e,t){var r=this;if(!t)throw new Error("popup mode should receive a mandatory callback");var n=[this._getMode(e),e,{client_id:this._clientID,owp:!0}];this._sendClientInfo&&n.push({auth0Client:this._getClientInfoString()});var i=this._buildAuthorizeQueryString(n),a=u("https:",this._domain,"/authorize?"+i),s=this._computePopupPosition(e.popupOptions),c=p(s,e.popupOptions),l=m.open({url:a,relay_url:"https://"+this._domain+"/relay.html",window_features:o(c)},function(e,n){return r._current_popup=null,e?t(new k(e),null,null,null,null,null):n?n.id_token?t(null,r._prepareResult(n)):n.err?t(new k(n.err.status,n.err.details||n.err),null,null,null,null,null):n.error?t(new k(n.status,n.details||n),null,null,null,null,null):t(new k("Something went wrong"),null,null,null,null,null):t(new k("Something went wrong"),null,null,null,null,null)});l.focus()},s.prototype._shouldAuthenticateWithCordovaPlugin=function(e){var t=this._cordovaSocialPlugins[e];return this._useCordovaSocialPlugins&&!!t},s.prototype._socialPhonegapLogin=function(e,t){var r=this._cordovaSocialPlugins[e.connection],n=this;r(e.connection_scope,function(r,o,i){if(r)return void t(r,null,null,null,null);var a=p({access_token:o},e,i);n.loginWithSocialAccessToken(a,t)})},s.prototype._phonegapFacebookLogin=function(e,t){if(!window.facebookConnectPlugin||!window.facebookConnectPlugin.login)return void t(new Error("missing plugin phonegap-facebook-plugin"),null,null);var r;r=e&&f(e)?e:e?[e]:["public_profile"],window.facebookConnectPlugin.login(r,function(e){t(null,e.authResponse.accessToken,{})},function(e){t(new Error(e),null,null)})},s.prototype.loginWithUsernamePasswordAndSSO=function(e,t){var r=this,n=this._computePopupPosition(e.popupOptions),i=p(n,e.popupOptions),a=m.open({url:"https://"+this._domain+"/sso_dbconnection_popup/"+this._clientID,relay_url:"https://"+this._domain+"/relay.html",window_features:o(i),popup:this._current_popup,params:{domain:this._domain,clientID:this._clientID,options:{username:_(e.username||e.email||""),password:e.password,connection:e.connection,state:e.state,scope:e.scope}}},function(e,n){return r._current_popup=null,e?t(new k(e),null,null,null,null,null):n?n.id_token?t(null,r._prepareResult(n)):n.err?t(new k(n.err.status,n.err.details||n.err),null,null,null,null,null):n.error?t(new k(n.status,n.details||n),null,null,null,null,null):t(new k("Something went wrong"),null,null,null,null,null):t(new k("Something went wrong"),null,null,null,null,null)});a.focus()},s.prototype.loginWithResourceOwner=function(e,t){var r=this,n=p(this._getMode(e),e,{client_id:this._clientID,username:_(e.username||e.email||""),grant_type:"password"});this._configureOfflineMode(n);var o="https:",i=this._domain,s="/oauth/ro",c=u(o,i,s);return this._sendClientInfo&&this._useJSONP&&(n.auth0Client=this._getClientInfoString()),this._useJSONP?g(c+"?"+h.stringify(n),y,function(e,n){if(e)return t(e);if("error"in n){var o=new k(n.status,n.error);return t(o)}t(null,r._prepareResult(n))}):void v({url:b(o,i)?s:c,method:"post",type:"json",data:n,headers:this._getClientInfoHeader(),crossOrigin:!b(o,i),success:function(e){t(null,r._prepareResult(e))},error:function(e){a(e,t)}})},s.prototype.loginWithSocialAccessToken=function(e,t){var r=this,n=this._buildAuthorizationParameters([{scope:"openid"},e,{client_id:this._clientID}]),o="https:",i=this._domain,s="/oauth/access_token",c=u(o,i,s);return this._useJSONP?g(c+"?"+h.stringify(n),y,function(e,n){if(e)return t(e);if("error"in n){var o=new k(n.status,n.error);return t(o)}t(null,r._prepareResult(n))}):void v({url:b(o,i)?s:c,method:"post",type:"json",data:n,headers:this._getClientInfoHeader(),crossOrigin:!b(o,i),success:function(e){t(null,r._prepareResult(e))},error:function(e){a(e,t)}})},s.prototype._buildPopupWindow=function(e,t){if(this._current_popup&&!this._current_popup.closed)return this._current_popup;t=t||"about:blank";var r=this,n={width:500,height:600},i=p(n,e.popupOptions||{}),a=o(i);if(this._current_popup=window.open(t,"auth0_signup_popup",a),!this._current_popup)throw new Error("Popup window cannot not been created. Disable popup blocker or make sure to call Auth0 login or singup on an UI event.");return this._current_popup.kill=function(){this.close(),r._current_popup=null},this._current_popup},s.prototype.loginWithUsernamePassword=function(e,t){function r(e){if(t)return t(e);throw e}if(t&&t.length>1&&(!e.sso||window.cordova))return this.loginWithResourceOwner(e,t);var n,o=this;if(e.popup&&!this._getCallbackOnLocationHash(e)&&(n=this._buildPopupWindow(e)),t&&t.length>1&&e.sso)return this.loginWithUsernamePasswordAndSSO(e,t);var i=p(this._getMode(e),e,{client_id:this._clientID,redirect_uri:this._getCallbackURL(e),username:_(e.username||e.email||""),tenant:this._domain.split(".")[0]});this._configureOfflineMode(i);var s="https:",c=this._domain,l="/usernamepassword/login",f=u(s,c,l);return this._useJSONP?g(f+"?"+h.stringify(i),y,function(r,i){if(r)return n&&n.kill&&n.kill(),t(r);if("error"in i){n&&n.kill&&n.kill();var a=new k(i.status,i.error);return t(a)}o._renderAndSubmitWSFedForm(e,i.form)}):void v({url:b(s,c)?l:f,method:"post",type:"html",data:i,headers:this._getClientInfoHeader(),crossOrigin:!b(s,c),success:function(t){o._renderAndSubmitWSFedForm(e,t)},error:function(e){n&&n.kill&&n.kill(),a(e,r)}})},s.prototype.loginWithPasscode=function(e,t){if(null==e.email&&null==e.phoneNumber)throw new Error("email or phoneNumber is required for authentication");if(null==e.passcode)throw new Error("passcode is required for authentication");if(e.connection=null==e.email?"sms":"email",!this._shouldRedirect)return e=p(e,{username:null==e.email?e.phoneNumber:e.email,password:e.passcode,sso:!1}),delete e.email,delete e.phoneNumber,delete e.passcode,this.loginWithResourceOwner(e,t);var r={connection:e.connection};e.phoneNumber&&(e.phone_number=e.phoneNumber,delete e.phoneNumber,r.phone_number=e.phone_number),e.email&&(r.email=e.email),e.verification_code=e.passcode,delete e.passcode,r.verification_code=e.verification_code;var n=this;this._verify(r,function(r){return r?t(r):void n._verify_redirect(e)})},s.prototype._verify=function(e,t){var r="https:",n=this._domain,o="/passwordless/verify",i=u(r,n,o),a=e;return this._useJSONP?(this._sendClientInfo&&(a.auth0Client=this._getClientInfoString()),g(i+"?"+h.stringify(a),y,function(e,r){return e?t(new Error("0: "+e.toString())):200===r.status?t(null,!0):t({status:r.status})})):v({url:b(r,n)?o:i,method:"post",headers:this._getClientInfoHeader(),crossOrigin:!b(r,n),data:a}).fail(function(e){try{t(JSON.parse(e.responseText))}catch(r){var n=new Error(e.status+"("+e.statusText+"): "+e.responseText);n.statusCode=e.status,n.error=e.statusText,n.message=e.responseText,t(n)}}).then(function(e){t(null,e)})},s.prototype._verify_redirect=function(e){var t=[this._getMode(e),e,{client_id:this._clientID,redirect_uri:this._getCallbackURL(e)}],r=this._buildAuthorizeQueryString(t),n=u("https:",this._domain,"/passwordless/verify_redirect?"+r);this._redirect(n)},s.prototype.renewIdToken=function(e,t){this.getDelegationToken({id_token:e,scope:"passthrough",api:"auth0"},t)},s.prototype.refreshToken=function(e,t){this.getDelegationToken({refresh_token:e,scope:"passthrough",api:"auth0"},t)},s.prototype.getDelegationToken=function(e,t){if(e=e||{},!e.id_token&&!e.refresh_token)throw new Error("You must send either an id_token or a refresh_token to get a delegation token.");var r=p({grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",client_id:this._clientID,target:e.targetClientId||this._clientID,api_type:e.api},e);delete r.hasOwnProperty,delete r.targetClientId,delete r.api;var o="https:",i=this._domain,a="/delegation",s=u(o,i,a);return this._useJSONP?g(s+"?"+h.stringify(r),y,function(e,r){if(e)return t(e);if("error"in r){var n=new k(r.status,r.error_description||r.error);return t(n)}t(null,r)}):void v({url:b(o,i)?a:s,method:"post",type:"json",data:r,crossOrigin:!b(o,i),success:function(e){t(null,e)},error:function(e){try{t(JSON.parse(e.responseText))}catch(r){var o=e,i=10===n()||11===n(),a=!o.status||0===o.status;a&&!window.navigator.onLine?(o={},o.status=0,o.responseText={code:"offline"}):a&&i?(o={},o.status=401,o.responseText={code:"invalid_operation"}):a?(o={},o.status=0,o.responseText={code:"connection_refused_timeout"}):o.responseText=e,t(new k(o.status,o.responseText))}}})},s.prototype.logout=function(e){var t=u("https:",this._domain,"/logout");e&&(t+="?"+h.stringify(e)),this._redirect(t)},s.prototype.getSSOData=function(e,t){"function"==typeof e&&(t=e,e=!1);var r={sso:!1};if(this._useJSONP){var n=new Error("The SSO data can't be obtained using JSONP");return void setTimeout(function(){t(n,r)},0)}var o="https:",i=this._domain,a="/user/ssodata",s=u(o,i,a),c=b(o,i),l={};return e&&(l={ldaps:1,client_id:this._clientID}),v({url:c?a:s,method:"get",type:"json",data:l,crossOrigin:!c,withCredentials:!c,timeout:3e3}).fail(function(e){var n=new Error("There was an error in the request that obtains the user's SSO data.");n.cause=e,t(n,r)}).then(function(e){t(null,e)})},s.prototype.getConnections=function(e){return g("https://"+this._domain+"/public/api/"+this._clientID+"/connections",y,e)},s.prototype.startPasswordless=function(e,t){if("object"!=typeof e)throw new Error("An options object is required");if("function"!=typeof t)throw new Error("A callback function is required");if(!e.email&&!e.phoneNumber)throw new Error("An `email` or a `phoneNumber` is required.");var r="https:",n=this._domain,o="/passwordless/start",i=u(r,n,o),a={client_id:this._clientID};return e.email?(a.email=e.email,a.connection="email",e.authParams&&(a.authParams=e.authParams),e.send&&"link"!==e.send||(a.authParams||(a.authParams={}),a.authParams.redirect_uri=this._callbackURL,a.authParams.response_type=this._shouldRedirect&&!this._callbackOnLocationHash?"code":"token"),e.send&&(a.send=e.send)):(a.phone_number=e.phoneNumber,a.connection="sms"),this._useJSONP?(this._sendClientInfo&&(a.auth0Client=this._getClientInfoString()),g(i+"?"+h.stringify(a),y,function(e,r){return e?t(new Error("0: "+e.toString())):200===r.status?t(null,!0):t(r.err||r.error)})):v({url:b(r,n)?o:i,method:"post",type:"json",headers:this._getClientInfoHeader(),crossOrigin:!b(r,n),data:a}).fail(function(e){try{t(JSON.parse(e.responseText))}catch(r){var n=new Error(e.status+"("+e.statusText+"): "+e.responseText);n.statusCode=e.status,n.error=e.statusText,n.message=e.responseText,t(n)}}).then(function(e){t(null,e)})},s.prototype.requestMagicLink=function(e,t){return this.startPasswordless(e,t)},s.prototype.requestEmailCode=function(e,t){return e.send="code",this.startPasswordless(e,t)},s.prototype.verifyEmailCode=function(e,t){return e.passcode=e.code,delete e.code,this.login(e,t)},s.prototype.requestSMSCode=function(e,t){return this.startPasswordless(e,t)},s.prototype.verifySMSCode=function(e,t){return e.passcode=e.code,delete e.code,this.login(e,t)},s.prototype.getUserCountry=function(e){var t="https:",r=this._domain,n="/user/geoloc/country",o=u(t,r,n);if(this._useJSONP){var i=new Error("The user's country can't be obtained using JSONP");return void setTimeout(function(){e(i)},0)}v({url:b(t,r)?n:o,method:"get",type:"json",headers:this._getClientInfoHeader(),crossOrigin:!b(t,r),success:function(t){e(null,t.country_code)},error:function(t){var r=new Error("There was an error in the request that obtains the user's country");r.cause=t,e(r)}})},s.prototype._prepareResult=function(e){if(e&&"object"==typeof e){var t=e.profile?e.profile:this.decodeJwt(e.id_token);return{accessToken:e.access_token,idToken:e.id_token,idTokenPayload:t,refreshToken:e.refresh_token,state:e.state}}},e.exports=s}).call(t,function(){return this}())},function(e,t,r){function n(e){return i.btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function o(e){return e+=Array(5-e.length%4).join("="),e=e.replace(/\-/g,"+").replace(/\_/g,"/"),i.atob(e)}var i=r(13);e.exports={encode:n,decode:o}},function(e,t,r){!function(){var e=t,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=function(){try{document.createElement("$")}catch(e){return e}}();e.btoa||(e.btoa=function(e){for(var t,o,i=0,a=r,u="";e.charAt(0|i)||(a="=",i%1);u+=a.charAt(63&t>>8-i%1*8)){if(o=e.charCodeAt(i+=.75),o>255)throw n;t=t<<8|o}return u}),e.atob||(e.atob=function(e){if(e=e.replace(/=+$/,""),e.length%4==1)throw n;for(var t,o,i=0,a=0,u="";o=e.charAt(a++);~o&&(t=i%4?64*t+o:o,i++%4)?u+=String.fromCharCode(255&t>>(-2*i&6)):0)o=r.indexOf(o);return u})}()},function(e,t){function r(e,t){if(!e[t])throw new Error(t+" is required.")}e.exports=r},function(e,t){function r(e){return"[object Array]"===n.call(e)}var n=Object.prototype.toString;e.exports=null!=Array.isArray?Array.isArray:r},function(e,t){function r(e,t,r){return e.indexOf(t,r)}function n(e,t,r){var n;if(null==e)throw new TypeError('"array" is null or not defined');var o=Object(e),i=o.length>>>0;if(0===i)return-1;var a=+r||0;if(Math.abs(a)===1/0&&(a=0),a>=i)return-1;for(n=Math.max(a>=0?a:i-Math.abs(a),0);i>n;){if(n in o&&o[n]===t)return n;n++}return-1}e.exports=Array.prototype.indexOf?r:n},function(e,t){function r(e,t){if(0==e[t].length)return e[t]={};var r={};for(var n in e[t])_.call(e[t],n)&&(r[n]=e[t][n]);return e[t]=r,r}function n(e,t,o,i){var a=e.shift();if(!_.call(Object.prototype,o))if(a){var u=t[o]=t[o]||[];"]"==a?m(u)?""!=i&&u.push(i):"object"==typeof u?u[g(u).length]=i:u=t[o]=[t[o],i]:~v(a,"]")?(a=a.substr(0,a.length-1),!w.test(a)&&m(u)&&(u=r(t,o)),n(e,u,a,i)):(!w.test(a)&&m(u)&&(u=r(t,o)),n(e,u,a,i))}else m(t[o])?t[o].push(i):"object"==typeof t[o]?t[o]=i:"undefined"==typeof t[o]?t[o]=i:t[o]=[t[o],i]}function o(e,t,r){if(~v(t,"]")){var o=t.split("[");o.length;n(o,e,"base",r)}else{if(!w.test(t)&&m(e.base)){var i={};for(var a in e.base)i[a]=e.base[a];e.base=i}f(e.base,t,r)}return e}function i(e){if("object"!=typeof e)return e;if(m(e)){var t=[];for(var r in e)_.call(e,r)&&t.push(e[r]);return t}for(var n in e)e[n]=i(e[n]);return e}function a(e){var t={base:{}};return y(g(e),function(r){o(t,r,e[r])}),i(t.base)}function u(e,t){var r=b(String(e).split(t.separator),function(e,t){var r=v(t,"="),n=d(t),i=t.substr(0,n||r),a=t.substr(n||r,t.length),a=a.substr(v(a,"=")+1,a.length);return""==i&&(i=t,a=""),""==i?e:o(e,h(i),h(a))},{base:{}}).base;return i(r)}function s(e,t){if(!t)throw new TypeError("stringify expects an object");return t+"="+encodeURIComponent(e)}function c(e,t){var r=[];if(!t)throw new TypeError("stringify expects an object");for(var n=0;n<e.length;n++)r.push(k(e[n],t+"["+n+"]"));return r.join("&")}function l(e,t){for(var r,n=[],o=g(e),i=0,a=o.length;a>i;++i)r=o[i],""!=r&&(null==e[r]?n.push(encodeURIComponent(r)+"="):n.push(k(e[r],t?t+"["+encodeURIComponent(r)+"]":encodeURIComponent(r))));return n.join("&")}function f(e,t,r){var n=e[t];_.call(Object.prototype,t)||(void 0===n?e[t]=r:m(n)?n.push(r):e[t]=[n,r])}function d(e){for(var t,r,n=e.length,o=0;n>o;++o)if(r=e[o],"]"==r&&(t=!1),"["==r&&(t=!0),"="==r&&!t)return o}function h(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}}var p=Object.prototype.toString,_=Object.prototype.hasOwnProperty,v="function"==typeof Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){"string"==typeof e&&"undefined"==typeof"a"[0]&&(e=e.split(""));for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1},m=Array.isArray||function(e){return"[object Array]"==p.call(e)},g=Object.keys||function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t},y="function"==typeof Array.prototype.forEach?function(e,t){return e.forEach(t)}:function(e,t){for(var r=0;r<e.length;r++)t(e[r])},b=function(e,t,r){if("function"==typeof e.reduce)return e.reduce(t,r);for(var n=r,o=0;o<e.length;o++)n=t(n,e[o]);return n},w=/^[0-9]+$/;t.parse=function(e,t){return null==e||""==e?{}:(t=t||{},t.separator=t.separator||"&","object"==typeof e?a(e):u(e,t))};var k=t.stringify=function(e,t){return m(e)?c(e,t):"[object Object]"==p.call(e)?l(e,t):"string"==typeof e?s(e,t):t+"="+encodeURIComponent(String(e))}},function(e,t,r){function n(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];if(i(r))for(var n=o(r),a=0;a<n.length;a++){var u=n[a];e[u]=r[u]}}return e}var o=r(19),i=r(23);e.exports=n},function(e,t,r){e.exports=Object.keys||r(20)},function(e,t,r){!function(){"use strict";
var t,n=Object.prototype.hasOwnProperty,o=Object.prototype.toString,i=r(21),a=r(22),u=!{toString:null}.propertyIsEnumerable("toString"),s=function(){}.propertyIsEnumerable("prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];t=function(e){var t=null!==e&&"object"==typeof e,r="[object Function]"===o.call(e),l=a(e),f=[];if(!t&&!r&&!l)throw new TypeError("Object.keys called on a non-object");if(l)i(e,function(e){f.push(e)});else{var d,h=s&&r;for(d in e)h&&"prototype"===d||!n.call(e,d)||f.push(d)}if(u){var p=e.constructor,_=p&&p.prototype===e;i(c,function(t){_&&"constructor"===t||!n.call(e,t)||f.push(t)})}return f},e.exports=t}()},function(e,t){var r=Object.prototype.hasOwnProperty,n=Object.prototype.toString,o=function(e){var t="function"==typeof e&&!(e instanceof RegExp)||"[object Function]"===n.call(e);return t||"undefined"==typeof window||(t=e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt),t};e.exports=function(e,t){if(!o(t))throw new TypeError("iterator must be a function");var n,i,a="string"==typeof e,u=e.length,s=arguments.length>2?arguments[2]:null;if(u===+u)for(n=0;u>n;n++)null===s?t(a?e.charAt(n):e[n],n,e):t.call(s,a?e.charAt(n):e[n],n,e);else for(i in e)r.call(e,i)&&(null===s?t(e[i],i,e):t.call(s,e[i],i,e))}},function(e,t){var r=Object.prototype.toString;e.exports=function n(e){var t=r.call(e),n="[object Arguments]"===t;return n||(n="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===r.call(e.callee)),n}},function(e,t){function r(e){return null!==e&&("object"==typeof e||"function"==typeof e)}e.exports=r},function(e,t){function r(e){return e.replace(/^\s*|\s*$/g,"")}t=e.exports=r,t.left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;/*!
	  * Reqwest! A general purpose XHR connection manager
	  * license MIT (c) Dustin Diaz 2014
	  * https://github.com/ded/reqwest
	  */
!function(e,t,r){"undefined"!=typeof module&&module.exports?module.exports=r():(__WEBPACK_AMD_DEFINE_FACTORY__=r,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}("reqwest",this,function(){function succeed(e){var t=protocolRe.exec(e.url);return t=t&&t[1]||window.location.protocol,httpsRe.test(t)?twoHundo.test(e.request.status):!!e.request.response}function handleReadyState(e,t,r){return function(){return e._aborted?r(e.request):e._timedOut?r(e.request,"Request is aborted: timeout"):void(e.request&&4==e.request[readyState]&&(e.request.onreadystatechange=noop,succeed(e)?t(e.request):r(e.request)))}}function setHeaders(e,t){var r,n=t.headers||{};n.Accept=n.Accept||defaultHeaders.accept[t.type]||defaultHeaders.accept["*"];var o="function"==typeof FormData&&t.data instanceof FormData;t.crossOrigin||n[requestedWith]||(n[requestedWith]=defaultHeaders.requestedWith),n[contentType]||o||(n[contentType]=t.contentType||defaultHeaders.contentType);for(r in n)n.hasOwnProperty(r)&&"setRequestHeader"in e&&e.setRequestHeader(r,n[r])}function setCredentials(e,t){"undefined"!=typeof t.withCredentials&&"undefined"!=typeof e.withCredentials&&(e.withCredentials=!!t.withCredentials)}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,r,n){var o=uniqid++,i=e.jsonpCallback||"callback",a=e.jsonpCallbackName||reqwest.getcallbackPrefix(o),u=new RegExp("((^|\\?|&)"+i+")=([^&]+)"),s=n.match(u),c=doc.createElement("script"),l=0,f=-1!==navigator.userAgent.indexOf("MSIE 10.0");return s?"?"===s[3]?n=n.replace(u,"$1="+a):a=s[3]:n=urlappend(n,i+"="+a),win[a]=generalCallback,c.type="text/javascript",c.src=n,c.async=!0,"undefined"==typeof c.onreadystatechange||f||(c.htmlFor=c.id="_reqwest_"+o),c.onload=c.onreadystatechange=function(){return c[readyState]&&"complete"!==c[readyState]&&"loaded"!==c[readyState]||l?!1:(c.onload=c.onreadystatechange=null,c.onclick&&c.onclick(),t(lastValue),lastValue=void 0,head.removeChild(c),void(l=1))},head.appendChild(c),{abort:function(){c.onload=c.onreadystatechange=null,r({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(c),l=1}}}function getRequest(e,t){var r,n=this.o,o=(n.method||"GET").toUpperCase(),i="string"==typeof n?n:n.url,a=n.processData!==!1&&n.data&&"string"!=typeof n.data?reqwest.toQueryString(n.data):n.data||null,u=!1;return"jsonp"!=n.type&&"GET"!=o||!a||(i=urlappend(i,a),a=null),"jsonp"==n.type?handleJsonp(n,e,t,i):(r=n.xhr&&n.xhr(n)||xhr(n),r.open(o,i,n.async!==!1),setHeaders(r,n),setCredentials(r,n),win[xDomainRequest]&&r instanceof win[xDomainRequest]?(r.onload=e,r.onerror=t,r.onprogress=function(){},u=!0):r.onreadystatechange=handleReadyState(this,e,t),n.before&&n.before(r),u?setTimeout(function(){r.send(a)},200):r.send(a),r)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){return e.match("json")?"json":e.match("javascript")?"js":e.match("text")?"html":e.match("xml")?"xml":void 0}function init(o,fn){function complete(e){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(e)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(e,t,r){for(e=self.request,self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=r,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(e,t,r);complete(e)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){timedOut()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,"\r\n"):""}function serial(e,t){var r,n,o,i,a=e.name,u=e.tagName.toLowerCase(),s=function(e){e&&!e.disabled&&t(a,normalize(e.attributes.value&&e.attributes.value.specified?e.value:e.text))};if(!e.disabled&&a)switch(u){case"input":/reset|button|image|file/i.test(e.type)||(r=/checkbox/i.test(e.type),n=/radio/i.test(e.type),o=e.value,(!(r||n)||e.checked)&&t(a,normalize(r&&""===o?"on":o)));break;case"textarea":t(a,normalize(e.value));break;case"select":if("select-one"===e.type.toLowerCase())s(e.selectedIndex>=0?e.options[e.selectedIndex]:null);else for(i=0;e.length&&i<e.length;i++)e.options[i].selected&&s(e.options[i])}}function eachFormElement(){var e,t,r=this,n=function(e,t){var n,o,i;for(n=0;n<t.length;n++)for(i=e[byTag](t[n]),o=0;o<i.length;o++)serial(i[o],r)};for(t=0;t<arguments.length;t++)e=arguments[t],/input|select|textarea/i.test(e.tagName)&&serial(e,r),n(e,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply(function(t,r){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(r)):e[t]=r},arguments),e}function buildParams(e,t,r,n){var o,i,a,u=/\[\]$/;if(isArray(t))for(i=0;t&&i<t.length;i++)a=t[i],r||u.test(e)?n(e,a):buildParams(e+"["+("object"==typeof a?i:"")+"]",a,r,n);else if(t&&"[object Object]"===t.toString())for(o in t)buildParams(e+"["+o+"]",t[o],r,n);else n(e,t)}var win=window,doc=document,httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(e.crossOrigin===!0){var t=win[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials"in t)return t;if(win[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return win[xmlHttpRequest]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(e){return e}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){return e=e||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this},"catch":function(e){return this.fail(e)}},reqwest.serializeArray=function(){var e=[];return eachFormElement.apply(function(t,r){e.push({name:t,value:r})},arguments),e},reqwest.serialize=function(){if(0===arguments.length)return"";var e,t,r=Array.prototype.slice.call(arguments,0);return e=r.pop(),e&&e.nodeType&&r.push(e)&&(e=null),e&&(e=e.type),t="map"==e?serializeHash:"array"==e?reqwest.serializeArray:serializeQueryString,t.apply(null,r)},reqwest.toQueryString=function(e,t){var r,n,o=t||!1,i=[],a=encodeURIComponent,u=function(e,t){t="function"==typeof t?t():null==t?"":t,i[i.length]=a(e)+"="+a(t)};if(isArray(e))for(n=0;e&&n<e.length;n++)u(e[n].name,e[n].value);else for(r in e)e.hasOwnProperty(r)&&buildParams(r,e[r],o,u);return i.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(e,t){return e&&(e.type&&(e.method=e.type)&&delete e.type,e.dataType&&(e.type=e.dataType),e.jsonpCallback&&(e.jsonpCallbackName=e.jsonpCallback)&&delete e.jsonpCallback,e.jsonp&&(e.jsonpCallback=e.jsonp)),new Reqwest(e,t)},reqwest.ajaxSetup=function(e){e=e||{};for(var t in e)globalSetupOptions[t]=e[t]},reqwest})},function(e,t){var r=function(){function e(e,t,r){e.attachEvent?e.attachEvent("on"+t,r):e.addEventListener&&e.addEventListener(t,r,!1)}function t(e,t,r){e.detachEvent?e.detachEvent("on"+t,r):e.removeEventListener&&e.removeEventListener(t,r,!1)}function r(){var e=-1,t=navigator.userAgent;if("Microsoft Internet Explorer"===navigator.appName){var r=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=r.exec(t)&&(e=parseFloat(RegExp.$1))}else if(t.indexOf("Trident")>-1){var r=new RegExp("rv:([0-9]{2,2}[.0-9]{0,})");null!==r.exec(t)&&(e=parseFloat(RegExp.$1))}return e>=8}function n(){try{var e=navigator.userAgent;return-1!=e.indexOf("Fennec/")||-1!=e.indexOf("Firefox/")&&-1!=e.indexOf("Android")}catch(t){}return!1}function o(){return window.JSON&&window.JSON.stringify&&window.JSON.parse&&window.postMessage}function i(e){/^https?:\/\//.test(e)||(e=window.location.href);var t=/^(https?:\/\/[\-_a-zA-Z\.0-9:]+)/.exec(e);return t?t[1]:e}function a(){for(var e=(window.location,window.opener.frames),t=e.length-1;t>=0;t--)try{if(e[t].location.protocol===window.location.protocol&&e[t].location.host===window.location.host&&e[t].name===u)return e[t]}catch(r){}}var u="__winchan_relay_frame",s="die",c=r();return o()?{open:function(r,o){function a(){if(d&&document.body.removeChild(d),d=void 0,v&&(v=clearInterval(v)),t(window,"message",l),t(window,"unload",a),_)try{_.close()}catch(e){p.postMessage(s,h)}_=p=void 0}function l(e){if(e.origin===h)try{var t=JSON.parse(e.data);"ready"===t.a?p.postMessage(m,h):"error"===t.a?(a(),o&&(o(t.d),o=null)):"response"===t.a&&(a(),o&&(o(null,t.d),o=null))}catch(r){}}if(!o)throw"missing required callback argument";var f;r.url||(f="missing required 'url' parameter"),r.relay_url||(f="missing required 'relay_url' parameter"),f&&setTimeout(function(){o(f)},0),r.window_name||(r.window_name=null),r.window_features&&!n()||(r.window_features=void 0);var d,h=i(r.url);if(h!==i(r.relay_url))return setTimeout(function(){o("invalid arguments: origin of url and relay_url must match")},0);var p;c&&(d=document.createElement("iframe"),d.setAttribute("src",r.relay_url),d.style.display="none",d.setAttribute("name",u),document.body.appendChild(d),p=d.contentWindow);var _=r.popup||window.open(r.url,r.window_name,r.window_features);r.popup&&(_.location.href=r.url),p||(p=_);var v=setInterval(function(){_&&_.closed&&(a(),o&&(o("User closed the popup window"),o=null))},500),m=JSON.stringify({a:"request",d:r.params});return e(window,"unload",a),e(window,"message",l),{close:a,focus:function(){if(_)try{_.focus()}catch(e){}}}},onOpen:function(r){function n(e){e=JSON.stringify(e),c?l.doPost(e,u):l.postMessage(e,u)}function o(e){var i;try{i=JSON.parse(e.data)}catch(a){}i&&"request"===i.a&&(t(window,"message",o),u=e.origin,r&&setTimeout(function(){r(u,i.d,function(e){r=void 0,n({a:"response",d:e})})},0))}function i(e){if(e.data===s)try{window.close()}catch(t){}}var u="*",l=c?a():window.opener;if(!l)throw"can't find relay frame";e(c?l:window,"message",o),e(c?l:window,"message",i);try{n({a:"ready"})}catch(f){e(l,"load",function(e){n({a:"ready"})})}var d=function(){try{t(c?l:window,"message",i)}catch(e){}r&&n({a:"error",d:"client closed window"}),r=void 0;try{window.close()}catch(o){}};return e(window,"unload",d),{detach:function(){t(window,"unload",d)}}}}:{open:function(e,t,r,n){setTimeout(function(){n("unsupported browser")},0)},onOpen:function(e){setTimeout(function(){e("unsupported browser")},0)}}}();"undefined"!=typeof e&&e.exports&&(e.exports=r)},function(e,t,r){function n(){}function o(e,t,r){function o(){u.parentNode.removeChild(u),window[p]=n}"function"==typeof t&&(r=t,t={}),t||(t={});var u,s,c=t.prefix||"__jp",l=t.param||"callback",f=null!=t.timeout?t.timeout:6e4,d=encodeURIComponent,h=document.getElementsByTagName("script")[0]||document.head,p=c+a++;f&&(s=setTimeout(function(){o(),r&&r(new Error("Timeout"))},f)),window[p]=function(e){i("jsonp got",e),s&&clearTimeout(s),o(),r&&r(null,e)},e+=(~e.indexOf("?")?"&":"?")+l+"="+d(p),e=e.replace("?&","?"),i('jsonp req "%s"',e),u=document.createElement("script"),u.src=e,h.parentNode.insertBefore(u,h)}var i=r(28)("jsonp");e.exports=o;var a=0},function(e,t,r){function n(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return e;var n="color: "+this.color;e=[e[0],n,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,n),e}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(r){}}function u(){var e;try{e=t.storage.debug}catch(r){}return e}function s(){try{return window.localStorage}catch(e){}}t=e.exports=r(29),t.log=i,t.formatArgs=o,t.save=a,t.load=u,t.useColors=n,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:s(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){return JSON.stringify(e)},t.enable(u())},function(e,t,r){function n(){return t.colors[l++%t.colors.length]}function o(e){function r(){}function o(){var e=o,r=+new Date,i=r-(c||r);e.diff=i,e.prev=c,e.curr=r,c=r,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=n());var a=Array.prototype.slice.call(arguments);a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var u=0;a[0]=a[0].replace(/%([a-z%])/g,function(r,n){if("%%"===r)return r;u++;var o=t.formatters[n];if("function"==typeof o){var i=a[u];r=o.call(e,i),a.splice(u,1),u--}return r}),"function"==typeof t.formatArgs&&(a=t.formatArgs.apply(e,a));var s=o.log||t.log||console.log.bind(console);s.apply(e,a)}r.enabled=!1,o.enabled=!0;var i=t.enabled(e)?o:r;return i.namespace=e,i}function i(e){t.save(e);for(var r=(e||"").split(/[\s,]+/),n=r.length,o=0;n>o;o++)r[o]&&(e=r[o].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function a(){t.enable("")}function u(e){var r,n;for(r=0,n=t.skips.length;n>r;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;n>r;r++)if(t.names[r].test(e))return!0;return!1}function s(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=o,t.coerce=s,t.disable=a,t.enable=i,t.enabled=u,t.humanize=r(30),t.names=[],t.skips=[],t.formatters={};var c,l=0},function(e,t){function r(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*l;case"days":case"day":case"d":return r*c;case"hours":case"hour":case"hrs":case"hr":case"h":return r*s;case"minutes":case"minute":case"mins":case"min":case"m":return r*u;case"seconds":case"second":case"secs":case"sec":case"s":return r*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r}}}}function n(e){return e>=c?Math.round(e/c)+"d":e>=s?Math.round(e/s)+"h":e>=u?Math.round(e/u)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function o(e){return i(e,c,"day")||i(e,s,"hour")||i(e,u,"minute")||i(e,a,"second")||e+" ms"}function i(e,t,r){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}var a=1e3,u=60*a,s=60*u,c=24*s,l=365.25*c;e.exports=function(e,t){return t=t||{},"string"==typeof e?r(e):t["long"]?o(e):n(e)}},function(e,t){function r(e,t,r){return r=r||"",n===e&&o===t&&i===r}var n=window.location.protocol,o=window.location.hostname,i=window.location.port;e.exports=r},function(e,t,r){e.exports="undefined"==typeof window.JSON?r(33).parse:window.JSON.parse},function(module,exports){var JSON={};!function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var r,n,o,i,a,u=gap,s=t[e];switch(s&&"object"==typeof s&&"function"==typeof s.toJSON&&(s=s.toJSON(e)),"function"==typeof rep&&(s=rep.call(t,e,s)),typeof s){case"string":return quote(s);case"number":return isFinite(s)?String(s):"null";case"boolean":case"null":return String(s);case"object":if(!s)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(s)){for(i=s.length,r=0;i>r;r+=1)a[r]=str(r,s)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+u+"]":"["+a.join(",")+"]",gap=u,o}if(rep&&"object"==typeof rep)for(i=rep.length,r=0;i>r;r+=1)"string"==typeof rep[r]&&(n=rep[r],o=str(n,s),o&&a.push(quote(n)+(gap?": ":":")+o));else for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(o=str(n,s),o&&a.push(quote(n)+(gap?": ":":")+o));return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+u+"}":"{"+a.join(",")+"}",gap=u,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,r){var n;if(gap="",indent="","number"==typeof r)for(n=0;r>n;n+=1)indent+=" ";else"string"==typeof r&&(indent=r);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var r,n,o=e[t];if(o&&"object"==typeof o)for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n=walk(o,r),void 0!==n?o[r]=n:delete o[r]);return reviver.call(e,t,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),module.exports=JSON},function(e,t,r){function n(e,t){var r;if("string"==typeof t)try{r=o(t)}catch(n){r={message:t}}else r=t||{description:"server error"};r.code||(r.code=r.error),"unauthorized"===r.code&&(e=401);var i=r.description||r.message||r.error;"PasswordStrengthError"===r.name&&(i="Password is not strong enough.");var a=Error.call(this,i);return a.status=e,a.name=r.code,a.code=r.code,a.details=r,0===e&&(a.code&&"offline"===a.code||(a.code="Unknown",a.message="Unknown error.")),a}var o=r(32);e.exports=n,Object&&Object.create&&(n.prototype=Object.create(Error.prototype,{constructor:{value:n}}))},function(e,t){function r(){var e=window.XMLHttpRequest?new XMLHttpRequest:null;return!(e&&"withCredentials"in e)}e.exports=r},function(e,t){e.exports={str:"7.0.2"}},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}var o=n(r(38)),i=n(r(51)),a=n(r(58)),u=n(r(60)),s=n(r(62)),c=n(r(66));o.plugin(i).plugin(a).plugin(u).plugin(s).plugin(c),e.exports=o},function(e,t,r){(function(t,n){"use strict";function o(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function i(e){return j("return "+e+";",{})}function a(e){return new Function("doc",["var emitted = false;","var emit = function (a, b) {","  emitted = true;","};","var view = "+e+";","view(doc);","if (emitted) {","  return true;","}"].join("\n"))}function u(e,t){try{e.emit("change",t)}catch(r){I.guardedConsole("error",'Error in .on("change", function):',r)}}function s(e,t,r){function n(){o.cancel()}R.EventEmitter.call(this);var o=this;this.db=e,t=t?I.clone(t):{};var i=t.complete=I.once(function(t,r){t?I.listenerCount(o,"error")>0&&o.emit("error",t):o.emit("complete",r),o.removeAllListeners(),e.removeListener("destroyed",n)});r&&(o.on("complete",function(e){r(null,e)}),o.on("error",r)),e.once("destroyed",n),t.onChange=function(e){t.isCancelled||(u(o,e),o.startSeq&&o.startSeq<=e.seq&&(o.startSeq=!1))};var a=new O(function(e,r){t.complete=function(t,n){t?r(t):e(n)}});o.once("cancel",function(){e.removeListener("destroyed",n),t.complete(null,{status:"cancelled"})}),this.then=a.then.bind(a),this["catch"]=a["catch"].bind(a),this.then(function(e){i(null,e)},i),e.taskqueue.isReady?o.doChanges(t):e.taskqueue.addTask(function(){o.isCancelled?o.emit("cancel"):o.doChanges(t)})}function c(e,t,r){var n=[{rev:e._rev}];"all_docs"===r.style&&(n=q.collectLeaves(t.rev_tree).map(function(e){return{rev:e.rev}}));var o={id:t.id,changes:n,doc:e};return q.isDeleted(t,e._rev)&&(o.deleted=!0),r.conflicts&&(o.doc._conflicts=q.collectConflicts(t),o.doc._conflicts.length||delete o.doc._conflicts),o}function l(e,t){return t>e?-1:e>t?1:0}function f(e,t){for(var r=0;r<e.length;r++)if(t(e[r],r)===!0)return e[r]}function d(e){return function(t,r){t||r[0]&&r[0].error?e(t||r[0]):e(null,r.length?r[0]:r)}}function h(e){for(var t=0;t<e.length;t++){var r=e[t];if(r._deleted)delete r._attachments;else if(r._attachments)for(var n=Object.keys(r._attachments),o=0;o<n.length;o++){var i=n[o];r._attachments[i]=I.pick(r._attachments[i],["data","digest","content_type","length","revpos","stub"])}}}function p(e,t){var r=l(e._id,t._id);if(0!==r)return r;var n=e._revisions?e._revisions.start:0,o=t._revisions?t._revisions.start:0;return l(n,o)}function _(e){var t={},r=[];return q.traverseRevTree(e,function(e,n,o,i){var a=n+"-"+o;return e&&(t[a]=0),void 0!==i&&r.push({from:i,to:a}),a}),r.reverse(),r.forEach(function(e){void 0===t[e.from]?t[e.from]=1+t[e.to]:t[e.from]=Math.min(t[e.from],1+t[e.to])}),t}function v(e,t,r){var n="limit"in t?t.keys.slice(t.skip,t.limit+t.skip):t.skip>0?t.keys.slice(t.skip):t.keys;if(t.descending&&n.reverse(),!n.length)return e._allDocs({limit:0},r);var o={offset:t.skip};return O.all(n.map(function(r){var n=A.extend({key:r,deleted:"ok"},t);return["limit","skip","keys"].forEach(function(e){delete n[e]}),new O(function(t,i){e._allDocs(n,function(e,n){return e?i(e):(o.total_rows=n.total_rows,void t(n.rows[0]||{key:r,error:"not_found"}))})})})).then(function(e){return o.rows=e,o})}function m(e){var r=e._compactionQueue[0],n=r.opts,o=r.callback;e.get("_local/compaction")["catch"](function(){return!1}).then(function(r){r&&r.last_seq&&(n.last_seq=r.last_seq),e._compact(n,function(r,n){r?o(r):o(null,n),t.nextTick(function(){e._compactionQueue.shift(),e._compactionQueue.length&&m(e)})})})}function g(e){return"_"===e.charAt(0)?e+"is not a valid attachment name, attachment names cannot start with '_'":!1}function y(){R.EventEmitter.call(this)}function b(){this.isReady=!1,this.failed=!1,this.queue=[]}function w(e){e&&n.debug&&I.guardedConsole("error",e)}function k(e,t){function r(){i.emit("destroyed",o)}function n(){e.removeListener("destroyed",r),e.emit("destroyed",e)}var o=t.originalName,i=e.constructor,a=i._destructionListeners;e.once("destroyed",r),a.has(o)||a.set(o,[]),a.get(o).push(n)}function E(e,t,r){if(!(this instanceof E))return new E(e,t,r);var n=this;if("function"!=typeof t&&"undefined"!=typeof t||(r=t,t={}),e&&"object"==typeof e&&(t=e,e=void 0),"undefined"==typeof r)r=w;else{var o=r;r=function(){return I.guardedConsole("warn","Using a callback for new PouchDB()is deprecated."),o.apply(null,arguments)}}e=e||t.name,t=I.clone(t),delete t.name,this.__opts=t;var i=r;n.auto_compaction=t.auto_compaction,n.prefix=E.prefix,y.call(n),n.taskqueue=new b;var a=new O(function(o,i){r=function(e,t){return e?i(e):(delete t.then,void o(t))},t=I.clone(t);var a,u;return function(){try{if("string"!=typeof e)throw u=new Error("Missing/invalid DB name"),u.code=400,u;var r=(t.prefix||"")+e;if(a=E.parseAdapter(r,t),t.originalName=e,t.name=a.name,t.adapter=t.adapter||a.adapter,n._adapter=t.adapter,T("pouchdb:adapter")("Picked adapter: "+t.adapter),n._db_name=e,!E.adapters[t.adapter])throw u=new Error("Adapter is missing"),u.code=404,u;if(!E.adapters[t.adapter].valid())throw u=new Error("Invalid Adapter"),u.code=404,u}catch(o){n.taskqueue.fail(o)}}(),u?i(u):(n.adapter=t.adapter,n.replicate={},n.replicate.from=function(e,t,r){return n.constructor.replicate(e,n,t,r)},n.replicate.to=function(e,t,r){return n.constructor.replicate(n,e,t,r)},n.sync=function(e,t,r){return n.constructor.sync(n,e,t,r)},n.replicate.sync=n.sync,void E.adapters[t.adapter].call(n,t,function(e){return e?(n.taskqueue.fail(e),void r(e)):(k(n,t),n.emit("created",n),E.emit("created",t.originalName),n.taskqueue.ready(n),void r(null,n))}))});a.then(function(e){i(null,e)},i),n.then=a.then.bind(a),n["catch"]=a["catch"].bind(a)}function S(e){Object.keys(R.EventEmitter.prototype).forEach(function(t){"function"==typeof R.EventEmitter.prototype[t]&&(e[t]=D[t].bind(D))});var t=e._destructionListeners=new C.Map;e.on("destroyed",function(e){t.get(e).forEach(function(e){e()}),t["delete"](e)})}var A=r(39),T=o(r(28)),x=o(r(40)),O=o(r(41)),C=r(44),N=o(r(45)),R=r(46),I=r(47),q=r(49),j=o(r(50)),L=r(48);x(s,R.EventEmitter),s.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},s.prototype.doChanges=function(e){var t=this,r=e.complete;if(e=I.clone(e),"live"in e&&!("continuous"in e)&&(e.continuous=e.live),e.processChange=c,"latest"===e.since&&(e.since="now"),e.since||(e.since=0),"now"===e.since)return void this.db.info().then(function(n){return t.isCancelled?void r(null,{status:"cancelled"}):(e.since=n.update_seq,void t.doChanges(e))},r);if(e.continuous&&"now"!==e.since&&this.db.info().then(function(e){t.startSeq=e.update_seq},function(e){if("idbNull"!==e.id)throw e}),e.view&&!e.filter&&(e.filter="_view"),e.filter&&"string"==typeof e.filter&&("_view"===e.filter?e.view=I.normalizeDdocFunctionName(e.view):e.filter=I.normalizeDdocFunctionName(e.filter),"http"!==this.db.type()&&!e.doc_ids))return this.filterChanges(e);"descending"in e||(e.descending=!1),e.limit=0===e.limit?1:e.limit,e.complete=r;var n=this.db._changes(e);if(n&&"function"==typeof n.cancel){var o=t.cancel;t.cancel=N(function(e){n.cancel(),o.apply(this,e)})}},s.prototype.filterChanges=function(e){var t=this,r=e.complete;if("_view"===e.filter){if(!e.view||"string"!=typeof e.view){var n=L.createError(L.BAD_REQUEST,"`view` filter parameter not found or invalid.");return r(n)}var o=I.parseDdocFunctionName(e.view);this.db.get("_design/"+o[0],function(n,i){if(t.isCancelled)return r(null,{status:"cancelled"});if(n)return r(L.generateErrorFromResponse(n));var u=i&&i.views&&i.views[o[1]]&&i.views[o[1]].map;return u?(e.filter=a(u),void t.doChanges(e)):r(L.createError(L.MISSING_DOC,i.views?"missing json key: "+o[1]:"missing json key: views"))})}else{var u=I.parseDdocFunctionName(e.filter);if(!u)return t.doChanges(e);this.db.get("_design/"+u[0],function(n,o){if(t.isCancelled)return r(null,{status:"cancelled"});if(n)return r(L.generateErrorFromResponse(n));var a=o&&o.filters&&o.filters[u[1]];return a?(e.filter=i(a),void t.doChanges(e)):r(L.createError(L.MISSING_DOC,o&&o.filters?"missing json key: "+u[1]:"missing json key: filters"))})}},x(y,R.EventEmitter),y.prototype.post=I.adapterFun("post",function(e,t,r){return"function"==typeof t&&(r=t,t={}),"object"!=typeof e||Array.isArray(e)?r(L.createError(L.NOT_AN_OBJECT)):void this.bulkDocs({docs:[e]},t,d(r))}),y.prototype.put=I.adapterFun("put",N(function(e){function t(){a||(I.guardedConsole("warn","db.put(doc, id, rev) has been deprecated and will be removed in a future release, please use db.put({_id: id, _rev: rev}) instead"),a=!0)}var r,n,o,i,a=!1,u=e.shift(),s="_id"in u;if("object"!=typeof u||Array.isArray(u))return(i=e.pop())(L.createError(L.NOT_AN_OBJECT));for(;;)if(r=e.shift(),n=typeof r,"string"!==n||s?"string"!==n||!s||"_rev"in u?"object"===n?o=r:"function"===n&&(i=r):(t(),u._rev=r):(t(),u._id=r,s=!0),!e.length)break;return o=o||{},I.invalidIdError(u._id),q.isLocalId(u._id)&&"function"==typeof this._putLocal?u._deleted?this._removeLocal(u,i):this._putLocal(u,i):void this.bulkDocs({docs:[u]},o,d(i))})),y.prototype.putAttachment=I.adapterFun("putAttachment",function(e,t,r,n,o){function i(e){var r="_rev"in e?parseInt(e._rev,10):0;return e._attachments=e._attachments||{},e._attachments[t]={content_type:o,data:n,revpos:++r},a.put(e)}var a=this;return"function"==typeof o&&(o=n,n=r,r=null),"undefined"==typeof o&&(o=n,n=r,r=null),a.get(e).then(function(e){if(e._rev!==r)throw L.createError(L.REV_CONFLICT);return i(e)},function(t){if(t.reason===L.MISSING_DOC.message)return i({_id:e});throw t})}),y.prototype.removeAttachment=I.adapterFun("removeAttachment",function(e,t,r,n){var o=this;o.get(e,function(e,i){return e?void n(e):i._rev!==r?void n(L.createError(L.REV_CONFLICT)):i._attachments?(delete i._attachments[t],0===Object.keys(i._attachments).length&&delete i._attachments,void o.put(i,n)):n()})}),y.prototype.remove=I.adapterFun("remove",function(e,t,r,n){var o;"string"==typeof t?(o={_id:e,_rev:t},"function"==typeof r&&(n=r,r={})):(o=e,"function"==typeof t?(n=t,r={}):(n=r,r=t)),r=r||{},r.was_delete=!0;var i={_id:o._id,_rev:o._rev||r.rev};return i._deleted=!0,q.isLocalId(i._id)&&"function"==typeof this._removeLocal?this._removeLocal(o,n):void this.bulkDocs({docs:[i]},r,d(n))}),y.prototype.revsDiff=I.adapterFun("revsDiff",function(e,t,r){function n(e,t){u.has(e)||u.set(e,{missing:[]}),u.get(e).missing.push(t)}function o(t,r){var o=e[t].slice(0);q.traverseRevTree(r,function(e,r,i,a,u){var s=r+"-"+i,c=o.indexOf(s);-1!==c&&(o.splice(c,1),"available"!==u.status&&n(t,s))}),o.forEach(function(e){n(t,e)})}"function"==typeof t&&(r=t,t={});var i=Object.keys(e);if(!i.length)return r(null,{});
var a=0,u=new C.Map;i.map(function(t){this._getRevisionTree(t,function(n,s){if(n&&404===n.status&&"missing"===n.message)u.set(t,{missing:e[t]});else{if(n)return r(n);o(t,s)}if(++a===i.length){var c={};return u.forEach(function(e,t){c[t]=e}),r(null,c)}})},this)}),y.prototype.bulkGet=I.adapterFun("bulkGet",function(e,t){I.bulkGetShim(this,e,t)}),y.prototype.compactDocument=I.adapterFun("compactDocument",function(e,t,r){var n=this;this._getRevisionTree(e,function(o,i){if(o)return r(o);var a=_(i),u=[],s=[];Object.keys(a).forEach(function(e){a[e]>t&&u.push(e)}),q.traverseRevTree(i,function(e,t,r,n,o){var i=t+"-"+r;"available"===o.status&&-1!==u.indexOf(i)&&s.push(i)}),n._doCompaction(e,s,r)})}),y.prototype.compact=I.adapterFun("compact",function(e,t){"function"==typeof e&&(t=e,e={});var r=this;e=e||{},r._compactionQueue=r._compactionQueue||[],r._compactionQueue.push({opts:e,callback:t}),1===r._compactionQueue.length&&m(r)}),y.prototype._compact=function(e,t){function r(e){a.push(o.compactDocument(e.id,0))}function n(e){var r=e.last_seq;O.all(a).then(function(){return I.upsert(o,"_local/compaction",function(e){return!e.last_seq||e.last_seq<r?(e.last_seq=r,e):!1})}).then(function(){t(null,{ok:!0})})["catch"](t)}var o=this,i={return_docs:!1,last_seq:e.last_seq||0},a=[];o.changes(i).on("change",r).on("complete",n).on("error",t)},y.prototype.get=I.adapterFun("get",function(e,t,r){function n(){var n=[],a=o.length;return a?void o.forEach(function(o){i.get(e,{rev:o,revs:t.revs,attachments:t.attachments},function(e,t){e?n.push({missing:o}):n.push({ok:t}),a--,a||r(null,n)})}):r(null,n)}if("function"==typeof t&&(r=t,t={}),"string"!=typeof e)return r(L.createError(L.INVALID_ID));if(q.isLocalId(e)&&"function"==typeof this._getLocal)return this._getLocal(e,r);var o=[],i=this;if(!t.open_revs)return this._get(e,t,function(e,n){if(e)return r(e);var o=n.doc,a=n.metadata,u=n.ctx;if(t.conflicts){var s=q.collectConflicts(a);s.length&&(o._conflicts=s)}if(q.isDeleted(a,o._rev)&&(o._deleted=!0),t.revs||t.revs_info){var c=q.rootToLeaf(a.rev_tree),l=f(c,function(e){return-1!==e.ids.map(function(e){return e.id}).indexOf(o._rev.split("-")[1])}),d=l.ids.map(function(e){return e.id}).indexOf(o._rev.split("-")[1])+1,h=l.ids.length-d;if(l.ids.splice(d,h),l.ids.reverse(),t.revs&&(o._revisions={start:l.pos+l.ids.length-1,ids:l.ids.map(function(e){return e.id})}),t.revs_info){var p=l.pos+l.ids.length;o._revs_info=l.ids.map(function(e){return p--,{rev:p+"-"+e.id,status:e.opts.status}})}}if(t.attachments&&o._attachments){var _=o._attachments,v=Object.keys(_).length;if(0===v)return r(null,o);Object.keys(_).forEach(function(e){this._getAttachment(o._id,e,_[e],{rev:o._rev,binary:t.binary,ctx:u},function(t,n){var i=o._attachments[e];i.data=n,delete i.stub,delete i.length,--v||r(null,o)})},i)}else{if(o._attachments)for(var m in o._attachments)o._attachments.hasOwnProperty(m)&&(o._attachments[m].stub=!0);r(null,o)}});if("all"===t.open_revs)this._getRevisionTree(e,function(e,t){return e?r(e):(o=q.collectLeaves(t).map(function(e){return e.rev}),void n())});else{if(!Array.isArray(t.open_revs))return r(L.createError(L.UNKNOWN_ERROR,"function_clause"));o=t.open_revs;for(var a=0;a<o.length;a++){var u=o[a];if("string"!=typeof u||!/^\d+-/.test(u))return r(L.createError(L.INVALID_REV))}n()}}),y.prototype.getAttachment=I.adapterFun("getAttachment",function(e,t,r,n){var o=this;r instanceof Function&&(n=r,r={}),this._get(e,r,function(i,a){return i?n(i):a.doc._attachments&&a.doc._attachments[t]?(r.ctx=a.ctx,r.binary=!0,o._getAttachment(e,t,a.doc._attachments[t],r,n),void 0):n(L.createError(L.MISSING_DOC))})}),y.prototype.allDocs=I.adapterFun("allDocs",function(e,t){if("function"==typeof e&&(t=e,e={}),e.skip="undefined"!=typeof e.skip?e.skip:0,e.start_key&&(e.startkey=e.start_key),e.end_key&&(e.endkey=e.end_key),"keys"in e){if(!Array.isArray(e.keys))return t(new TypeError("options.keys must be an array"));var r=["startkey","endkey","key"].filter(function(t){return t in e})[0];if(r)return void t(L.createError(L.QUERY_PARSE_ERROR,"Query parameter `"+r+"` is not compatible with multi-get"));if("http"!==this.type())return v(this,e,t)}return this._allDocs(e,t)}),y.prototype.changes=function(e,t){return"function"==typeof e&&(t=e,e={}),new s(this,e,t)},y.prototype.close=I.adapterFun("close",function(e){return this._closed=!0,this._close(e)}),y.prototype.info=I.adapterFun("info",function(e){var t=this;this._info(function(r,n){return r?e(r):(n.db_name=n.db_name||t._db_name,n.auto_compaction=!(!t.auto_compaction||"http"===t.type()),n.adapter=t.type(),void e(null,n))})}),y.prototype.id=I.adapterFun("id",function(e){return this._id(e)}),y.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},y.prototype.bulkDocs=I.adapterFun("bulkDocs",function(e,t,r){if("function"==typeof t&&(r=t,t={}),t=t||{},Array.isArray(e)&&(e={docs:e}),!e||!e.docs||!Array.isArray(e.docs))return r(L.createError(L.MISSING_BULK_DOCS));for(var n=0;n<e.docs.length;++n)if("object"!=typeof e.docs[n]||Array.isArray(e.docs[n]))return r(L.createError(L.NOT_AN_OBJECT));var o;return e.docs.forEach(function(e){e._attachments&&Object.keys(e._attachments).forEach(function(e){o=o||g(e)})}),o?r(L.createError(L.BAD_REQUEST,o)):("new_edits"in t||("new_edits"in e?t.new_edits=e.new_edits:t.new_edits=!0),t.new_edits||"http"===this.type()||e.docs.sort(p),h(e.docs),this._bulkDocs(e,t,function(e,n){return e?r(e):(t.new_edits||(n=n.filter(function(e){return e.error})),void r(null,n))}))}),y.prototype.registerDependentDatabase=I.adapterFun("registerDependentDatabase",function(e,t){function r(t){return t.dependentDbs=t.dependentDbs||{},t.dependentDbs[e]?!1:(t.dependentDbs[e]=!0,t)}var n=new this.constructor(e,this.__opts);I.upsert(this,"_local/_pouch_dependentDbs",r).then(function(){t(null,{db:n})})["catch"](t)}),y.prototype.destroy=I.adapterFun("destroy",function(e,t){function r(){n._destroy(e,function(e,r){return e?t(e):(n._destroyed=!0,n.emit("destroyed"),void t(null,r||{ok:!0}))})}"function"==typeof e&&(t=e,e={});var n=this,o="use_prefix"in n?n.use_prefix:!0;return"http"===n.type()?r():void n.get("_local/_pouch_dependentDbs",function(e,i){if(e)return 404!==e.status?t(e):r();var a=i.dependentDbs,u=n.constructor,s=Object.keys(a).map(function(e){var t=o?e.replace(new RegExp("^"+u.prefix),""):e;return new u(t,n.__opts).destroy()});O.all(s).then(r,t)})}),b.prototype.execute=function(){var e;if(this.failed)for(;e=this.queue.shift();)e(this.failed);else for(;e=this.queue.shift();)e()},b.prototype.fail=function(e){this.failed=e,this.execute()},b.prototype.ready=function(e){this.isReady=!0,this.db=e,this.execute()},b.prototype.addTask=function(e){this.queue.push(e),this.failed&&this.execute()},x(E,y),E.debug=T,E.adapters={},E.preferredAdapters=[],E.prefix="_pouch_";var D=new R.EventEmitter;S(E),E.parseAdapter=function(e,t){var r,n,o=e.match(/([a-z\-]*):\/\/(.*)/);if(o){if(e=/http(s?)/.test(o[1])?o[1]+"://"+o[2]:o[2],r=o[1],!E.adapters[r].valid())throw"Invalid adapter";return{name:e,adapter:o[1]}}var i="idb"in E.adapters&&"websql"in E.adapters&&I.hasLocalStorage()&&localStorage["_pouch__websqldb_"+E.prefix+e];if(t.adapter)n=t.adapter;else if("undefined"!=typeof t&&t.db)n="leveldb";else for(var a=0;a<E.preferredAdapters.length;++a)if(n=E.preferredAdapters[a],n in E.adapters){if(i&&"idb"===n){I.guardedConsole("log",'PouchDB is downgrading "'+e+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');continue}break}r=E.adapters[n];var u=r&&"use_prefix"in r?r.use_prefix:!0;return{name:u?E.prefix+e:e,adapter:n}},E.adapter=function(e,t,r){t.valid()&&(E.adapters[e]=t,r&&E.preferredAdapters.push(e))},E.plugin=function(e){return"function"==typeof e?e(E):Object.keys(e).forEach(function(t){E.prototype[t]=e[t]}),E},E.defaults=function(e){function t(r,n,o){return this instanceof t?("function"!=typeof n&&"undefined"!=typeof n||(o=n,n={}),r&&"object"==typeof r&&(n=r,r=void 0),n=A.extend({},e,n),void E.call(this,r,n,o)):new t(r,n,o)}return x(t,E),t.preferredAdapters=E.preferredAdapters.slice(),Object.keys(E).forEach(function(e){e in t||(t[e]=E[e])}),t};var P="5.4.1";E.version=P,e.exports=E}).call(t,r(2),function(){return this}())},function(e,t,r){(function(e){e(t)}).call(this,function(e){var t=Array.prototype.slice,r=Array.prototype.forEach,n=function(e){if("object"!=typeof e)throw e+" is not an object";var o=t.call(arguments,1);return r.call(o,function(t){if(t)for(var r in t)"object"==typeof t[r]&&e[r]?n.call(e,e[r],t[r]):e[r]=t[r]}),e};e.extend=n})},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}var o=n(r(42)),i="function"==typeof Promise?Promise:o;e.exports=i},function(e,t,r){(function(t){"use strict";function n(){}function o(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,t.browser||(this.handled=y),e!==n&&s(this,e)}function i(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function a(e,t,r){p(function(){var n;try{n=t(r)}catch(o){return _.reject(e,o)}n===e?_.reject(e,new TypeError("Cannot resolve promise with itself")):_.resolve(e,n)})}function u(e){var t=e&&e.then;return e&&"object"==typeof e&&"function"==typeof t?function(){t.apply(e,arguments)}:void 0}function s(e,t){function r(t){i||(i=!0,_.reject(e,t))}function n(t){i||(i=!0,_.resolve(e,t))}function o(){t(n,r)}var i=!1,a=c(o);"error"===a.status&&r(a.value)}function c(e,t){var r={};try{r.value=e(t),r.status="success"}catch(n){r.status="error",r.value=n}return r}function l(e){return e instanceof this?e:_.resolve(new this(n),e)}function f(e){var t=new this(n);return _.reject(t,e)}function d(e){function t(e,t){function n(e){a[t]=e,++u!==o||i||(i=!0,_.resolve(c,a))}r.resolve(e).then(n,function(e){i||(i=!0,_.reject(c,e))})}var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var o=e.length,i=!1;if(!o)return this.resolve([]);for(var a=new Array(o),u=0,s=-1,c=new this(n);++s<o;)t(e[s],s);return c}function h(e){function t(e){r.resolve(e).then(function(e){i||(i=!0,_.resolve(u,e))},function(e){i||(i=!0,_.reject(u,e))})}var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var o=e.length,i=!1;if(!o)return this.resolve([]);for(var a=-1,u=new this(n);++a<o;)t(e[a]);return u}var p=r(43),_={},v=["REJECTED"],m=["FULFILLED"],g=["PENDING"];if(!t.browser)var y=["UNHANDLED"];e.exports=o,o.prototype["catch"]=function(e){return this.then(null,e)},o.prototype.then=function(e,r){if("function"!=typeof e&&this.state===m||"function"!=typeof r&&this.state===v)return this;var o=new this.constructor(n);if(t.browser||this.handled===y&&(this.handled=null),this.state!==g){var u=this.state===m?e:r;a(o,u,this.outcome)}else this.queue.push(new i(o,e,r));return o},i.prototype.callFulfilled=function(e){_.resolve(this.promise,e)},i.prototype.otherCallFulfilled=function(e){a(this.promise,this.onFulfilled,e)},i.prototype.callRejected=function(e){_.reject(this.promise,e)},i.prototype.otherCallRejected=function(e){a(this.promise,this.onRejected,e)},_.resolve=function(e,t){var r=c(u,t);if("error"===r.status)return _.reject(e,r.value);var n=r.value;if(n)s(e,n);else{e.state=m,e.outcome=t;for(var o=-1,i=e.queue.length;++o<i;)e.queue[o].callFulfilled(t)}return e},_.reject=function(e,r){e.state=v,e.outcome=r,t.browser||e.handled===y&&p(function(){e.handled===y&&t.emit("unhandledRejection",r,e)});for(var n=-1,o=e.queue.length;++n<o;)e.queue[n].callRejected(r);return e},o.resolve=l,o.reject=f,o.all=d,o.race=h}).call(t,r(2))},function(e,t,r){(function(t,r){"use strict";function n(){f=!0;for(var e,t,r=d.length;r;){for(t=d,d=[],e=-1;++e<r;)t[e]();r=d.length}f=!1}function o(e){1!==d.push(e)||f||i()}var i,a=t.MutationObserver||t.WebKitMutationObserver;if(r.browser)if(a){var u=0,s=new a(n),c=t.document.createTextNode("");s.observe(c,{characterData:!0}),i=function(){c.data=u=++u%2}}else if(t.setImmediate||"undefined"==typeof t.MessageChannel)i="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){n(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(n,0)};else{var l=new t.MessageChannel;l.port1.onmessage=n,i=function(){l.port2.postMessage(0)}}else i=function(){r.nextTick(n)};var f,d=[];e.exports=o}).call(t,function(){return this}(),r(2))},function(e,t){"use strict";function r(){this.store={}}function n(e){if(this.store=new r,e&&Array.isArray(e))for(var t=0,n=e.length;n>t;t++)this.add(e[t])}t.Map=r,t.Set=n,r.prototype.mangle=function(e){if("string"!=typeof e)throw new TypeError("key must be a string but Got "+e);return"$"+e},r.prototype.unmangle=function(e){return e.substring(1)},r.prototype.get=function(e){var t=this.mangle(e);return t in this.store?this.store[t]:void 0},r.prototype.set=function(e,t){var r=this.mangle(e);return this.store[r]=t,!0},r.prototype.has=function(e){var t=this.mangle(e);return t in this.store},r.prototype["delete"]=function(e){var t=this.mangle(e);return t in this.store?(delete this.store[t],!0):!1},r.prototype.forEach=function(e){for(var t=Object.keys(this.store),r=0,n=t.length;n>r;r++){var o=t[r],i=this.store[o];o=this.unmangle(o),e(i,o)}},n.prototype.add=function(e){return this.store.set(e,!0)},n.prototype.has=function(e){return this.store.has(e)},n.prototype["delete"]=function(e){return this.store["delete"](e)}},function(e,t){"use strict";function r(e){return function(){var t=arguments.length;if(t){for(var r=[],n=-1;++n<t;)r[n]=arguments[n];return e.call(this,r)}return e.call(this,[])}}e.exports=r},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function o(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,o,u,s,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[e],a(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),r.apply(this,u)}else if(i(r))for(u=Array.prototype.slice.call(arguments,1),c=r.slice(),o=c.length,s=0;o>s;s++)c[s].apply(this,u);return!0},r.prototype.addListener=function(e,t){var o;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(o=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),o||(o=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var o=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,o,a,u;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],a=r.length,o=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(u=a;u-- >0;)if(r[u]===t||r[u].listener&&r[u].listener===t){o=u;break}if(0>o)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,r){(function(e){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(e){return e instanceof ArrayBuffer||"undefined"!=typeof Blob&&e instanceof Blob}function i(e){if("function"==typeof e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength),r=new Uint8Array(t),n=new Uint8Array(e);return r.set(n),t}function a(e){if(e instanceof ArrayBuffer)return i(e);var t=e.size,r=e.type;return"function"==typeof e.slice?e.slice(0,t,r):e.webkitSlice(0,t,r)}function u(e){var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=t.constructor;return"function"==typeof r&&r instanceof r&&G.call(r)==K}function s(e){var t,r,n;if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(t=[],r=0,n=e.length;n>r;r++)t[r]=s(e[r]);return t}if(e instanceof Date)return e.toISOString();if(o(e))return a(e);if(!u(e))return e;t={};for(r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=s(e[r]);"undefined"!=typeof i&&(t[r]=i)}return t}function c(e){var t=!1;return J(function(r){if(t)throw new Error("once called more than once");t=!0,e.apply(this,r)})}function l(t){return J(function(r){r=s(r);var n,o=this,i="function"==typeof r[r.length-1]?r.pop():!1;i&&(n=function(t,r){e.nextTick(function(){i(t,r)})});var a=new U(function(e,n){var i;try{var a=c(function(t,r){t?n(t):e(r)});r.push(a),i=t.apply(o,r),i&&"function"==typeof i.then&&e(i)}catch(u){n(u)}});return n&&a.then(function(e){n(null,e)},n),a})}function f(e,t){function r(e,t,r){if($.enabled){for(var n=[e._db_name,t],o=0;o<r.length-1;o++)n.push(r[o]);$.apply(null,n);var i=r[r.length-1];r[r.length-1]=function(r,n){var o=[e._db_name,t];o=o.concat(r?["error",r]:["success",n]),$.apply(null,o),i(r,n)}}}return l(J(function(n){if(this._closed)return U.reject(new Error("database is closed"));if(this._destroyed)return U.reject(new Error("database is destroyed"));var o=this;return r(o,e,n),this.taskqueue.isReady?t.apply(this,n):new U(function(t,r){o.taskqueue.addTask(function(i){i?r(i):t(o[e].apply(o,n))})})}))}function d(e,t){for(var r={},n=0,o=t.length;o>n;n++){var i=t[n];i in e&&(r[i]=e[i])}return r}function h(e){return e}function p(e){return[{ok:e}]}function _(e,t,r){function n(){var e=[];_.forEach(function(t){t.docs.forEach(function(r){e.push({id:t.id,docs:[r]})})}),r(null,{results:e})}function o(){++f===l&&n()}function i(e,t,r){_[e]={id:t,docs:r},o()}function a(){if(!(m>=v.length)){var e=Math.min(m+Q,v.length),t=v.slice(m,e);u(t,m),m+=t.length}}function u(r,n){r.forEach(function(r,o){var u=n+o,s=c[r],l=d(s[0],["atts_since","attachments"]);l.open_revs=s.map(function(e){return e.rev}),l.open_revs=l.open_revs.filter(h);var f=h;0===l.open_revs.length&&(delete l.open_revs,f=p),["revs","attachments","binary","ajax"].forEach(function(e){e in t&&(l[e]=t[e])}),e.get(r,l,function(e,t){var n;n=e?[{error:e}]:f(t),i(u,r,n),a()})})}var s=t.docs,c={};s.forEach(function(e){e.id in c?c[e.id].push(e):c[e.id]=[e]});var l=Object.keys(c).length,f=0,_=new Array(l),v=Object.keys(c),m=0;a()}function v(){return"undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage&&"undefined"!=typeof chrome.storage.local}function m(){return F}function g(e){v()?chrome.storage.onChanged.addListener(function(t){null!=t.db_name&&e.emit(t.dbName.newValue)}):m()&&("undefined"!=typeof addEventListener?addEventListener("storage",function(t){e.emit(t.key)}):window.attachEvent("storage",function(t){e.emit(t.key)}))}function y(){W.EventEmitter.call(this),this._listeners={},g(this)}function b(e){if("undefined"!==console&&e in console){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}function w(e,t){var r=6e5;e=parseInt(e,10)||0,t=parseInt(t,10),t!==t||e>=t?t=(e||1)<<1:t+=1,t>r&&(e=r>>1,t=r);var n=Math.random(),o=t-e;return~~(o*n+e)}function k(e){var t=0;return e||(t=2e3),w(e,t)}function E(e,t){b("info","The above "+e+" is totally normal. "+t)}function S(e,t){for(var r in t)if(t.hasOwnProperty(r)){var n=s(t[r]);"undefined"!=typeof n&&(e[r]=n)}}function A(e,t,r){return S(e,t),r&&S(e,r),e}function T(e,t,r){try{return!e(t,r)}catch(n){var o="Filter function threw: "+n.toString();return z.createError(z.BAD_REQUEST,o)}}function x(e){var t={},r=e.filter&&"function"==typeof e.filter;return t.query=e.query_params,function(n){n.doc||(n.doc={});var o=r&&T(e.filter,n.doc,t);if("object"==typeof o)return o;if(o)return!1;if(e.include_docs){if(!e.attachments)for(var i in n.doc._attachments)n.doc._attachments.hasOwnProperty(i)&&(n.doc._attachments[i].stub=!0)}else delete n.doc;return!0}}function O(e){for(var t=[],r=0,n=e.length;n>r;r++)t=t.concat(e[r]);return t}function C(){}function N(e){var t;if(e?"string"!=typeof e?t=z.createError(z.INVALID_ID):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=z.createError(z.RESERVED_ID)):t=z.createError(z.MISSING_ID),t)throw t}function R(){return"undefined"!=typeof cordova||"undefined"!=typeof PhoneGap||"undefined"!=typeof phonegap}function I(e,t){return"listenerCount"in e?e.listenerCount(t):W.EventEmitter.listenerCount(e,t)}function q(e){if(!e)return null;var t=e.split("/");return 2===t.length?t:1===t.length?[e,e]:null}function j(e){var t=q(e);return t?t.join("/"):null}function L(e){for(var t=oe.exec(e),r={},n=14;n--;){var o=te[n],i=t[n]||"",a=-1!==["user","password"].indexOf(o);r[o]=a?decodeURIComponent(i):i}return r[re]={},r[te[12]].replace(ne,function(e,t,n){t&&(r[re][t]=n)}),r}function D(e,t,r){return new U(function(n,o){e.get(t,function(i,a){if(i){if(404!==i.status)return o(i);a={}}var u=a._rev,s=r(a);return s?(s._id=t,s._rev=u,void n(P(e,s,r))):n({updated:!1,rev:u})})})}function P(e,t,r){return e.put(t).then(function(e){return{updated:!0,rev:e.rev}},function(n){if(409!==n.status)throw n;return D(e,t._id,r)})}function M(e){return 0|Math.random()*e}function B(e,t){t=t||ie.length;var r="",n=-1;if(e){for(;++n<e;)r+=ie[M(t)];return r}for(;++n<36;)switch(n){case 8:case 13:case 18:case 23:r+="-";break;case 19:r+=ie[3&M(16)|8];break;default:r+=ie[M(16)]}return r}Object.defineProperty(t,"__esModule",{value:!0});var F,U=n(r(41)),J=n(r(45)),H=n(r(28)),W=r(46),V=n(r(40)),z=r(48),G=Function.prototype.toString,K=G.call(Object),$=H("pouchdb:api"),Q=6;if(v())F=!1;else try{localStorage.setItem("_pouch_check_localstorage",1),F=!!localStorage.getItem("_pouch_check_localstorage")}catch(X){F=!1}V(y,W.EventEmitter),y.prototype.addListener=function(e,t,r,n){function o(){function e(){a=!1}if(i._listeners[t]){if(a)return void(a="waiting");a=!0;var u=d(n,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary"]);r.changes(u).on("change",function(e){e.seq>n.since&&!n.cancelled&&(n.since=e.seq,n.onChange(e))}).on("complete",function(){"waiting"===a&&setTimeout(function(){o()},0),a=!1}).on("error",e)}}if(!this._listeners[t]){var i=this,a=!1;this._listeners[t]=o,this.on(e,o)}},y.prototype.removeListener=function(e,t){t in this._listeners&&W.EventEmitter.prototype.removeListener.call(this,e,this._listeners[t])},y.prototype.notifyLocalWindows=function(e){v()?chrome.storage.local.set({dbName:e}):m()&&(localStorage[e]="a"===localStorage[e]?"b":"a")},y.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)};var Y,Z=C.name;Y=Z?function(e){return e.name}:function(e){return e.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]};var ee=Y,te=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],re="queryKey",ne=/(?:^|&)([^&=]*)=?([^&]*)/g,oe=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ie="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");t.adapterFun=f,t.bulkGetShim=_,t.changesHandler=y,t.clone=s,t.defaultBackOff=k,t.explainError=E,t.extend=A,t.filterChange=x,t.flatten=O,t.functionName=ee,t.guardedConsole=b,t.hasLocalStorage=m,t.invalidIdError=N,t.isChromeApp=v,t.isCordova=R,t.listenerCount=I,t.normalizeDdocFunctionName=j,t.once=c,t.parseDdocFunctionName=q,t.parseUri=L,t.pick=d,t.toPromise=l,t.upsert=D,t.uuid=B}).call(t,r(2))},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(e){Error.call(this,e.reason),this.status=e.status,this.name=e.error,this.message=e.reason,this.error=!0}function i(e,t,r){function n(t){for(var n in e)"function"!=typeof e[n]&&(this[n]=e[n]);void 0!==r&&(this.name=r),void 0!==t&&(this.reason=t)}return n.prototype=o.prototype,new n(t)}function a(e){var t,r,n,o,a;return r=e.error===!0&&"string"==typeof e.name?e.name:e.error,a=e.reason,n=q("name",r,a),e.missing||"missing"===a||"deleted"===a||"not_found"===r?n=l:"doc_validation"===r?(n=b,o=a):"bad_request"===r&&n.message!==a&&(n=w),n||(n=q("status",e.status,a)||v),t=i(n,a,r),o&&(t.message=o),e.id&&(t.id=e.id),e.status&&(t.status=e.status),e.missing&&(t.missing=e.missing),t}Object.defineProperty(t,"__esModule",{value:!0});var u=n(r(40));u(o,Error),o.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};var s=new o({status:401,error:"unauthorized",reason:"Name or password is incorrect."}),c=new o({status:400,error:"bad_request",reason:"Missing JSON list of 'docs'"}),l=new o({status:404,error:"not_found",reason:"missing"}),f=new o({status:409,error:"conflict",reason:"Document update conflict"}),d=new o({status:400,error:"invalid_id",reason:"_id field must contain a string"}),h=new o({status:412,error:"missing_id",reason:"_id is required for puts"}),p=new o({status:400,error:"bad_request",reason:"Only reserved document ids may start with underscore."}),_=new o({status:412,error:"precondition_failed",reason:"Database not open"}),v=new o({status:500,error:"unknown_error",reason:"Database encountered an unknown error"}),m=new o({status:500,error:"badarg",reason:"Some query argument is invalid"}),g=new o({status:400,error:"invalid_request",reason:"Request was invalid"}),y=new o({status:400,error:"query_parse_error",reason:"Some query parameter is invalid"}),b=new o({status:500,error:"doc_validation",reason:"Bad special document member"}),w=new o({status:400,error:"bad_request",reason:"Something wrong with the request"}),k=new o({status:400,error:"bad_request",reason:"Document must be a JSON object"}),E=new o({status:404,error:"not_found",reason:"Database not found"}),S=new o({status:500,error:"indexed_db_went_bad",reason:"unknown"}),A=new o({status:500,error:"web_sql_went_bad",reason:"unknown"}),T=new o({status:500,error:"levelDB_went_went_bad",reason:"unknown"}),x=new o({status:403,error:"forbidden",reason:"Forbidden by design doc validate_doc_update function"}),O=new o({status:400,error:"bad_request",reason:"Invalid rev format"}),C=new o({status:412,error:"file_exists",reason:"The database could not be created, the file already exists."}),N=new o({status:412,error:"missing_stub"}),R=new o({status:413,error:"invalid_url",reason:"Provided URL is invalid"}),I=[s,c,l,f,d,h,p,_,v,m,g,y,b,w,k,E,A,T,x,O,C,N,S,R],q=function(e,t,r){var n=I.filter(function(r){return r[e]===t});return r&&n.filter(function(e){return e.message===r})[0]||n[0]};t.UNAUTHORIZED=s,t.MISSING_BULK_DOCS=c,t.MISSING_DOC=l,t.REV_CONFLICT=f,t.INVALID_ID=d,t.MISSING_ID=h,t.RESERVED_ID=p,t.NOT_OPEN=_,t.UNKNOWN_ERROR=v,t.BAD_ARG=m,t.INVALID_REQUEST=g,t.QUERY_PARSE_ERROR=y,t.DOC_VALIDATION=b,t.BAD_REQUEST=w,t.NOT_AN_OBJECT=k,t.DB_MISSING=E,t.WSQ_ERROR=A,t.LDB_ERROR=T,t.FORBIDDEN=x,t.INVALID_REV=O,t.FILE_EXISTS=C,t.MISSING_STUB=N,t.IDB_ERROR=S,t.INVALID_URL=R,t.getErrorTypeByProp=q,t.createError=i,t.generateErrorFromResponse=a},function(e,t){"use strict";function r(e){for(var t,r,n,o,i=e.rev_tree.slice();o=i.pop();){var a=o.ids,u=a[2],s=o.pos;if(u.length)for(var c=0,l=u.length;l>c;c++)i.push({pos:s+1,ids:u[c]});else{var f=!!a[1].deleted,d=a[0];t&&!(n!==f?n:r!==s?s>r:d>t)||(t=d,r=s,n=f)}}return r+"-"+t}function n(e,t){for(var r,n=e.slice();r=n.pop();)for(var o=r.pos,i=r.ids,a=i[2],u=t(0===a.length,o,i[0],r.ctx,i[1]),s=0,c=a.length;c>s;s++)n.push({pos:o+1,ids:a[s],ctx:u})}function o(e,t){return e.pos-t.pos}function i(e){var t=[];n(e,function(e,r,n,o,i){e&&t.push({rev:r+"-"+n,pos:r,opts:i})}),t.sort(o).reverse();for(var r=0,i=t.length;i>r;r++)delete t[r].pos;return t}function a(e){for(var t=r(e),n=i(e.rev_tree),o=[],a=0,u=n.length;u>a;a++){var s=n[a];s.rev===t||s.opts.deleted||o.push(s.rev)}return o}function u(e){var t=[];return n(e.rev_tree,function(e,r,n,o,i){"available"!==i.status||e||(t.push(r+"-"+n),i.status="missing")}),t}function s(e){for(var t,r=[],n=e.slice();t=n.pop();){var o=t.pos,i=t.ids,a=i[0],u=i[1],s=i[2],c=0===s.length,l=t.history?t.history.slice():[];l.push({id:a,opts:u}),c&&r.push({pos:o+1-l.length,ids:l});for(var f=0,d=s.length;d>f;f++)n.push({pos:o+1,ids:s[f],history:l})}return r.reverse()}function c(e,t){return e.pos-t.pos}function l(e,t,r){for(var n,o=0,i=e.length;i>o;)n=o+i>>>1,r(e[n],t)<0?o=n+1:i=n;return o}function f(e,t,r){var n=l(e,t,r);e.splice(n,0,t)}function d(e,t){for(var r,n,o=t,i=e.length;i>o;o++){var a=e[o],u=[a.id,a.opts,[]];n?(n[2].push(u),n=u):r=n=u}return r}function h(e,t){return e[0]<t[0]?-1:1}function p(e,t){for(var r=[{tree1:e,tree2:t}],n=!1;r.length>0;){var o=r.pop(),i=o.tree1,a=o.tree2;(i[1].status||a[1].status)&&(i[1].status="available"===i[1].status||"available"===a[1].status?"available":"missing");for(var u=0;u<a[2].length;u++)if(i[2][0]){for(var s=!1,c=0;c<i[2].length;c++)i[2][c][0]===a[2][u][0]&&(r.push({tree1:i[2][c],tree2:a[2][u]}),s=!0);s||(n="new_branch",f(i[2],a[2][u],h))}else n="new_leaf",i[2][0]=a[2][u]}return{conflicts:n,tree:e}}function _(e,t,r){var n,o=[],i=!1,a=!1;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var u=0,s=e.length;s>u;u++){var l=e[u];if(l.pos===t.pos&&l.ids[0]===t.ids[0])n=p(l.ids,t.ids),o.push({pos:l.pos,ids:n.tree}),i=i||n.conflicts,a=!0;else if(r!==!0){var f=l.pos<t.pos?l:t,d=l.pos<t.pos?t:l,h=d.pos-f.pos,_=[],v=[];for(v.push({ids:f.ids,diff:h,parent:null,parentIdx:null});v.length>0;){var m=v.pop();if(0!==m.diff)for(var g=m.ids[2],y=0,b=g.length;b>y;y++)v.push({ids:g[y],diff:m.diff-1,parent:m.ids,parentIdx:y});else m.ids[0]===d.ids[0]&&_.push(m)}var w=_[0];w?(n=p(w.ids,d.ids),w.parent[2][w.parentIdx]=n.tree,
o.push({pos:f.pos,ids:f.ids}),i=i||n.conflicts,a=!0):o.push(l)}else o.push(l)}return a||o.push(t),o.sort(c),{tree:o,conflicts:i||"internal_node"}}function v(e,t){for(var r,o=s(e),i={},a=0,u=o.length;u>a;a++){for(var c=o[a],l=c.ids,f=Math.max(0,l.length-t),h={pos:c.pos+f,ids:d(l,f)},p=0;f>p;p++){var v=c.pos+p+"-"+l[p].id;i[v]=!0}r=r?_(r,h,!0).tree:[h]}return n(r,function(e,t,r){delete i[t+"-"+r]}),{tree:r,revs:Object.keys(i)}}function m(e,t,r){var n=_(e,t),o=v(n.tree,r);return{tree:o.tree,stemmedRevs:o.revs,conflicts:n.conflicts}}function g(e,t){for(var r,n=e.slice(),o=t.split("-"),i=parseInt(o[0],10),a=o[1];r=n.pop();){if(r.pos===i&&r.ids[0]===a)return!0;for(var u=r.ids[2],s=0,c=u.length;c>s;s++)n.push({pos:r.pos+1,ids:u[s]})}return!1}function y(e){return e.ids}function b(e,t){t||(t=r(e));for(var n,o=t.substring(t.indexOf("-")+1),i=e.rev_tree.map(y);n=i.pop();){if(n[0]===o)return!!n[1].deleted;i=i.concat(n[2])}}function w(e){return/^_local/.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.collectConflicts=a,t.collectLeaves=i,t.compactTree=u,t.isDeleted=b,t.isLocalId=w,t.merge=m,t.revExists=g,t.rootToLeaf=s,t.traverseRevTree=n,t.winningRev=r},function(e,t){(function(){var t={}.hasOwnProperty,r=[].slice;e.exports=function(e,n){var o,i,a,u;i=[],u=[];for(o in n)t.call(n,o)&&(a=n[o],"this"!==o&&(i.push(o),u.push(a)));return Function.apply(null,r.call(i).concat([e])).apply(n["this"],u)}}).call(this)},function(e,t,r){(function(t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(e,t,r,n){try{e.apply(t,r)}catch(o){n.emit("error",o)}}function i(e){if(!J.running&&J.queue.length){J.running=!0;var r=J.queue.shift();r.action(function(n,a){o(r.callback,this,[n,a],e),J.running=!1,t.nextTick(function(){i(e)})})}}function a(e){return function(t){var r="unknown_error";t.target&&t.target.error&&(r=t.target.error.name||t.target.error.message),e(O.createError(O.IDB_ERROR,r,t.type))}}function u(e,t,r){return{data:I.safeJsonStringify(e),winningRev:t,deletedOrLocal:r?"1":"0",seq:e.seq,id:e.id}}function s(e){if(!e)return null;var t=I.safeJsonParse(e.data);return t.winningRev=e.winningRev,t.deleted="1"===e.deletedOrLocal,t.seq=e.seq,t}function c(e){if(!e)return e;var t=e._doc_id_rev.lastIndexOf(":");return e._id=e._doc_id_rev.substring(0,t-1),e._rev=e._doc_id_rev.substring(t+1),delete e._doc_id_rev,e}function l(e,t,r,n){r?n(e?"string"!=typeof e?e:q.base64StringToBlobOrBuffer(e,t):q.blob([""],{type:t})):e?"string"!=typeof e?q.readAsBinaryString(e,function(e){n(q.btoa(e))}):n(e):n("")}function f(e,t,r,n){function o(){++u===a.length&&n&&n()}function i(e,t){var n=e._attachments[t],i=n.digest,a=r.objectStore(P).get(i);a.onsuccess=function(e){n.body=e.target.result.body,o()}}var a=Object.keys(e._attachments||{});if(!a.length)return n&&n();var u=0;a.forEach(function(r){t.attachments&&t.include_docs?i(e,r):(e._attachments[r].stub=!0,o())})}function d(e,t){return R.all(e.map(function(e){if(e.doc&&e.doc._attachments){var r=Object.keys(e.doc._attachments);return R.all(r.map(function(r){var n=e.doc._attachments[r];if("body"in n){var o=n.body,i=n.content_type;return new R(function(a){l(o,i,t,function(t){e.doc._attachments[r]=N.extend(A.pick(n,["digest","content_type"]),{data:t}),a()})})}}))}}))}function h(e,t,r){function n(){c--,c||o()}function o(){i.length&&i.forEach(function(e){var t=s.index("digestSeq").count(IDBKeyRange.bound(e+"::",e+"::￿",!1,!1));t.onsuccess=function(t){var r=t.target.result;r||u["delete"](e)}})}var i=[],a=r.objectStore(D),u=r.objectStore(P),s=r.objectStore(M),c=e.length;e.forEach(function(e){var r=a.index("_doc_id_rev"),o=t+"::"+e;r.getKey(o).onsuccess=function(e){var t=e.target.result;if("number"!=typeof t)return n();a["delete"](t);var r=s.index("seq").openCursor(IDBKeyRange.only(t));r.onsuccess=function(e){var t=e.target.result;if(t){var r=t.value.digestSeq.split("::")[0];i.push(r),s["delete"](t.primaryKey),t["continue"]()}else n()}}})}function p(e,t,r){try{return{txn:e.transaction(t,r)}}catch(n){return{error:n}}}function _(e,t,r,n,o,i,c){function l(){var e=[L,D,P,F,M],t=p(o,e,"readwrite");return t.error?c(t.error):(E=t.txn,E.onabort=a(c),E.ontimeout=a(c),E.oncomplete=_,S=E.objectStore(L),A=E.objectStore(D),N=E.objectStore(P),R=E.objectStore(M),void m(function(e){return e?(V=!0,c(e)):void d()}))}function f(){C.processDocs(e.revs_limit,q,n,W,E,H,g,r)}function d(){function e(){++r===q.length&&f()}function t(t){var r=s(t.target.result);r&&W.set(r.id,r),e()}if(q.length)for(var r=0,n=0,o=q.length;o>n;n++){var i=q[n];if(i._id&&C.isLocalId(i._id))e();else{var a=S.get(i.metadata.id);a.onsuccess=t}}}function _(){V||(i.notify(n._meta.name),n._meta.docCount+=j,c(null,H))}function v(e,t){var r=N.get(e);r.onsuccess=function(r){if(r.target.result)t();else{var n=O.createError(O.MISSING_STUB,"unknown stub attachment with digest "+e);n.status=412,t(n)}}}function m(e){function t(){++o===r.length&&e(n)}var r=[];if(q.forEach(function(e){e.data&&e.data._attachments&&Object.keys(e.data._attachments).forEach(function(t){var n=e.data._attachments[t];n.stub&&r.push(n.digest)})}),!r.length)return e();var n,o=0;r.forEach(function(e){v(e,function(e){e&&!n&&(n=e),t()})})}function g(e,t,r,n,o,i,a,u){j+=i,e.metadata.winningRev=t,e.metadata.deleted=r;var s=e.data;s._id=e.metadata.id,s._rev=e.metadata.rev,n&&(s._deleted=!0);var c=s._attachments&&Object.keys(s._attachments).length;return c?b(e,t,r,o,a,u):void y(e,t,r,o,a,u)}function y(e,t,r,o,i,a){function s(i){var a=e.stemmedRevs||[];o&&n.auto_compaction&&(a=a.concat(T.compactTree(e.metadata))),a&&a.length&&h(a,e.metadata.id,E),d.seq=i.target.result,delete d.rev;var s=u(d,t,r),c=S.put(s);c.onsuccess=l}function c(e){e.preventDefault(),e.stopPropagation();var t=A.index("_doc_id_rev"),r=t.getKey(f._doc_id_rev);r.onsuccess=function(e){var t=A.put(f,e.target.result);t.onsuccess=s}}function l(){H[i]={ok:!0,id:d.id,rev:t},W.set(e.metadata.id,e.metadata),w(e,d.seq,a)}var f=e.data,d=e.metadata;f._doc_id_rev=d.id+"::"+d.rev,delete f._id,delete f._rev;var p=A.put(f);p.onsuccess=s,p.onerror=c}function b(e,t,r,n,o,i){function a(){c===l.length&&y(e,t,r,n,o,i)}function u(){c++,a()}var s=e.data,c=0,l=Object.keys(s._attachments);l.forEach(function(r){var n=e.data._attachments[r];if(n.stub)c++,a();else{var o=n.data;delete n.data,n.revpos=parseInt(t,10);var i=n.digest;k(i,o,u)}})}function w(e,t,r){function n(){++i===a.length&&r()}function o(r){var o=e.data._attachments[r].digest,i=R.put({seq:t,digestSeq:o+"::"+t});i.onsuccess=n,i.onerror=function(e){e.preventDefault(),e.stopPropagation(),n()}}var i=0,a=Object.keys(e.data._attachments||{});if(!a.length)return r();for(var u=0;u<a.length;u++)o(a[u])}function k(e,t,r){var n=N.count(e);n.onsuccess=function(n){var o=n.target.result;if(o)return r();var i={digest:e,body:t},a=N.put(i);a.onsuccess=r}}for(var E,S,A,N,R,I,q=t.docs,j=0,B=0,U=q.length;U>B;B++){var J=q[B];J._id&&C.isLocalId(J._id)||(J=q[B]=C.parseDoc(J,r.new_edits),J.error&&!I&&(I=J))}if(I)return c(I);var H=new Array(q.length),W=new x.Map,V=!1,z=n._meta.blobSupport?"blob":"base64";C.preprocessAttachments(q,z,function(e){return e?c(e):void l()})}function v(e,t,r,n,o){try{if(e&&t)return o?IDBKeyRange.bound(t,e,!r,!1):IDBKeyRange.bound(e,t,!1,!r);if(e)return o?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(t)return o?IDBKeyRange.lowerBound(t,!r):IDBKeyRange.upperBound(t,!r);if(n)return IDBKeyRange.only(n)}catch(i){return{error:i}}return null}function m(e,t,r,n){return"DataError"===r.name&&0===r.code?n(null,{total_rows:e._meta.docCount,offset:t.skip,rows:[]}):void n(O.createError(O.IDB_ERROR,r.name,r.message))}function g(e,t,r,n){function o(e,n){function o(t,r,n){var o=t.id+"::"+n;R.get(o).onsuccess=function(n){r.doc=c(n.target.result),e.conflicts&&(r.doc._conflicts=T.collectConflicts(t)),f(r.doc,e,x)}}function i(t,r,n){var i={id:n.id,key:n.id,value:{rev:r}},a=n.deleted;if("ok"===e.deleted)I.push(i),a?(i.value.deleted=!0,i.doc=null):e.include_docs&&o(n,i,r);else if(!a&&y--<=0&&(I.push(i),e.include_docs&&o(n,i,r),0===--b))return;t["continue"]()}function a(e){q=t._meta.docCount;var r=e.target.result;if(r){var n=s(r.value),o=n.winningRev;i(r,o,n)}}function u(){n(null,{total_rows:q,offset:e.skip,rows:I})}function l(){e.attachments?d(I,e.binary).then(u):u()}var h="startkey"in e?e.startkey:!1,_="endkey"in e?e.endkey:!1,g="key"in e?e.key:!1,y=e.skip||0,b="number"==typeof e.limit?e.limit:-1,w=e.inclusive_end!==!1,k="descending"in e&&e.descending?"prev":null,E=v(h,_,w,g,k);if(E&&E.error)return m(t,e,E.error,n);var S=[L,D];e.attachments&&S.push(P);var A=p(r,S,"readonly");if(A.error)return n(A.error);var x=A.txn,O=x.objectStore(L),C=x.objectStore(D),N=k?O.openCursor(E,k):O.openCursor(E),R=C.index("_doc_id_rev"),I=[],q=0;x.oncomplete=l,N.onsuccess=a}function i(e,r){return 0===e.limit?r(null,{total_rows:t._meta.docCount,offset:e.skip,rows:[]}):void o(e,r)}i(e,n)}function y(e){return new R(function(t){var r=q.blob([""]);e.objectStore(U).put(r,"key"),e.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},e.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);t(r||!e||parseInt(e[1],10)>=43)}})["catch"](function(){return!1})}function b(e,t){var r=this;J.queue.push({action:function(t){w(r,e,t)},callback:t}),i(r.constructor)}function w(e,r,n){function o(e){var t=e.createObjectStore(L,{keyPath:"id"});e.createObjectStore(D,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),e.createObjectStore(P,{keyPath:"digest"}),e.createObjectStore(B,{keyPath:"id",autoIncrement:!1}),e.createObjectStore(U),t.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),e.createObjectStore(F,{keyPath:"_id"});var r=e.createObjectStore(M,{autoIncrement:!0});r.createIndex("seq","seq"),r.createIndex("digestSeq","digestSeq",{unique:!0})}function i(e,t){var r=e.objectStore(L);r.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),r.openCursor().onsuccess=function(e){var n=e.target.result;if(n){var o=n.value,i=T.isDeleted(o);o.deletedOrLocal=i?"1":"0",r.put(o),n["continue"]()}else t()}}function v(e){e.createObjectStore(F,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}function m(e,t){var r=e.objectStore(F),n=e.objectStore(L),o=e.objectStore(D),i=n.openCursor();i.onsuccess=function(e){var i=e.target.result;if(i){var a=i.value,u=a.id,s=T.isLocalId(u),c=T.winningRev(a);if(s){var l=u+"::"+c,f=u+"::",d=u+"::~",h=o.index("_doc_id_rev"),p=IDBKeyRange.bound(f,d,!1,!1),_=h.openCursor(p);_.onsuccess=function(e){if(_=e.target.result){var t=_.value;t._doc_id_rev===l&&r.put(t),o["delete"](_.primaryKey),_["continue"]()}else n["delete"](i.primaryKey),i["continue"]()}}else i["continue"]()}else t&&t()}}function b(e){var t=e.createObjectStore(M,{autoIncrement:!0});t.createIndex("seq","seq"),t.createIndex("digestSeq","digestSeq",{unique:!0})}function w(e,t){var r=e.objectStore(D),n=e.objectStore(P),o=e.objectStore(M),i=n.count();i.onsuccess=function(e){var n=e.target.result;return n?void(r.openCursor().onsuccess=function(e){var r=e.target.result;if(!r)return t();for(var n=r.value,i=r.primaryKey,a=Object.keys(n._attachments||{}),u={},s=0;s<a.length;s++){var c=n._attachments[a[s]];u[c.digest]=!0}var l=Object.keys(u);for(s=0;s<l.length;s++){var f=l[s];o.put({seq:i,digestSeq:f+"::"+i})}r["continue"]()}):t()}}function E(e){function t(e){return e.data?s(e):(e.deleted="1"===e.deletedOrLocal,e)}var r=e.objectStore(D),n=e.objectStore(L),o=n.openCursor();o.onsuccess=function(e){function o(){var e=s.id+"::",t=s.id+"::￿",n=r.index("_doc_id_rev").openCursor(IDBKeyRange.bound(e,t)),o=0;n.onsuccess=function(e){var t=e.target.result;if(!t)return s.seq=o,i();var r=t.primaryKey;r>o&&(o=r),t["continue"]()}}function i(){var e=u(s,s.winningRev,s.deleted),t=n.put(e);t.onsuccess=function(){a["continue"]()}}var a=e.target.result;if(a){var s=t(a.value);return s.winningRev=s.winningRev||T.winningRev(s),s.seq?i():void o()}}}var C=r.name,N=null;e._meta=null,e.type=function(){return"idb"},e._id=A.toPromise(function(t){t(null,e._meta.instanceId)}),e._bulkDocs=function(t,n,o){_(r,t,n,e,N,W,o)},e._get=function(e,t,r){function n(){r(a,{doc:o,metadata:i,ctx:u})}var o,i,a,u=t.ctx;if(!u){var l=p(N,[L,D,P],"readonly");if(l.error)return r(l.error);u=l.txn}u.objectStore(L).get(e).onsuccess=function(e){if(i=s(e.target.result),!i)return a=O.createError(O.MISSING_DOC,"missing"),n();if(T.isDeleted(i)&&!t.rev)return a=O.createError(O.MISSING_DOC,"deleted"),n();var r=u.objectStore(D),l=t.rev||i.winningRev,f=i.id+"::"+l;r.index("_doc_id_rev").get(f).onsuccess=function(e){return o=e.target.result,o&&(o=c(o)),o?void n():(a=O.createError(O.MISSING_DOC,"missing"),n())}}},e._getAttachment=function(e,t,r,n,o){var i;if(n.ctx)i=n.ctx;else{var a=p(N,[L,D,P],"readonly");if(a.error)return o(a.error);i=a.txn}var u=r.digest,s=r.content_type;i.objectStore(P).get(u).onsuccess=function(e){var t=e.target.result.body;l(t,s,n.binary,function(e){o(null,e)})}},e._info=function(t){if(null===N||!H.has(C)){var r=new Error("db isn't open");return r.id="idbNull",t(r)}var n,o,i=p(N,[D],"readonly");if(i.error)return t(i.error);var a=i.txn,u=a.objectStore(D).openCursor(null,"prev");u.onsuccess=function(t){var r=t.target.result;n=r?r.key:0,o=e._meta.docCount},a.oncomplete=function(){t(null,{doc_count:o,update_seq:n,idb_attachment_format:e._meta.blobSupport?"binary":"base64"})}},e._allDocs=function(t,r){g(t,e,N,r)},e._changes=function(t){function r(e){function r(){return u.seq!==a?e["continue"]():(h=a,u.winningRev===i._rev?o(i):void n())}function n(){var e=i._id+"::"+u.winningRev,t=b.get(e);t.onsuccess=function(e){o(c(e.target.result))}}function o(r){var n=t.processChange(r,u,t);n.seq=u.seq;var o=E(n);return"object"==typeof o?t.complete(o):(o&&(k++,v&&w.push(n),t.attachments&&t.include_docs?f(r,t,m,function(){d([n],t.binary).then(function(){t.onChange(n)})}):t.onChange(n)),void(k!==_&&e["continue"]()))}var i=c(e.value),a=e.key;if(l&&!l.has(i._id))return e["continue"]();var u;return(u=S.get(i._id))?r():void(y.get(i._id).onsuccess=function(e){u=s(e.target.result),S.set(i._id,u),r()})}function n(e){var t=e.target.result;t&&r(t)}function o(){var e=[L,D];t.attachments&&e.push(P);var r=p(N,e,"readonly");if(r.error)return t.complete(r.error);m=r.txn,m.onabort=a(t.complete),m.oncomplete=i,g=m.objectStore(D),y=m.objectStore(L),b=g.index("_doc_id_rev");var o;o=t.descending?g.openCursor(null,"prev"):g.openCursor(IDBKeyRange.lowerBound(t.since,!0)),o.onsuccess=n}function i(){function e(){t.complete(null,{results:w,last_seq:h})}!t.continuous&&t.attachments?d(w).then(e):e()}if(t=A.clone(t),t.continuous){var u=C+":"+A.uuid();return W.addListener(C,u,e,t),W.notify(C),{cancel:function(){W.removeListener(C,u)}}}var l=t.doc_ids&&new x.Set(t.doc_ids);t.since=t.since||0;var h=t.since,_="limit"in t?t.limit:-1;0===_&&(_=1);var v;v="return_docs"in t?t.return_docs:"returnDocs"in t?t.returnDocs:!0;var m,g,y,b,w=[],k=0,E=A.filterChange(t),S=new x.Map;o()},e._close=function(e){return null===N?e(O.createError(O.NOT_OPEN)):(N.close(),H["delete"](C),N=null,void e())},e._getRevisionTree=function(e,t){var r=p(N,[L],"readonly");if(r.error)return t(r.error);var n=r.txn,o=n.objectStore(L).get(e);o.onsuccess=function(e){var r=s(e.target.result);r?t(null,r.rev_tree):t(O.createError(O.MISSING_DOC))}},e._doCompaction=function(e,t,r){var n=[L,D,P,M],o=p(N,n,"readwrite");if(o.error)return r(o.error);var i=o.txn,c=i.objectStore(L);c.get(e).onsuccess=function(r){var n=s(r.target.result);T.traverseRevTree(n.rev_tree,function(e,r,n,o,i){var a=r+"-"+n;-1!==t.indexOf(a)&&(i.status="missing")}),h(t,e,i);var o=n.winningRev,a=n.deleted;i.objectStore(L).put(u(n,o,a))},i.onabort=a(r),i.oncomplete=function(){r()}},e._getLocal=function(e,t){var r=p(N,[F],"readonly");if(r.error)return t(r.error);var n=r.txn,o=n.objectStore(F).get(e);o.onerror=a(t),o.onsuccess=function(e){var r=e.target.result;r?(delete r._doc_id_rev,t(null,r)):t(O.createError(O.MISSING_DOC))}},e._putLocal=function(e,t,r){"function"==typeof t&&(r=t,t={}),delete e._revisions;var n=e._rev,o=e._id;n?e._rev="0-"+(parseInt(n.split("-")[1],10)+1):e._rev="0-1";var i,u=t.ctx;if(!u){var s=p(N,[F],"readwrite");if(s.error)return r(s.error);u=s.txn,u.onerror=a(r),u.oncomplete=function(){i&&r(null,i)}}var c,l=u.objectStore(F);n?(c=l.get(o),c.onsuccess=function(o){var a=o.target.result;if(a&&a._rev===n){var u=l.put(e);u.onsuccess=function(){i={ok:!0,id:e._id,rev:e._rev},t.ctx&&r(null,i)}}else r(O.createError(O.REV_CONFLICT))}):(c=l.add(e),c.onerror=function(e){r(O.createError(O.REV_CONFLICT)),e.preventDefault(),e.stopPropagation()},c.onsuccess=function(){i={ok:!0,id:e._id,rev:e._rev},t.ctx&&r(null,i)})},e._removeLocal=function(e,t,r){"function"==typeof t&&(r=t,t={});var n=t.ctx;if(!n){var o=p(N,[F],"readwrite");if(o.error)return r(o.error);n=o.txn,n.oncomplete=function(){i&&r(null,i)}}var i,u=e._id,s=n.objectStore(F),c=s.get(u);c.onerror=a(r),c.onsuccess=function(n){var o=n.target.result;o&&o._rev===e._rev?(s["delete"](u),i={ok:!0,id:u,rev:"0-0"},t.ctx&&r(null,i)):r(O.createError(O.MISSING_DOC))}},e._destroy=function(e,t){W.removeAllListeners(C);var r=V.get(C);r&&r.result&&(r.result.close(),H["delete"](C));var n=indexedDB.deleteDatabase(C);n.onsuccess=function(){V["delete"](C),A.hasLocalStorage()&&C in localStorage&&delete localStorage[C],t(null,{ok:!0})},n.onerror=a(t)};var R=H.get(C);if(R)return N=R.idb,e._meta=R.global,void t.nextTick(function(){n(null,e)});var I;I=r.storage?k(C,r.storage):indexedDB.open(C,j),V.set(C,I),I.onupgradeneeded=function(e){function t(){var e=a[u-1];u++,e&&e(n,t)}var r=e.target.result;if(e.oldVersion<1)return o(r);var n=e.currentTarget.transaction;e.oldVersion<3&&v(r),e.oldVersion<4&&b(r);var a=[i,m,w,E],u=e.oldVersion;t()},I.onsuccess=function(t){N=t.target.result,N.onversionchange=function(){N.close(),H["delete"](C)},N.onabort=function(e){A.guardedConsole("error","Database has a global failure",e.target.error),N.close(),H["delete"](C)};var r=N.transaction([B,U,L],"readwrite"),o=r.objectStore(B).get(B),i=null,a=null,u=null;o.onsuccess=function(t){var o=function(){null!==i&&null!==a&&null!==u&&(e._meta={name:C,instanceId:u,blobSupport:i,docCount:a},H.set(C,{idb:N,global:e._meta}),n(null,e))},s=t.target.result||{id:B};C+"_id"in s?(u=s[C+"_id"],o()):(u=A.uuid(),s[C+"_id"]=u,r.objectStore(B).put(s).onsuccess=function(){o()}),S||(S=y(r)),S.then(function(e){i=e,o()});var c=r.objectStore(L).index("deletedOrLocal");c.count(IDBKeyRange.only("0")).onsuccess=function(e){a=e.target.result,o()}}},I.onerror=function(){var e="Failed to open indexedDB, are you in private browsing mode?";A.guardedConsole("error",e),n(O.createError(O.IDB_ERROR,e))}}function k(e,t){try{return indexedDB.open(e,{version:j,storage:t})}catch(r){return indexedDB.open(e,j)}}function E(e){e.adapter("idb",b,!0)}var S,A=r(47),T=r(49),x=r(44),O=r(48),C=r(52),N=r(39),R=n(r(41)),I=r(56),q=r(53),j=5,L="document-store",D="by-sequence",P="attach-store",M="attach-seq-store",B="meta-store",F="local-store",U="detect-blob-support",J={running:!1,queue:[]},H=new x.Map,W=new A.changesHandler,V=new x.Map;b.valid=function(){var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform);return!e&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange},e.exports=E}).call(t,r(2))},function(e,t,r){"use strict";function n(e){return e.reduce(function(e,t){return e[t]=!0,e},{})}function o(e){if(!/^\d+\-./.test(e))return d.createError(d.INVALID_REV);var t=e.indexOf("-"),r=e.substring(0,t),n=e.substring(t+1);return{prefix:parseInt(r,10),id:n}}function i(e,t){for(var r=e.start-e.ids.length+1,n=e.ids,o=[n[0],t,[]],i=1,a=n.length;a>i;i++)o=[n[i],{status:"missing"},[o]];return[{pos:r,ids:o}]}function a(e,t){var r,n,a,u={status:"available"};if(e._deleted&&(u.deleted=!0),t)if(e._id||(e._id=f.uuid()),n=f.uuid(32,16).toLowerCase(),e._rev){if(a=o(e._rev),a.error)return a;e._rev_tree=[{pos:a.prefix,ids:[a.id,{status:"missing"},[[n,u,[]]]]}],r=a.prefix+1}else e._rev_tree=[{pos:1,ids:[n,u,[]]}],r=1;else if(e._revisions&&(e._rev_tree=i(e._revisions,u),r=e._revisions.start,n=e._revisions.ids[0]),!e._rev_tree){if(a=o(e._rev),a.error)return a;r=a.prefix,n=a.id,e._rev_tree=[{pos:r,ids:[n,u,[]]}]}f.invalidIdError(e._id),e._rev=r+"-"+n;var s={metadata:{},data:{}};for(var c in e)if(Object.prototype.hasOwnProperty.call(e,c)){var l="_"===c[0];if(l&&!m[c]){var h=d.createError(d.DOC_VALIDATION,c);throw h.message=d.DOC_VALIDATION.message+": "+c,h}l&&!g[c]?s.metadata[c.slice(1)]=e[c]:s.data[c]=e[c]}return s}function u(e,t,r){function n(e){try{return p.atob(e)}catch(t){var r=d.createError(d.BAD_ARG,"Attachment is not a valid base64 string");return{error:r}}}function o(e,r){if(e.stub)return r();if("string"==typeof e.data){var o=n(e.data);if(o.error)return r(o.error);e.length=o.length,"blob"===t?e.data=p.binaryStringToBlobOrBuffer(o,e.content_type):"base64"===t?e.data=p.btoa(o):e.data=o,_.binaryMd5(o,function(t){e.digest="md5-"+t,r()})}else p.readAsArrayBuffer(e.data,function(n){"binary"===t?e.data=p.arrayBufferToBinaryString(n):"base64"===t&&(e.data=p.arrayBufferToBase64(n)),_.binaryMd5(n,function(t){e.digest="md5-"+t,e.length=n.byteLength,r()})})}function i(){u++,e.length===u&&(a?r(a):r())}if(!e.length)return r();var a,u=0;e.forEach(function(e){function t(e){a=e,n++,n===r.length&&i()}var r=e.data&&e.data._attachments?Object.keys(e.data._attachments):[],n=0;if(!r.length)return i();for(var u in e.data._attachments)e.data._attachments.hasOwnProperty(u)&&o(e.data._attachments[u],t)})}function s(e,t,r,n,o,i,u,s){if(h.revExists(t.rev_tree,r.metadata.rev))return n[o]=r,i();var c=t.winningRev||h.winningRev(t),l="deleted"in t?t.deleted:h.isDeleted(t,c),f="deleted"in r.metadata?r.metadata.deleted:h.isDeleted(r.metadata),p=/^1-/.test(r.metadata.rev);if(l&&!f&&s&&p){var _=r.data;_._rev=c,_._id=r.metadata.id,r=a(_,s)}var v=h.merge(t.rev_tree,r.metadata.rev_tree[0],e),m=s&&(l&&f||!l&&"new_leaf"!==v.conflicts||l&&!f&&"new_branch"===v.conflicts);if(m){var g=d.createError(d.REV_CONFLICT);return n[o]=g,i()}var y=r.metadata.rev;r.metadata.rev_tree=v.tree,r.stemmedRevs=v.stemmedRevs||[],t.rev_map&&(r.metadata.rev_map=t.rev_map);var b,w=h.winningRev(r.metadata),k=h.isDeleted(r.metadata,w),E=l===k?0:k>l?-1:1;b=y===w?k:h.isDeleted(r.metadata,y),u(r,w,k,b,!0,E,o,i)}function c(e){return"missing"===e.metadata.rev_tree[0].ids[1].status}function l(e,t,r,n,o,i,a,u,l){function f(e,t,r){var n=h.winningRev(e.metadata),o=h.isDeleted(e.metadata,n);if("was_delete"in u&&o)return i[t]=d.createError(d.MISSING_DOC,"deleted"),r();var s=_&&c(e);if(s){var l=d.createError(d.REV_CONFLICT);return i[t]=l,r()}var f=o?0:1;a(e,n,o,o,!1,f,t,r)}function p(){++g===y&&l&&l()}e=e||1e3;var _=u.new_edits,m=new v.Map,g=0,y=t.length;t.forEach(function(e,t){if(e._id&&h.isLocalId(e._id)){var n=e._deleted?"_removeLocal":"_putLocal";return void r[n](e,{ctx:o},function(e,r){i[t]=e||r,p()})}var a=e.metadata.id;m.has(a)?(y--,m.get(a).push([e,t])):m.set(a,[[e,t]])}),m.forEach(function(t,r){function o(){++c<t.length?u():p()}function u(){var u=t[c],l=u[0],d=u[1];if(n.has(r))s(e,n.get(r),l,i,d,o,a,_);else{var p=h.merge([],l.metadata.rev_tree[0],e);l.metadata.rev_tree=p.tree,l.stemmedRevs=p.stemmedRevs||[],f(l,d,o)}}var c=0;u()})}Object.defineProperty(t,"__esModule",{value:!0});var f=r(47),d=r(48),h=r(49),p=r(53),_=r(54),v=r(44),m=n(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),g=n(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);t.invalidIdError=f.invalidIdError,t.isDeleted=h.isDeleted,t.isLocalId=h.isLocalId,t.normalizeDdocFunctionName=f.normalizeDdocFunctionName,t.parseDdocFunctionName=f.parseDdocFunctionName,t.parseDoc=a,t.preprocessAttachments=u,t.processDocs=l,t.updateDoc=s},function(e,t){"use strict";function r(e){for(var t="",r=new Uint8Array(e),n=r.byteLength,o=0;n>o;o++)t+=String.fromCharCode(r[o]);return t}function n(e){return h(r(e))}function o(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(r){if("TypeError"!==r.name)throw r;for(var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,o=new n,i=0;i<e.length;i+=1)o.append(e[i]);return o.getBlob(t.type)}}function i(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),o=0;t>o;o++)n[o]=e.charCodeAt(o);return r}function a(e,t){return o([i(e)],{type:t})}function u(e,t){return a(d(e),t)}function s(e,t){if("undefined"==typeof FileReader)return t(r((new FileReaderSync).readAsArrayBuffer(e)));var n=new FileReader,o="function"==typeof n.readAsBinaryString;n.onloadend=function(e){var n=e.target.result||"";return o?t(n):void t(r(n))},o?n.readAsBinaryString(e):n.readAsArrayBuffer(e)}function c(e,t){s(e,function(e){t(h(e))})}function l(e,t){if("undefined"==typeof FileReader)return t((new FileReaderSync).readAsArrayBuffer(e));var r=new FileReader;r.onloadend=function(e){var r=e.target.result||new ArrayBuffer(0);t(r)},r.readAsArrayBuffer(e)}function f(){}Object.defineProperty(t,"__esModule",{value:!0});var d=function(e){return atob(e)},h=function(e){return btoa(e)};t.arrayBufferToBase64=n,t.arrayBufferToBinaryString=r,t.atob=d,t.btoa=h,t.base64StringToBlobOrBuffer=u,t.binaryStringToArrayBuffer=i,t.binaryStringToBlobOrBuffer=a,t.blob=o,t.blobOrBufferToBase64=c,t.readAsArrayBuffer=l,t.readAsBinaryString=s,t.typedBuffer=f},function(e,t,r){(function(e){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(e){return c.btoa(e)}function i(e,t,r,n){(r>0||n<t.byteLength)&&(t=new Uint8Array(t,r,Math.min(n,t.byteLength)-r)),e.append(t)}function a(e,t,r,n){(r>0||n<t.length)&&(t=t.substring(r,n)),e.appendBinary(t)}function u(e,t){function r(){var n=h*s,i=n+s;if(h++,c>h)_(p,e,n,i),f(r);else{_(p,e,n,i);var a=p.end(!0),u=o(a);t(u),p.destroy()}}var n="string"==typeof e,u=n?e.length:e.byteLength,s=Math.min(d,u),c=Math.ceil(u/s),h=0,p=n?new l:new l.ArrayBuffer,_=n?a:i;r()}function s(e){return l.hash(e)}Object.defineProperty(t,"__esModule",{value:!0});var c=r(53),l=n(r(55)),f=e.setImmediate||e.setTimeout,d=32768;t.binaryMd5=u,t.stringMd5=s}).call(t,function(){return this}())},function(e,t,r){!function(t){e.exports=t()}(function(e){"use strict";function t(e,t,r,n,o,i){return t=y(y(t,e),y(n,i)),y(t<<o|t>>>32-o,r)}function r(e,r,n,o,i,a,u){return t(r&n|~r&o,e,r,i,a,u)}function n(e,r,n,o,i,a,u){return t(r&o|n&~o,e,r,i,a,u)}function o(e,r,n,o,i,a,u){return t(r^n^o,e,r,i,a,u)}function i(e,r,n,o,i,a,u){return t(n^(r|~o),e,r,i,a,u)}function a(e,t){var a=e[0],u=e[1],s=e[2],c=e[3];a=r(a,u,s,c,t[0],7,-680876936),c=r(c,a,u,s,t[1],12,-389564586),s=r(s,c,a,u,t[2],17,606105819),u=r(u,s,c,a,t[3],22,-1044525330),a=r(a,u,s,c,t[4],7,-176418897),c=r(c,a,u,s,t[5],12,1200080426),s=r(s,c,a,u,t[6],17,-1473231341),u=r(u,s,c,a,t[7],22,-45705983),a=r(a,u,s,c,t[8],7,1770035416),c=r(c,a,u,s,t[9],12,-1958414417),s=r(s,c,a,u,t[10],17,-42063),u=r(u,s,c,a,t[11],22,-1990404162),a=r(a,u,s,c,t[12],7,1804603682),c=r(c,a,u,s,t[13],12,-40341101),s=r(s,c,a,u,t[14],17,-1502002290),u=r(u,s,c,a,t[15],22,1236535329),a=n(a,u,s,c,t[1],5,-165796510),c=n(c,a,u,s,t[6],9,-1069501632),s=n(s,c,a,u,t[11],14,643717713),u=n(u,s,c,a,t[0],20,-373897302),a=n(a,u,s,c,t[5],5,-701558691),c=n(c,a,u,s,t[10],9,38016083),s=n(s,c,a,u,t[15],14,-660478335),u=n(u,s,c,a,t[4],20,-405537848),a=n(a,u,s,c,t[9],5,568446438),c=n(c,a,u,s,t[14],9,-1019803690),s=n(s,c,a,u,t[3],14,-187363961),u=n(u,s,c,a,t[8],20,1163531501),a=n(a,u,s,c,t[13],5,-1444681467),c=n(c,a,u,s,t[2],9,-51403784),s=n(s,c,a,u,t[7],14,1735328473),u=n(u,s,c,a,t[12],20,-1926607734),a=o(a,u,s,c,t[5],4,-378558),c=o(c,a,u,s,t[8],11,-2022574463),s=o(s,c,a,u,t[11],16,1839030562),u=o(u,s,c,a,t[14],23,-35309556),a=o(a,u,s,c,t[1],4,-1530992060),c=o(c,a,u,s,t[4],11,1272893353),s=o(s,c,a,u,t[7],16,-155497632),u=o(u,s,c,a,t[10],23,-1094730640),a=o(a,u,s,c,t[13],4,681279174),c=o(c,a,u,s,t[0],11,-358537222),s=o(s,c,a,u,t[3],16,-722521979),u=o(u,s,c,a,t[6],23,76029189),a=o(a,u,s,c,t[9],4,-640364487),c=o(c,a,u,s,t[12],11,-421815835),s=o(s,c,a,u,t[15],16,530742520),u=o(u,s,c,a,t[2],23,-995338651),a=i(a,u,s,c,t[0],6,-198630844),c=i(c,a,u,s,t[7],10,1126891415),s=i(s,c,a,u,t[14],15,-1416354905),u=i(u,s,c,a,t[5],21,-57434055),a=i(a,u,s,c,t[12],6,1700485571),c=i(c,a,u,s,t[3],10,-1894986606),s=i(s,c,a,u,t[10],15,-1051523),u=i(u,s,c,a,t[1],21,-2054922799),a=i(a,u,s,c,t[8],6,1873313359),c=i(c,a,u,s,t[15],10,-30611744),s=i(s,c,a,u,t[6],15,-1560198380),u=i(u,s,c,a,t[13],21,1309151649),a=i(a,u,s,c,t[4],6,-145523070),c=i(c,a,u,s,t[11],10,-1120210379),s=i(s,c,a,u,t[2],15,718787259),u=i(u,s,c,a,t[9],21,-343485551),e[0]=y(a,e[0]),e[1]=y(u,e[1]),e[2]=y(s,e[2]),e[3]=y(c,e[3])}function u(e){var t,r=[];for(t=0;64>t;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}function s(e){var t,r=[];for(t=0;64>t;t+=4)r[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return r}function c(e){var t,r,n,o,i,s,c=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;c>=t;t+=64)a(l,u(e.substring(t-64,t)));for(e=e.substring(t-64),r=e.length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;r>t;t+=1)n[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(a(l,n),t=0;16>t;t+=1)n[t]=0;return o=8*c,o=o.toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(o[2],16),s=parseInt(o[1],16)||0,n[14]=i,n[15]=s,a(l,n),l}function l(e){var t,r,n,o,i,u,c=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;c>=t;t+=64)a(l,s(e.subarray(t-64,t)));for(e=c>t-64?e.subarray(t-64):new Uint8Array(0),r=e.length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;r>t;t+=1)n[t>>2]|=e[t]<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(a(l,n),t=0;16>t;t+=1)n[t]=0;return o=8*c,o=o.toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(o[2],16),u=parseInt(o[1],16)||0,n[14]=i,n[15]=u,a(l,n),l}function f(e){var t,r="";for(t=0;4>t;t+=1)r+=b[e>>8*t+4&15]+b[e>>8*t&15];return r}function d(e){var t;for(t=0;t<e.length;t+=1)e[t]=f(e[t]);return e.join("")}function h(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function p(e,t){var r,n=e.length,o=new ArrayBuffer(n),i=new Uint8Array(o);for(r=0;n>r;r+=1)i[r]=e.charCodeAt(r);return t?i:o}function _(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function v(e,t,r){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e)),n.set(new Uint8Array(t),e.byteLength),r?n:n.buffer}function m(e){var t,r=[],n=e.length;for(t=0;n-1>t;t+=2)r.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,r)}function g(){this.reset()}var y=function(e,t){return e+t&4294967295},b=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return"5d41402abc4b2a76b9719d911017c592"!==d(c("hello"))&&(y=function(e,t){var r=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(r>>16);return n<<16|65535&r}),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||!function(){function t(e,t){return e=0|e||0,0>e?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(r,n){var o,i,a,u,s=this.byteLength,c=t(r,s),l=s;return n!==e&&(l=t(n,s)),c>l?new ArrayBuffer(0):(o=l-c,i=new ArrayBuffer(o),a=new Uint8Array(i),u=new Uint8Array(this,c,o),a.set(u),i)}}(),g.prototype.append=function(e){return this.appendBinary(h(e)),this},g.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,r=this._buff.length;for(t=64;r>=t;t+=64)a(this._hash,u(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},g.prototype.end=function(e){var t,r,n=this._buff,o=n.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;o>t;t+=1)i[t>>2]|=n.charCodeAt(t)<<(t%4<<3);return this._finish(i,o),r=d(this._hash),e&&(r=m(r)),this.reset(),r},g.prototype.reset=function(){
return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},g.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},g.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},g.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},g.prototype._finish=function(e,t){var r,n,o,i=t;if(e[i>>2]|=128<<(i%4<<3),i>55)for(a(this._hash,e),i=0;16>i;i+=1)e[i]=0;r=8*this._length,r=r.toString(16).match(/(.*?)(.{0,8})$/),n=parseInt(r[2],16),o=parseInt(r[1],16)||0,e[14]=n,e[15]=o,a(this._hash,e)},g.hash=function(e,t){return g.hashBinary(h(e),t)},g.hashBinary=function(e,t){var r=c(e),n=d(r);return t?m(n):n},g.ArrayBuffer=function(){this.reset()},g.ArrayBuffer.prototype.append=function(e){var t,r=v(this._buff.buffer,e,!0),n=r.length;for(this._length+=e.byteLength,t=64;n>=t;t+=64)a(this._hash,s(r.subarray(t-64,t)));return this._buff=n>t-64?new Uint8Array(r.buffer.slice(t-64)):new Uint8Array(0),this},g.ArrayBuffer.prototype.end=function(e){var t,r,n=this._buff,o=n.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;o>t;t+=1)i[t>>2]|=n[t]<<(t%4<<3);return this._finish(i,o),r=d(this._hash),e&&(r=m(r)),this.reset(),r},g.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},g.ArrayBuffer.prototype.getState=function(){var e=g.prototype.getState.call(this);return e.buff=_(e.buff),e},g.ArrayBuffer.prototype.setState=function(e){return e.buff=p(e.buff,!0),g.prototype.setState.call(this,e)},g.ArrayBuffer.prototype.destroy=g.prototype.destroy,g.ArrayBuffer.prototype._finish=g.prototype._finish,g.ArrayBuffer.hash=function(e,t){var r=l(new Uint8Array(e)),n=d(r);return t?m(n):n},g})},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(e){try{return JSON.parse(e)}catch(t){return u.parse(e)}}function i(e){return e.length<5e4?JSON.parse(e):o(e)}function a(e){try{return JSON.stringify(e)}catch(t){return u.stringify(e)}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(r(57));t.safeJsonParse=i,t.safeJsonStringify=a},function(e,t){"use strict";function r(e,t,r){var n=r[r.length-1];e===n.element&&(r.pop(),n=r[r.length-1]);var o=n.element,i=n.index;if(Array.isArray(o))o.push(e);else if(i===t.length-2){var a=t.pop();o[a]=e}else t.push(e)}t.stringify=function(e){var t=[];t.push({obj:e});for(var r,n,o,i,a,u,s,c,l,f,d,h="";r=t.pop();)if(n=r.obj,o=r.prefix||"",i=r.val||"",h+=o,i)h+=i;else if("object"!=typeof n)h+="undefined"==typeof n?null:JSON.stringify(n);else if(null===n)h+="null";else if(Array.isArray(n)){for(t.push({val:"]"}),a=n.length-1;a>=0;a--)u=0===a?"":",",t.push({obj:n[a],prefix:u});t.push({val:"["})}else{s=[];for(c in n)n.hasOwnProperty(c)&&s.push(c);for(t.push({val:"}"}),a=s.length-1;a>=0;a--)l=s[a],f=n[l],d=a>0?",":"",d+=JSON.stringify(l)+":",t.push({obj:f,prefix:d});t.push({val:"{"})}return h},t.parse=function(e){for(var t,n,o,i,a,u,s,c,l,f=[],d=[],h=0;;)if(t=e[h++],"}"!==t&&"]"!==t&&"undefined"!=typeof t)switch(t){case" ":case"	":case"\n":case":":case",":break;case"n":h+=3,r(null,f,d);break;case"t":h+=3,r(!0,f,d);break;case"f":h+=4,r(!1,f,d);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(n="",h--;;){if(o=e[h++],!/[\d\.\-e\+]/.test(o)){h--;break}n+=o}r(parseFloat(n),f,d);break;case'"':for(i="",a=void 0,u=0;;){if(s=e[h++],'"'===s&&("\\"!==a||u%2!==1))break;i+=s,a=s,"\\"===a?u++:u=0}r(JSON.parse('"'+i+'"'),f,d);break;case"[":c={element:[],index:f.length},f.push(c.element),d.push(c);break;case"{":l={element:{},index:f.length},f.push(l.element),d.push(l);break;default:throw new Error("unexpectedly reached end of input: "+t)}else{if(1===f.length)return f.pop();r(f.pop(),f,d)}}},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(){try{return openDatabase("_pouch_validate_websql",1,"",1),!0}catch(e){return!1}}function i(){if("undefined"==typeof indexedDB||null===indexedDB||!/iP(hone|od|ad)/.test(navigator.userAgent))return!0;var e=d.hasLocalStorage(),t="_pouch__websqldb_valid_"+navigator.userAgent;if(e&&localStorage[t])return"1"===localStorage[t];var r=o();return e&&(localStorage[t]=r?"1":"0"),r}function a(){return"undefined"!=typeof SQLitePlugin?!0:"undefined"==typeof openDatabase?!1:i()}function u(e){return function(t,r,n,o){if("undefined"!=typeof sqlitePlugin){var i=f.extend({},e,{name:t,version:r,description:n,size:o});return sqlitePlugin.openDatabase(i)}return openDatabase(t,r,n,o)}}function s(e,t){var r=u(e),n=f.extend({websql:r},e);l.call(this,n,t)}function c(e){e.adapter("websql",s,!0)}var l=n(r(59)),f=r(39),d=r(47);s.valid=a,s.use_prefix=!0,e.exports=c},function(e,t,r){"use strict";function n(e){return decodeURIComponent(escape(e))}function o(e){return 65>e?e-48:e-55}function i(e,t,r){for(var n="";r>t;)n+=String.fromCharCode(o(e.charCodeAt(t++))<<4|o(e.charCodeAt(t++)));return n}function a(e,t,r){for(var n="";r>t;)n+=String.fromCharCode(o(e.charCodeAt(t+2))<<12|o(e.charCodeAt(t+3))<<8|o(e.charCodeAt(t))<<4|o(e.charCodeAt(t+1))),t+=4;return n}function u(e,t){return"UTF-8"===t?n(i(e,0,e.length)):a(e,0,e.length)}function s(e){return"'"+e+"'"}function c(e){return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"")}function l(e){return e.replace(/\u0001\u0001/g,"\x00").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,"")}function f(e){return delete e._id,delete e._rev,JSON.stringify(e)}function d(e,t,r){return e=JSON.parse(e),e._id=t,e._rev=r,e}function h(e){for(var t="(";e--;)t+="?",e&&(t+=",");return t+")"}function p(e,t,r,n,o){return"SELECT "+e+" FROM "+("string"==typeof t?t:t.join(" JOIN "))+(r?" ON "+r:"")+(n?" WHERE "+("string"==typeof n?n:n.join(" AND ")):"")+(o?" ORDER BY "+o:"")}function _(e,t,r){function n(){++i===e.length&&o()}function o(){if(a.length){var e="SELECT DISTINCT digest AS digest FROM "+M+" WHERE seq IN "+h(a.length);r.executeSql(e,a,function(e,t){for(var r=[],n=0;n<t.rows.length;n++)r.push(t.rows.item(n).digest);if(r.length){var o="DELETE FROM "+M+" WHERE seq IN ("+a.map(function(){return"?"}).join(",")+")";e.executeSql(o,a,function(e){var t="SELECT digest FROM "+M+" WHERE digest IN ("+r.map(function(){return"?"}).join(",")+")";e.executeSql(t,r,function(e,t){for(var n=new N.Set,o=0;o<t.rows.length;o++)n.add(t.rows.item(o).digest);r.forEach(function(t){n.has(t)||(e.executeSql("DELETE FROM "+M+" WHERE digest=?",[t]),e.executeSql("DELETE FROM "+L+" WHERE digest=?",[t]))})})})}})}}if(e.length){var i=0,a=[];e.forEach(function(e){var o="SELECT seq FROM "+j+" WHERE doc_id=? AND rev=?";r.executeSql(o,[t,e],function(e,t){if(!t.rows.length)return n();var r=t.rows.item(0).seq;a.push(r),e.executeSql("DELETE FROM "+j+" WHERE seq=?",[r],n)})})}}function v(e){return function(t){A.guardedConsole("error","WebSQL threw an error",t);var r=t&&t.constructor.toString().match(/function ([^\(]+)/),n=r&&r[1]||t.type,o=t.target||t.message;e(R.createError(R.WSQ_ERROR,o,n))}}function m(e){if("size"in e)return 1e6*e.size;var t="undefined"!=typeof navigator&&/Android/.test(navigator.userAgent);return t?5e6:1}function g(e,t,r,n,o,i,a){function u(){return S?a(S):(i.notify(n._name),n._docCount=-1,void a(null,A))}function s(e,t){var r="SELECT count(*) as cnt FROM "+L+" WHERE digest=?";E.executeSql(r,[e],function(r,n){if(0===n.rows.item(0).cnt){var o=R.createError(R.MISSING_STUB,"unknown stub attachment with digest "+e);t(o)}else t()})}function l(e){function t(){++o===r.length&&e(n)}var r=[];if(w.forEach(function(e){e.data&&e.data._attachments&&Object.keys(e.data._attachments).forEach(function(t){var n=e.data._attachments[t];n.stub&&r.push(n.digest)})}),!r.length)return e();var n,o=0;r.forEach(function(e){s(e,function(e){e&&!n&&(n=e),t()})})}function d(e,t,r,o,i,a,u,s){function c(){function t(e,t){function n(){return++i===a.length&&t(),!1}function o(t){var o="INSERT INTO "+M+" (digest, seq) VALUES (?,?)",i=[r._attachments[t].digest,e];E.executeSql(o,i,n,n)}var i=0,a=Object.keys(r._attachments||{});if(!a.length)return t();for(var u=0;u<a.length;u++)o(a[u])}var r=e.data,n=o?1:0,i=r._id,a=r._rev,u=f(r),s="INSERT INTO "+j+" (doc_id, rev, json, deleted) VALUES (?, ?, ?, ?);",c=[i,a,u,n];E.executeSql(s,c,function(e,r){var n=r.insertId;t(n,function(){h(e,n)})},function(){var e=p("seq",j,null,"doc_id=? AND rev=?");return E.executeSql(e,[i,a],function(e,r){var o=r.rows.item(0).seq,s="UPDATE "+j+" SET json=?, deleted=? WHERE doc_id=? AND rev=?;",c=[u,n,i,a];e.executeSql(s,c,function(e){t(o,function(){h(e,o)})})}),!1})}function l(e){v||(e?(v=e,s(v)):m===y.length&&c())}function d(e){m++,l(e)}function h(r,o){var a=e.metadata.id,c=e.stemmedRevs||[];i&&n.auto_compaction&&(c=x.compactTree(e.metadata).concat(c)),c.length&&_(c,a,r),e.metadata.seq=o,delete e.metadata.rev;var l=i?"UPDATE "+q+" SET json=?, max_seq=?, winningseq=(SELECT seq FROM "+j+" WHERE doc_id="+q+".id AND rev=?) WHERE id=?":"INSERT INTO "+q+" (id, winningseq, max_seq, json) VALUES (?,?,?,?);",f=O.safeJsonStringify(e.metadata),d=i?[f,o,t,a]:[a,o,o,f];r.executeSql(l,d,function(){A[u]={ok:!0,id:e.metadata.id,rev:t},C.set(a,e.metadata),s()})}var v=null,m=0;e.data._id=e.metadata.id,e.data._rev=e.metadata.rev;var y=Object.keys(e.data._attachments||{});o&&(e.data._deleted=!0),y.forEach(function(r){var n=e.data._attachments[r];if(n.stub)m++,l();else{var o=n.data;delete n.data,n.revpos=parseInt(t,10);var i=n.digest;g(i,o,d)}}),y.length||c()}function h(){T.processDocs(e.revs_limit,w,n,C,E,A,d,r)}function m(e){function t(){++r===w.length&&e()}if(!w.length)return e();var r=0;w.forEach(function(e){if(e._id&&T.isLocalId(e._id))return t();var r=e.metadata.id;E.executeSql("SELECT json FROM "+q+" WHERE id = ?",[r],function(e,n){if(n.rows.length){var o=O.safeJsonParse(n.rows.item(0).json);C.set(r,o)}t()})})}function g(e,t,r){var n="SELECT digest FROM "+L+" WHERE digest=?";E.executeSql(n,[e],function(o,i){return i.rows.length?r():(n="INSERT INTO "+L+" (digest, body, escaped) VALUES (?,?,1)",void o.executeSql(n,[e,c(t)],function(){r()},function(){return r(),!1}))})}var y=r.new_edits,b=t.docs,w=b.map(function(e){if(e._id&&T.isLocalId(e._id))return e;var t=T.parseDoc(e,y);return t}),k=w.filter(function(e){return e.error});if(k.length)return a(k[0]);var E,S,A=new Array(w.length),C=new N.Map;T.preprocessAttachments(w,"binary",function(e){return e?a(e):void o.transaction(function(e){E=e,l(function(e){e?S=e:m(h)})},v(a),u)})}function y(e){return e.websql(e.name,e.version,e.description,e.size)}function b(e){try{return{db:y(e)}}catch(t){return{error:t}}}function w(e){var t=B.get(e.name);return t||(t=b(e),B.set(e.name,t),t.db&&(t.db._sqlitePlugin="undefined"!=typeof sqlitePlugin)),t}function k(e,t,r,n,o){function i(){++s===u.length&&o&&o()}function a(e,o){var a=e._attachments[o],u={binary:t.binary,ctx:n};r._getAttachment(e._id,o,a,u,function(t,r){e._attachments[o]=S.extend(A.pick(a,["digest","content_type"]),{data:r}),i()})}var u=Object.keys(e._attachments||{});if(!u.length)return o&&o();var s=0;u.forEach(function(r){t.attachments&&t.include_docs?a(e,r):(e._attachments[r].stub=!0,i())})}function E(e,t){function r(){A.hasLocalStorage()&&(window.localStorage["_pouch__websqldb_"+X._name]=!0),t(null,X)}function n(e,t){e.executeSql(W),e.executeSql("ALTER TABLE "+j+" ADD COLUMN deleted TINYINT(1) DEFAULT 0",[],function(){e.executeSql(J),e.executeSql("ALTER TABLE "+q+" ADD COLUMN local TINYINT(1) DEFAULT 0",[],function(){e.executeSql("CREATE INDEX IF NOT EXISTS 'doc-store-local-idx' ON "+q+" (local, id)");var r="SELECT "+q+".winningseq AS seq, "+q+".json AS metadata FROM "+j+" JOIN "+q+" ON "+j+".seq = "+q+".winningseq";e.executeSql(r,[],function(e,r){for(var n=[],o=[],i=0;i<r.rows.length;i++){var a=r.rows.item(i),u=a.seq,s=JSON.parse(a.metadata);T.isDeleted(s)&&n.push(u),T.isLocalId(s.id)&&o.push(s.id)}e.executeSql("UPDATE "+q+"SET local = 1 WHERE id IN "+h(o.length),o,function(){e.executeSql("UPDATE "+j+" SET deleted = 1 WHERE seq IN "+h(n.length),n,t)})})})})}function o(e,t){var r="CREATE TABLE IF NOT EXISTS "+D+" (id UNIQUE, rev, json)";e.executeSql(r,[],function(){var r="SELECT "+q+".id AS id, "+j+".json AS data FROM "+j+" JOIN "+q+" ON "+j+".seq = "+q+".winningseq WHERE local = 1";e.executeSql(r,[],function(e,r){function n(){if(!o.length)return t(e);var r=o.shift(),i=JSON.parse(r.data)._rev;e.executeSql("INSERT INTO "+D+" (id, rev, json) VALUES (?,?,?)",[r.id,i,r.data],function(e){e.executeSql("DELETE FROM "+q+" WHERE id=?",[r.id],function(e){e.executeSql("DELETE FROM "+j+" WHERE seq=?",[r.seq],function(){n()})})})}for(var o=[],i=0;i<r.rows.length;i++)o.push(r.rows.item(i));n()})})}function i(e,t){function r(r){function n(){if(!r.length)return t(e);var o=r.shift(),i=u(o.hex,Q),a=i.lastIndexOf("::"),s=i.substring(0,a),c=i.substring(a+2),l="UPDATE "+j+" SET doc_id=?, rev=? WHERE doc_id_rev=?";e.executeSql(l,[s,c,i],function(){n()})}n()}var n="ALTER TABLE "+j+" ADD COLUMN doc_id";e.executeSql(n,[],function(e){var t="ALTER TABLE "+j+" ADD COLUMN rev";e.executeSql(t,[],function(e){e.executeSql(H,[],function(e){var t="SELECT hex(doc_id_rev) as hex FROM "+j;e.executeSql(t,[],function(e,t){for(var n=[],o=0;o<t.rows.length;o++)n.push(t.rows.item(o));r(n)})})})})}function a(e,t){function r(e){var r="SELECT COUNT(*) AS cnt FROM "+L;e.executeSql(r,[],function(e,r){function n(){var r=p(K+", "+q+".id AS id",[q,j],G,null,q+".id ");r+=" LIMIT "+a+" OFFSET "+i,i+=a,e.executeSql(r,[],function(e,r){function o(e,t){var r=i[e]=i[e]||[];-1===r.indexOf(t)&&r.push(t)}if(!r.rows.length)return t(e);for(var i={},a=0;a<r.rows.length;a++)for(var u=r.rows.item(a),s=d(u.data,u.id,u.rev),c=Object.keys(s._attachments||{}),l=0;l<c.length;l++){var f=s._attachments[c[l]];o(f.digest,u.seq)}var h=[];if(Object.keys(i).forEach(function(e){var t=i[e];t.forEach(function(t){h.push([e,t])})}),!h.length)return n();var p=0;h.forEach(function(t){var r="INSERT INTO "+M+" (digest, seq) VALUES (?,?)";e.executeSql(r,t,function(){++p===h.length&&n()})})})}var o=r.rows.item(0).cnt;if(!o)return t(e);var i=0,a=10;n()})}var n="CREATE TABLE IF NOT EXISTS "+M+" (digest, seq INTEGER)";e.executeSql(n,[],function(e){e.executeSql(z,[],function(e){e.executeSql(V,[],r)})})}function s(e,t){var r="ALTER TABLE "+L+" ADD COLUMN escaped TINYINT(1) DEFAULT 0";e.executeSql(r,[],t)}function c(e,t){var r="ALTER TABLE "+q+" ADD COLUMN max_seq INTEGER";e.executeSql(r,[],function(e){var r="UPDATE "+q+" SET max_seq=(SELECT MAX(seq) FROM "+j+" WHERE doc_id=id)";e.executeSql(r,[],function(e){var r="CREATE UNIQUE INDEX IF NOT EXISTS 'doc-max-seq-idx' ON "+q+" (max_seq)";e.executeSql(r,[],t)})})}function y(e,t){e.executeSql('SELECT HEX("a") AS hex',[],function(e,r){var n=r.rows.item(0).hex;Q=2===n.length?"UTF-8":"UTF-16",t()})}function b(){for(;ee.length>0;){var e=ee.pop();e(null,Y)}}function E(e,t){if(0===t){var r="CREATE TABLE IF NOT EXISTS "+P+" (dbid, db_version INTEGER)",u="CREATE TABLE IF NOT EXISTS "+L+" (digest UNIQUE, escaped TINYINT(1), body BLOB)",l="CREATE TABLE IF NOT EXISTS "+M+" (digest, seq INTEGER)",f="CREATE TABLE IF NOT EXISTS "+q+" (id unique, json, winningseq, max_seq INTEGER UNIQUE)",d="CREATE TABLE IF NOT EXISTS "+j+" (seq INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, json, deleted TINYINT(1), doc_id, rev)",h="CREATE TABLE IF NOT EXISTS "+D+" (id UNIQUE, rev, json)";e.executeSql(u),e.executeSql(h),e.executeSql(l,[],function(){e.executeSql(V),e.executeSql(z)}),e.executeSql(f,[],function(){e.executeSql(W),e.executeSql(d,[],function(){e.executeSql(J),e.executeSql(H),e.executeSql(r,[],function(){var t="INSERT INTO "+P+" (db_version, dbid) VALUES (?,?)";Y=A.uuid();var r=[I,Y];e.executeSql(t,r,function(){b()})})})})}else{var p=function(){var r=I>t;r&&e.executeSql("UPDATE "+P+" SET db_version = "+I);var n="SELECT dbid FROM "+P;e.executeSql(n,[],function(e,t){Y=t.rows.item(0).dbid,b()})},_=[n,o,i,a,s,c,p],v=t,m=function(e){_[v-1](e,m),v++};m(e)}}function N(){ne.transaction(function(e){y(e,function(){B(e)})},v(t),r)}function B(e){var t="SELECT sql FROM sqlite_master WHERE tbl_name = "+P;e.executeSql(t,[],function(e,t){t.rows.length?/db_version/.test(t.rows.item(0).sql)?e.executeSql("SELECT db_version FROM "+P,[],function(e,t){var r=t.rows.item(0).db_version;E(e,r)}):e.executeSql("ALTER TABLE "+P+" ADD COLUMN db_version INTEGER",[],function(){E(e,1)}):E(e,0)})}function $(e,t){if(-1!==X._docCount)return t(X._docCount);var r=p("COUNT("+q+".id) AS 'num'",[q,j],G,j+".deleted=0");e.executeSql(r,[],function(e,r){X._docCount=r.rows.item(0).num,t(X._docCount)})}var Q,X=this,Y=null,Z=m(e),ee=[];X._docCount=-1,X._name=e.name;var te=S.extend({},e,{version:U,description:e.name,size:Z}),re=w(te);if(re.error)return v(t)(re.error);var ne=re.db;"function"!=typeof ne.readTransaction&&(ne.readTransaction=ne.transaction),N(),X.type=function(){return"websql"},X._id=A.toPromise(function(e){e(null,Y)}),X._info=function(e){ne.readTransaction(function(t){$(t,function(r){var n="SELECT MAX(seq) AS seq FROM "+j;t.executeSql(n,[],function(t,n){var o=n.rows.item(0).seq||0;e(null,{doc_count:r,update_seq:o,sqlite_plugin:ne._sqlitePlugin,websql_encoding:Q})})})},v(e))},X._bulkDocs=function(t,r,n){g(e,t,r,X,ne,F,n)},X._get=function(e,t,r){function n(){r(a,{doc:o,metadata:i,ctx:u})}var o,i,a,u=t.ctx;if(!u)return ne.readTransaction(function(n){X._get(e,S.extend({ctx:n},t),r)});var s,c;t.rev?(s=p(K,[q,j],q+".id="+j+".doc_id",[j+".doc_id=?",j+".rev=?"]),c=[e,t.rev]):(s=p(K,[q,j],G,q+".id=?"),c=[e]),u.executeSql(s,c,function(e,r){if(!r.rows.length)return a=R.createError(R.MISSING_DOC,"missing"),n();var u=r.rows.item(0);return i=O.safeJsonParse(u.metadata),u.deleted&&!t.rev?(a=R.createError(R.MISSING_DOC,"deleted"),n()):(o=d(u.data,i.id,u.rev),void n())})},X._allDocs=function(e,t){var r,n=[],o="startkey"in e?e.startkey:!1,i="endkey"in e?e.endkey:!1,a="key"in e?e.key:!1,u="descending"in e?e.descending:!1,s="limit"in e?e.limit:-1,c="skip"in e?e.skip:0,l=e.inclusive_end!==!1,f=[],h=[];if(a!==!1)h.push(q+".id = ?"),f.push(a);else if(o!==!1||i!==!1){if(o!==!1&&(h.push(q+".id "+(u?"<=":">=")+" ?"),f.push(o)),i!==!1){var _=u?">":"<";l&&(_+="="),h.push(q+".id "+_+" ?"),f.push(i)}a!==!1&&(h.push(q+".id = ?"),f.push(a))}"ok"!==e.deleted&&h.push(j+".deleted = 0"),ne.readTransaction(function(t){$(t,function(o){if(r=o,0!==s){var i=p(K,[q,j],G,h,q+".id "+(u?"DESC":"ASC"));i+=" LIMIT "+s+" OFFSET "+c,t.executeSql(i,f,function(t,r){for(var o=0,i=r.rows.length;i>o;o++){var a=r.rows.item(o),u=O.safeJsonParse(a.metadata),s=u.id,c=d(a.data,s,a.rev),l=c._rev,f={id:s,key:s,value:{rev:l}};if(e.include_docs&&(f.doc=c,f.doc._rev=l,e.conflicts&&(f.doc._conflicts=x.collectConflicts(u)),k(f.doc,e,X,t)),a.deleted){if("ok"!==e.deleted)continue;f.value.deleted=!0,f.doc=null}n.push(f)}})}})},v(t),function(){t(null,{total_rows:r,offset:e.skip,rows:n})})},X._changes=function(e){function t(){var t=q+".json AS metadata, "+q+".max_seq AS maxSeq, "+j+".json AS winningDoc, "+j+".rev AS winningRev ",r=q+" JOIN "+j,s=q+".id="+j+".doc_id AND "+q+".winningseq="+j+".seq",c=["maxSeq > ?"],l=[e.since];e.doc_ids&&(c.push(q+".id IN "+h(e.doc_ids.length)),l=l.concat(e.doc_ids));var f="maxSeq "+(n?"DESC":"ASC"),_=p(t,r,s,c,f),m=A.filterChange(e);e.view||e.filter||(_+=" LIMIT "+o);var g=e.since||0;ne.readTransaction(function(t){t.executeSql(_,l,function(t,r){function n(t){return function(){e.onChange(t)}}for(var s=0,c=r.rows.length;c>s;s++){var l=r.rows.item(s),f=O.safeJsonParse(l.metadata);g=l.maxSeq;var h=d(l.winningDoc,f.id,l.winningRev),p=e.processChange(h,f,e);p.seq=l.maxSeq;var _=m(p);if("object"==typeof _)return e.complete(_);if(_&&(u++,i&&a.push(p),e.attachments&&e.include_docs?k(h,e,X,t,n(p)):n(p)()),u===o)break}})},v(e.complete),function(){e.continuous||e.complete(null,{results:a,last_seq:g})})}if(e=A.clone(e),e.continuous){var r=X._name+":"+A.uuid();return F.addListener(X._name,r,X,e),F.notify(X._name),{cancel:function(){F.removeListener(X._name,r)}}}var n=e.descending;e.since=e.since&&!n?e.since:0;var o="limit"in e?e.limit:-1;0===o&&(o=1);var i;i="return_docs"in e?e.return_docs:"returnDocs"in e?e.returnDocs:!0;var a=[],u=0;t()},X._close=function(e){e()},X._getAttachment=function(e,t,r,n,o){var i,a=n.ctx,s=r.digest,c=r.content_type,f="SELECT escaped, CASE WHEN escaped = 1 THEN body ELSE HEX(body) END AS body FROM "+L+" WHERE digest=?";a.executeSql(f,[s],function(e,t){var r=t.rows.item(0),a=r.escaped?l(r.body):u(r.body,Q);i=n.binary?C.binaryStringToBlobOrBuffer(a,c):C.btoa(a),o(null,i)})},X._getRevisionTree=function(e,t){ne.readTransaction(function(r){var n="SELECT json AS metadata FROM "+q+" WHERE id = ?";r.executeSql(n,[e],function(e,r){if(r.rows.length){var n=O.safeJsonParse(r.rows.item(0).metadata);t(null,n.rev_tree)}else t(R.createError(R.MISSING_DOC))})})},X._doCompaction=function(e,t,r){return t.length?void ne.transaction(function(r){var n="SELECT json AS metadata FROM "+q+" WHERE id = ?";r.executeSql(n,[e],function(r,n){var o=O.safeJsonParse(n.rows.item(0).metadata);x.traverseRevTree(o.rev_tree,function(e,r,n,o,i){var a=r+"-"+n;-1!==t.indexOf(a)&&(i.status="missing")});var i="UPDATE "+q+" SET json = ? WHERE id = ?";r.executeSql(i,[O.safeJsonStringify(o),e])}),_(t,e,r)},v(r),function(){r()}):r()},X._getLocal=function(e,t){ne.readTransaction(function(r){var n="SELECT json, rev FROM "+D+" WHERE id=?";r.executeSql(n,[e],function(r,n){if(n.rows.length){var o=n.rows.item(0),i=d(o.json,e,o.rev);t(null,i)}else t(R.createError(R.MISSING_DOC))})})},X._putLocal=function(e,t,r){function n(e){var n,c;i?(n="UPDATE "+D+" SET rev=?, json=? WHERE id=? AND rev=?",c=[o,s,a,i]):(n="INSERT INTO "+D+" (id, rev, json) VALUES (?,?,?)",c=[a,o,s]),e.executeSql(n,c,function(e,n){n.rowsAffected?(u={ok:!0,id:a,rev:o},t.ctx&&r(null,u)):r(R.createError(R.REV_CONFLICT))},function(){return r(R.createError(R.REV_CONFLICT)),!1})}"function"==typeof t&&(r=t,t={}),delete e._revisions;var o,i=e._rev,a=e._id;o=i?e._rev="0-"+(parseInt(i.split("-")[1],10)+1):e._rev="0-1";var u,s=f(e);t.ctx?n(t.ctx):ne.transaction(n,v(r),function(){u&&r(null,u)})},X._removeLocal=function(e,t,r){function n(n){var i="DELETE FROM "+D+" WHERE id=? AND rev=?",a=[e._id,e._rev];n.executeSql(i,a,function(n,i){return i.rowsAffected?(o={ok:!0,id:e._id,rev:"0-0"},void(t.ctx&&r(null,o))):r(R.createError(R.MISSING_DOC))})}"function"==typeof t&&(r=t,t={});var o;t.ctx?n(t.ctx):ne.transaction(n,v(r),function(){o&&r(null,o)})},X._destroy=function(e,t){F.removeAllListeners(X._name),ne.transaction(function(e){var t=[q,j,L,P,D,M];t.forEach(function(t){e.executeSql("DROP TABLE IF EXISTS "+t,[])})},v(t),function(){A.hasLocalStorage()&&(delete window.localStorage["_pouch__websqldb_"+X._name],delete window.localStorage[X._name]),t(null,{ok:!0})})}}var S=r(39),A=r(47),T=r(52),x=r(49),O=r(56),C=r(53),N=r(44),R=r(48),I=7,q=s("document-store"),j=s("by-sequence"),L=s("attach-store"),D=s("local-store"),P=s("metadata-store"),M=s("attach-seq-store"),B=new N.Map,F=new A.changesHandler,U=1,J="CREATE INDEX IF NOT EXISTS 'by-seq-deleted-idx' ON "+j+" (seq, deleted)",H="CREATE UNIQUE INDEX IF NOT EXISTS 'by-seq-doc-id-rev' ON "+j+" (doc_id, rev)",W="CREATE INDEX IF NOT EXISTS 'doc-winningseq-idx' ON "+q+" (winningseq)",V="CREATE INDEX IF NOT EXISTS 'attach-seq-seq-idx' ON "+M+" (seq)",z="CREATE UNIQUE INDEX IF NOT EXISTS 'attach-seq-digest-idx' ON "+M+" (digest, seq)",G=j+".seq = "+q+".winningseq",K=j+".seq AS seq, "+j+".deleted AS deleted, "+j+".json AS data, "+j+".rev AS rev, "+q+".json AS metadata";e.exports=E},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(e){var t=e.doc&&e.doc._attachments;t&&Object.keys(t).forEach(function(e){var r=t[e];r.data=g.base64StringToBlobOrBuffer(r.data,r.content_type)})}function i(e){return/^_design/.test(e)?"_design/"+encodeURIComponent(e.slice(8)):/^_local/.test(e)?"_local/"+encodeURIComponent(e.slice(7)):encodeURIComponent(e)}function a(e){return e._attachments&&Object.keys(e._attachments)?p.all(Object.keys(e._attachments).map(function(t){var r=e._attachments[t];return r.data&&"string"!=typeof r.data?new p(function(e){g.blobOrBufferToBase64(r.data,e)}).then(function(e){r.data=e}):void 0})):p.resolve()}function u(e){var t=m.parseUri(e);(t.user||t.password)&&(t.auth={username:t.user,password:t.password});var r=t.path.replace(/(^\/|\/$)/g,"").split("/");return t.db=r.pop(),-1===t.db.indexOf("%")&&(t.db=encodeURIComponent(t.db)),t.path=r.join("/"),t}function s(e,t){return c(e,e.db+"/"+t)}function c(e,t){var r=e.path?"/":"";return e.protocol+"://"+e.host+(e.port?":"+e.port:"")+"/"+e.path+r+t}function l(e){return"?"+Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&")}function f(e,t){function r(e,t,r){var n=e.ajax||{},o=h.extend(m.clone(N),n,t);return A(o.method+" "+o.url),T._ajax(o,r)}function n(e,t){return new p(function(n,o){r(e,t,function(e,t){return e?o(e):void n(t)})})}function f(e,t){return m.adapterFun(e,v(function(e){d().then(function(){return t.apply(this,e)})["catch"](function(t){var r=e.pop();r(t)})}))}function d(){if(e.skipSetup||e.skip_setup)return p.resolve();if(j)return j;var t={method:"GET",url:C};return j=n({},t)["catch"](function(e){return e&&e.status&&404===e.status?(m.explainError(404,"PouchDB is just detecting if the remote exists."),n({},{method:"PUT",url:C})):p.reject(e)})["catch"](function(e){return e&&e.status&&412===e.status?!0:p.reject(e)}),j["catch"](function(){j=null}),j}function b(e){return e.split("/").map(encodeURIComponent).join("/")}var T=this,x=u;e.getHost&&(x=e.getHost);var O=x(e.name,e),C=s(O,"");e=m.clone(e);var N=e.ajax||{};if(T.getUrl=function(){return C},T.getHeaders=function(){return N.headers||{}},e.auth||O.auth){var R=e.auth||O.auth,I=R.username+":"+R.password,q=g.btoa(unescape(encodeURIComponent(I)));N.headers=N.headers||{},N.headers.Authorization="Basic "+q}T._ajax=_;var j;setTimeout(function(){t(null,T)}),T.type=function(){return"http"},T.id=f("id",function(e){r({},{method:"GET",url:c(O,"")},function(t,r){var n=r&&r.uuid?r.uuid+O.db:s(O,"");e(null,n)})}),T.request=f("request",function(e,t){e.url=s(O,e.url),r({},e,t)}),T.compact=f("compact",function(e,t){"function"==typeof e&&(t=e,e={}),e=m.clone(e),r(e,{url:s(O,"_compact"),method:"POST"},function(){function r(){T.info(function(n,o){o&&!o.compact_running?t(null,{ok:!0}):setTimeout(r,e.interval||200)})}r()})}),T.bulkGet=m.adapterFun("bulkGet",function(e,t){function n(t){var n={};e.revs&&(n.revs=!0),e.attachments&&(n.attachments=!0),r({},{url:s(O,"_bulk_get"+l(n)),method:"POST",body:{docs:e.docs}},t)}function o(){function r(e){return function(r,n){u[e]=n.results,++a===o&&t(null,{results:m.flatten(u)})}}for(var n=k,o=Math.ceil(e.docs.length/n),a=0,u=new Array(o),s=0;o>s;s++){var c=m.pick(e,["revs","attachments"]);c.ajax=N,c.docs=e.docs.slice(s*n,Math.min(e.docs.length,(s+1)*n)),m.bulkGetShim(i,c,r(s))}}var i=this,a=c(O,""),u=E[a];"boolean"!=typeof u?n(function(e,r){if(e){var n=Math.floor(e.status/100);4===n||5===n?(E[a]=!1,m.explainError(e.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),o()):t(e)}else E[a]=!0,t(null,r)}):u?n(t):o()}),T._info=function(e){d().then(function(){r({},{method:"GET",url:s(O,"")},function(t,r){return t?e(t):(r.host=s(O,""),void e(null,r))})})["catch"](e)},T.get=f("get",function(e,t,r){function o(e){var r=e._attachments,o=r&&Object.keys(r);return r&&o.length?p.all(o.map(function(o){var a=r[o],u=i(e._id)+"/"+b(o)+"?rev="+e._rev;return n(t,{method:"GET",url:s(O,u),binary:!0}).then(function(e){return t.binary?e:new p(function(t){g.blobOrBufferToBase64(e,t)})}).then(function(e){delete a.stub,delete a.length,a.data=e})})):void 0}function a(e){return Array.isArray(e)?p.all(e.map(function(e){return e.ok?o(e.ok):void 0})):o(e)}"function"==typeof t&&(r=t,t={}),t=m.clone(t);var u={};t.revs&&(u.revs=!0),t.revs_info&&(u.revs_info=!0),t.open_revs&&("all"!==t.open_revs&&(t.open_revs=JSON.stringify(t.open_revs)),u.open_revs=t.open_revs),t.rev&&(u.rev=t.rev),t.conflicts&&(u.conflicts=t.conflicts),e=i(e);var c={method:"GET",url:s(O,e+l(u))};n(t,c).then(function(e){return p.resolve().then(function(){return t.attachments?a(e):void 0}).then(function(){r(null,e)})})["catch"](r)}),T.remove=f("remove",function(e,t,n,o){var a;"string"==typeof t?(a={_id:e,_rev:t},"function"==typeof n&&(o=n,n={})):(a=e,"function"==typeof t?(o=t,n={}):(o=n,n=t));var u=a._rev||n.rev;r(n,{method:"DELETE",url:s(O,i(a._id))+"?rev="+u},o)}),T.getAttachment=f("getAttachment",function(e,t,n,o){"function"==typeof n&&(o=n,n={});var a=n.rev?"?rev="+n.rev:"",u=s(O,i(e))+"/"+b(t)+a;r(n,{method:"GET",url:u,binary:!0},o)}),T.removeAttachment=f("removeAttachment",function(e,t,n,o){var a=s(O,i(e)+"/"+b(t))+"?rev="+n;r({},{method:"DELETE",url:a},o)}),T.putAttachment=f("putAttachment",function(e,t,n,o,a,u){"function"==typeof a&&(u=a,a=o,o=n,n=null);var c=i(e)+"/"+b(t),l=s(O,c);if(n&&(l+="?rev="+n),"string"==typeof o){var f;try{f=g.atob(o)}catch(d){return u(y.createError(y.BAD_ARG,"Attachment is not a valid base64 string"))}o=f?g.binaryStringToBlobOrBuffer(f,a):""}var h={headers:{"Content-Type":a},method:"PUT",url:l,processData:!1,body:o,timeout:N.timeout||6e4};r({},h,u)}),T._bulkDocs=function(e,t,n){e.new_edits=t.new_edits,d().then(function(){return p.all(e.docs.map(a))}).then(function(){r(t,{method:"POST",url:s(O,"_bulk_docs"),body:e},function(e,t){return e?n(e):(t.forEach(function(e){e.ok=!0}),void n(null,t))})})["catch"](n)},T.allDocs=f("allDocs",function(e,t){"function"==typeof e&&(t=e,e={}),e=m.clone(e);var r,i={},a="GET";e.conflicts&&(i.conflicts=!0),e.descending&&(i.descending=!0),e.include_docs&&(i.include_docs=!0),e.attachments&&(i.attachments=!0),e.key&&(i.key=JSON.stringify(e.key)),e.start_key&&(e.startkey=e.start_key),e.startkey&&(i.startkey=JSON.stringify(e.startkey)),e.end_key&&(e.endkey=e.end_key),e.endkey&&(i.endkey=JSON.stringify(e.endkey)),"undefined"!=typeof e.inclusive_end&&(i.inclusive_end=!!e.inclusive_end),"undefined"!=typeof e.limit&&(i.limit=e.limit),"undefined"!=typeof e.skip&&(i.skip=e.skip);var u=l(i);if("undefined"!=typeof e.keys){var c="keys="+encodeURIComponent(JSON.stringify(e.keys));c.length+u.length+1<=S?u+="&"+c:(a="POST",r={keys:e.keys})}n(e,{method:a,url:s(O,"_all_docs"+u),body:r}).then(function(r){e.include_docs&&e.attachments&&e.binary&&r.rows.forEach(o),t(null,r)})["catch"](t)}),T._changes=function(e){var t="batch_size"in e?e.batch_size:w;e=m.clone(e),e.timeout="timeout"in e?e.timeout:"timeout"in N?N.timeout:3e4;var n,i=e.timeout?{timeout:e.timeout-5e3}:{},a="undefined"!=typeof e.limit?e.limit:!1;n="return_docs"in e?e.return_docs:"returnDocs"in e?e.returnDocs:!0;var u=a;if(e.style&&(i.style=e.style),(e.include_docs||e.filter&&"function"==typeof e.filter)&&(i.include_docs=!0),e.attachments&&(i.attachments=!0),e.continuous&&(i.feed="longpoll"),e.conflicts&&(i.conflicts=!0),e.descending&&(i.descending=!0),"heartbeat"in e?e.heartbeat&&(i.heartbeat=e.heartbeat):i.heartbeat=1e4,e.filter&&"string"==typeof e.filter&&(i.filter=e.filter),e.view&&"string"==typeof e.view&&(i.filter="_view",i.view=e.view),e.query_params&&"object"==typeof e.query_params)for(var c in e.query_params)e.query_params.hasOwnProperty(c)&&(i[c]=e.query_params[c]);var f,h="GET";if(e.doc_ids){i.filter="_doc_ids";var p=JSON.stringify(e.doc_ids);p.length<S?i.doc_ids=p:(h="POST",f={doc_ids:e.doc_ids})}var _,v,g=function(n,o){if(!e.aborted){i.since=n,"object"==typeof i.since&&(i.since=JSON.stringify(i.since)),e.descending?a&&(i.limit=u):i.limit=!a||u>t?t:u;var c={method:h,url:s(O,"_changes"+l(i)),timeout:e.timeout,body:f};v=n,e.aborted||d().then(function(){_=r(e,c,o)})["catch"](o)}},y={results:[]},b=function(r,i){if(!e.aborted){var s=0;if(i&&i.results){s=i.results.length,y.last_seq=i.last_seq;var c={};c.query=e.query_params,i.results=i.results.filter(function(t){u--;var r=m.filterChange(e)(t);return r&&(e.include_docs&&e.attachments&&e.binary&&o(t),n&&y.results.push(t),e.onChange(t)),
r})}else if(r)return e.aborted=!0,void e.complete(r);i&&i.last_seq&&(v=i.last_seq);var l=a&&0>=u||i&&t>s||e.descending;(!e.continuous||a&&0>=u)&&l?e.complete(null,y):setTimeout(function(){g(v,b)},0)}};return g(e.since||0,b),{cancel:function(){e.aborted=!0,_&&_.abort()}}},T.revsDiff=f("revsDiff",function(e,t,n){"function"==typeof t&&(n=t,t={}),r(t,{method:"POST",url:s(O,"_revs_diff"),body:e},n)}),T._close=function(e){e()},T._destroy=function(e,t){r(e,{url:s(O,""),method:"DELETE"},function(e,r){return e&&e.status&&404!==e.status?t(e):void t(null,r)})}}function d(e){e.adapter("http",f,!1),e.adapter("https",f,!1)}var h=r(39),p=n(r(41)),_=n(r(61)),v=n(r(45)),m=r(47),g=r(53),y=r(48),b=n(r(28)),w=25,k=50,E={},S=1800,A=b("pouchdb:http");f.valid=function(){return!0},e.exports=d},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(){for(var e={},t=new h(function(t,r){e.resolve=t,e.reject=r}),r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.promise=t,h.resolve().then(function(){return fetch.apply(null,r)}).then(function(t){e.resolve(t)})["catch"](function(t){e.reject(t)}),e}function i(e,t){var r,n,i,a=new Headers,u={method:e.method,credentials:"include",headers:a};return e.json&&(a.set("Accept","application/json"),a.set("Content-Type",e.headers["Content-Type"]||"application/json")),e.body&&e.body instanceof Blob?d.readAsArrayBuffer(e.body,function(e){u.body=e}):e.body&&e.processData&&"string"!=typeof e.body?u.body=JSON.stringify(e.body):"body"in e?u.body=e.body:u.body=null,Object.keys(e.headers).forEach(function(t){e.headers.hasOwnProperty(t)&&a.set(t,e.headers[t])}),r=o(e.url,u),e.timeout>0&&(n=setTimeout(function(){r.reject(new Error("Load timeout for resource: "+e.url))},e.timeout)),r.promise.then(function(t){return i={statusCode:t.status},e.timeout>0&&clearTimeout(n),i.statusCode>=200&&i.statusCode<300?e.binary?t.blob():t.text():t.json()}).then(function(e){i.statusCode>=200&&i.statusCode<300?t(null,i,e):t(e,i)})["catch"](function(e){t(e,i)}),{abort:r.reject}}function a(e,t){var r,n,o=!1,i=function(){r.abort()},a=function(){o=!0,r.abort()};r=e.xhr?new e.xhr:new XMLHttpRequest;try{r.open(e.method,e.url)}catch(u){t(u,{statusCode:413})}r.withCredentials="withCredentials"in e?e.withCredentials:!0,"GET"===e.method?delete e.headers["Content-Type"]:e.json&&(e.headers.Accept="application/json",e.headers["Content-Type"]=e.headers["Content-Type"]||"application/json",e.body&&e.processData&&"string"!=typeof e.body&&(e.body=JSON.stringify(e.body))),e.binary&&(r.responseType="arraybuffer"),"body"in e||(e.body=null);for(var s in e.headers)e.headers.hasOwnProperty(s)&&r.setRequestHeader(s,e.headers[s]);return e.timeout>0&&(n=setTimeout(a,e.timeout),r.onprogress=function(){clearTimeout(n),4!==r.readyState&&(n=setTimeout(a,e.timeout))},"undefined"!=typeof r.upload&&(r.upload.onprogress=r.onprogress)),r.onreadystatechange=function(){if(4===r.readyState){var n={statusCode:r.status};if(r.status>=200&&r.status<300){var i;i=e.binary?d.blob([r.response||""],{type:r.getResponseHeader("Content-Type")}):r.responseText,t(null,n,i)}else{var a={};if(o)a=new Error("ETIMEDOUT"),n.statusCode=400;else try{a=JSON.parse(r.response)}catch(u){}t(a,n)}}},e.body&&e.body instanceof Blob?d.readAsArrayBuffer(e.body,function(e){r.send(e)}):r.send(e.body),{abort:i}}function u(){try{return new XMLHttpRequest,!0}catch(e){return!1}}function s(e,t){return m||e.xhr?a(e,t):i(e,t)}function c(){return""}function l(e,t){function r(t,r,n){if(!e.binary&&e.json&&"string"==typeof t)try{t=JSON.parse(t)}catch(o){return n(o)}Array.isArray(t)&&(t=t.map(function(e){return e.error||e.missing?_.generateErrorFromResponse(e):e})),e.binary&&g(t,r),n(null,t,r)}function n(e,t){var r,n;if(e.code&&e.status){var o=new Error(e.message||e.code);return o.status=e.status,t(o)}if(e.message&&"ETIMEDOUT"===e.message)return t(e);try{r=JSON.parse(e.responseText),n=_.generateErrorFromResponse(r)}catch(i){n=_.generateErrorFromResponse(e)}t(n)}e=v.clone(e);var o={method:"GET",headers:{},json:!0,processData:!0,timeout:1e4,cache:!1};return e=p.extend(o,e),e.json&&(e.binary||(e.headers.Accept="application/json"),e.headers["Content-Type"]=e.headers["Content-Type"]||"application/json"),e.binary&&(e.encoding=null,e.json=!1),e.processData||(e.json=!1),s(e,function(o,i,a){if(o)return o.status=i?i.statusCode:400,n(o,t);var u,s=i.headers&&i.headers["content-type"],l=a||c();if(!e.binary&&(e.json||!e.processData)&&"object"!=typeof l&&(/json/.test(s)||/^[\s]*\{/.test(l)&&/\}[\s]*$/.test(l)))try{l=JSON.parse(l.toString())}catch(f){}i.statusCode>=200&&i.statusCode<300?r(l,i,t):(u=_.generateErrorFromResponse(l),u.status=i.statusCode,t(u))})}function f(e,t){var r=navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",n=-1!==r.indexOf("safari")&&-1===r.indexOf("chrome"),o=-1!==r.indexOf("msie"),i=-1!==r.indexOf("edge"),a=n||(o||i)&&"GET"===e.method,u="cache"in e?e.cache:!0,s=/^blob:/.test(e.url);if(!s&&(a||!u)){var c=-1!==e.url.indexOf("?");e.url+=(c?"&":"?")+"_nonce="+Date.now()}return l(e,t)}var d=r(53),h=n(r(41)),p=r(39),_=r(48),v=r(47),m=u(),g=function(){};e.exports=f},function(e,t,r){(function(t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(){this.promise=new W(function(e){e()})}function i(e){var t=e.db,r=e.viewName,n=e.map,o=e.reduce,i=e.temporary,a=n.toString()+(o&&o.toString())+"undefined";if(!i&&t._cachedViews){var u=t._cachedViews[a];if(u)return W.resolve(u)}return t.info().then(function(e){function u(e){e.views=e.views||{};var t=r;-1===t.indexOf("/")&&(t=r+"/"+r);var n=e.views[t]=e.views[t]||{};if(!n[s])return n[s]=!0,e}var s=e.db_name+"-mrview-"+(i?"temp":V.stringMd5(a));return U.upsert(t,"_local/mrviews",u).then(function(){return t.registerDependentDatabase(s).then(function(e){var r=e.db;r.auto_compaction=!0;var u={name:s,db:r,sourceDB:t,adapter:t.adapter,mapFun:n,reduceFun:o};return u.db.get("_local/lastSeq")["catch"](function(e){if(404!==e.status)throw e}).then(function(e){return u.seq=e?e.seq:0,i||(t._cachedViews=t._cachedViews||{},t._cachedViews[a]=u,u.db.once("destroyed",function(){delete t._cachedViews[a]})),u})})})})}function a(e,t,r,n,o,i){return z("return ("+e.replace(/;\s*$/,"")+");",{emit:t,sum:r,log:n,isArray:o,toJSON:i})}function u(e){return-1===e.indexOf("/")?[e,e]:e.split("/")}function s(e){return 1===e.length&&/^1-/.test(e[0].rev)}function c(e,t){try{e.emit("error",t)}catch(r){U.guardedConsole("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),U.guardedConsole("error",t)}}function l(e,t,r){try{return{output:t.apply(null,r)}}catch(n){return c(e,n),{error:n}}}function f(e,t){var r=H.collate(e.key,t.key);return 0!==r?r:H.collate(e.value,t.value)}function d(e,t,r){return r=r||0,"number"==typeof t?e.slice(r,t+r):r>0?e.slice(r):e}function h(e){var t=e.value,r=t&&"object"==typeof t&&t._id||e.id;return r}function p(e){e.rows.forEach(function(e){var t=e.doc&&e.doc._attachments;t&&Object.keys(t).forEach(function(e){var r=t[e];t[e].data=J.base64StringToBlobOrBuffer(r.data,r.content_type)})})}function _(e){return function(t){return e.include_docs&&e.attachments&&e.binary&&p(t),t}}function v(e){var t="builtin "+e+" function requires map values to be numbers or number arrays";return new F(t)}function m(e){for(var t=0,r=0,n=e.length;n>r;r++){var o=e[r];if("number"!=typeof o){if(!Array.isArray(o))throw v("_sum");t="number"==typeof t?[t]:t;for(var i=0,a=o.length;a>i;i++){var u=o[i];if("number"!=typeof u)throw v("_sum");"undefined"==typeof t[i]?t.push(u):t[i]+=u}}else"number"==typeof t?t+=o:t[0]+=o}return t}function g(e,t,r,n){var o=t[e];"undefined"!=typeof o&&(n&&(o=encodeURIComponent(JSON.stringify(o))),r.push(e+"="+o))}function y(e){if("undefined"!=typeof e){var t=Number(e);return isNaN(t)||t!==parseInt(e,10)?e:t}}function b(e){return e.group_level=y(e.group_level),e.limit=y(e.limit),e.skip=y(e.skip),e}function w(e){if(e){if("number"!=typeof e)return new M('Invalid value for integer: "'+e+'"');if(0>e)return new M('Invalid value for positive integer: "'+e+'"')}}function k(e,t){var r=e.descending?"endkey":"startkey",n=e.descending?"startkey":"endkey";if("undefined"!=typeof e[r]&&"undefined"!=typeof e[n]&&H.collate(e[r],e[n])>0)throw new M("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(t.reduce&&e.reduce!==!1){if(e.include_docs)throw new M("{include_docs:true} is invalid for reduce");if(e.keys&&e.keys.length>1&&!e.group&&!e.group_level)throw new M("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(t){var r=w(e[t]);if(r)throw r})}function E(e,t,r){var n,o=[],i="GET";if(g("reduce",r,o),g("include_docs",r,o),g("attachments",r,o),g("limit",r,o),g("descending",r,o),g("group",r,o),g("group_level",r,o),g("skip",r,o),g("stale",r,o),g("conflicts",r,o),g("startkey",r,o,!0),g("start_key",r,o,!0),g("endkey",r,o,!0),g("end_key",r,o,!0),g("inclusive_end",r,o),g("key",r,o,!0),o=o.join("&"),o=""===o?"":"?"+o,"undefined"!=typeof r.keys){var a=2e3,s="keys="+encodeURIComponent(JSON.stringify(r.keys));s.length+o.length+1<=a?o+=("?"===o[0]?"&":"?")+s:(i="POST","string"==typeof t?n={keys:r.keys}:t.keys=r.keys)}if("string"==typeof t){var c=u(t);return e.request({method:i,url:"_design/"+c[0]+"/_view/"+c[1]+o,body:n}).then(_(r))}return n=n||{},Object.keys(t).forEach(function(e){Array.isArray(t[e])?n[e]=t[e]:n[e]=t[e].toString()}),e.request({method:"POST",url:"_temp_view"+o,body:n}).then(_(r))}function S(e,t,r){return new W(function(n,o){e._query(t,r,function(e,t){return e?o(e):void n(t)})})}function A(e){return new W(function(t,r){e._viewCleanup(function(e,n){return e?r(e):void t(n)})})}function T(e){return function(t){if(404===t.status)return e;throw t}}function x(e,t,r){function n(){return s(f)?W.resolve(u):t.db.get(a)["catch"](T(u))}function o(e){return e.keys.length?t.db.allDocs({keys:e.keys,include_docs:!0}):W.resolve({rows:[]})}function i(e,t){for(var r=[],n={},o=0,i=t.rows.length;i>o;o++){var a=t.rows[o],u=a.doc;if(u&&(r.push(u),n[u._id]=!0,u._deleted=!l[u._id],!u._deleted)){var s=l[u._id];"value"in s&&(u.value=s.value)}}var c=Object.keys(l);return c.forEach(function(e){if(!n[e]){var t={_id:e},o=l[e];"value"in o&&(t.value=o.value),r.push(t)}}),e.keys=G.uniq(c.concat(e.keys)),r.push(e),r}var a="_local/doc_"+e,u={_id:a,keys:[]},c=r[e],l=c.indexableKeysToKeyValues,f=c.changes;return n().then(function(e){return o(e).then(function(t){return i(e,t)})})}function O(e,t,r){var n="_local/lastSeq";return e.db.get(n)["catch"](T({_id:n,seq:0})).then(function(n){var o=Object.keys(t);return W.all(o.map(function(r){return x(r,e,t)})).then(function(t){var o=U.flatten(t);return n.seq=r,o.push(n),e.db.bulkDocs({docs:o})})})}function C(e){var t="string"==typeof e?e:e.name,r=$[t];return r||(r=$[t]=new o),r}function N(e){return G.sequentialize(C(e),function(){return R(e)})()}function R(e){function t(e,t){var r={id:i._id,key:H.normalizeKey(e)};"undefined"!=typeof t&&null!==t&&(r.value=H.normalizeKey(t)),n.push(r)}function r(t,r){return function(){return O(e,t,r)}}var n,i,u;if("function"==typeof e.mapFun&&2===e.mapFun.length){var s=e.mapFun;u=function(e){return s(e,t)}}else u=a(e.mapFun.toString(),t,m,Y,Array.isArray,JSON.parse);var c=e.seq||0,d=new o;return new W(function(t,o){function a(){d.finish().then(function(){e.seq=c,t()})}function s(){function t(e){o(e)}e.sourceDB.changes({conflicts:!0,include_docs:!0,style:"all_docs",since:c,limit:X}).on("complete",function(t){var o=t.results;if(!o.length)return a();for(var h={},p=0,_=o.length;_>p;p++){var v=o[p];if("_"!==v.doc._id[0]){n=[],i=v.doc,i._deleted||l(e.sourceDB,u,[i]),n.sort(f);for(var m,g={},y=0,b=n.length;b>y;y++){var w=n[y],k=[w.key,w.id];0===H.collate(w.key,m)&&k.push(y);var E=H.toIndexableString(k);g[E]=w,m=w.key}h[v.doc._id]={indexableKeysToKeyValues:g,changes:v.changes}}c=v.seq}return d.add(r(h,c)),o.length<X?a():s()}).on("error",t)}s()})}function I(e,t,r){0===r.group_level&&delete r.group_level;var n,o=r.group||r.group_level;n=Z[e.reduceFun]?Z[e.reduceFun]:a(e.reduceFun.toString(),null,m,Y,Array.isArray,JSON.parse);var i=[],u=isNaN(r.group_level)?Number.POSITIVE_INFINITY:r.group_level;t.forEach(function(e){var t=i[i.length-1],r=o?e.key:null;return o&&Array.isArray(r)&&(r=r.slice(0,u)),t&&0===H.collate(t.groupKey,r)?(t.keys.push([e.key,e.id]),void t.values.push(e.value)):void i.push({keys:[[e.key,e.id]],values:[e.value],groupKey:r})}),t=[];for(var s=0,c=i.length;c>s;s++){var f=i[s],h=l(e.sourceDB,n,[f.keys,f.values,!1]);if(h.error&&h.error instanceof F)throw h.error;t.push({value:h.error?null:h.output,key:f.groupKey})}return{rows:d(t,r.limit,r.skip)}}function q(e,t){return G.sequentialize(C(e),function(){return j(e,t)})()}function j(e,t){function r(t){return t.include_docs=!0,e.db.allDocs(t).then(function(e){return o=e.total_rows,e.rows.map(function(e){if("value"in e.doc&&"object"==typeof e.doc.value&&null!==e.doc.value){var t=Object.keys(e.doc.value).sort(),r=["id","key","value"];if(!(r>t||t>r))return e.doc.value}var n=H.parseIndexableString(e.doc._id);return{key:n[0],id:n[1],value:"value"in e.doc?e.doc.value:null}})})}function n(r){var n;if(n=i?I(e,r,t):{total_rows:o,offset:a,rows:r},t.include_docs){var u=G.uniq(r.map(h));return e.sourceDB.allDocs({keys:u,include_docs:!0,conflicts:t.conflicts,attachments:t.attachments,binary:t.binary}).then(function(e){var t={};return e.rows.forEach(function(e){e.doc&&(t["$"+e.id]=e.doc)}),r.forEach(function(e){var r=h(e),n=t["$"+r];n&&(e.doc=n)}),n})}return n}var o,i=e.reduceFun&&t.reduce!==!1,a=t.skip||0;if("undefined"==typeof t.keys||t.keys.length||(t.limit=0,delete t.keys),"undefined"!=typeof t.keys){var u=t.keys,s=u.map(function(e){var t={startkey:H.toIndexableString([e]),endkey:H.toIndexableString([e,{}])};return r(t)});return W.all(s).then(U.flatten).then(n)}var c={descending:t.descending};if(t.start_key&&(t.startkey=t.start_key),t.end_key&&(t.endkey=t.end_key),"undefined"!=typeof t.startkey&&(c.startkey=t.descending?H.toIndexableString([t.startkey,{}]):H.toIndexableString([t.startkey])),"undefined"!=typeof t.endkey){var l=t.inclusive_end!==!1;t.descending&&(l=!l),c.endkey=H.toIndexableString(l?[t.endkey,{}]:[t.endkey])}if("undefined"!=typeof t.key){var f=H.toIndexableString([t.key]),d=H.toIndexableString([t.key,{}]);c.descending?(c.endkey=f,c.startkey=d):(c.startkey=f,c.endkey=d)}return i||("number"==typeof t.limit&&(c.limit=t.limit),c.skip=a),r(c).then(n)}function L(e){return e.request({method:"POST",url:"_view_cleanup"})}function D(e){return e.get("_local/mrviews").then(function(t){var r={};Object.keys(t.views).forEach(function(e){var t=u(e),n="_design/"+t[0],o=t[1];r[n]=r[n]||{},r[n][o]=!0});var n={keys:Object.keys(r),include_docs:!0};return e.allDocs(n).then(function(n){var o={};n.rows.forEach(function(e){var n=e.key.substring(8);Object.keys(r[e.key]).forEach(function(r){var i=n+"/"+r;t.views[i]||(i=r);var a=Object.keys(t.views[i]),u=e.doc&&e.doc.views&&e.doc.views[r];a.forEach(function(e){o[e]=o[e]||u})})});var i=Object.keys(o).filter(function(e){return!o[e]}),a=i.map(function(t){return G.sequentialize(C(t),function(){return new e.constructor(t,e.__opts).destroy()})()});return W.all(a).then(function(){return{ok:!0}})})},T({ok:!0}))}function P(e,r,n){if("http"===e.type())return E(e,r,n);if("function"==typeof e._query)return S(e,r,n);if("string"!=typeof r){k(n,r);var o={db:e,viewName:"temp_view/temp_view",map:r.map,reduce:r.reduce,temporary:!0};return Q.add(function(){return i(o).then(function(e){function t(){return e.db.destroy()}return G.fin(N(e).then(function(){return q(e,n)}),t)})}),Q.finish()}var a=r,s=u(a),c=s[0],l=s[1];return e.get("_design/"+c).then(function(r){var o=r.views&&r.views[l];if(!o||"string"!=typeof o.map)throw new B("ddoc "+c+" has no view named "+l);k(n,o);var u={db:e,viewName:a,map:o.map,reduce:o.reduce};return i(u).then(function(e){return"ok"===n.stale||"update_after"===n.stale?("update_after"===n.stale&&t.nextTick(function(){N(e)}),q(e,n)):N(e).then(function(){return q(e,n)})})})}function M(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,M)}catch(t){}}function B(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,B)}catch(t){}}function F(e){this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,F)}catch(t){}}var U=r(47),J=r(53),H=r(63),W=n(r(41)),V=r(54),z=n(r(50)),G=r(65),K=n(r(40));o.prototype.add=function(e){return this.promise=this.promise["catch"](function(){}).then(function(){return e()}),this.promise},o.prototype.finish=function(){return this.promise};var $={},Q=new o,X=50,Y=U.guardedConsole.bind(null,"log"),Z={_sum:function(e,t){return m(t)},_count:function(e,t){return t.length},_stats:function(e,t){function r(e){for(var t=0,r=0,n=e.length;n>r;r++){var o=e[r];t+=o*o}return t}return{sum:m(t),min:Math.min.apply(null,t),max:Math.max.apply(null,t),count:t.length,sumsqr:r(t)}}},ee=G.callbackify(function(){var e=this;return"http"===e.type()?L(e):"function"==typeof e._viewCleanup?A(e):D(e)}),te=function(e,t,r){"function"==typeof t&&(r=t,t={}),t=t?b(t):{},"function"==typeof e&&(e={map:e});var n=this,o=W.resolve().then(function(){return P(n,e,t)});return G.promisedCallback(o,r),o};K(M,Error),K(B,Error),K(F,Error);var re={query:te,viewCleanup:ee};e.exports=re}).call(t,r(2))},function(e,t,r){"use strict";function n(e){if(null!==e)switch(typeof e){case"boolean":return e?1:0;case"number":return l(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var r=Array.isArray(e),n=r?e:Object.keys(e),o=-1,i=n.length,a="";if(r)for(;++o<i;)a+=t.toIndexableString(n[o]);else for(;++o<i;){var u=n[o];a+=t.toIndexableString(u)+t.toIndexableString(e[u])}return a}return""}function o(e,t){var r,n=t,o="1"===e[t];if(o)r=0,t++;else{var i="0"===e[t];t++;var a="",u=e.substring(t,t+d),s=parseInt(u,10)+f;for(i&&(s=-s),t+=d;;){var c=e[t];if("\x00"===c)break;a+=c,t++}a=a.split("."),r=1===a.length?parseInt(a,10):parseFloat(a[0]+"."+a[1]),i&&(r-=10),0!==s&&(r=parseFloat(r+"e"+s))}return{num:r,length:t-n}}function i(e,t){var r=e.pop();if(t.length){var n=t[t.length-1];r===n.element&&(t.pop(),n=t[t.length-1]);var o=n.element,i=n.index;if(Array.isArray(o))o.push(r);else if(i===e.length-2){var a=e.pop();o[a]=r}else e.push(r)}}function a(e,r){for(var n=Math.min(e.length,r.length),o=0;n>o;o++){var i=t.collate(e[o],r[o]);if(0!==i)return i}return e.length===r.length?0:e.length>r.length?1:-1}function u(e,t){return e===t?0:e>t?1:-1}function s(e,r){for(var n=Object.keys(e),o=Object.keys(r),i=Math.min(n.length,o.length),a=0;i>a;a++){var u=t.collate(n[a],o[a]);if(0!==u)return u;if(u=t.collate(e[n[a]],r[o[a]]),0!==u)return u}return n.length===o.length?0:n.length>o.length?1:-1}function c(e){var t=["boolean","number","string","object"],r=t.indexOf(typeof e);return~r?null===e?1:Array.isArray(e)?5:3>r?r+2:r+3:Array.isArray(e)?5:void 0}function l(e){if(0===e)return"1";var t=e.toExponential().split(/e\+?/),r=parseInt(t[1],10),n=0>e,o=n?"0":"2",i=(n?-r:r)-f,a=p.padLeft(i.toString(),"0",d);o+=h+a;var u=Math.abs(parseFloat(t[0]));n&&(u=10-u);var s=u.toFixed(20);return s=s.replace(/\.?0+$/,""),o+=h+s}var f=-324,d=3,h="",p=r(64);t.collate=function(e,r){if(e===r)return 0;e=t.normalizeKey(e),r=t.normalizeKey(r);var n=c(e),o=c(r);if(n-o!==0)return n-o;if(null===e)return 0;switch(typeof e){case"number":return e-r;case"boolean":return e===r?0:r>e?-1:1;case"string":return u(e,r)}return Array.isArray(e)?a(e,r):s(e,r)},t.normalizeKey=function(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-(1/0)||isNaN(e)?null:e;case"object":var r=e;if(Array.isArray(e)){var n=e.length;e=new Array(n);for(var o=0;n>o;o++)e[o]=t.normalizeKey(r[o])}else{if(e instanceof Date)return e.toJSON();if(null!==e){e={};for(var i in r)if(r.hasOwnProperty(i)){var a=r[i];"undefined"!=typeof a&&(e[i]=t.normalizeKey(a))}}}}return e},t.toIndexableString=function(e){var r="\x00";return e=t.normalizeKey(e),c(e)+h+n(e)+r},t.parseIndexableString=function(e){for(var t=[],r=[],n=0;;){var a=e[n++];if("\x00"!==a)switch(a){case"1":t.push(null);break;case"2":t.push("1"===e[n]),n++;break;case"3":var u=o(e,n);t.push(u.num),n+=u.length;break;case"4":for(var s="";;){var c=e[n];if("\x00"===c)break;s+=c,n++}s=s.replace(/\u0001\u0001/g,"\x00").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(s);break;case"5":var l={element:[],index:t.length};t.push(l.element),r.push(l);break;case"6":var f={element:{},index:t.length};t.push(f.element),r.push(f);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+a)}else{if(1===t.length)return t.pop();i(t,r)}}}},function(e,t){"use strict";function r(e,t,r){for(var n="",o=r-e.length;n.length<o;)n+=t;return n}t.padLeft=function(e,t,n){var o=r(e,t,n);return o+e},t.padRight=function(e,t,n){var o=r(e,t,n);return e+o},t.stringLexCompare=function(e,t){var r,n=e.length,o=t.length;for(r=0;n>r;r++){if(r===o)return 1;var i=e.charAt(r),a=t.charAt(r);if(i!==a)return a>i?-1:1}return o>n?-1:0},t.intToDecimalForm=function(e){var t=0>e,r="";do{var n=t?-Math.ceil(e%10):Math.floor(e%10);r=n+r,e=t?Math.ceil(e/10):Math.floor(e/10)}while(e);return t&&"0"!==r&&(r="-"+r),r}},function(e,t,r){(function(e){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(45)),i=function(t,r){return r&&t.then(function(t){e.nextTick(function(){r(null,t)})},function(t){e.nextTick(function(){r(t)})}),t},a=function(e){return o(function(t){var r=t.pop(),n=e.apply(this,t);return"function"==typeof r&&i(n,r),n})},u=function(e,t){return e.then(function(e){return t().then(function(){return e})},function(e){return t().then(function(){throw e})})},s=function(e,t){return function(){var r=arguments,n=this;return e.add(function(){return t.apply(n,r)})}},c=function(e){for(var t={},r=0,n=e.length;n>r;r++)t["$"+e[r]]=!0;var o=Object.keys(t),i=new Array(o.length);for(r=0,n=o.length;n>r;r++)i[r]=o[r].substring(1);return i};t.uniq=c,t.sequentialize=s,t.fin=u,t.callbackify=a,t.promisedCallback=i}).call(t,r(2))},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(e){return/^1-/.test(e)}function i(e,t,r){return!e._attachments||!e._attachments[r]||e._attachments[r].digest!==t._attachments[r].digest}function a(e,t){var r=Object.keys(t._attachments);return y.all(r.map(function(r){return e.getAttachment(t._id,r,{rev:t._rev})}))}function u(e,t,r){var n="http"===t.type()&&"http"!==e.type(),o=Object.keys(r._attachments);return n?e.get(r._id).then(function(n){return y.all(o.map(function(o){return i(n,r,o)?t.getAttachment(r._id,o):e.getAttachment(n._id,o)}))})["catch"](function(e){if(404!==e.status)throw e;return a(t,r)}):a(t,r)}function s(e){var t=[];return Object.keys(e).forEach(function(r){var n=e[r].missing;n.forEach(function(e){t.push({id:r,rev:e})})}),{docs:t,revs:!0}}function c(e,t,r,n){function i(){var o=s(r);if(o.docs.length)return e.bulkGet(o).then(function(r){if(n.cancelled)throw new Error("cancelled");return y.all(r.results.map(function(r){return y.all(r.docs.map(function(r){var n=r.ok;return r.error&&(h=!1),n&&n._attachments?u(t,e,n).then(function(e){var t=Object.keys(n._attachments);return e.forEach(function(e,r){var o=n._attachments[t[r]];delete o.stub,delete o.length,o.data=e}),n}):n}))})).then(function(e){d=d.concat(g.flatten(e).filter(Boolean))})})}function a(e){return e._attachments&&Object.keys(e._attachments).length>0}function c(t){return e.allDocs({keys:t,include_docs:!0}).then(function(e){if(n.cancelled)throw new Error("cancelled");e.rows.forEach(function(e){!e.deleted&&e.doc&&o(e.value.rev)&&!a(e.doc)&&(d.push(e.doc),delete r[e.id])})})}function l(){var e=Object.keys(r).filter(function(e){var t=r[e].missing;return 1===t.length&&o(t[0])});return e.length>0?c(e):void 0}function f(){return{ok:h,docs:d}}r=g.clone(r);var d=[],h=!0;return y.resolve().then(l).then(i).then(f)}function l(e,t,r,n){return e.retry===!1?(t.emit("error",r),void t.removeAllListeners()):("function"!=typeof e.back_off_function&&(e.back_off_function=g.defaultBackOff),t.emit("requestError",r),"active"!==t.state&&"pending"!==t.state||(t.emit("paused",r),t.state="stopped",t.once("active",function(){e.current_back_off=T})),e.current_back_off=e.current_back_off||T,e.current_back_off=e.back_off_function(e.current_back_off),void setTimeout(n,e.current_back_off))}function f(e,t,r,n,o){function i(){return C?y.resolve():w(e,t,r).then(function(r){O=r,C=new b(e,t,O,n)})}function a(){if(J=[],0!==x.docs.length){var e=x.docs;return t.bulkDocs({docs:e,new_edits:!1}).then(function(t){if(n.cancelled)throw v(),new Error("cancelled");var r=[],i={};t.forEach(function(e){e.error&&(o.doc_write_failures++,r.push(e),i[e.id]=e)}),U=U.concat(r),o.docs_written+=x.docs.length-r.length;var a=r.filter(function(e){return"unauthorized"!==e.name&&"forbidden"!==e.name});if(e.forEach(function(e){var t=i[e._id];t?n.emit("denied",g.clone(t)):J.push(e)}),a.length>0){var u=new Error("bulkDocs error");throw u.other_errors=r,_("target.bulkDocs failed to write docs",u),new Error("bulkWrite partial failure")}},function(t){throw o.doc_write_failures+=e.length,t})}}function u(){if(x.error)throw new Error("There was a problem getting docs.");o.last_seq=L=x.seq;var e=g.clone(o);return J.length&&(e.docs=J,n.emit("change",e)),I=!0,C.writeCheckpoint(x.seq,H).then(function(){if(I=!1,n.cancelled)throw v(),new Error("cancelled");x=void 0,S()})["catch"](T)}function s(){var e={};return x.changes.forEach(function(t){"_user/"!==t.id&&(e[t.id]=t.changes.map(function(e){return e.rev}))}),t.revsDiff(e).then(function(e){if(n.cancelled)throw v(),new Error("cancelled");x.diffs=e})}function d(){return c(e,t,x.diffs,n).then(function(e){x.error=!e.ok,e.docs.forEach(function(e){delete x.diffs[e._id],o.docs_read++,x.docs.push(e)})})}function h(){if(!n.cancelled&&!x){if(0===N.length)return void p(!0);x=N.shift(),s().then(d).then(a).then(u).then(h)["catch"](function(e){_("batch processing terminated with error",e)})}}function p(e){return 0===R.changes.length?void(0!==N.length||x||((D&&W.live||q)&&(n.state="pending",n.emit("paused")),q&&v())):void((e||q||R.changes.length>=P)&&(N.push(R),R={seq:0,changes:[],docs:[]},"pending"!==n.state&&"stopped"!==n.state||(n.state="active",n.emit("active")),h()))}function _(e,t){j||(t.message||(t.message=e),o.ok=!1,o.status="aborting",o.errors.push(t),U=U.concat(t),N=[],R={seq:0,changes:[],docs:[]},v())}function v(){if(!(j||n.cancelled&&(o.status="cancelled",I))){o.status=o.status||"complete",o.end_time=new Date,o.last_seq=L,j=!0;var i=U.filter(function(e){return"unauthorized"!==e.name&&"forbidden"!==e.name});if(i.length>0){var a=U.pop();U.length>0&&(a.other_errors=U),a.result=o,l(r,n,a,function(){f(e,t,r,n)})}else o.errors=U,n.emit("complete",o),n.removeAllListeners()}}function m(e){if(n.cancelled)return v();var t=g.filterChange(r)(e);t&&(R.seq=e.seq,R.changes.push(e),p(0===N.length&&W.live))}function k(e){if(B=!1,n.cancelled)return v();if(e.results.length>0)W.since=e.last_seq,S(),p(!0);else{var t=function(){D?(W.live=!0,S()):q=!0,p(!0)};x||0!==e.results.length?t():(I=!0,C.writeCheckpoint(e.last_seq,H).then(function(){I=!1,o.last_seq=L=e.last_seq,t()})["catch"](T))}}function E(e){return B=!1,n.cancelled?v():void _("changes rejected",e)}function S(){function t(){i.cancel()}function o(){n.removeListener("cancel",t)}if(!B&&!q&&N.length<M){B=!0,n._changes&&(n.removeListener("cancel",n._abortChanges),n._changes.cancel()),n.once("cancel",t);var i=e.changes(W).on("change",m);i.then(o,o),i.then(k)["catch"](E),r.retry&&(n._changes=i,n._abortChanges=t)}}function A(){i().then(function(){return n.cancelled?void v():C.getCheckpoint().then(function(e){L=e,W={since:L,limit:P,batch_size:P,style:"all_docs",doc_ids:F,return_docs:!0},r.filter&&("string"!=typeof r.filter?W.include_docs=!0:W.filter=r.filter),"heartbeat"in r&&(W.heartbeat=r.heartbeat),"timeout"in r&&(W.timeout=r.timeout),r.query_params&&(W.query_params=r.query_params),r.view&&(W.view=r.view),S()})})["catch"](function(e){_("getCheckpoint rejected with ",e)})}function T(e){throw I=!1,_("writeCheckpoint completed with error",e),e}var x,O,C,N=[],R={seq:0,changes:[],docs:[]},I=!1,q=!1,j=!1,L=0,D=r.continuous||r.live||!1,P=r.batch_size||100,M=r.batches_limit||10,B=!1,F=r.doc_ids,U=[],J=[],H=g.uuid();o=o||{ok:!0,start_time:new Date,docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var W={};return n.ready(e,t),n.cancelled?void v():(n._addedListeners||(n.once("cancel",v),"function"==typeof r.complete&&(n.once("error",r.complete),n.once("complete",function(e){r.complete(null,e)})),n._addedListeners=!0),void("undefined"==typeof r.since?A():i().then(function(){return I=!0,C.writeCheckpoint(r.since,H)}).then(function(){return I=!1,n.cancelled?void v():(L=r.since,void A())})["catch"](T)))}function d(){k.EventEmitter.call(this),this.cancelled=!1,this.state="pending";var e=this,t=new y(function(t,r){e.once("complete",t),e.once("error",r)});e.then=function(e,r){return t.then(e,r)},e["catch"]=function(e){return t["catch"](e)},e["catch"](function(){})}function h(e,t){var r=t.PouchConstructor;return"string"==typeof e?new r(e,t):e}function p(e,t,r,n){if("function"==typeof r&&(n=r,r={}),"undefined"==typeof r&&(r={}),r.doc_ids&&!Array.isArray(r.doc_ids))throw S.createError(S.BAD_REQUEST,"`doc_ids` filter parameter is not a list.");r.complete=n,r=g.clone(r),r.continuous=r.continuous||r.live,r.retry="retry"in r?r.retry:!1,r.PouchConstructor=r.PouchConstructor||this;var o=new d(r),i=h(e,r),a=h(t,r);return f(i,a,r,o),o}function _(e,t,r,n){return"function"==typeof r&&(n=r,r={}),"undefined"==typeof r&&(r={}),r=g.clone(r),r.PouchConstructor=r.PouchConstructor||this,e=h(e,r),t=h(t,r),new v(e,t,r,n)}function v(e,t,r,n){function o(e){h.emit("change",{direction:"pull",change:e})}function i(e){h.emit("change",{direction:"push",change:e})}function a(e){h.emit("denied",{direction:"push",doc:e})}function u(e){h.emit("denied",{direction:"pull",doc:e})}function s(){h.pushPaused=!0,h.pullPaused&&h.emit("paused")}function c(){h.pullPaused=!0,h.pushPaused&&h.emit("paused")}function l(){h.pushPaused=!1,h.pullPaused&&h.emit("active",{direction:"push"})}function f(){h.pullPaused=!1,h.pushPaused&&h.emit("active",{direction:"pull"})}function d(e){return function(t,r){var n="change"===t&&(r===o||r===i),d="denied"===t&&(r===u||r===a),p="paused"===t&&(r===c||r===s),_="active"===t&&(r===f||r===l);(n||d||p||_)&&(t in m||(m[t]={}),m[t][e]=!0,2===Object.keys(m[t]).length&&h.removeAllListeners(t))}}var h=this;this.canceled=!1;var _=r.push?A.extend({},r,r.push):r,v=r.pull?A.extend({},r,r.pull):r;this.push=p(e,t,_),this.pull=p(t,e,v),this.pushPaused=!0,this.pullPaused=!0;var m={};r.live&&(this.push.on("complete",h.pull.cancel.bind(h.pull)),this.pull.on("complete",h.push.cancel.bind(h.push))),this.on("newListener",function(e){"change"===e?(h.pull.on("change",o),h.push.on("change",i)):"denied"===e?(h.pull.on("denied",u),h.push.on("denied",a)):"active"===e?(h.pull.on("active",f),h.push.on("active",l)):"paused"===e&&(h.pull.on("paused",c),h.push.on("paused",s))}),this.on("removeListener",function(e){"change"===e?(h.pull.removeListener("change",o),h.push.removeListener("change",i)):"denied"===e?(h.pull.removeListener("denied",u),h.push.removeListener("denied",a)):"active"===e?(h.pull.removeListener("active",f),h.push.removeListener("active",l)):"paused"===e&&(h.pull.removeListener("paused",c),h.push.removeListener("paused",s))}),this.pull.on("removeListener",d("pull")),this.push.on("removeListener",d("push"));var g=y.all([this.push,this.pull]).then(function(e){var t={push:e[0],pull:e[1]};return h.emit("complete",t),n&&n(null,t),h.removeAllListeners(),
t},function(e){if(h.cancel(),n?n(e):h.emit("error",e),h.removeAllListeners(),n)throw e});this.then=function(e,t){return g.then(e,t)},this["catch"]=function(e){return g["catch"](e)}}function m(e){e.replicate=p,e.sync=_}var g=r(47),y=n(r(41)),b=n(r(67)),w=n(r(68)),k=r(46),E=n(r(40)),S=r(48),A=r(39),T=0;E(d,k.EventEmitter),d.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")},d.prototype.ready=function(e,t){function r(){o.cancel()}function n(){e.removeListener("destroyed",r),t.removeListener("destroyed",r)}var o=this;o._readyCalled||(o._readyCalled=!0,e.once("destroyed",r),t.once("destroyed",r),o.once("complete",n))},E(v,k.EventEmitter),v.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())},e.exports=m},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(e,t,r,n,i){return e.get(t)["catch"](function(r){if(404===r.status)return"http"===e.type()&&f.explainError(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:n,_id:t,history:[],replicator:p,version:h};throw r}).then(function(a){return i.cancelled?void 0:(a.history=(a.history||[]).filter(function(e){return e.session_id!==n}),a.history.unshift({last_seq:r,session_id:n}),a.history=a.history.slice(0,_),a.version=h,a.replicator=p,a.session_id=n,a.last_seq=r,e.put(a)["catch"](function(a){if(409===a.status)return o(e,t,r,n,i);throw a}))})}function i(e,t,r,n){this.src=e,this.target=t,this.id=r,this.returnValue=n}function a(e,t){return e.session_id===t.session_id?{last_seq:e.last_seq,history:e.history}:u(e.history,t.history)}function u(e,t){var r=e[0],n=e.slice(1),o=t[0],i=t.slice(1);if(!r||0===t.length)return{last_seq:v,history:[]};var a=r.session_id;if(s(a,t))return{last_seq:r.last_seq,history:e};var c=o.session_id;return s(c,n)?{last_seq:o.last_seq,history:i}:u(n,i)}function s(e,t){var r=t[0],n=t.slice(1);return e&&0!==t.length?e===r.session_id?!0:s(e,n):!1}function c(e){return"number"==typeof e.status&&4===Math.floor(e.status/100)}var l=n(r(41)),f=r(47),d=r(63),h=1,p="pouchdb",_=5,v=0;i.prototype.writeCheckpoint=function(e,t){var r=this;return this.updateTarget(e,t).then(function(){return r.updateSource(e,t)})},i.prototype.updateTarget=function(e,t){return o(this.target,this.id,e,t,this.returnValue)},i.prototype.updateSource=function(e,t){var r=this;return this.readOnlySource?l.resolve(!0):o(this.src,this.id,e,t,this.returnValue)["catch"](function(e){if(c(e))return r.readOnlySource=!0,!0;throw e})};var m={undefined:function(e,t){return 0===d.collate(e.last_seq,t.last_seq)?t.last_seq:0},1:function(e,t){return a(t,e).last_seq}};i.prototype.getCheckpoint=function(){var e=this;return e.target.get(e.id).then(function(t){return e.readOnlySource?l.resolve(t.last_seq):e.src.get(e.id).then(function(e){if(t.version!==e.version)return v;var r;return r=t.version?t.version.toString():"undefined",r in m?m[r](t,e):v},function(r){if(404===r.status&&t.last_seq)return e.src.put({_id:e.id,last_seq:v}).then(function(){return v},function(r){return c(r)?(e.readOnlySource=!0,t.last_seq):v});throw r})})["catch"](function(e){if(404!==e.status)throw e;return v})},e.exports=i},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(e){return Object.keys(e).sort(s.collate).reduce(function(t,r){return t[r]=e[r],t},{})}function i(e,t,r){var n=r.doc_ids?r.doc_ids.sort(s.collate):"",i=r.filter?r.filter.toString():"",c="",l="";return r.filter&&r.query_params&&(c=JSON.stringify(o(r.query_params))),r.filter&&"_view"===r.filter&&(l=r.view.toString()),a.all([e.id(),t.id()]).then(function(e){var t=e[0]+e[1]+i+l+c+n;return new a(function(e){u.binaryMd5(t,e)})}).then(function(e){return e=e.replace(/\//g,".").replace(/\+/g,"_"),"_local/"+e})}var a=n(r(41)),u=r(54),s=r(63);e.exports=i},function(e,t){(function(){"use strict";function t(e){function t(t){return function(r){return e(t,r)}}return t.arity=2,t.func=e,t}function r(e){function t(t){return function(r){return function(n){return e(t,r,n)}}}return t.arity=3,t.func=e,t}function n(e){function t(t){return function(r){return function(n){return function(o){return e(t,r,n,o)}}}}return t.arity=4,t.func=e,t}function o(e){function t(t){return function(r){return function(n){return function(o){return function(i){return e(t,r,n,o,i)}}}}}return t.arity=5,t.func=e,t}function i(e){function t(t){return function(r){return function(n){return function(o){return function(i){return function(a){return e(t,r,n,o,i,a)}}}}}}return t.arity=6,t.func=e,t}function a(e){function t(t){return function(r){return function(n){return function(o){return function(i){return function(a){return function(u){return e(t,r,n,o,i,a,u)}}}}}}}return t.arity=7,t.func=e,t}function u(e){function t(t){return function(r){return function(n){return function(o){return function(i){return function(a){return function(u){return function(s){return e(t,r,n,o,i,a,u,s)}}}}}}}}return t.arity=8,t.func=e,t}function s(e){function t(t){return function(r){return function(n){return function(o){return function(i){return function(a){return function(u){return function(s){return function(c){return e(t,r,n,o,i,a,u,s,c)}}}}}}}}}return t.arity=9,t.func=e,t}function c(e,t,r){return 2===e.arity?e.func(t,r):e(t)(r)}function l(e,t,r,n){return 3===e.arity?e.func(t,r,n):e(t)(r)(n)}function f(e,t,r,n,o){return 4===e.arity?e.func(t,r,n,o):e(t)(r)(n)(o)}function d(e,t,r,n,o,i){return 5===e.arity?e.func(t,r,n,o,i):e(t)(r)(n)(o)(i)}function h(e,t,r,n,o,i,a){return 6===e.arity?e.func(t,r,n,o,i,a):e(t)(r)(n)(o)(i)(a)}function p(e,t,r,n,o,i,a,u){return 7===e.arity?e.func(t,r,n,o,i,a,u):e(t)(r)(n)(o)(i)(a)(u)}var _=function(){function e(e,t){return e/t|0}function n(e,t){return e%t}function o(e,t){if(0===t)throw new Error("Cannot perform mod 0. Division by zero error.");var r=e%t,n=0===e?0:t>0?e>=0?r:r+t:-o(-e,-t);return n===t?0:n}function i(e,t){return Math.log(t)/Math.log(e)}function a(e){return-e}function u(e){return 0>e?-e:e}function s(e,t){return v.cmp(e,t)<0?e:t}function c(e,t){return v.cmp(e,t)>0?e:t}function l(e,t,r){return v.cmp(r,e)<0?e:v.cmp(r,t)>0?t:r}function f(e,t){return{ctor:w[v.cmp(e,t)+1]}}function d(e,t){return e!==t}function h(e){return!e}function p(e){return e===1/0||e===-(1/0)}function _(e){return 0|e}function m(e){return e*Math.PI/180}function g(e){return 2*Math.PI*e}function y(e){var t=e._0,r=e._1;return v.Tuple2(t*Math.cos(r),t*Math.sin(r))}function b(e){var t=e._0,r=e._1;return v.Tuple2(Math.sqrt(t*t+r*r),Math.atan2(r,t))}var w=["LT","EQ","GT"];return{div:t(e),rem:t(n),mod:t(o),pi:Math.PI,e:Math.E,cos:Math.cos,sin:Math.sin,tan:Math.tan,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:t(Math.atan2),degrees:m,turns:g,fromPolar:y,toPolar:b,sqrt:Math.sqrt,logBase:t(i),negate:a,abs:u,min:t(s),max:t(c),clamp:r(l),compare:t(f),xor:t(d),not:h,truncate:_,ceiling:Math.ceil,floor:Math.floor,round:Math.round,toFloat:function(e){return e},isNaN:isNaN,isInfinite:p}}(),v=function(){function e(e,t){for(var r=[{x:e,y:t}];r.length>0;){var n=r.pop(),o=n.x,i=n.y;if(o!==i){if("object"!=typeof o){if("function"==typeof o)throw new Error("Equality error: general function equality is undecidable, and therefore, unsupported");return!1}var a=0;for(var u in o){if(++a,!(u in i))return!1;"ctor"!==u&&r.push({x:o[u],y:i[u]})}if("ctor"in o&&r.push({x:o.ctor,y:i.ctor}),a!==Object.keys(i).length)return!1}}return!0}function r(e,t){var n;if("object"!=typeof e)return e===t?v:t>e?_:m;if(e instanceof String){var o=e.valueOf(),i=t.valueOf();return o===i?v:i>o?_:m}if("::"!==e.ctor&&"[]"!==e.ctor){if("_Tuple"===e.ctor.slice(0,6)){var a=e.ctor.slice(6)-0,u="cannot compare tuples with more than 6 elements.";if(0===a)return v;if(a>=1){if(n=r(e._0,t._0),n!==v)return n;if(a>=2){if(n=r(e._1,t._1),n!==v)return n;if(a>=3){if(n=r(e._2,t._2),n!==v)return n;if(a>=4){if(n=r(e._3,t._3),n!==v)return n;if(a>=5){if(n=r(e._4,t._4),n!==v)return n;if(a>=6){if(n=r(e._5,t._5),n!==v)return n;if(a>=7)throw new Error("Comparison error: "+u)}}}}}}return v}throw new Error("Comparison error: comparison is only defined on ints, floats, times, chars, strings, lists of comparable values, and tuples of comparable values.")}for(;;){if("[]"===e.ctor&&"[]"===t.ctor)return v;if(e.ctor!==t.ctor)return"[]"===e.ctor?_:m;if(n=r(e._0,t._0),n!==v)return n;e=e._1,t=t._1}}function n(e,t){return{ctor:"_Tuple2",_0:e,_1:t}}function o(e){return new String(e)}function i(e){return y++}function a(e,t){var r={};for(var n in e){var o=n in t?t[n]:e[n];r[n]=o}return r}function u(e,t){return{ctor:"::",_0:e,_1:t}}function s(e,t){if("string"==typeof e)return e+t;if("[]"===e.ctor)return t;var r=u(e._0,b),n=r;for(e=e._1;"[]"!==e.ctor;)n._1=u(e._0,b),e=e._1,n=n._1;return n._1=t,r}function l(e,t){return function(r){throw new Error("Ran into a `Debug.crash` in module `"+e+"` "+d(t)+"\nThe message provided by the code author is:\n\n    "+r)}}function f(e,t,r){return function(n){throw new Error("Ran into a `Debug.crash` in module `"+e+"`\n\nThis was caused by the `case` expression "+d(t)+".\nOne of the branches ended with a crash and the following value got through:\n\n    "+h(r)+"\n\nThe message provided by the code author is:\n\n    "+n)}}function d(e){return e.start.line==e.end.line?"on line "+e.start.line:"between lines "+e.start.line+" and "+e.end.line}function h(e){var t=typeof e;if("function"===t){var r=e.func?e.func.name:e.name;return"<function"+(""===r?"":":")+r+">"}if("boolean"===t)return e?"True":"False";if("number"===t)return e+"";if(e instanceof String)return"'"+p(e,!0)+"'";if("string"===t)return'"'+p(e,!1)+'"';if(null===e)return"null";if("object"===t&&"ctor"in e){var n=e.ctor.substring(0,5);if("_Tupl"===n){var o=[];for(var i in e)"ctor"!==i&&o.push(h(e[i]));return"("+o.join(",")+")"}if("_Task"===n)return"<task>";if("_Array"===e.ctor){var a=Te(e);return"Array.fromList "+h(a)}if("<decoder>"===e.ctor)return"<decoder>";if("_Process"===e.ctor)return"<process:"+e.id+">";if("::"===e.ctor){var o="["+h(e._0);for(e=e._1;"::"===e.ctor;)o+=","+h(e._0),e=e._1;return o+"]"}if("[]"===e.ctor)return"[]";if("RBNode_elm_builtin"===e.ctor||"RBEmpty_elm_builtin"===e.ctor||"Set_elm_builtin"===e.ctor){var r,a;return"Set_elm_builtin"===e.ctor?(r="Set",a=c(ee,function(e){return e._0},Be(e._0))):(r="Dict",a=Be(e)),r+".fromList "+h(a)}var o="";for(var u in e)if("ctor"!==u){var s=h(e[u]),l=s[0],f="{"===l||"("===l||"<"===l||'"'===l||s.indexOf(" ")<0;o+=" "+(f?s:"("+s+")")}return e.ctor+o}if("object"===t){var o=[];for(var i in e)o.push(i+" = "+h(e[i]));return 0===o.length?"{}":"{ "+o.join(", ")+" }"}return"<internal structure>"}function p(e,t){var r=e.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return t?r.replace(/\'/g,"\\'"):r.replace(/\"/g,'\\"')}var _=-1,v=0,m=1,g={ctor:"_Tuple0"},y=0,b={ctor:"[]"};return{eq:e,cmp:r,Tuple0:g,Tuple2:n,chr:o,update:a,guid:i,append:t(s),crash:l,crashCase:f,toString:h}}(),m=(t(function(e,t){var r=t;return c(e,r._0,r._1)}),r(function(e,t,r){return e({ctor:"_Tuple2",_0:t,_1:r})}),r(function(e,t,r){return c(e,r,t)})),g=function(e){var t=e;return t._0},y=t(function(e,t){return e}),b=function(e){return e},w=w||{};w["<|"]=t(function(e,t){return e(t)});var w=w||{};w["|>"]=t(function(e,t){return t(e)});var w=w||{};w[">>"]=r(function(e,t,r){return t(e(r))});var w=w||{};w["<<"]=r(function(e,t,r){return e(t(r))});var w=w||{};w["++"]=v.append;var k=v.toString,E=(_.isInfinite,_.isNaN,_.toFloat),S=(_.ceiling,_.floor),A=(_.truncate,_.round,_.not),w=(_.xor,w||{});w["||"]=_.or;var w=w||{};w["&&"]=_.and;var T=_.max,x=_.min,O=_.compare,w=w||{};w[">="]=_.ge;var w=w||{};w["<="]=_.le;var w=w||{};w[">"]=_.gt;var w=w||{};w["<"]=_.lt;var w=w||{};w["/="]=_.neq;var w=w||{};w["=="]=_.eq;var C=(_.e,_.pi,_.clamp),N=(_.logBase,_.abs),R=_.negate,w=(_.sqrt,_.atan2,_.atan,_.asin,_.acos,_.tan,_.sin,_.cos,w||{});w["^"]=_.exp;var w=w||{};w["%"]=_.mod;var w=(_.rem,w||{});w["//"]=_.div;var w=w||{};w["/"]=_.floatDiv;var w=w||{};w["*"]=_.mul;var w=w||{};w["-"]=_.sub;var w=w||{};w["+"]=_.add;var I=(_.toPolar,_.fromPolar,_.turns,_.degrees,function(){function e(e,t){var r=e+": "+v.toString(t),n=n||{};return n.stdout?n.stdout.write(r):console.log(r),t}function r(e){throw new Error(e)}return{crash:r,log:t(e)}}()),q=(I.crash,I.log,t(function(e,t){var r=t;return"Just"===r.ctor?r._0:e})),j={ctor:"Nothing"},L=t(function(e,t){var r=e;return"Just"===r.ctor?t(r._0):j}),D=function(e){return{ctor:"Just",_0:e}},P=t(function(e,t){var r=t;return"Just"===r.ctor?D(e(r._0)):j}),M=(r(function(e,t,r){var n={ctor:"_Tuple2",_0:t,_1:r};return"_Tuple2"===n.ctor&&"Just"===n._0.ctor&&"Just"===n._1.ctor?D(c(e,n._0._0,n._1._0)):j}),n(function(e,t,r,n){var o={ctor:"_Tuple3",_0:t,_1:r,_2:n};return"_Tuple3"===o.ctor&&"Just"===o._0.ctor&&"Just"===o._1.ctor&&"Just"===o._2.ctor?D(l(e,o._0._0,o._1._0,o._2._0)):j}),o(function(e,t,r,n,o){var i={ctor:"_Tuple4",_0:t,_1:r,_2:n,_3:o};return"_Tuple4"===i.ctor&&"Just"===i._0.ctor&&"Just"===i._1.ctor&&"Just"===i._2.ctor&&"Just"===i._3.ctor?D(f(e,i._0._0,i._1._0,i._2._0,i._3._0)):j}),i(function(e,t,r,n,o,i){var a={ctor:"_Tuple5",_0:t,_1:r,_2:n,_3:o,_4:i};return"_Tuple5"===a.ctor&&"Just"===a._0.ctor&&"Just"===a._1.ctor&&"Just"===a._2.ctor&&"Just"===a._3.ctor&&"Just"===a._4.ctor?D(d(e,a._0._0,a._1._0,a._2._0,a._3._0,a._4._0)):j}),function(){function e(e,t){return{ctor:"::",_0:e,_1:t}}function a(t){for(var r=w,n=t.length;n--;)r=e(t[n],r);return r}function u(e){for(var t=[];"[]"!==e.ctor;)t.push(e._0),e=e._1;return t}function s(t,r){var n=w;if(r>=t)do n=e(r,n);while(r-- >t);return n}function h(e,t,r){for(var n=u(r),o=t,i=n.length;i--;)o=c(e,n[i],o);return o}function p(e,t,r){for(var n=[];"[]"!==t.ctor&&"[]"!==r.ctor;)n.push(c(e,t._0,r._0)),t=t._1,r=r._1;return a(n)}function _(e,t,r,n){for(var o=[];"[]"!==t.ctor&&"[]"!==r.ctor&&"[]"!==n.ctor;)o.push(l(e,t._0,r._0,n._0)),t=t._1,r=r._1,n=n._1;return a(o)}function m(e,t,r,n,o){for(var i=[];"[]"!==t.ctor&&"[]"!==r.ctor&&"[]"!==n.ctor&&"[]"!==o.ctor;)i.push(f(e,t._0,r._0,n._0,o._0)),t=t._1,r=r._1,n=n._1,o=o._1;return a(i)}function g(e,t,r,n,o,i){for(var u=[];"[]"!==t.ctor&&"[]"!==r.ctor&&"[]"!==n.ctor&&"[]"!==o.ctor&&"[]"!==i.ctor;)u.push(d(e,t._0,r._0,n._0,o._0,i._0)),t=t._1,r=r._1,n=n._1,o=o._1,i=i._1;return a(u)}function y(e,t){return a(u(t).sort(function(t,r){return v.cmp(e(t),e(r))}))}function b(e,t){return a(u(t).sort(function(t,r){var n=e(t)(r).ctor;return"EQ"===n?0:"LT"===n?-1:1}))}var w={ctor:"[]"};return{Nil:w,Cons:e,cons:t(e),toArray:u,fromArray:a,range:s,foldr:r(h),map2:r(p),map3:n(_),map4:o(m),map5:i(g),sortBy:t(y),sortWith:t(b)}}()),B=(M.sortWith,M.sortBy,t(function(e,t){for(;;){if(v.cmp(e,0)<1)return t;var r=t;if("[]"===r.ctor)return t;var n=e-1,o=r._1;e=n,t=o}})),F=M.map5,U=M.map4,J=M.map3,H=M.map2,W=t(function(e,t){for(;;){var r=t;if("[]"===r.ctor)return!1;if(e(r._0))return!0;var n=e,o=r._1;e=n,t=o}}),V=t(function(e,t){return A(c(W,function(t){return A(e(t))},t))}),z=M.foldr,G=r(function(e,t,r){for(;;){var n=r;if("[]"===n.ctor)return t;var o=e,i=c(e,n._0,t),a=n._1;e=o,t=i,r=a}}),K=function(e){return l(G,t(function(e,t){return t+1}),0,e)},$=t(function(e,t){return l(H,e,M.range(0,K(t)-1),t)}),Q=t(function(e,t){return c(W,function(t){return v.eq(t,e)},t)}),X=function(e){var t=e;return"::"===t.ctor?D(t._1):j},Y=function(e){var t=e;return"::"===t.ctor?D(t._0):j},Z=Z||{};Z["::"]=M.cons;var ee=t(function(e,r){return l(z,t(function(t,r){return c(Z["::"],e(t),r)}),M.fromArray([]),r)}),te=t(function(e,r){var n=t(function(t,r){return e(t)?c(Z["::"],t,r):r});return l(z,n,M.fromArray([]),r)}),re=r(function(e,t,r){var n=e(t);return"Just"===n.ctor?c(Z["::"],n._0,r):r}),ne=(t(function(e,t){return l(z,re(e),M.fromArray([]),t)}),function(e){return l(G,t(function(e,t){return c(Z["::"],e,t)}),M.fromArray([]),e)}),oe=r(function(e,r,n){var o=t(function(t,r){var n=r;return"::"===n.ctor?c(Z["::"],c(e,t,n._0),r):M.fromArray([])});return ne(l(G,o,M.fromArray([r]),n))}),ie=t(function(e,r){var n=r;return"[]"===n.ctor?e:l(z,t(function(e,t){return c(Z["::"],e,t)}),r,e)}),ae=function(e){return l(z,ie,M.fromArray([]),e)},ue=t(function(e,t){return ae(c(ee,e,t))}),se=(t(function(e,r){var n=t(function(t,r){var n=r,o=n._0,i=n._1;return e(t)?{ctor:"_Tuple2",_0:c(Z["::"],t,o),_1:i}:{ctor:"_Tuple2",_0:o,_1:c(Z["::"],t,i)}});return l(z,n,{ctor:"_Tuple2",_0:M.fromArray([]),_1:M.fromArray([])},r)}),function(e){var r=t(function(e,t){var r=e,n=t;return{ctor:"_Tuple2",_0:c(Z["::"],r._0,n._0),_1:c(Z["::"],r._1,n._1)}});return l(z,r,{ctor:"_Tuple2",_0:M.fromArray([]),_1:M.fromArray([])},e)}),ce=t(function(e,r){var n=r;if("[]"===n.ctor)return M.fromArray([]);var o=t(function(t,r){return c(Z["::"],e,c(Z["::"],t,r))}),i=l(z,o,M.fromArray([]),n._1);return c(Z["::"],n._0,i)}),le=t(function(e,t){if(v.cmp(e,0)<1)return M.fromArray([]);var r=t;return"[]"===r.ctor?t:c(Z["::"],r._0,c(le,e-1,r._1))}),fe=r(function(e,t,r){for(;;){if(v.cmp(t,0)<1)return e;var n=c(Z["::"],r,e),o=t-1,i=r;e=n,t=o,r=i}}),de=(t(function(e,t){return l(fe,M.fromArray([]),e,t)}),function(e){var t=e;return"Ok"===t.ctor?D(t._0):j}),he=(t(function(e,t){var r=t;return"Ok"===r.ctor?r._0:e}),function(e){return{ctor:"Err",_0:e}}),pe=(t(function(e,t){var r=e;return"Ok"===r.ctor?t(r._0):he(r._0)}),function(e){return{ctor:"Ok",_0:e}}),_e=(t(function(e,t){var r=t;return"Ok"===r.ctor?pe(e(r._0)):he(r._0)}),r(function(e,t,r){var n={ctor:"_Tuple2",_0:t,_1:r};return"Ok"===n._0.ctor?"Ok"===n._1.ctor?pe(c(e,n._0._0,n._1._0)):he(n._1._0):he(n._0._0)}),n(function(e,t,r,n){var o={ctor:"_Tuple3",_0:t,_1:r,_2:n};return"Ok"===o._0.ctor?"Ok"===o._1.ctor?"Ok"===o._2.ctor?pe(l(e,o._0._0,o._1._0,o._2._0)):he(o._2._0):he(o._1._0):he(o._0._0)}),o(function(e,t,r,n,o){var i={ctor:"_Tuple4",_0:t,_1:r,_2:n,_3:o};return"Ok"===i._0.ctor?"Ok"===i._1.ctor?"Ok"===i._2.ctor?"Ok"===i._3.ctor?pe(f(e,i._0._0,i._1._0,i._2._0,i._3._0)):he(i._3._0):he(i._2._0):he(i._1._0):he(i._0._0)}),i(function(e,t,r,n,o,i){var a={ctor:"_Tuple5",_0:t,_1:r,_2:n,_3:o,_4:i};return"Ok"===a._0.ctor?"Ok"===a._1.ctor?"Ok"===a._2.ctor?"Ok"===a._3.ctor?"Ok"===a._4.ctor?pe(d(e,a._0._0,a._1._0,a._2._0,a._3._0,a._4._0)):he(a._4._0):he(a._3._0):he(a._2._0):he(a._1._0):he(a._0._0)}),t(function(e,t){var r=t;return"Ok"===r.ctor?pe(r._0):he(e(r._0))}),t(function(e,t){var r=t;return"Just"===r.ctor?pe(r._0):he(e)}),function(){function e(e,t,r){var o=r?i(t,r):n(t);e.worker=function(e){return o(void 0,e,!1)},e.embed=function(e,t){return o(e,t,!0)},e.fullscreen=function(e){return o(document.body,e,!0)}}function n(e){return function(t){var r="Cannot initialize module `"+e+"` because it has no `main` value!\nWhat should I show on screen?";throw t.innerHTML=o(r),new Error(r)}}function o(e){return'<div style="padding-left:1em;"><h2 style="font-weight:normal;"><b>Oops!</b> Something went wrong when starting your Elm program.</h2><pre style="padding-left:1em;">'+e+"</pre></div>"}function i(e,t){return function(r,n,i){try{var s=u(e,t);return i||(s.renderer=a),h(e,s,r,n)}catch(c){throw r.innerHTML=o(c.message),c}}}function a(){return{update:function(){}}}function u(e,r){var n=r.main;if("undefined"==typeof n.init){var o=w(M.Nil),i=v.Tuple2(v.Tuple0,o);return Fn({init:function(){return i},view:function(){return n},update:t(function(){return i}),subscriptions:function(){return o}})}var a=r.flags,u=a?d(e,n.init,a):s(e,n.init);return Fn({init:u,view:n.view,update:n.update,subscriptions:n.subscriptions})}function s(e,t){return function(r){if("undefined"!=typeof r)throw new Error("You are giving module `"+e+"` an argument in JavaScript.\nThis module does not take arguments though! You probably need to change the\ninitialization code to something like `Elm."+e+".fullscreen()`");return t()}}function d(e,t,r){return function(n){var o=c(Ct.run,r,n);if("Err"===o.ctor)throw new Error("You are trying to initialize module `"+e+"` with an unexpected argument.\nWhen trying to convert it to a usable Elm value, I run into this problem:\n\n"+o._0);return t(o._0)}}function h(e,t,r,n){function o(e,t){return ve.nativeBinding(function(r){var n=c(s,e,t);t=n._0,a.update(f(t));var o=n._1,i=l(t);E(h,o,i),r(ve.succeed(t))})}function i(e){ve.rawSend(v,e)}var a,u=t.init,s=t.update,l=t.subscriptions,f=t.view,d=t.renderer,h={},_=ve.nativeBinding(function(e){var t=u(n),o=t._0;a=d(r,i,f(o));var s=t._1,c=l(o);E(h,s,c),e(ve.succeed(o))}),v=y(_,o),m=p(h,i);return m?{ports:m}:{}}function p(e,t){var r;for(var n in I){var o=I[n];o.isForeign&&(r=r||{},r[n]="cmd"===o.tag?C(n):R(n,t)),e[n]=_(o,t)}return r}function _(e,t){function r(e,t){if("self"===e.ctor)return l(a,n,e._0,t);var r=e._0;switch(o){case"cmd":return l(i,n,r.cmds,t);case"sub":return l(i,n,r.subs,t);case"fx":return f(i,n,r.cmds,r.subs,t)}}var n={main:t,self:void 0},o=e.tag,i=e.onEffects,a=e.onSelfMsg,u=y(e.init,r);return n.self=u,u}function m(e,t){return ve.nativeBinding(function(r){e.main(t),r(ve.succeed(v.Tuple0))})}function g(e,t){return c(ve.send,e.self,{ctor:"self",_0:t})}function y(e,t){function r(e){var o=ve.receive(function(r){return t(r,e)});return c(n,o,r)}var n=ve.andThen,o=c(n,e,r);return ve.rawSpawn(o)}function b(e){return function(t){return{type:"leaf",home:e,value:t}}}function w(e){return{type:"node",branches:e}}function k(e,t){return{type:"map",tagger:e,tree:t}}function E(e,t,r){var n={};S(!0,t,n,null),S(!1,r,n,null);for(var o in e){var i=o in n?n[o]:{cmds:M.Nil,subs:M.Nil};ve.rawSend(e[o],{ctor:"fx",_0:i})}}function S(e,t,r,n){switch(t.type){case"leaf":var o=t.home,i=A(e,o,n,t.value);return void(r[o]=T(e,i,r[o]));case"node":for(var a=t.branches;"[]"!==a.ctor;)S(e,a._0,r,n),a=a._1;return;case"map":return void S(e,t.tree,r,{tagger:t.tagger,rest:n})}}function A(e,t,r,n){function o(e){for(;r;)e=r.tagger(e),r=r.rest;return e}var i=e?I[t].cmdMap:I[t].subMap;return c(i,o,n)}function T(e,t,r){return r=r||{cmds:M.Nil,subs:M.Nil},e?(r.cmds=M.Cons(t,r.cmds),r):(r.subs=M.Cons(t,r.subs),r)}function x(e){if(e in I)throw new Error("There can only be one port named `"+e+"`, but your program has multiple.")}function O(e,t){return x(e),I[e]={tag:"cmd",cmdMap:q,converter:t,isForeign:!0},b(e)}function C(e){function t(e,t,r){for(;"[]"!==t.ctor;){for(var n=a(t._0),o=0;o<i.length;o++)i[o](n);t=t._1}return u}function n(e){i.push(e)}function o(e){var t=i.indexOf(e);t>=0&&i.splice(t,1)}var i=[],a=I[e].converter,u=ve.succeed(null);return I[e].init=u,I[e].onEffects=r(t),{subscribe:n,unsubscribe:o}}function N(e,t){return x(e),I[e]={tag:"sub",subMap:j,converter:t,isForeign:!0},b(e)}function R(e,t){function n(e,t,r){return i=t,u}function o(r){var n=c(Dt,a,r);if("Err"===n.ctor)throw new Error("Trying to send an unexpected type of value through port `"+e+"`:\n"+n._0);for(var r=n._0,o=i;"[]"!==o.ctor;)t(o._0(r)),o=o._1}var i=M.Nil,a=I[e].converter,u=ve.succeed(null);return I[e].init=u,I[e].onEffects=r(n),{send:o}}var I={},q=t(function(e,t){return t}),j=t(function(e,t){return function(r){return e(t(r))}});return{sendToApp:t(m),sendToSelf:t(g),mainToProgram:u,effectManagers:I,outgoingPort:O,incomingPort:N,addPublicModule:e,leaf:b,batch:w,map:t(k)}}()),ve=function(){function e(e){return{ctor:"_Task_succeed",value:e}}function r(e){return{ctor:"_Task_fail",value:e}}function n(e){return{ctor:"_Task_nativeBinding",callback:e,cancel:null}}function o(e,t){return{ctor:"_Task_andThen",task:e,callback:t}}function i(e,t){return{ctor:"_Task_onError",task:e,callback:t}}function a(e){return{ctor:"_Task_receive",callback:e}}function u(e){var t={ctor:"_Process",id:v.guid(),root:e,stack:null,mailbox:[]};return p(t),t}function s(t){return n(function(r){var n=u(t);r(e(n))})}function c(e,t){e.mailbox.push(t),p(e)}function l(t,r){return n(function(n){c(t,r),n(e(v.Tuple0))})}function f(t){return n(function(r){var n=t.root;"_Task_nativeBinding"===n.ctor&&n.cancel&&n.cancel(),t.root=null,r(e(v.Tuple0))})}function d(t){return n(function(r){var n=setTimeout(function(){r(e(v.Tuple0))},t);return function(){clearTimeout(n)}})}function h(e,t){for(;m>e;){var r=t.root.ctor;if("_Task_succeed"!==r)if("_Task_fail"!==r)if("_Task_andThen"!==r)if("_Task_onError"!==r){if("_Task_nativeBinding"===r){t.root.cancel=t.root.callback(function(e){t.root=e,p(t)});break}if("_Task_receive"!==r)throw new Error(r);var n=t.mailbox;if(0===n.length)break;t.root=t.root.callback(n.shift()),++e}else t.stack={ctor:"_Task_onError",callback:t.root.callback,rest:t.stack},t.root=t.root.task,++e;else t.stack={ctor:"_Task_andThen",callback:t.root.callback,rest:t.stack},t.root=t.root.task,++e;else{for(;t.stack&&"_Task_andThen"===t.stack.ctor;)t.stack=t.stack.rest;if(null===t.stack)break;t.root=t.stack.callback(t.root.value),t.stack=t.stack.rest,++e}else{for(;t.stack&&"_Task_onError"===t.stack.ctor;)t.stack=t.stack.rest;if(null===t.stack)break;t.root=t.stack.callback(t.root.value),t.stack=t.stack.rest,++e}}return m>e?e+1:(p(t),e)}function p(e){y.push(e),g||(setTimeout(_,0),g=!0)}function _(){for(var e,t=0;m>t&&(e=y.shift());)t=h(t,e);return e?void setTimeout(_,0):void(g=!1)}var m=1e4,g=!1,y=[];return{succeed:e,fail:r,nativeBinding:n,andThen:t(o),onError:t(i),receive:a,spawn:s,kill:f,sleep:d,send:t(l),rawSpawn:u,rawSend:c}}(),me=(ve.succeed,_e.sendToSelf),ge=_e.sendToApp,ye=_e.batch,be=ye(M.fromArray([])),we=we||{};we["!"]=t(function(e,t){return{ctor:"_Tuple2",_0:e,_1:ye(t)}});var ke=_e.map,Ee=_e.batch,Se=(Ee(M.fromArray([])),_e.map),Ae=function(){function e(e,t){if(0>e||e>=D(t))throw new Error("Index "+e+" is out of range. Check the length of your array first or use getMaybe or getWithDefault.");return n(e,t)}function n(e,t){for(var r=t.height;r>0;r--){for(var n=e>>5*r;t.lengths[n]<=e;)n++;n>0&&(e-=t.lengths[n-1]),t=t.table[n]}return t.table[e]}function o(e,t,r){return 0>e||D(r)<=e?r:i(e,t,r)}function i(e,t,r){if(r=L(r),0===r.height)r.table[e]=t;else{var n=P(e,r);n>0&&(e-=r.lengths[n-1]),r.table[n]=i(e,t,r.table[n])}return r}function a(e,t){if(0>=e)return K;var r=Math.floor(Math.log(e)/Math.log(z));return u(t,r,0,e)}function u(e,t,r,n){if(0===t){for(var o=new Array((n-r)%(z+1)),i=0;i<o.length;i++)o[i]=e(r+i);return{ctor:"_Array",height:0,table:o}}for(var a=Math.pow(z,t),o=new Array(Math.ceil((n-r)/a)),s=new Array(o.length),i=0;i<o.length;i++)o[i]=u(e,t-1,r+i*a,Math.min(r+(i+1)*a,n)),s[i]=D(o[i])+(i>0?s[i-1]:0);return{ctor:"_Array",height:t,table:o,lengths:s}}function s(e){if("[]"===e.ctor)return K;for(var t=new Array(z),r=[],n=0;"[]"!==e.ctor;)if(t[n]=e._0,e=e._1,n++,n===z){var o={ctor:"_Array",height:0,table:t};l(o,r),t=new Array(z),n=0}if(n>0){var o={ctor:"_Array",height:0,table:t.splice(0,n)};l(o,r)}for(var i=0;i<r.length-1;i++)r[i].table.length>0&&l(r[i],r);var a=r[r.length-1];return a.height>0&&1===a.table.length?a.table[0]:a}function l(e,t){var r=e.height;if(t.length===r){var n={ctor:"_Array",height:r+1,table:[],lengths:[]};t.push(n)}t[r].table.push(e);var o=D(e);t[r].lengths.length>0&&(o+=t[r].lengths[t[r].lengths.length-1]),t[r].lengths.push(o),t[r].table.length===z&&(l(t[r],t),t[r]={ctor:"_Array",height:r+1,table:[],lengths:[]})}function f(e,t){var r=d(e,t);if(null!==r)return r;var n=B(e,t.height);return U(t,n)}function d(e,t){if(0===t.height){if(t.table.length<z){var r={ctor:"_Array",height:0,table:t.table.slice()};return r.table.push(e),r}return null}var n=d(e,q(t));if(null!==n){var r=L(t);return r.table[r.table.length-1]=n,r.lengths[r.lengths.length-1]++,r}if(t.table.length<z){var o=B(e,t.height-1),r=L(t);return r.table.push(o),r.lengths.push(r.lengths[r.lengths.length-1]+D(o)),r}return null}function h(e){return p(M.Nil,e)}function p(e,t){for(var r=t.table.length-1;r>=0;r--)e=0===t.height?M.Cons(t.table[r],e):p(e,t.table[r]);return e}function _(e,t){var r={ctor:"_Array",height:t.height,table:new Array(t.table.length)};t.height>0&&(r.lengths=t.lengths);for(var n=0;n<t.table.length;n++)r.table[n]=0===t.height?e(t.table[n]):_(e,t.table[n]);return r}function v(e,t){return m(e,t,0)}function m(e,t,r){var n={ctor:"_Array",height:t.height,table:new Array(t.table.length)};t.height>0&&(n.lengths=t.lengths);for(var o=0;o<t.table.length;o++)n.table[o]=0===t.height?c(e,r+o,t.table[o]):m(e,t.table[o],0==o?r:r+t.lengths[o-1]);return n}function g(e,t,r){if(0===r.height)for(var n=0;n<r.table.length;n++)t=c(e,r.table[n],t);else for(var n=0;n<r.table.length;n++)t=g(e,t,r.table[n]);return t}function y(e,t,r){if(0===r.height)for(var n=r.table.length;n--;)t=c(e,r.table[n],t);else for(var n=r.table.length;n--;)t=y(e,t,r.table[n]);return t}function b(e,t,r){return 0>e&&(e+=D(r)),0>t&&(t+=D(r)),k(e,w(t,r))}function w(e,t){if(e===D(t))return t;if(0===t.height){var r={ctor:"_Array",height:0};return r.table=t.table.slice(0,e),r}var n=P(e,t),o=w(e-(n>0?t.lengths[n-1]:0),t.table[n]);if(0===n)return o;var r={ctor:"_Array",height:t.height,table:t.table.slice(0,n),lengths:t.lengths.slice(0,n)};return o.table.length>0&&(r.table[n]=o,r.lengths[n]=D(o)+(n>0?r.lengths[n-1]:0)),r}function k(e,t){if(0===e)return t;if(0===t.height){var r={ctor:"_Array",height:0};return r.table=t.table.slice(e,t.table.length+1),r}var n=P(e,t),o=k(e-(n>0?t.lengths[n-1]:0),t.table[n]);if(n===t.table.length-1)return o;var r={ctor:"_Array",height:t.height,table:t.table.slice(n,t.table.length+1),lengths:new Array(t.table.length-n)};r.table[0]=o;for(var i=0,a=0;a<r.table.length;a++)i+=D(r.table[a]),r.lengths[a]=i;return r}function E(e,t){if(0===e.table.length)return t;if(0===t.table.length)return e;var r=S(e,t);if(r[0].table.length+r[1].table.length<=z){if(0===r[0].table.length)return r[1];if(0===r[1].table.length)return r[0];if(r[0].table=r[0].table.concat(r[1].table),r[0].height>0){for(var n=D(r[0]),o=0;o<r[1].lengths.length;o++)r[1].lengths[o]+=n;r[0].lengths=r[0].lengths.concat(r[1].lengths)}return r[0]}if(r[0].height>0){var i=x(e,t);i>G&&(r=I(r[0],r[1],i))}return U(r[0],r[1])}function S(e,t){if(0===e.height&&0===t.height)return[e,t];if(1!==e.height||1!==t.height)if(e.height===t.height){e=L(e),t=L(t);var r=S(q(e),j(t));A(e,r[1]),T(t,r[0])}else if(e.height>t.height){e=L(e);var r=S(q(e),t);A(e,r[0]),t=F(r[1],r[1].height+1)}else{t=L(t);var r=S(e,j(t)),n=0===r[0].table.length?0:1,o=0===n?1:0;T(t,r[n]),e=F(r[o],r[o].height+1)}if(0===e.table.length||0===t.table.length)return[e,t];var i=x(e,t);return G>=i?[e,t]:I(e,t,i)}function A(e,t){var r=e.table.length-1;e.table[r]=t,e.lengths[r]=D(t),e.lengths[r]+=r>0?e.lengths[r-1]:0}function T(e,t){if(t.table.length>0){e.table[0]=t,e.lengths[0]=D(t);for(var r=D(e.table[0]),n=1;n<e.lengths.length;n++)r+=D(e.table[n]),e.lengths[n]=r}else{e.table.shift();for(var n=1;n<e.lengths.length;n++)e.lengths[n]=e.lengths[n]-e.lengths[0];e.lengths.shift()}}function x(e,t){for(var r=0,n=0;n<e.table.length;n++)r+=e.table[n].table.length;for(var n=0;n<t.table.length;n++)r+=t.table[n].table.length;var o=e.table.length+t.table.length;return o-(Math.floor((r-1)/z)+1)}function O(e,t,r){return r<e.length?e[r]:t[r-e.length]}function C(e,t,r,n){r<e.length?e[r]=n:t[r-e.length]=n}function N(e,t,r,n){C(e.table,t.table,r,n);var o=0===r||r===e.lengths.length?0:O(e.lengths,e.lengths,r-1);C(e.lengths,t.lengths,r,o+D(n))}function R(e,t){0>t&&(t=0);var r={ctor:"_Array",height:e,table:new Array(t)};return e>0&&(r.lengths=new Array(t)),r}function I(e,t,r){for(var n=R(e.height,Math.min(z,e.table.length+t.table.length-r)),o=R(e.height,n.table.length-(e.table.length+t.table.length-r)),i=0;O(e.table,t.table,i).table.length%z===0;)C(n.table,o.table,i,O(e.table,t.table,i)),C(n.lengths,o.lengths,i,O(e.lengths,t.lengths,i)),i++;for(var a=i,u=new R(e.height-1,0),s=0;i-a-(u.table.length>0?1:0)<r;){var c=O(e.table,t.table,i),l=Math.min(z-u.table.length,c.table.length);if(u.table=u.table.concat(c.table.slice(s,l)),u.height>0)for(var f=u.lengths.length,d=f;f+l-s>d;d++)u.lengths[d]=D(u.table[d]),u.lengths[d]+=d>0?u.lengths[d-1]:0;s+=l,c.table.length<=l&&(i++,s=0),u.table.length===z&&(N(n,o,a,u),u=R(e.height-1,0),a++)}for(u.table.length>0&&(N(n,o,a,u),a++);i<e.table.length+t.table.length;)N(n,o,a,O(e.table,t.table,i)),i++,a++;return[n,o]}function q(e){return e.table[e.table.length-1]}function j(e){return e.table[0]}function L(e){var t={ctor:"_Array",height:e.height,
table:e.table.slice()};return e.height>0&&(t.lengths=e.lengths.slice()),t}function D(e){return 0===e.height?e.table.length:e.lengths[e.lengths.length-1]}function P(e,t){for(var r=e>>5*t.height;t.lengths[r]<=e;)r++;return r}function B(e,t){return 0===t?{ctor:"_Array",height:0,table:[e]}:{ctor:"_Array",height:t,table:[B(e,t-1)],lengths:[1]}}function F(e,t){return t===e.height?e:{ctor:"_Array",height:t,table:[F(e,t-1)],lengths:[D(e)]}}function U(e,t){return{ctor:"_Array",height:e.height+1,table:[e,t],lengths:[D(e),D(e)+D(t)]}}function J(e){var t=new Array(D(e));return H(t,0,e),t}function H(e,t,r){for(var n=0;n<r.table.length;n++)if(0===r.height)e[t+n]=r.table[n];else{var o=0===n?0:r.lengths[n-1];H(e,t+o,r.table[n])}}function W(e){if(0===e.length)return K;var t=Math.floor(Math.log(e.length)/Math.log(z));return V(e,t,0,e.length)}function V(e,t,r,n){if(0===t)return{ctor:"_Array",height:0,table:e.slice(r,n)};for(var o=Math.pow(z,t),i=new Array(Math.ceil((n-r)/o)),a=new Array(i.length),u=0;u<i.length;u++)i[u]=V(e,t-1,r+u*o,Math.min(r+(u+1)*o,n)),a[u]=D(i[u])+(u>0?a[u-1]:0);return{ctor:"_Array",height:t,table:i,lengths:a}}var z=32,G=2,K={ctor:"_Array",height:0,table:[]};return{empty:K,fromList:s,toList:h,initialize:t(a),append:t(E),push:t(f),slice:r(b),get:t(e),set:r(o),map:t(_),indexedMap:t(v),foldl:r(g),foldr:r(y),length:D,toJSArray:J,fromJSArray:W}}(),Te=(Ae.append,Ae.length,Ae.slice,Ae.set,t(function(e,t){return v.cmp(0,e)<1&&v.cmp(e,Ae.length(t))<0?D(c(Ae.get,e,t)):j}),Ae.push,Ae.empty,t(function(e,r){var n=t(function(t,r){return e(t)?c(Ae.push,t,r):r});return l(Ae.foldl,n,Ae.empty,r)}),Ae.foldr,Ae.foldl,Ae.indexedMap,Ae.map,Ae.toList),xe=(Ae.fromList,Ae.initialize),Oe=(t(function(e,t){return c(xe,e,y(t))}),function(){function e(e){return 0===e.length}function n(e,t){return e+t}function o(e){var t=e[0];return t?D(v.Tuple2(v.chr(t),e.slice(1))):j}function i(e,t){return e+t}function a(e){return M.toArray(e).join("")}function u(e){return e.length}function s(e,t){for(var r=t.split(""),n=r.length;n--;)r[n]=e(v.chr(r[n]));return r.join("")}function l(e,t){return t.split("").map(v.chr).filter(e).join("")}function f(e){return e.split("").reverse().join("")}function d(e,t,r){for(var n=r.length,o=0;n>o;++o)t=c(e,v.chr(r[o]),t);return t}function h(e,t,r){for(var n=r.length;n--;)t=c(e,v.chr(r[n]),t);return t}function p(e,t){return M.fromArray(t.split(e))}function _(e,t){return M.toArray(t).join(e)}function m(e,t){for(var r="";e>0;)1&e&&(r+=t),e>>=1,t+=t;return r}function g(e,t,r){return r.slice(e,t)}function y(e,t){return 1>e?"":t.slice(0,e)}function b(e,t){return 1>e?"":t.slice(-e)}function w(e,t){return 1>e?t:t.slice(e)}function k(e,t){return 1>e?t:t.slice(0,-e)}function E(e,t,r){var n=(e-r.length)/2;return m(Math.ceil(n),t)+r+m(0|n,t)}function S(e,t,r){return r+m(e-r.length,t)}function A(e,t,r){return m(e-r.length,t)+r}function T(e){return e.trim()}function x(e){return e.replace(/^\s+/,"")}function O(e){return e.replace(/\s+$/,"")}function C(e){return M.fromArray(e.trim().split(/\s+/g))}function N(e){return M.fromArray(e.split(/\r\n|\r|\n/g))}function R(e){return e.toUpperCase()}function I(e){return e.toLowerCase()}function q(e,t){for(var r=t.length;r--;)if(e(v.chr(t[r])))return!0;return!1}function L(e,t){for(var r=t.length;r--;)if(!e(v.chr(t[r])))return!1;return!0}function P(e,t){return t.indexOf(e)>-1}function B(e,t){return 0===t.indexOf(e)}function F(e,t){return t.length>=e.length&&t.lastIndexOf(e)===t.length-e.length}function U(e,t){for(var r=e.length,n=0,o=[];(n=t.indexOf(e,n))>-1;)o.push(n),n+=r;return M.fromArray(o)}function J(e){var t=e.length;if(0===t)return he("could not convert string '"+e+"' to an Int");var r=0;if("-"===e[0]){if(1===t)return he("could not convert string '"+e+"' to an Int");r=1}for(var n=r;t>n;++n){var o=e[n];if("0">o||o>"9")return he("could not convert string '"+e+"' to an Int")}return pe(parseInt(e,10))}function H(e){var t=e.length;if(0===t)return he("could not convert string '"+e+"' to a Float");var r=0;if("-"===e[0]){if(1===t)return he("could not convert string '"+e+"' to a Float");r=1}for(var n=0,o=r;t>o;++o){var i=e[o];if(!(i>="0"&&"9">=i||"."===i&&(n+=1,1>=n)))return he("could not convert string '"+e+"' to a Float")}return pe(parseFloat(e))}function W(e){return M.fromArray(e.split("").map(v.chr))}function V(e){return M.toArray(e).join("")}return{isEmpty:e,cons:t(n),uncons:o,append:t(i),concat:a,length:u,map:t(s),filter:t(l),reverse:f,foldl:r(d),foldr:r(h),split:t(p),join:t(_),repeat:t(m),slice:r(g),left:t(y),right:t(b),dropLeft:t(w),dropRight:t(k),pad:r(E),padLeft:r(A),padRight:r(S),trim:T,trimLeft:x,trimRight:O,words:C,lines:N,toUpper:R,toLower:I,any:t(q),all:t(L),contains:t(P),startsWith:t(B),endsWith:t(F),indexes:t(U),toInt:J,toFloat:H,toList:W,fromList:V}}()),Ce=function(){return{fromCode:function(e){return v.chr(String.fromCharCode(e))},toCode:function(e){return e.charCodeAt(0)},toUpper:function(e){return v.chr(e.toUpperCase())},toLower:function(e){return v.chr(e.toLowerCase())},toLocaleUpper:function(e){return v.chr(e.toLocaleUpperCase())},toLocaleLower:function(e){return v.chr(e.toLocaleLowerCase())}}}(),Ne=(Ce.fromCode,Ce.toCode),Re=(Ce.toLocaleLower,Ce.toLocaleUpper,Ce.toLower,Ce.toUpper,r(function(e,t,r){var n=Ne(r);return v.cmp(n,Ne(e))>-1&&v.cmp(n,Ne(t))<1})),Ie=(c(Re,v.chr("A"),v.chr("Z")),c(Re,v.chr("a"),v.chr("z")),c(Re,v.chr("0"),v.chr("9")),c(Re,v.chr("0"),v.chr("7")),Oe.fromList,Oe.toList,Oe.toFloat,Oe.toInt,Oe.indexes,Oe.indexes,Oe.endsWith,Oe.startsWith,Oe.contains,Oe.all,Oe.any,Oe.toLower,Oe.toUpper),qe=(Oe.lines,Oe.words,Oe.trimRight,Oe.trimLeft,Oe.trim,Oe.padRight,Oe.padLeft),je=(Oe.pad,Oe.dropRight,Oe.dropLeft,Oe.right,Oe.left,Oe.slice,Oe.repeat,Oe.join),Le=Oe.split,De=(Oe.foldr,Oe.foldl,Oe.reverse,Oe.filter,Oe.map,Oe.length,Oe.concat),Pe=(Oe.append,Oe.uncons,Oe.cons,Oe.isEmpty,r(function(e,t,r){for(;;){var n=r;if("RBEmpty_elm_builtin"===n.ctor)return t;var o=e,i=l(e,n._1,n._2,l(Pe,e,t,n._4)),a=n._3;e=o,t=i,r=a}})),Me=function(e){return l(Pe,r(function(e,t,r){return c(Z["::"],e,r)}),M.fromArray([]),e)},Be=function(e){return l(Pe,r(function(e,t,r){return c(Z["::"],{ctor:"_Tuple2",_0:e,_1:t},r)}),M.fromArray([]),e)},Fe=r(function(e,t,r){for(;;){var n=r;if("RBEmpty_elm_builtin"===n.ctor)return t;var o=e,i=l(e,n._1,n._2,l(Fe,e,t,n._3)),a=n._4;e=o,t=i,r=a}}),Ue=i(function(e,n,o,i,a,u){var s=r(function(t,r,i){var a=i,u=a._1,s=a._0,c=s;if("[]"===c.ctor)return{ctor:"_Tuple2",_0:s,_1:l(o,t,r,u)};var d=c._1,h=c._0._1,p=c._0._0;return v.cmp(p,t)<0?{ctor:"_Tuple2",_0:d,_1:l(e,p,h,u)}:v.cmp(p,t)>0?{ctor:"_Tuple2",_0:s,_1:l(o,t,r,u)}:{ctor:"_Tuple2",_0:d,_1:f(n,p,h,r,u)}}),c=l(Fe,s,{ctor:"_Tuple2",_0:Be(i),_1:u},a),d=c._0,h=c._1;return l(G,t(function(t,r){var n=t;return l(e,n._0,n._1,r)}),h,d)}),Je=n(function(e,t,r,n){return I.crash(De(M.fromArray(["Internal red-black tree invariant violated, expected ",e," and got ",k(t),"/",r,"/",n,"\nPlease report this bug to <https://github.com/elm-lang/core/issues>"])))}),He=function(e){var t=e;e:do{if("RBNode_elm_builtin"===t.ctor){if("BBlack"===t._0.ctor)return!0;break e}if("LBBlack"===t._0.ctor)return!0;break e}while(!1);return!1},We=t(function(e,t){for(;;){var r=t;if("RBEmpty_elm_builtin"===r.ctor)return e;var n=c(We,e+1,r._4),o=r._3;e=n,t=o}}),Ve=t(function(e,t){e:for(;;){var r=t;if("RBEmpty_elm_builtin"===r.ctor)return j;var n=c(O,e,r._1);switch(n.ctor){case"LT":var o=e,i=r._3;e=o,t=i;continue e;case"EQ":return D(r._2);default:var a=e,u=r._4;e=a,t=u;continue e}}}),ze=t(function(e,t){var r=c(Ve,e,t);return"Just"===r.ctor}),Ge=r(function(e,t,r){for(;;){var n=r;if("RBEmpty_elm_builtin"===n.ctor)return{ctor:"_Tuple2",_0:e,_1:t};var o=n._1,i=n._2,a=n._4;e=o,t=i,r=a}}),Ke={ctor:"NBlack"},$e={ctor:"BBlack"},Qe={ctor:"Black"},Xe=function(e){var t=e;if("RBNode_elm_builtin"===t.ctor){var r=t._0;return v.eq(r,Qe)||v.eq(r,$e)}return!0},Ye={ctor:"Red"},Ze=function(e){var t=e;switch(t.ctor){case"Black":return $e;case"Red":return Qe;case"NBlack":return Ye;default:return I.crash("Can't make a double black node more black!")}},et=function(e){var t=e;switch(t.ctor){case"BBlack":return Qe;case"Black":return Ye;case"Red":return Ke;default:return I.crash("Can't make a negative black node less black!")}},tt={ctor:"LBBlack"},rt={ctor:"LBlack"},nt=function(e){return{ctor:"RBEmpty_elm_builtin",_0:e}},ot=nt(rt),it=o(function(e,t,r,n,o){return{ctor:"RBNode_elm_builtin",_0:e,_1:t,_2:r,_3:n,_4:o}}),at=function(e){var t=e;return"RBNode_elm_builtin"===t.ctor&&"Red"===t._0.ctor?d(it,Qe,t._1,t._2,t._3,t._4):e},ut=function(e){var t=e;return"RBNode_elm_builtin"===t.ctor?d(it,et(t._0),t._1,t._2,t._3,t._4):nt(rt)},st=function(e){return function(t){return function(r){return function(n){return function(o){return function(i){return function(a){return function(u){return function(s){return function(c){return function(l){return d(it,et(e),n,o,d(it,Qe,t,r,u,s),d(it,Qe,i,a,c,l))}}}}}}}}}}},ct=function(e){var t=e;return"RBEmpty_elm_builtin"===t.ctor?nt(rt):d(it,Qe,t._1,t._2,t._3,t._4)},lt=function(e){var t=e;return"RBEmpty_elm_builtin"===t.ctor?I.crash("can't make a Leaf red"):d(it,Ye,t._1,t._2,t._3,t._4)},ft=function(e){var t=e;e:do{t:do{r:do{n:do{o:do{i:do{a:do{if("RBNode_elm_builtin"!==t.ctor)break e;if("RBNode_elm_builtin"===t._3.ctor)if("RBNode_elm_builtin"===t._4.ctor)switch(t._3._0.ctor){case"Red":switch(t._4._0.ctor){case"Red":if("RBNode_elm_builtin"===t._3._3.ctor&&"Red"===t._3._3._0.ctor)break a;if("RBNode_elm_builtin"===t._3._4.ctor&&"Red"===t._3._4._0.ctor)break i;if("RBNode_elm_builtin"===t._4._3.ctor&&"Red"===t._4._3._0.ctor)break o;if("RBNode_elm_builtin"===t._4._4.ctor&&"Red"===t._4._4._0.ctor)break n;break e;case"NBlack":if("RBNode_elm_builtin"===t._3._3.ctor&&"Red"===t._3._3._0.ctor)break a;if("RBNode_elm_builtin"===t._3._4.ctor&&"Red"===t._3._4._0.ctor)break i;if("BBlack"===t._0.ctor&&"RBNode_elm_builtin"===t._4._3.ctor&&"Black"===t._4._3._0.ctor&&"RBNode_elm_builtin"===t._4._4.ctor&&"Black"===t._4._4._0.ctor)break r;break e;default:if("RBNode_elm_builtin"===t._3._3.ctor&&"Red"===t._3._3._0.ctor)break a;if("RBNode_elm_builtin"===t._3._4.ctor&&"Red"===t._3._4._0.ctor)break i;break e}case"NBlack":switch(t._4._0.ctor){case"Red":if("RBNode_elm_builtin"===t._4._3.ctor&&"Red"===t._4._3._0.ctor)break o;if("RBNode_elm_builtin"===t._4._4.ctor&&"Red"===t._4._4._0.ctor)break n;if("BBlack"===t._0.ctor&&"RBNode_elm_builtin"===t._3._3.ctor&&"Black"===t._3._3._0.ctor&&"RBNode_elm_builtin"===t._3._4.ctor&&"Black"===t._3._4._0.ctor)break t;break e;case"NBlack":if("BBlack"===t._0.ctor){if("RBNode_elm_builtin"===t._4._3.ctor&&"Black"===t._4._3._0.ctor&&"RBNode_elm_builtin"===t._4._4.ctor&&"Black"===t._4._4._0.ctor)break r;if("RBNode_elm_builtin"===t._3._3.ctor&&"Black"===t._3._3._0.ctor&&"RBNode_elm_builtin"===t._3._4.ctor&&"Black"===t._3._4._0.ctor)break t;break e}break e;default:if("BBlack"===t._0.ctor&&"RBNode_elm_builtin"===t._3._3.ctor&&"Black"===t._3._3._0.ctor&&"RBNode_elm_builtin"===t._3._4.ctor&&"Black"===t._3._4._0.ctor)break t;break e}default:switch(t._4._0.ctor){case"Red":if("RBNode_elm_builtin"===t._4._3.ctor&&"Red"===t._4._3._0.ctor)break o;if("RBNode_elm_builtin"===t._4._4.ctor&&"Red"===t._4._4._0.ctor)break n;break e;case"NBlack":if("BBlack"===t._0.ctor&&"RBNode_elm_builtin"===t._4._3.ctor&&"Black"===t._4._3._0.ctor&&"RBNode_elm_builtin"===t._4._4.ctor&&"Black"===t._4._4._0.ctor)break r;break e;default:break e}}else switch(t._3._0.ctor){case"Red":if("RBNode_elm_builtin"===t._3._3.ctor&&"Red"===t._3._3._0.ctor)break a;if("RBNode_elm_builtin"===t._3._4.ctor&&"Red"===t._3._4._0.ctor)break i;break e;case"NBlack":if("BBlack"===t._0.ctor&&"RBNode_elm_builtin"===t._3._3.ctor&&"Black"===t._3._3._0.ctor&&"RBNode_elm_builtin"===t._3._4.ctor&&"Black"===t._3._4._0.ctor)break t;break e;default:break e}else{if("RBNode_elm_builtin"!==t._4.ctor)break e;switch(t._4._0.ctor){case"Red":if("RBNode_elm_builtin"===t._4._3.ctor&&"Red"===t._4._3._0.ctor)break o;if("RBNode_elm_builtin"===t._4._4.ctor&&"Red"===t._4._4._0.ctor)break n;break e;case"NBlack":if("BBlack"===t._0.ctor&&"RBNode_elm_builtin"===t._4._3.ctor&&"Black"===t._4._3._0.ctor&&"RBNode_elm_builtin"===t._4._4.ctor&&"Black"===t._4._4._0.ctor)break r;break e;default:break e}}}while(!1);return st(t._0)(t._3._3._1)(t._3._3._2)(t._3._1)(t._3._2)(t._1)(t._2)(t._3._3._3)(t._3._3._4)(t._3._4)(t._4)}while(!1);return st(t._0)(t._3._1)(t._3._2)(t._3._4._1)(t._3._4._2)(t._1)(t._2)(t._3._3)(t._3._4._3)(t._3._4._4)(t._4)}while(!1);return st(t._0)(t._1)(t._2)(t._4._3._1)(t._4._3._2)(t._4._1)(t._4._2)(t._3)(t._4._3._3)(t._4._3._4)(t._4._4)}while(!1);return st(t._0)(t._1)(t._2)(t._4._1)(t._4._2)(t._4._4._1)(t._4._4._2)(t._3)(t._4._3)(t._4._4._3)(t._4._4._4)}while(!1);return d(it,Qe,t._4._3._1,t._4._3._2,d(it,Qe,t._1,t._2,t._3,t._4._3._3),d(dt,Qe,t._4._1,t._4._2,t._4._3._4,lt(t._4._4)))}while(!1);return d(it,Qe,t._3._4._1,t._3._4._2,d(dt,Qe,t._3._1,t._3._2,lt(t._3._3),t._3._4._3),d(it,Qe,t._1,t._2,t._3._4._4,t._4))}while(!1);return e},dt=o(function(e,t,r,n,o){var i=d(it,e,t,r,n,o);return Xe(i)?ft(i):i}),ht=o(function(e,t,r,n,o){return He(n)||He(o)?d(dt,Ze(e),t,r,ut(n),ut(o)):d(it,e,t,r,n,o)}),pt=o(function(e,t,r,n,o){var i=o;return"RBEmpty_elm_builtin"===i.ctor?l(_t,e,n,o):d(ht,e,t,r,n,d(pt,i._0,i._1,i._2,i._3,i._4))}),_t=r(function(e,t,r){var n={ctor:"_Tuple2",_0:t,_1:r};if("RBEmpty_elm_builtin"!==n._0.ctor){if("RBEmpty_elm_builtin"===n._1.ctor){var o=n._1._0,i=n._0._0,a={ctor:"_Tuple3",_0:e,_1:i,_2:o};return"_Tuple3"===a.ctor&&"Black"===a._0.ctor&&"Red"===a._1.ctor&&"LBlack"===a._2.ctor?d(it,Qe,n._0._1,n._0._2,n._0._3,n._0._4):f(Je,"Black/Red/LBlack",e,k(i),k(o))}var u=n._0._2,s=n._0._4,c=n._0._1,h=d(pt,n._0._0,c,u,n._0._3,s),p=l(Ge,c,u,s),_=p._0,v=p._1;return d(ht,e,_,v,h,r)}if("RBEmpty_elm_builtin"!==n._1.ctor){var m=n._1._0,g=n._0._0,y={ctor:"_Tuple3",_0:e,_1:g,_2:m};return"_Tuple3"===y.ctor&&"Black"===y._0.ctor&&"LBlack"===y._1.ctor&&"Red"===y._2.ctor?d(it,Qe,n._1._1,n._1._2,n._1._3,n._1._4):f(Je,"Black/LBlack/Red",e,k(g),k(m))}var b=e;switch(b.ctor){case"Red":return nt(rt);case"Black":return nt(tt);default:return I.crash("cannot have bblack or nblack nodes at this point")}}),vt=t(function(e,t){var r=t;if("RBEmpty_elm_builtin"===r.ctor)return nt(rt);var n=r._1;return d(it,r._0,n,c(e,n,r._2),c(vt,e,r._3),c(vt,e,r._4))}),mt={ctor:"Same"},gt={ctor:"Remove"},yt={ctor:"Insert"},bt=r(function(e,t,r){var n=function(r){var o=r;if("RBEmpty_elm_builtin"===o.ctor){var i=t(j);return"Nothing"===i.ctor?{ctor:"_Tuple2",_0:mt,_1:ot}:{ctor:"_Tuple2",_0:yt,_1:d(it,Ye,e,i._0,ot,ot)}}var a=o._2,u=o._4,s=o._3,f=o._1,h=o._0,p=c(O,e,f);switch(p.ctor){case"EQ":var _=t(D(a));return"Nothing"===_.ctor?{ctor:"_Tuple2",_0:gt,_1:l(_t,h,s,u)}:{ctor:"_Tuple2",_0:mt,_1:d(it,h,f,_._0,s,u)};case"LT":var v=n(s),m=v._0,g=v._1,y=m;switch(y.ctor){case"Same":return{ctor:"_Tuple2",_0:mt,_1:d(it,h,f,a,g,u)};case"Insert":return{ctor:"_Tuple2",_0:yt,_1:d(dt,h,f,a,g,u)};default:return{ctor:"_Tuple2",_0:gt,_1:d(ht,h,f,a,g,u)}}default:var b=n(u),m=b._0,w=b._1,k=m;switch(k.ctor){case"Same":return{ctor:"_Tuple2",_0:mt,_1:d(it,h,f,a,s,w)};case"Insert":return{ctor:"_Tuple2",_0:yt,_1:d(dt,h,f,a,s,w)};default:return{ctor:"_Tuple2",_0:gt,_1:d(ht,h,f,a,s,w)}}}},o=n(r),i=o._0,a=o._1,u=i;switch(u.ctor){case"Same":return a;case"Insert":return at(a);default:return ct(a)}}),wt=r(function(e,t,r){return l(bt,e,y(D(t)),r)}),kt=(t(function(e,t){return l(wt,e,t,ot)}),t(function(e,t){return l(Fe,wt,t,e)})),Et=t(function(e,t){var n=r(function(t,r,n){return c(e,t,r)?l(wt,t,r,n):n});return l(Fe,n,ot,t)}),St=t(function(e,r){return c(Et,t(function(e,t){return c(ze,e,r)}),e)}),At=t(function(e,t){var n=r(function(t,r,n){var o=n,i=o._1,a=o._0;return c(e,t,r)?{ctor:"_Tuple2",_0:l(wt,t,r,a),_1:i}:{ctor:"_Tuple2",_0:a,_1:l(wt,t,r,i)}});return l(Fe,n,{ctor:"_Tuple2",_0:ot,_1:ot},t)}),Tt=function(e){return l(G,t(function(e,t){var r=e;return l(wt,r._0,r._1,t)}),ot,e)},xt=t(function(e,t){return l(bt,e,y(j),t)}),Ot=t(function(e,t){return l(Fe,r(function(e,t,r){return c(xt,e,r)}),e,t)}),Ct=function(){function e(e){return{ctor:"<decoder>",tag:"succeed",msg:e}}function c(e){return{ctor:"<decoder>",tag:"fail",msg:e}}function l(e){return{ctor:"<decoder>",tag:e}}function f(e,t){return{ctor:"<decoder>",tag:e,decoder:t}}function d(e){return{ctor:"<decoder>",tag:"null",value:e}}function h(e,t){return{ctor:"<decoder>",tag:"field",field:e,decoder:t}}function p(e){return{ctor:"<decoder>",tag:"key-value",decoder:e}}function _(e,t){return{ctor:"<decoder>",tag:"map-many",func:e,decoders:t}}function m(e,t){return{ctor:"<decoder>",tag:"tuple",func:e,decoders:t}}function g(e,t){return{ctor:"<decoder>",tag:"andThen",decoder:e,callback:t}}function y(e,t){return{ctor:"<decoder>",tag:"customAndThen",decoder:e,callback:t}}function b(e){return{ctor:"<decoder>",tag:"oneOf",decoders:e}}function w(e,t){return _(e,[t])}function k(e,t,r){return _(e,[t,r])}function E(e,t,r,n){return _(e,[t,r,n])}function S(e,t,r,n,o){return _(e,[t,r,n,o])}function A(e,t,r,n,o,i){return _(e,[t,r,n,o,i])}function T(e,t,r,n,o,i,a){return _(e,[t,r,n,o,i,a])}function x(e,t,r,n,o,i,a,u){return _(e,[t,r,n,o,i,a,u])}function O(e,t,r,n,o,i,a,u,s){return _(e,[t,r,n,o,i,a,u,s])}function C(e,t){return m(e,[t])}function N(e,t,r){return m(e,[t,r])}function R(e,t,r,n){return m(e,[t,r,n])}function I(e,t,r,n,o){return m(e,[t,r,n,o])}function q(e,t,r,n,o,i){return m(e,[t,r,n,o,i])}function L(e,t,r,n,o,i,a){return m(e,[t,r,n,o,i,a])}function P(e,t,r,n,o,i,a,u){return m(e,[t,r,n,o,i,a,u])}function B(e,t,r,n,o,i,a,u,s){return m(e,[t,r,n,o,i,a,u,s])}function F(e){return{tag:"ok",value:e}}function U(e,t){return{tag:"primitive",type:e,value:t}}function J(e,t){return{tag:"index",index:e,rest:t}}function H(e,t){return{tag:"field",field:e,rest:t}}function W(e){return{tag:"oneOf",problems:e}}function V(e){for(var t="_";e;)switch(e.tag){case"primitive":return"Expecting "+e.type+("_"===t?"":" at "+t)+" but instead got: "+z(e.value);case"index":t+="["+e.index+"]",e=e.rest;break;case"field":t+="."+e.field,e=e.rest;break;case"oneOf":for(var r=e.problems,n=0;n<r.length;n++)r[n]=V(r[n]);return"I ran into the following problems"+("_"===t?"":" at "+t)+":\n\n"+r.join("\n");case"fail":return"I ran into a `fail` decoder"+("_"===t?"":" at "+t)}}function z(e){return void 0===e?"undefined":JSON.stringify(e)}function G(e,t){var r;try{r=JSON.parse(t)}catch(n){return he("Given an invalid JSON: "+n.message)}return K(e,r)}function K(e,t){var r=$(e,t);return"ok"===r.tag?pe(r.value):he(V(r))}function $(e,t){switch(e.tag){case"bool":return"boolean"==typeof t?F(t):U("a Bool",t);case"int":var r="number"!=typeof t||!(t>-2147483647&&2147483647>t&&(0|t)===t)||!(isFinite(t)&&!(t%1));return r?U("an Int",t):F(t);case"float":return"number"==typeof t?F(t):U("a Float",t);case"string":return"string"==typeof t?F(t):t instanceof String?F(t+""):U("a String",t);case"null":return null===t?F(e.value):U("null",t);case"value":return F(t);case"list":if(!(t instanceof Array))return U("a List",t);for(var n=M.Nil,o=t.length;o--;){var i=$(e.decoder,t[o]);if("ok"!==i.tag)return J(o,i);n=M.Cons(i.value,n)}return F(n);case"array":if(!(t instanceof Array))return U("an Array",t);for(var a=t.length,u=new Array(a),o=a;o--;){var i=$(e.decoder,t[o]);if("ok"!==i.tag)return J(o,i);u[o]=i.value}return F(Ae.fromJSArray(u));case"maybe":var i=$(e.decoder,t);return F("ok"===i.tag?D(i.value):j);case"field":var s=e.field;if("object"!=typeof t||null===t||!(s in t))return U("an object with a field named `"+s+"`",t);var i=$(e.decoder,t[s]);return"ok"===i.tag?i:H(s,i);case"key-value":if("object"!=typeof t||null===t||t instanceof Array)return err("an object",t);var c=M.Nil;for(var l in t){var i=$(e.decoder,t[l]);if("ok"!==i.tag)return H(l,i);var f=v.Tuple2(l,i.value);c=M.Cons(f,c)}return F(c);case"map-many":for(var d=e.func,h=e.decoders,o=0;o<h.length;o++){var i=$(h[o],t);if("ok"!==i.tag)return i;d=d(i.value)}return F(d);case"tuple":var h=e.decoders,a=h.length;if(!(t instanceof Array)||t.length!==a)return U("a Tuple with "+a+" entries",t);for(var d=e.func,o=0;a>o;o++){var i=$(h[o],t[o]);if("ok"!==i.tag)return J(o,i);d=d(i.value)}return F(d);case"customAndThen":var i=$(e.decoder,t);if("ok"!==i.tag)return i;var p=e.callback(i.value);return"Err"===p.ctor?U("something custom",t):F(p._0);case"andThen":var i=$(e.decoder,t);return"ok"!==i.tag?i:$(e.callback(i.value),t);case"oneOf":for(var _=[],m=e.decoders;"[]"!==m.ctor;){var i=$(m._0,t);if("ok"===i.tag)return i;_.push(i),m=m._1}return W(_);case"fail":return te;case"succeed":return F(e.msg)}}function Q(e,t){if(e===t)return!0;if(e.tag!==t.tag)return!1;switch(e.tag){case"succeed":case"fail":return e.msg===t.msg;case"bool":case"int":case"float":case"string":case"value":return!0;case"null":return e.value===t.value;case"list":case"array":case"maybe":case"key-value":return Q(e.decoder,t.decoder);case"field":return e.field===t.field&&Q(e.decoder,t.decoder);case"map-many":case"tuple":return e.func!==t.func?!1:X(e.decoders,t.decoders);case"andThen":case"customAndThen":return e.callback===t.callback&&Q(e.decoder,t.decoder);case"oneOf":return X(e.decoders,t.decoders)}}function X(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;r>n;n++)if(!Q(e[n],t[n]))return!1;return!0}function Y(e,t){return JSON.stringify(t,null,e)}function Z(e){return e}function ee(e){for(var t={};"[]"!==e.ctor;){var r=e._0;t[r._0]=r._1,e=e._1}return t}var te={tag:"fail"};return{encode:t(Y),runOnString:t(G),run:t(K),decodeNull:d,decodePrimitive:l,decodeContainer:t(f),decodeField:t(h),decodeObject1:t(w),decodeObject2:r(k),decodeObject3:n(E),decodeObject4:o(S),decodeObject5:i(A),decodeObject6:a(T),decodeObject7:u(x),decodeObject8:s(O),decodeKeyValuePairs:p,decodeTuple1:t(C),decodeTuple2:r(N),decodeTuple3:n(R),decodeTuple4:o(I),decodeTuple5:i(q),decodeTuple6:a(L),decodeTuple7:u(P),decodeTuple8:s(B),andThen:t(g),customAndThen:t(y),fail:c,succeed:e,oneOf:b,identity:Z,encodeNull:null,encodeArray:Ae.toJSArray,encodeList:M.toArray,encodeObject:ee,equality:Q}}(),Nt=(Ct.encodeList,Ct.encodeArray,Ct.encodeObject,Ct.encodeNull,Ct.identity),Rt=(Ct.identity,Ct.identity,Ct.identity),It=(Ct.encode,Ct.decodeTuple8,Ct.decodeTuple7,Ct.decodeTuple6,Ct.decodeTuple5,Ct.decodeTuple4,Ct.decodeTuple3,Ct.decodeTuple2),qt=(Ct.decodeTuple1,Ct.succeed),jt=(Ct.fail,Ct.andThen),Lt=Ct.customAndThen,Dt=Ct.run,Pt=Ct.decodePrimitive("value"),Mt=function(e){return c(Ct.decodeContainer,"maybe",e)},Bt=Ct.decodeNull,Ft=function(e){return c(Ct.decodeContainer,"list",e)},Ut=Ct.decodePrimitive("bool"),Jt=Ct.decodePrimitive("int"),Ht=Ct.decodePrimitive("float"),Wt=Ct.decodePrimitive("string"),Vt=Ct.oneOf,zt=(Ct.decodeKeyValuePairs,Ct.decodeObject8,Ct.decodeObject7,Ct.decodeObject6,Ct.decodeObject5,Ct.decodeObject4,Ct.decodeObject3,Ct.decodeObject2,Ct.decodeObject1,zt||{});zt[":="]=Ct.decodeField;var Gt=t(function(e,r){return l(z,t(function(e,t){return c(zt[":="],e,t)}),r,e)}),Kt=Ct.runOnString,$t=Ct.decodeObject1,Qt=qt,Xt=t(function(e,t){return c(jt,t,function(t){return c($t,t,e)})}),Yt=(t(function(e,t){return c(jt,t,function(t){return c($t,t,qt(e))})}),r(function(e,t,r){var n=function(n){var o=c(Dt,e,n);return"Ok"===o.ctor?c(Dt,t,o._0):pe(r)};return c(Lt,Pt,n)})),Zt=(n(function(e,t,r,n){return c(Xt,l(Yt,c(Gt,e,Pt),t,r),n)}),n(function(e,t,r,n){return c(Xt,l(Yt,c(zt[":="],e,Pt),t,r),n)}),r(function(e,t,r){return c(Xt,c(Gt,e,t),r)}),r(function(e,t,r){return c(Xt,c(zt[":="],e,t),r)})),er=(r(function(e,t,n){var o=n;return l(Pe,r(function(t,r,n){return c(e,t,n)}),t,o._0)}),r(function(e,t,n){var o=n;return l(Fe,r(function(t,r,n){return c(e,t,n)}),t,o._0)}),function(e){var t=e;return Me(t._0)}),tr=t(function(e,t){var r=t;return c(ze,e,r._0)}),rr=function(e){return{ctor:"Set_elm_builtin",_0:e}},nr=rr(ot),or=t(function(e,t){var r=t;return rr(l(wt,e,{ctor:"_Tuple0"},r._0))}),ir=function(e){return l(G,or,nr,e)},ar=(t(function(e,t){return ir(c(ee,e,er(t)))}),t(function(e,t){var r=t;return rr(c(xt,e,r._0))}),t(function(e,t){var r=e,n=t;return rr(c(kt,r._0,n._0))}),t(function(e,t){var r=e,n=t;return rr(c(St,r._0,n._0))}),t(function(e,t){var r=e,n=t;return rr(c(Ot,r._0,n._0))}),t(function(e,r){var n=r;return rr(c(Et,t(function(t,r){return e(t)}),n._0))}),t(function(e,r){var n=r,o=c(At,t(function(t,r){return e(t)}),n._0),i=o._0,a=o._1;return{ctor:"_Tuple2",_0:rr(i),_1:rr(a)}}),r(function(e,t,r){var n=v.cmp(K(r),0)>0,o=v.cmp(e,0)>0&&v.cmp(t,0)>0,i=c(B,t,r),a=c(le,e,r);return o&&n?c(Z["::"],a,l(ar,e,t,i)):M.fromArray([])})),ur=(t(function(e,t){return l(ar,e,e,t)}),r(function(e,t,r){var n=v.cmp(e,0)>0&&v.cmp(t,0)>0,o=c(B,t,r),i=c(le,e,r),a=v.eq(e,K(i));return n&&a?c(Z["::"],i,l(ur,e,t,o)):M.fromArray([])})),sr=(t(function(e,t){return l(ur,e,e,t)}),F(o(function(e,t,r,n,o){return{ctor:"_Tuple5",_0:e,_1:t,_2:r,_3:n,_4:o}})),U(n(function(e,t,r,n){return{ctor:"_Tuple4",_0:e,_1:t,_2:r,_3:n}})),J(r(function(e,t,r){return{ctor:"_Tuple3",_0:e,_1:t,_2:r}})),H(t(function(e,t){return{ctor:"_Tuple2",_0:e,_1:t}})),function(e){return function(r){return c(V,b,l(H,t(function(e,t){return v.eq(e,t)}),e,r))}}),cr=(t(function(e,t){return c(sr,ne(e),ne(t))}),function(e){var t=e;if("[]"===t.ctor)return M.fromArray([]);var r=t._1,n=t._0;return c(Z["::"],{ctor:"_Tuple2",_0:n,_1:r},c(ee,function(e){var t=e;return{ctor:"_Tuple2",_0:t._0,_1:c(Z["::"],n,t._1)}},cr(r)))}),lr=t(function(e,t){var r=t;if("::"===r.ctor){var n=r._0;return c(Z["::"],c(Z["::"],e,n),c(Z["::"],n,r._1))}return M.fromArray([])}),fr=c(z,lr,M.fromArray([M.fromArray([])])),dr=(t(function(e,t){return c(W,sr(e),fr(t))}),c(z,t(function(e,r){return c(Z["::"],M.fromArray([]),c(ee,t(function(e,t){return c(Z["::"],e,t)})(e),r))}),M.fromArray([M.fromArray([])])),t(function(e,t){var r=t;if("[]"===r.ctor)return M.fromArray([]);if("[]"===r._1.ctor)return M.fromArray([M.fromArray([r._0])]);var n=r._0,o=c(dr,e,r._1);return"::"===o.ctor?c(e,n,r._1._0)?c(Z["::"],c(Z["::"],n,o._0),o._1):c(Z["::"],M.fromArray([n]),o):M.fromArray([])})),hr=(t(function(e,r){var n=t(function(e,t){var r=t;return"Nothing"===r.ctor?j:"[]"===r._0.ctor?j:v.eq(e,r._0._0)?D(r._0._1):j});return l(G,n,D(r),e)}),t(function(e,t){return{ctor:"_Tuple2",_0:c(le,e,t),_1:c(B,e,t)}}),t(function(e,t){var r=e(t);return"Nothing"===r.ctor?M.fromArray([]):c(Z["::"],r._0._0,c(hr,e,r._0._1))})),pr=t(function(e,t){var r=t;if("[]"===r.ctor)return M.fromArray([]);if("[]"===r._1.ctor)return M.fromArray([r._0]);var n=c(pr,e,r._1);return"::"===n.ctor?c(Z["::"],c(e,r._0,n._0),n):M.fromArray([])}),_r=r(function(e,t,r){var n=r;if("[]"===n.ctor)return M.fromArray([t]);var o=l(_r,e,t,n._1);return"::"===o.ctor?c(Z["::"],c(e,n._0,o._0),o):M.fromArray([])}),vr=(t(function(e,t){var r=t;return"[]"===r.ctor?M.fromArray([]):l(oe,e,r._0,r._1)}),t(function(e,r){var n=t(function(t,r){return D(function(){var n=r;return"Nothing"===n.ctor?t:c(e,t,n._0)}())});return l(z,n,j,r)}),t(function(e,r){var n=t(function(t,r){return D(function(){var n=r;return"Nothing"===n.ctor?t:c(e,n._0,t)}())});return l(G,n,j,r)})),mr=r(function(e,t,r){e:for(;;){var n={ctor:"_Tuple2",_0:e,_1:t};t:do{if("::"===n._0.ctor){if("::"===n._1.ctor){var o=n._0._1,i=n._1._1,a=c(w["++"],r,M.fromArray([n._0._0,n._1._0]));e=o,t=i,r=a;continue e}break t}if("[]"===n._1.ctor)break t;return c(w["++"],r,n._1)}while(!1);return c(w["++"],r,n._0)}}),gr=(t(function(e,t){return l(mr,e,t,M.fromArray([]))}),function(e){var r=e;if("[]"===r.ctor)return M.fromArray([M.fromArray([])]);var n=function(e){var r=e;return c(ee,t(function(e,t){return c(Z["::"],e,t)})(r._0),gr(r._1))};return c(ue,n,cr(r))}),yr=(t(function(e,t){return c(Q,e,gr(t))}),function(e){var r=e;if("[]"===r.ctor)return M.fromArray([]);var n=r._0,o=t(function(e,t){return c(Z["::"],e,c(Z["::"],c(Z["::"],n,e),t))});return c(Z["::"],M.fromArray([n]),l(z,o,M.fromArray([]),yr(r._1)))}),br=function(e){return c(Z["::"],M.fromArray([]),yr(e))},wr=(t(function(e,t){return c(Q,e,br(t))}),t(function(e,t){return c(te,function(t){return A(e(t))},t)}),t(function(e,t){if(v.cmp(e,0)<0)return t;var r=X(c(B,e,t)),n=c(le,e,t),o=r;return"Nothing"===o.ctor?t:c(ie,n,o._0)}),r(function(e,t,r){if(v.cmp(e,0)<0)return j;var n=X(c(B,e,r)),o=c(le,e,r),i=n;return"Nothing"===i.ctor?j:D(c(ie,o,c(Z["::"],t,i._0)))}),t(function(e,t){return c(te,function(t){return A(e(t))},t)}),r(function(e,r,n){return c($,t(function(t,n){return e(t)?r(n):n}),n)})),kr=(r(function(e,r,n){return v.cmp(e,0)<0||v.cmp(e,K(n))>-1?j:D(l(wr,t(function(e,t){return v.eq(e,t)})(e),r,n))}),r(function(e,t,r){return c(ee,function(r){return e(r)?t(r):r},r)})),Er=(r(function(e,t,r){return l(kr,e,y(t),r)}),t(function(e,t){for(;;){var r=t;if("[]"===r.ctor)return j;var n=r._0;if(e(n))return D(n);var o=e,i=r._1;e=o,t=i}})),Sr=m(ue),Ar=(r(function(e,t,r){return c(Sr,t,function(t){return c(Sr,r,function(r){return M.fromArray([c(e,t,r)])})})}),n(function(e,t,r,n){return c(Sr,t,function(t){return c(Sr,r,function(r){return c(Sr,n,function(n){return M.fromArray([l(e,t,r,n)])})})})}),o(function(e,t,r,n,o){return c(Sr,t,function(t){return c(Sr,r,function(r){return c(Sr,n,function(n){return c(Sr,o,function(o){return M.fromArray([f(e,t,r,n,o)])})})})})}),t(function(e,r){return l(H,t(function(e,t){return e(t)}),e,r)}),t(function(e,t){for(;;){var r=t;if("[]"===r.ctor)return M.fromArray([]);var n=r._1,o=r._0;{if(!c(tr,o,e))return c(Z["::"],o,c(Ar,c(or,o,e),n));var i=e,a=n;e=i,t=a}}})),Tr=t(function(e,t){for(;;){var r=t;if("[]"===r.ctor)return M.fromArray([]);{if(!e(r._0))return t;var n=e,o=r._1;e=n,t=o}}}),xr=t(function(e,t){var r=t;if("[]"===r.ctor)return M.fromArray([]);var n=r._0;return e(n)?c(Z["::"],n,c(xr,e,r._1)):M.fromArray([])}),Or=t(function(e,t){return{ctor:"_Tuple2",_0:c(xr,e,t),_1:c(Tr,e,t)}}),Cr=t(function(e,t){var r=t;if("[]"===r.ctor)return M.fromArray([]);var n=r._0,o=c(Or,e(n),r._1),i=o._0,a=o._1;return c(Z["::"],c(Z["::"],n,i),c(Cr,e,a))}),Nr=(Cr(t(function(e,t){return v.eq(e,t)})),t(function(e,r){var n=t(function(t,r){var n=r,o=n._1,i=e(t);return v.cmp(i,o)<0?{ctor:"_Tuple2",_0:t,_1:i}:{ctor:"_Tuple2",_0:n._0,_1:o}}),o=r;if("::"===o.ctor){if("[]"===o._1.ctor)return D(o._0);var i=o._0;return D(g(l(G,n,{ctor:"_Tuple2",_0:i,_1:e(i)},o._1)))}return j}),t(function(e,r){var n=t(function(t,r){var n=r,o=n._1,i=e(t);return v.cmp(i,o)>0?{ctor:"_Tuple2",_0:t,_1:i}:{ctor:"_Tuple2",_0:n._0,_1:o}}),o=r;if("::"===o.ctor){if("[]"===o._1.ctor)return D(o._0);var i=o._0;return D(g(l(G,n,{ctor:"_Tuple2",_0:i,_1:e(i)},o._1)))}return j}),t(function(e,t){var r=e(t);return"Just"===r.ctor?c(Z["::"],t,c(Nr,e,r._0)):M.fromArray([t])})),Rr=t(function(e,t){return v.cmp(e,0)<0?j:Y(c(B,e,t))}),Ir=Ir||{};Ir["!!"]=m(Rr);var qr=(function(){var e=t(function(e,t){return function(r){return c(q,e,c(P,t,r))}});return c(z,function(r){return c(t(function(e,t){return function(r){return e(t(r))}}),D,c(e,M.fromArray([]),t(function(e,t){return c(Z["::"],e,t)})(r)))},j)}(),vr(m(y)),function(){function e(e){var t=new Date(e);return isNaN(t.getTime())?he("unable to parse '"+e+"' as a date"):pe(t)}var t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return{fromString:e,year:function(e){return e.getFullYear()},month:function(e){return{ctor:r[e.getMonth()]}},day:function(e){return e.getDate()},hour:function(e){return e.getHours()},minute:function(e){return e.getMinutes()},second:function(e){return e.getSeconds()},millisecond:function(e){return e.getMilliseconds()},toTime:function(e){return e.getTime()},fromTime:function(e){return new Date(e)},dayOfWeek:function(e){return{ctor:t[e.getDay()]}}}}()),jr=ve.onError,Lr=ve.andThen,Dr=t(function(e,t){var r=t;return ve.spawn(c(Lr,r._0,ge(e)))}),Pr=ve.fail,Mr=t(function(e,t){return c(jr,t,function(t){return Pr(e(t))})}),Br=ve.succeed,Fr=t(function(e,t){return c(Lr,t,function(t){return Br(e(t))})}),Ur=r(function(e,t,r){return c(Lr,t,function(t){return c(Lr,r,function(r){return Br(c(e,t,r))})})}),Jr=(n(function(e,t,r,n){return c(Lr,t,function(t){return c(Lr,r,function(r){return c(Lr,n,function(n){return Br(l(e,t,r,n))})})})}),o(function(e,t,r,n,o){return c(Lr,t,function(t){return c(Lr,r,function(r){return c(Lr,n,function(n){
return c(Lr,o,function(o){return Br(f(e,t,r,n,o))})})})})}),i(function(e,t,r,n,o,i){return c(Lr,t,function(t){return c(Lr,r,function(r){return c(Lr,n,function(n){return c(Lr,o,function(o){return c(Lr,i,function(i){return Br(d(e,t,r,n,o,i))})})})})})}),t(function(e,t){return c(Lr,e,function(e){return c(Lr,t,function(t){return Br(e(t))})})}),function(e){var r=e;return"[]"===r.ctor?Br(M.fromArray([])):l(Ur,t(function(e,t){return c(Z["::"],e,t)}),r._0,Jr(r._1))}),Hr=r(function(e,t,r){return c(Fr,function(e){return{ctor:"_Tuple0"}},Jr(c(ee,Dr(e),t)))}),Wr=(t(function(e,t){var r=t;return"Just"===r.ctor?Br(r._0):Pr(e)}),Br({ctor:"_Tuple0"})),Vr=r(function(e,t,r){return Br({ctor:"_Tuple0"})}),zr=_e.leaf("Task"),Gr=function(e){return{ctor:"T",_0:e}},Kr=r(function(e,t,r){return zr(Gr(c(jr,c(Fr,t,r),function(t){return Br(e(t))})))}),$r=t(function(e,t){var r=t;return Gr(c(Fr,e,r._0))});_e.effectManagers.Task={pkg:"elm-lang/core",init:Wr,onEffects:Hr,onSelfMsg:Vr,tag:"cmd",cmdMap:$r};var Qr=function(){function e(e,t){return ve.nativeBinding(function(r){var n=setInterval(function(){ve.rawSpawn(t)},e);return function(){clearInterval(n)}})}var r=ve.nativeBinding(function(e){e(ve.succeed(Date.now()))});return{now:r,setInterval_:t(e)}}(),Xr=Qr.setInterval_,Yr=r(function(e,t,r){var n=t;if("[]"===n.ctor)return Br(r);var o=n._0;return c(Lr,ve.spawn(c(Xr,o,c(me,e,o))),function(t){return l(Yr,e,n._1,l(wt,o,t,r))})}),Zr=t(function(e,t){var r=e,n=r._1,o=r._0,i=c(Ve,o,t);return"Nothing"===i.ctor?l(wt,o,M.fromArray([n]),t):l(wt,o,c(Z["::"],n,i._0),t)}),en=1,tn=Qr.now,rn=r(function(e,t,r){var n=c(Ve,t,r.taggers);return"Nothing"===n.ctor?Br(r):c(Lr,tn,function(t){return c(Lr,Jr(c(ee,function(r){return c(ge,e,r(t))},n._0)),function(e){return Br(r)})})}),nn=_e.leaf("Time"),on=t(function(e,t){return{taggers:e,processes:t}}),an=Br(c(on,ot,ot)),un=r(function(e,t,o){var i=o,a=r(function(e,t,r){var n=r;return{ctor:"_Tuple3",_0:n._0,_1:n._1,_2:c(Lr,ve.kill(t),function(e){return n._2})}}),u=n(function(e,t,r,n){var o=n;return{ctor:"_Tuple3",_0:o._0,_1:l(wt,e,r,o._1),_2:o._2}}),s=r(function(e,t,r){var n=r;return{ctor:"_Tuple3",_0:c(Z["::"],e,n._0),_1:n._1,_2:n._2}}),f=l(G,Zr,ot,t),d=h(Ue,s,u,a,f,i.processes,{ctor:"_Tuple3",_0:M.fromArray([]),_1:ot,_2:Br({ctor:"_Tuple0"})}),p=d._0,_=d._1,v=d._2;return c(Lr,v,function(t){return c(Lr,l(Yr,e,p,_),function(e){return Br(c(on,f,e))})})}),sn=t(function(e,t){return{ctor:"Every",_0:e,_1:t}}),cn=(t(function(e,t){return nn(c(sn,e,t))}),t(function(e,t){var r=t;return c(sn,r._0,function(t){return e(r._1(t))})}));_e.effectManagers.Time={pkg:"elm-lang/core",init:an,onEffects:un,onSelfMsg:rn,tag:"sub",subMap:cn};var ln=qr.millisecond,fn=qr.second,dn=qr.minute,hn=qr.hour,pn=qr.dayOfWeek,_n=qr.day,vn=qr.month,mn=qr.year,gn=qr.fromTime,yn=qr.toTime,bn=qr.fromString,wn=c(Fr,gn,tn),kn={ctor:"Sun"},En={ctor:"Dec"},Sn={ctor:"Nov"},An={ctor:"Oct"},Tn={ctor:"Sep"},xn={ctor:"Aug"},On={ctor:"Jul"},Cn={ctor:"Jun"},Nn={ctor:"May"},Rn={ctor:"Apr"},In={ctor:"Mar"},qn={ctor:"Feb"},jn={ctor:"Jan"},Ln=function(){function e(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function o(e){return new RegExp(e.source,"gi")}function i(e){return new RegExp(e,"g")}function a(e,t){return null!==t.match(e)}function u(e,t,r){e="All"===e.ctor?1/0:e._0;for(var n,o=[],i=0,a=r,u=t.lastIndex,s=-1;i++<e&&(n=t.exec(a))&&s!==t.lastIndex;){for(var c=n.length-1,l=new Array(c);c>0;){var f=n[c];l[--c]=void 0===f?j:D(f)}o.push({match:n[0],submatches:M.fromArray(l),index:n.index,number:i}),s=t.lastIndex}return t.lastIndex=u,M.fromArray(o)}function s(e,t,r,n){function o(t){if(i++>=e)return t;for(var n=arguments.length-3,o=new Array(n);n>0;){var a=arguments[n];o[--n]=void 0===a?j:D(a)}return r({match:t,submatches:M.fromArray(o),index:arguments[n-1],number:i})}e="All"===e.ctor?1/0:e._0;var i=0;return n.replace(t,o)}function c(e,t,r){if(e="All"===e.ctor?1/0:e._0,e===1/0)return M.fromArray(r.split(t));for(var n,o=r,i=[],a=t.lastIndex;e--&&(n=t.exec(o));)i.push(o.slice(a,n.index)),a=t.lastIndex;return i.push(o.slice(a)),M.fromArray(i)}return{regex:i,caseInsensitive:o,escape:e,contains:t(a),find:r(u),replace:n(s),split:r(c)}}(),Dn=(Ln.split,Ln.replace),Pn=(Ln.find,Ln.contains,Ln.caseInsensitive,Ln.regex),Mn=(Ln.escape,n(function(e,t,r,n){return{match:e,submatches:t,index:r,number:n}}),{ctor:"All"}),Bn=function(){function e(e){return{type:"text",text:e}}function o(e){return t(function(t,r){return i(e,t,r)})}function i(e,t,r){for(var n=p(t),o=n.namespace,i=n.facts,a=[],u=0;"[]"!==r.ctor;){var s=r._0;u+=s.descendantsCount||0,a.push(s),r=r._1}return u+=a.length,{type:"node",tag:e,facts:i,children:a,namespace:o,descendantsCount:u}}function a(e,t,r){var n=p(e).facts;return{type:"custom",facts:n,model:t,impl:r}}function u(e,t){return{type:"tagger",tagger:e,node:t,descendantsCount:1+(t.descendantsCount||0)}}function s(e,t,r){return{type:"thunk",func:e,args:t,thunk:r,node:null}}function f(e,t){return s(e,[t],function(){return e(t)})}function d(e,t,r){return s(e,[t,r],function(){return c(e,t,r)})}function h(e,t,r,n){return s(e,[t,r,n],function(){return l(e,t,r,n)})}function p(e){for(var t,r={};"[]"!==e.ctor;){var n=e._0,o=n.key;if(o===W||o===V||o===H){var i=r[o]||{};i[n.realKey]=n.value,r[o]=i}else if(o===J){for(var a=r[o]||{},u=n.value;"[]"!==u.ctor;){var s=u._0;a[s._0]=s._1,u=u._1}r[o]=a}else"namespace"===o?t=n.value:r[o]=n.value;e=e._1}return{facts:r,namespace:t}}function _(e){return{key:J,value:e}}function v(e,t){return{key:e,value:t}}function m(e,t){return{key:W,realKey:e,value:t}}function g(e,t,r){return{key:V,realKey:t,value:{value:r,namespace:e}}}function y(e,t,r){return{key:H,realKey:e,value:{options:t,decoder:r}}}function b(e,t){return!e.options!==t.options||e.stopPropagation===t.stopPropagation&&e.preventDefault===t.preventDefault?Ct.equality(e.decoder,t.decoder):!1}function w(e,t,r){function n(e){"NO_REQUEST"===u&&z(o),u="PENDING_REQUEST",c=e}function o(){switch(u){case"NO_REQUEST":throw new Error("Unexpected draw callback.\nPlease report this to <https://github.com/elm-lang/core/issues>.");case"PENDING_REQUEST":z(o),u="EXTRA_REQUEST";var e=C(s,c);return a=P(a,s,e,i),void(s=c);case"EXTRA_REQUEST":return void(u="NO_REQUEST")}}var i={tagger:t,parent:null},a=k(r,i);e.appendChild(a);var u="NO_REQUEST",s=r,c=r;return{update:n}}function k(e,t){switch(e.type){case"thunk":return e.node||(e.node=e.thunk()),k(e.node,t);case"tagger":for(var r=e.node,n=e.tagger;"tagger"===r.type;)"object"!=typeof n?n=[n,r.tagger]:n.push(r.tagger),r=r.node;var o={tagger:n,parent:t},i=k(r,o);return i.elm_event_node_ref=o,i;case"text":return document.createTextNode(e.text);case"node":var i=e.namespace?document.createElementNS(e.namespace,e.tag):document.createElement(e.tag);E(i,t,e.facts);for(var a=e.children,u=0;u<a.length;u++)i.appendChild(k(a[u],t));return i;case"custom":var i=e.impl.render(e.model);return E(i,t,e.facts),i}}function E(e,t,r){for(var n in r){var o=r[n];switch(n){case J:S(e,o);break;case H:A(e,t,o);break;case W:x(e,o);break;case V:O(e,o);break;case"value":e[n]!==o&&(e[n]=o);break;default:e[n]=o}}}function S(e,t){var r=e.style;for(var n in t)r[n]=t[n]}function A(e,t,r){var n=e.elm_handlers||{};for(var o in r){var i=n[o],a=r[o];if("undefined"==typeof a)e.removeEventListener(o,i),n[o]=void 0;else if("undefined"==typeof i){var i=T(t,a);e.addEventListener(o,i),n[o]=i}else i.info=a}e.elm_handlers=n}function T(e,t){function r(t){var n=r.info,o=c(Ct.run,n.decoder,t);if("Ok"===o.ctor){var i=n.options;i.stopPropagation&&t.stopPropagation(),i.preventDefault&&t.preventDefault();for(var a=o._0,u=e;u;){var s=u.tagger;if("function"==typeof s)a=s(a);else for(var l=s.length;l--;)a=s[l](a);u=u.parent}}}return r.info=t,r}function x(e,t){for(var r in t){var n=t[r];"undefined"==typeof n?e.removeAttribute(r):e.setAttribute(r,n)}}function O(e,t){for(var r in t){var n=t[r],o=n.namespace,i=n.value;"undefined"==typeof i?e.removeAttributeNS(o,r):e.setAttributeNS(o,r,i)}}function C(e,t){var r=[];return R(e,t,r,0),r}function N(e,t,r){return{index:t,type:e,data:r,domNode:null,eventNode:null}}function R(e,t,r,n){if(e!==t){var o=e.type,i=t.type;if(o!==i)return void r.push(N("p-redraw",n,t));switch(i){case"thunk":for(var a=e.args,u=t.args,s=a.length,c=e.func===t.func&&s===u.length;c&&s--;)c=a[s]===u[s];if(c)return void(t.node=e.node);t.node=t.thunk();var l=[];return R(e.node,t.node,l,0),void(l.length>0&&r.push(N("p-thunk",n,l)));case"tagger":for(var f=e.tagger,d=t.tagger,h=!1,p=e.node;"tagger"===p.type;)h=!0,"object"!=typeof f?f=[f,p.tagger]:f.push(p.tagger),p=p.node;for(var _=t.node;"tagger"===_.type;)h=!0,"object"!=typeof d?d=[d,_.tagger]:d.push(_.tagger),_=_.node;return h&&f.length!==d.length?void r.push(N("p-redraw",n,t)):((h?I(f,d):f===d)||r.push(N("p-tagger",n,d)),void R(p,_,r,n+1));case"text":if(e.text!==t.text)return void r.push(N("p-text",n,t.text));return;case"node":if(e.tag!==t.tag||e.namespace!==t.namespace)return void r.push(N("p-redraw",n,t));var v=q(e.facts,t.facts);return"undefined"!=typeof v&&r.push(N("p-facts",n,v)),void j(e,t,r,n);case"custom":if(e.impl!==t.impl)return void r.push(N("p-redraw",n,t));var v=q(e.facts,t.facts);"undefined"!=typeof v&&r.push(N("p-facts",n,v));var m=t.impl.diff(e,t);if(m)return void r.push(N("p-custom",n,m));return}}}function I(e,t){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function q(e,t,r){var n;for(var o in e)if(o!==J&&o!==H&&o!==W&&o!==V)if(o in t){var i=e[o],a=t[o];i===a&&"value"!==o||r===H&&b(i,a)||(n=n||{},n[o]=a)}else n=n||{},n[o]="undefined"==typeof r?"string"==typeof e[o]?"":null:r===J?"":r===H||r===W?void 0:{namespace:e[o].namespace,value:void 0};else{var u=q(e[o],t[o]||{},o);u&&(n=n||{},n[o]=u)}for(var s in t)s in e||(n=n||{},n[s]=t[s]);return n}function j(e,t,r,n){var o=e.children,i=t.children,a=o.length,u=i.length;a>u?r.push(N("p-remove",n,a-u)):u>a&&r.push(N("p-insert",n,i.slice(a)));for(var s=n,c=u>a?a:u,l=0;c>l;l++){s++;var f=o[l];R(f,i[l],r,s),s+=f.descendantsCount||0}}function L(e,t,r,n){D(e,t,r,0,0,t.descendantsCount,n)}function D(e,t,r,n,o,i,a){for(var u=r[n],s=u.index;s===o;){var c=u.type;if("p-thunk"===c?L(e,t.node,u.data,a):(u.domNode=e,u.eventNode=a),n++,!(u=r[n])||(s=u.index)>i)return n}switch(t.type){case"tagger":for(var l=t.node;"tagger"===l.type;)l=l.node;return D(e,l,r,n,o+1,i,e.elm_event_node_ref);case"node":for(var f=t.children,d=e.childNodes,h=0;h<f.length;h++){o++;var p=f[h],_=o+(p.descendantsCount||0);if(s>=o&&_>=s&&(n=D(d[h],p,r,n,o,_,a),!(u=r[n])||(s=u.index)>i))return n;o=_}return n;case"text":case"thunk":throw new Error("should never traverse `text` or `thunk` nodes like this")}}function P(e,t,r,n){return 0===r.length?e:(L(e,t,r,n),M(e,r))}function M(e,t){for(var r=0;r<t.length;r++){var n=t[r],o=n.domNode,i=B(o,n);o===e&&(e=i)}return e}function B(e,t){switch(t.type){case"p-redraw":return F(e,t.data,t.eventNode);case"p-facts":return E(e,t.eventNode,t.data),e;case"p-text":return e.replaceData(0,e.length,t.data),e;case"p-thunk":return M(e,t.data);case"p-tagger":return e.elm_event_node_ref.tagger=t.data,e;case"p-remove":for(var r=t.data;r--;)e.removeChild(e.lastChild);return e;case"p-insert":for(var n=t.data,r=0;r<n.length;r++)e.appendChild(k(n[r],t.eventNode));return e;case"p-custom":var o=t.data;return o.applyPatch(e,o.data);default:throw new Error("Ran into an unknown patch!")}}function F(e,t,r){var n=e.parentNode,o=k(t,r);return"undefined"==typeof o.elm_event_node_ref&&(o.elm_event_node_ref=e.elm_event_node_ref),n&&o!==e&&n.replaceChild(o,e),o}function U(e){return{init:e.init,update:e.update,subscriptions:e.subscriptions,view:e.view,renderer:w}}var J="STYLE",H="EVENT",W="ATTR",V="ATTR_NS",z="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:function(e){setTimeout(e,1e3/60)};return{node:o,text:e,custom:a,map:t(u),on:r(y),style:_,property:t(v),attribute:t(m),attributeNS:r(g),lazy:t(f),lazy2:r(d),lazy3:n(h),programWithFlags:U}}(),Fn=Bn.programWithFlags,Un=(Bn.lazy3,Bn.lazy2,Bn.lazy),Jn={stopPropagation:!1,preventDefault:!1},Hn=Bn.on,Wn=t(function(e,t){return l(Hn,e,Jn,t)}),Vn=Bn.style,zn=(Bn.attributeNS,Bn.attribute,Bn.property),Gn=Bn.map,Kn=Bn.text,$n=Bn.node,Qn=(t(function(e,t){return{stopPropagation:e,preventDefault:t}}),Kn),Xn=$n,Yn=(Xn("body"),Xn("section"),Xn("nav")),Zn=(Xn("article"),Xn("aside"),Xn("h1"),Xn("h2"),Xn("h3"),Xn("h4"),Xn("h5"),Xn("h6"),Xn("header")),eo=(Xn("footer"),Xn("address"),Xn("main")),to=(Xn("p"),Xn("hr")),ro=(Xn("pre"),Xn("blockquote"),Xn("ol"),Xn("ul"),Xn("li"),Xn("dl"),Xn("dt"),Xn("dd"),Xn("figure"),Xn("figcaption"),Xn("div")),no=Xn("a"),oo=(Xn("em"),Xn("strong"),Xn("small"),Xn("s"),Xn("cite"),Xn("q"),Xn("dfn"),Xn("abbr"),Xn("time"),Xn("code"),Xn("var"),Xn("samp"),Xn("kbd"),Xn("sub"),Xn("sup"),Xn("i"),Xn("b"),Xn("u"),Xn("mark"),Xn("ruby"),Xn("rt"),Xn("rp"),Xn("bdi"),Xn("bdo"),Xn("span")),io=(Xn("br"),Xn("wbr"),Xn("ins"),Xn("del"),Xn("img")),ao=(Xn("iframe"),Xn("embed"),Xn("object"),Xn("param"),Xn("video"),Xn("audio"),Xn("source"),Xn("track"),Xn("canvas"),Xn("svg"),Xn("math"),Xn("table"),Xn("caption"),Xn("colgroup"),Xn("col"),Xn("tbody"),Xn("thead"),Xn("tfoot"),Xn("tr"),Xn("td"),Xn("th"),Xn("form")),uo=(Xn("fieldset"),Xn("legend"),Xn("label")),so=Xn("input"),co=Xn("button"),lo=(Xn("select"),Xn("datalist"),Xn("optgroup"),Xn("option"),Xn("textarea"),Xn("keygen"),Xn("output"),Xn("progress"),Xn("meter"),Xn("details"),Xn("summary"),Xn("menuitem"),Xn("menu"),Fn),fo=function(e){return lo(v.update(e,{init:function(t){return e.init}}))},ho=Gn,po=zn,_o=t(function(e,t){return c(po,e,Rt(t))}),vo=function(e){return c(_o,"className",e)},mo=function(e){return c(_o,"id",e)},go=function(e){return c(_o,"src",e)},yo=function(e){return c(_o,"type",e)},bo=function(e){return c(_o,"htmlFor",e)},wo=function(e){return c(_o,"href",e)},ko=t(function(e,t){return c(po,e,Nt(t))}),Eo=function(e){return c(ko,"disabled",e)},So=Vn,Ao=(c(zt[":="],"keyCode",Jt),c(Gt,M.fromArray(["target","checked"]),Ut),c(Gt,M.fromArray(["target","value"]),Wt)),To=Jn,xo=Hn,Oo=Wn,Co=v.update(To,{preventDefault:!0}),No=function(e){return l(xo,"submit",Co,qt(e))},Ro=function(e){return c(Oo,"input",c($t,e,Ao))},Io=function(e){return c(Oo,"click",qt(e))},qo=(t(function(e,t){return{stopPropagation:e,preventDefault:t}}),Un),jo=function(){function e(e,t){return ve.nativeBinding(function(n){function o(e){i.setRequestHeader(e._0,e._1)}var i=new XMLHttpRequest;return"Just"===e.onStart.ctor&&i.addEventListener("loadStart",function(){var t=e.onStart._0;ve.rawSpawn(t)}),"Just"===e.onProgress.ctor&&i.addEventListener("progress",function(t){var r=t.lengthComputable?D({loaded:t.loaded,total:t.total}):j,n=e.onProgress._0(r);ve.rawSpawn(n)}),i.addEventListener("error",function(){return n(ve.fail({ctor:"RawNetworkError"}))}),i.addEventListener("timeout",function(){return n(ve.fail({ctor:"RawTimeout"}))}),i.addEventListener("load",function(){return n(ve.succeed(r(i)))}),i.open(t.verb,t.url,!0),c(ee,o,t.headers),i.timeout=e.timeout,i.withCredentials=e.withCredentials,"Just"===e.desiredResponseType.ctor&&i.overrideMimeType(e.desiredResponseType._0),"BodyFormData"===t.body.ctor?i.send(t.body.formData):i.send(t.body._0),function(){i.abort()}})}function r(e){var t="blob"===e.responseType?"Blob":"Text",r="Blob"===t?e.response:e.responseText;return{status:e.status,statusText:e.statusText,headers:n(e.getAllResponseHeaders()),url:e.responseURL,value:{ctor:t,_0:r}}}function n(e){var t=ot;if(!e)return t;for(var r=e.split("\r\n"),n=r.length;n--;){var o=r[n],i=o.indexOf(": ");if(i>0){var a=o.substring(0,i),u=o.substring(i+2);t=l(bt,a,function(e){return D("Just"===e.ctor?u+", "+e._0:u)},t)}}return t}function o(e){for(var t=new FormData;"[]"!==e.ctor;){var r=e._0;if("StringData"===r.ctor)t.append(r._0,r._1);else{var n="Nothing"===r._1.ctor?void 0:r._1._0;t.append(r._0,r._2,n)}e=e._1}return{ctor:"BodyFormData",formData:t}}function i(e){return encodeURIComponent(e)}function a(e){return decodeURIComponent(e)}return{send:t(e),multipart:o,uriEncode:i,uriDecode:a}}(),Lo=jo.send,Do={timeout:0,onStart:j,onProgress:j,desiredResponseType:j,withCredentials:!1},Po=(jo.multipart,jo.uriDecode,jo.uriEncode),Mo=function(e){return c(je,"+",c(Le,"%20",Po(e)))},Bo=function(e){var t=e;return c(w["++"],Mo(t._0),c(w["++"],"=",Mo(t._1)))},Fo=(t(function(e,t){var r=t;return"[]"===r.ctor?e:c(w["++"],e,c(w["++"],"?",c(je,"&",c(ee,Bo,t))))}),n(function(e,t,r,n){return{verb:e,headers:t,url:r,body:n}}),o(function(e,t,r,n,o){return{timeout:e,onStart:t,onProgress:r,desiredResponseType:n,withCredentials:o}}),o(function(e,t,r,n,o){return{status:e,statusText:t,headers:r,url:n,value:o}}),{ctor:"Empty"}),Uo=Fo,Jo=(r(function(e,t,r){return{ctor:"FileData",_0:e,_1:t,_2:r}}),r(function(e,t,r){return{ctor:"BlobData",_0:e,_1:t,_2:r}}),t(function(e,t){return{ctor:"StringData",_0:e,_1:t}}),t(function(e,t){return{ctor:"BadResponse",_0:e,_1:t}})),Ho=function(e){return{ctor:"UnexpectedPayload",_0:e}},Wo=t(function(e,t){if(v.cmp(200,t.status)<1&&v.cmp(t.status,300)<0){var r=t.value;return"Text"===r.ctor?e(r._0):Pr(Ho("Response body is a blob, expecting a string."))}return Pr(c(Jo,t.status,t.statusText))}),Vo={ctor:"NetworkError"},zo={ctor:"Timeout"},Go=function(e){var t=e;return"RawTimeout"===t.ctor?zo:Vo},Ko=t(function(e,t){var r=function(t){var r=c(Kt,e,t);return"Ok"===r.ctor?Br(r._0):Pr(Ho(r._0))};return c(Lr,c(Mr,Go,t),Wo(r))}),$o=t(function(e,t){var r={verb:"GET",headers:M.fromArray([]),url:t,body:Uo};return c(Ko,e,c(Lo,Do,r))}),Qo=(r(function(e,t,r){var n={verb:"POST",headers:M.fromArray([]),url:t,body:r};return c(Ko,e,c(Lo,Do,n))}),function(){function e(e,t,r){var n={options:e,markdown:r};return Bn.custom(t,n,a)}function t(e){var t=u(e.markdown,i(e.options)),r=document.createElement("div");return r.innerHTML=t,r}function n(e,t){return e.model.markdown===t.model.markdown&&e.model.options===t.model.options?null:{applyPatch:o,data:u(t.model.markdown,i(t.model.options))}}function o(e,t){return e.innerHTML=t,e}function i(e){function t(t,r){return r||"Just"!==e.defaultHighlighting.ctor||(r=e.defaultHighlighting._0),"undefined"!=typeof hljs&&r&&hljs.listLanguages().indexOf(r)>=0?hljs.highlight(r,t,!0).value:t}var r=e.githubFlavored;return"Just"===r.ctor?{highlight:t,gfm:!0,tables:r._0.tables,breaks:r._0.breaks,sanitize:e.sanitize,smartypants:e.smartypants}:{highlight:t,gfm:!1,tables:!1,breaks:!1,sanitize:e.sanitize,smartypants:e.smartypants}}var a={render:t,diff:n},u=function(){var e={},t=e.exports={};return function(){function r(e){this.tokens=[],this.tokens.links={},this.options=e||f.defaults,this.rules=d.normal,this.options.gfm&&(this.options.tables?this.rules=d.tables:this.rules=d.gfm)}function n(e,t){if(this.options=t||f.defaults,this.links=e,this.rules=h.normal,this.renderer=this.options.renderer||new o,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=h.breaks:this.rules=h.gfm:this.options.pedantic&&(this.rules=h.pedantic)}function o(e){this.options=e||{}}function i(e){this.tokens=[],this.token=null,this.options=e||f.defaults,this.options.renderer=this.options.renderer||new o,this.renderer=this.options.renderer,this.renderer.options=this.options}function a(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function u(e){return e.replace(/&([#\w]+);/g,function(e,t){return t=t.toLowerCase(),"colon"===t?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function s(e,t){return e=e.source,t=t||"",function r(n,o){return n?(o=o.source||o,o=o.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(n,o),r):new RegExp(e,t)}}function c(){}function l(e){for(var t,r,n=1;n<arguments.length;n++){t=arguments[n];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}function f(e,t,n){if(n||"function"==typeof t){n||(n=t,t=null),t=l({},f.defaults,t||{});var o,u,s=t.highlight,c=0;try{o=r.lex(e,t)}catch(d){return n(d)}u=o.length;var h=function(e){if(e)return t.highlight=s,n(e);var r;try{r=i.parse(o,t)}catch(a){e=a}return t.highlight=s,e?n(e):n(null,r)};if(!s||s.length<3)return h();if(delete t.highlight,!u)return h();for(;c<o.length;c++)!function(e){return"code"!==e.type?--u||h():s(e.text,e.lang,function(t,r){return t?h(t):null==r||r===e.text?--u||h():(e.text=r,e.escaped=!0,void(--u||h()))})}(o[c])}else try{return t&&(t=l({},f.defaults,t)),i.parse(r.lex(e,t),t)}catch(d){if(d.message+="\nPlease report this to https://github.com/chjj/marked.",(t||f.defaults).silent)return"<p>An error occured:</p><pre>"+a(d.message+"",!0)+"</pre>";throw d}}var d={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:c,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:c,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:c,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};d.bullet=/(?:[*+-]|\d+\.)/,d.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,d.item=s(d.item,"gm")(/bull/g,d.bullet)(),d.list=s(d.list)(/bull/g,d.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+d.def.source+")")(),d.blockquote=s(d.blockquote)("def",d.def)(),d._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",d.html=s(d.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,d._tag)(),d.paragraph=s(d.paragraph)("hr",d.hr)("heading",d.heading)("lheading",d.lheading)("blockquote",d.blockquote)("tag","<"+d._tag)("def",d.def)(),d.normal=l({},d),d.gfm=l({},d.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),d.gfm.paragraph=s(d.paragraph)("(?!","(?!"+d.gfm.fences.source.replace("\\1","\\2")+"|"+d.list.source.replace("\\1","\\3")+"|")(),d.tables=l({},d.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),r.rules=d,r.lex=function(e,t){var n=new r(t);return n.lex(e)},r.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},r.prototype.token=function(e,t,r){for(var n,o,i,a,u,s,c,l,f,e=e.replace(/^ +$/gm,"");e;)if((i=this.rules.newline.exec(e))&&(e=e.substring(i[0].length),i[0].length>1&&this.tokens.push({type:"space"})),i=this.rules.code.exec(e))e=e.substring(i[0].length),i=i[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?i:i.replace(/\n+$/,"")});else if(i=this.rules.fences.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"code",lang:i[2],text:i[3]});else if(i=this.rules.heading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:i[1].length,text:i[2]});else if(t&&(i=this.rules.nptable.exec(e))){for(e=e.substring(i[0].length),s={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/\n$/,"").split("\n")},l=0;l<s.align.length;l++)/^ *-+: *$/.test(s.align[l])?s.align[l]="right":/^ *:-+: *$/.test(s.align[l])?s.align[l]="center":/^ *:-+ *$/.test(s.align[l])?s.align[l]="left":s.align[l]=null;for(l=0;l<s.cells.length;l++)s.cells[l]=s.cells[l].split(/ *\| */);this.tokens.push(s)}else if(i=this.rules.lheading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:"="===i[2]?1:2,text:i[1]});else if(i=this.rules.hr.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"hr"});else if(i=this.rules.blockquote.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"blockquote_start"}),i=i[0].replace(/^ *> ?/gm,""),this.token(i,t,!0),this.tokens.push({type:"blockquote_end"});else if(i=this.rules.list.exec(e)){for(e=e.substring(i[0].length),a=i[2],this.tokens.push({type:"list_start",ordered:a.length>1}),i=i[0].match(this.rules.item),n=!1,f=i.length,l=0;f>l;l++)s=i[l],c=s.length,s=s.replace(/^ *([*+-]|\d+\.) +/,""),~s.indexOf("\n ")&&(c-=s.length,s=this.options.pedantic?s.replace(/^ {1,4}/gm,""):s.replace(new RegExp("^ {1,"+c+"}","gm"),"")),this.options.smartLists&&l!==f-1&&(u=d.bullet.exec(i[l+1])[0],a===u||a.length>1&&u.length>1||(e=i.slice(l+1).join("\n")+e,l=f-1)),o=n||/\n\n(?!\s*$)/.test(s),l!==f-1&&(n="\n"===s.charAt(s.length-1),o||(o=n)),this.tokens.push({type:o?"loose_item_start":"list_item_start"}),this.token(s,!1,r),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(i=this.rules.html.exec(e))e=e.substring(i[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===i[1]||"script"===i[1]||"style"===i[1],text:i[0]});else if(!r&&t&&(i=this.rules.def.exec(e)))e=e.substring(i[0].length),this.tokens.links[i[1].toLowerCase()]={href:i[2],title:i[3]};else if(t&&(i=this.rules.table.exec(e))){for(e=e.substring(i[0].length),s={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/(?: *\| *)?\n$/,"").split("\n")},l=0;l<s.align.length;l++)/^ *-+: *$/.test(s.align[l])?s.align[l]="right":/^ *:-+: *$/.test(s.align[l])?s.align[l]="center":/^ *:-+ *$/.test(s.align[l])?s.align[l]="left":s.align[l]=null;for(l=0;l<s.cells.length;l++)s.cells[l]=s.cells[l].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(s)}else if(t&&(i=this.rules.paragraph.exec(e)))e=e.substring(i[0].length),this.tokens.push({type:"paragraph",text:"\n"===i[1].charAt(i[1].length-1)?i[1].slice(0,-1):i[1]});else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"text",text:i[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var h={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:c,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:c,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};h._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,h._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,h.link=s(h.link)("inside",h._inside)("href",h._href)(),h.reflink=s(h.reflink)("inside",h._inside)(),h.normal=l({},h),h.pedantic=l({},h.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),h.gfm=l({},h.normal,{escape:s(h.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:s(h.text)("]|","~]|")("|","|https?://|")()}),h.breaks=l({},h.gfm,{br:s(h.br)("{2,}","*")(),text:s(h.gfm.text)("{2,}","*")()}),n.rules=h,n.output=function(e,t,r){var o=new n(t,r);return o.output(e)},n.prototype.output=function(e){for(var t,r,n,o,i="";e;)if(o=this.rules.escape.exec(e))e=e.substring(o[0].length),i+=o[1];else if(o=this.rules.autolink.exec(e))e=e.substring(o[0].length),"@"===o[2]?(r=":"===o[1].charAt(6)?this.mangle(o[1].substring(7)):this.mangle(o[1]),n=this.mangle("mailto:")+r):(r=a(o[1]),n=r),i+=this.renderer.link(n,null,r);else if(this.inLink||!(o=this.rules.url.exec(e))){if(o=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(o[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(o[0])&&(this.inLink=!1),e=e.substring(o[0].length),i+=this.options.sanitize?a(o[0]):o[0];else if(o=this.rules.link.exec(e))e=e.substring(o[0].length),this.inLink=!0,i+=this.outputLink(o,{href:o[2],title:o[3]}),this.inLink=!1;else if((o=this.rules.reflink.exec(e))||(o=this.rules.nolink.exec(e))){if(e=e.substring(o[0].length),t=(o[2]||o[1]).replace(/\s+/g," "),t=this.links[t.toLowerCase()],!t||!t.href){i+=o[0].charAt(0),e=o[0].substring(1)+e;continue}this.inLink=!0,i+=this.outputLink(o,t),this.inLink=!1}else if(o=this.rules.strong.exec(e))e=e.substring(o[0].length),i+=this.renderer.strong(this.output(o[2]||o[1]));else if(o=this.rules.em.exec(e))e=e.substring(o[0].length),i+=this.renderer.em(this.output(o[2]||o[1]));else if(o=this.rules.code.exec(e))e=e.substring(o[0].length),i+=this.renderer.codespan(a(o[2],!0));else if(o=this.rules.br.exec(e))e=e.substring(o[0].length),i+=this.renderer.br();else if(o=this.rules.del.exec(e))e=e.substring(o[0].length),i+=this.renderer.del(this.output(o[1]));else if(o=this.rules.text.exec(e))e=e.substring(o[0].length),i+=a(this.smartypants(o[0]));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else e=e.substring(o[0].length),r=a(o[1]),n=r,i+=this.renderer.link(n,null,r);return i},n.prototype.outputLink=function(e,t){var r=a(t.href),n=t.title?a(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(r,n,this.output(e[1])):this.renderer.image(r,n,a(e[1]))},n.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/--/g,"—").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},n.prototype.mangle=function(e){for(var t,r="",n=e.length,o=0;n>o;o++)t=e.charCodeAt(o),Math.random()>.5&&(t="x"+t.toString(16)),r+="&#"+t+";";return r},o.prototype.code=function(e,t,r){if(this.options.highlight){var n=this.options.highlight(e,t);null!=n&&n!==e&&(r=!0,e=n)}return t?'<pre><code class="'+this.options.langPrefix+a(t,!0)+'">'+(r?e:a(e,!0))+"\n</code></pre>\n":"<pre><code>"+(r?e:a(e,!0))+"\n</code></pre>"},o.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},o.prototype.html=function(e){return e},o.prototype.heading=function(e,t,r){return"<h"+t+' id="'+this.options.headerPrefix+r.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},o.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},o.prototype.list=function(e,t){var r=t?"ol":"ul";return"<"+r+">\n"+e+"</"+r+">\n"},o.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},o.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},o.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},o.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},o.prototype.tablecell=function(e,t){var r=t.header?"th":"td",n=t.align?"<"+r+' style="text-align:'+t.align+'">':"<"+r+">";return n+e+"</"+r+">\n"},o.prototype.strong=function(e){return"<strong>"+e+"</strong>"},o.prototype.em=function(e){return"<em>"+e+"</em>"},o.prototype.codespan=function(e){return"<code>"+e+"</code>"},o.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},o.prototype.del=function(e){return"<del>"+e+"</del>"},o.prototype.link=function(e,t,r){if(this.options.sanitize){try{var n=decodeURIComponent(u(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(o){return""}if(0===n.indexOf("javascript:"))return""}var i='<a href="'+e+'"';return t&&(i+=' title="'+t+'"'),i+=">"+r+"</a>"},o.prototype.image=function(e,t,r){var n='<img src="'+e+'" alt="'+r+'"';return t&&(n+=' title="'+t+'"'),n+=this.options.xhtml?"/>":">"},i.parse=function(e,t,r){var n=new i(t,r);return n.parse(e)},i.prototype.parse=function(e){this.inline=new n(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},i.prototype.next=function(){return this.token=this.tokens.pop()},i.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},i.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},i.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);
case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,r,n,o,i="",a="";for(r="",e=0;e<this.token.header.length;e++)n={header:!0,align:this.token.align[e]},r+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(i+=this.renderer.tablerow(r),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],r="",o=0;o<t.length;o++)r+=this.renderer.tablecell(this.inline.output(t[o]),{header:!1,align:this.token.align[o]});a+=this.renderer.tablerow(r)}return this.renderer.table(i,a);case"blockquote_start":for(var a="";"blockquote_end"!==this.next().type;)a+=this.tok();return this.renderer.blockquote(a);case"list_start":for(var a="",u=this.token.ordered;"list_end"!==this.next().type;)a+=this.tok();return this.renderer.list(a,u);case"list_item_start":for(var a="";"list_item_end"!==this.next().type;)a+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(a);case"loose_item_start":for(var a="";"list_item_end"!==this.next().type;)a+=this.tok();return this.renderer.listitem(a);case"html":var s=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(s);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},c.exec=c,f.options=f.setOptions=function(e){return l(f.defaults,e),f},f.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new o,xhtml:!1},f.Parser=i,f.parser=i.parse,f.Renderer=o,f.Lexer=r,f.lexer=r.lex,f.InlineLexer=n,f.inlineLexer=n.output,f.parse=f,"undefined"!=typeof e&&"object"==typeof t?e.exports=f:"function"==typeof define&&define.amd?define(function(){return f}):this.marked=f}.call(function(){return this||("undefined"!=typeof window?window:global)}()),e.exports}();return{toHtml:r(e)}}()),Xo=(Qo.toHtml,{githubFlavored:D({tables:!1,breaks:!1}),defaultHighlighting:j,sanitize:!1,smartypants:!1}),Yo=t(function(e,t){return l(Qo.toHtml,Xo,e,t)}),Zo=(n(function(e,t,r,n){return{githubFlavored:e,defaultHighlighting:t,sanitize:r,smartypants:n}}),function(e){var t=e;switch(t.ctor){case"Jan":return 1;case"Feb":return 2;case"Mar":return 3;case"Apr":return 4;case"May":return 5;case"Jun":return 6;case"Jul":return 7;case"Aug":return 8;case"Sep":return 9;case"Oct":return 10;case"Nov":return 11;default:return 12}}),ei=function(e){return v.eq(c(w["%"],e,4),0)&&!v.eq(c(w["%"],e,100),0)||v.eq(c(w["%"],e,400),0)},ti=t(function(e,t){var r=t;switch(r.ctor){case"Jan":return 31;case"Feb":return ei(e)?29:28;case"Mar":return 31;case"Apr":return 30;case"May":return 31;case"Jun":return 30;case"Jul":return 31;case"Aug":return 31;case"Sep":return 30;case"Oct":return 31;case"Nov":return 30;default:return 31}}),ri=(M.fromArray([jn,qn,In,Rn,Nn,Cn,On,xn,Tn,An,Sn,En]),function(e){return S(yn(e))}),ni=function(e){return gn(E(e))},oi=function(e){var t=e;switch(t.ctor){case"Mon":return 1;case"Tue":return 2;case"Wed":return 3;case"Thu":return 4;case"Fri":return 5;case"Sat":return 6;default:return 7}},ii=(t(function(e,t){var r=oi(t),n=oi(e);return v.cmp(n,r)<0?7+n-r:n-r}),S(en)),ai=1e3*ii,ui=60*ai,si=60*ui,ci=24*si,li=7*ci,fi=(n(function(e,t,r,n){var o=ri(n),i=ri(r),a=c(T,i,o),u=c(x,i,o),s=ri(t),l=e;switch(l.ctor){case"Between":return v.cmp(s,u)>0&&v.cmp(s,a)<0;case"BetweenOpenStart":return v.cmp(s,u)>-1&&v.cmp(s,a)<0;case"BetweenOpenEnd":return v.cmp(s,u)>0&&v.cmp(s,a)<1;default:return v.cmp(s,u)>-1&&v.cmp(s,a)<1}}),r(function(e,t,r){var n=ri(r),o=ri(t),i=e;switch(i.ctor){case"Before":return v.cmp(o,n)<0;case"After":return v.cmp(o,n)>0;case"Same":return v.eq(o,n);case"SameOrBefore":return v.cmp(o,n)<1;default:return v.cmp(o,n)>-1}})),di={ctor:"After"},hi=(t(function(e,t){return{i18n:e,format:t}}),function(e){var t=e;switch(t.ctor){case"Jan":return"January";case"Feb":return"February";case"Mar":return"March";case"Apr":return"April";case"May":return"May";case"Jun":return"June";case"Jul":return"July";case"Aug":return"August";case"Sep":return"September";case"Oct":return"October";case"Nov":return"November";default:return"December"}}),pi=function(e){var t=e;switch(t.ctor){case"Jan":return"Jan";case"Feb":return"Feb";case"Mar":return"Mar";case"Apr":return"Apr";case"May":return"May";case"Jun":return"Jun";case"Jul":return"Jul";case"Aug":return"Aug";case"Sep":return"Sep";case"Oct":return"Oct";case"Nov":return"Nov";default:return"Dec"}},_i=function(e){var t=e;switch(t.ctor){case"Mon":return"Monday";case"Tue":return"Tuesday";case"Wed":return"Wednesday";case"Thu":return"Thursday";case"Fri":return"Friday";case"Sat":return"Saturday";default:return"Sunday"}},vi=function(e){var t=e;switch(t.ctor){case"Mon":return"Mon";case"Tue":return"Tue";case"Wed":return"Wed";case"Thu":return"Thu";case"Fri":return"Fri";case"Sat":return"Sat";default:return"Sun"}},mi={i18n:{dayShort:vi,dayName:_i,monthShort:pi,monthName:hi},format:{date:"%-m/%-d/%Y",longDate:"%A, %B %d, %Y",time:"%-H:%M %p",longTime:"%-H:%M:%S %p",dateTime:"%-m/%-d/%Y %-I:%M %p",firstDayOfWeek:kn}},gi=(t(function(e,t){var r=ln(e)-ln(t),n=fn(e)-fn(t),o=dn(e)-dn(t),i=hn(e)-hn(t),a=ri(e)-ri(t),u=a-i*si-o*ui-n*ai-r*ii,s=u/ci|0,l=function(){if(v.cmp(s,0)<0){var e=N(s);return{ctor:"_Tuple2",_0:R(e/7|0),_1:R(c(w["%"],e,7))}}return{ctor:"_Tuple2",_0:s/7|0,_1:c(w["%"],s,7)}}(),f=l._0,d=l._1;return{week:f,day:d,hour:i,minute:o,second:n,millisecond:r}}),r(function(e,r,n){return ni(c(t(function(e,t){return e+t}),r*e,ri(n)))})),yi=function(e){var t=e;switch(t.ctor){case"Millisecond":return ii;case"Second":return ai;case"Minute":return ui;case"Hour":return si;case"Day":return ci;case"Week":return li;default:var r=t._0;return ii*r.millisecond+ai*r.second+ui*r.minute+si*r.hour+ci*r.day+li*r.week}},bi=function(e){return gi(yi(e))},wi=(i(function(e,t,r,n,o,i){return{week:e,day:t,hour:r,minute:n,second:o,millisecond:i}}),function(e){return{ctor:"Delta",_0:e}}),ki={ctor:"Millisecond"},Ei=r(function(e,t,r){var n=((153*(t+(v.cmp(t,2)>0?-3:9))+2)/5|0)+r-1,o=e-(v.cmp(t,2)<1?1:0),i=(v.cmp(o,0)>-1?o:o-399)/400|0,a=o-400*i,u=365*a+(a/4|0)-(a/100|0)+n;return 146097*i+u-719468}),Si=a(function(e,t,r,n,o,i,a){var u=Zo(t),s=v.cmp(e,0)<0?0:e,f=l(C,1,c(ti,s,t),r),d=l(Ei,s,u,f);return yi(wi({millisecond:l(C,0,999,a),second:l(C,0,59,i),minute:l(C,0,59,o),hour:l(C,0,23,n),day:d,week:0}))}),Ai=function(e){return p(Si,mn(e),vn(e),_n(e),hn(e),dn(e),fn(e),ln(e))},Ti=function(e){var t=Ai(e),r=S(yn(e));return(r-t)/ui|0},xi=t(function(e,r){return ni(c(t(function(e,t){return e+t}),e*ui,ri(r)))}),Oi=gn(0),Ci=function(){var e=60*hn(Oi)+dn(Oi);return v.eq(mn(Oi),1969)?e-1440:e}(),Ni=function(e){return l(bi,ki,e-Ci*ui,Oi)},Ri=a(function(e,t,r,n,o,i,a){return Ni(p(Si,e,t,r,n,o,i,a))}),Ii=(l(Ri,1970,jn,1),Ti),qi=function(e){return{ctor:"_Tuple2",_0:e/60|0,_1:c(w["%"],e,60)}},ji=t(function(e,t){return function(r){return l(qe,e,t,k(r))}}),Li=function(e){return function(t){return l(qe,2,e,k(t))}},Di=function(e){return v.eq(c(w["%"],e,12),0)?12:c(w["%"],e,12)},Pi=t(function(e,t){var r=qi(N(t)),n=r._0,o=r._1;return c(w["++"],v.cmp(t,0)<1?"+":"-",c(w["++"],c(Li,v.chr("0"),n),c(w["++"],e,c(Li,v.chr("0"),o))))}),Mi=function(e){return c(L,e,b)},Bi=n(function(e,t,r,n){var o=c(q," ",Mi(Y(n.submatches))),i=o;switch(i){case"Y":return l(ji,4,v.chr("0"),mn(r));case"m":return c(Li,v.chr("0"),Zo(vn(r)));case"_m":return c(Li,v.chr(" "),Zo(vn(r)));case"-m":return k(Zo(vn(r)));case"B":return e.i18n.monthName(vn(r));case"^B":return Ie(e.i18n.monthName(vn(r)));case"b":return e.i18n.monthShort(vn(r));case"^b":return Ie(e.i18n.monthShort(vn(r)));case"d":return c(Li,v.chr("0"),_n(r));case"-d":return k(_n(r));case"e":return c(Li,v.chr(" "),_n(r));case"A":return e.i18n.dayName(pn(r));case"^A":return Ie(e.i18n.dayName(pn(r)));case"a":return e.i18n.dayShort(pn(r));case"^a":return Ie(e.i18n.dayShort(pn(r)));case"H":return c(Li,v.chr("0"),hn(r));case"-H":return k(hn(r));case"k":return c(Li,v.chr(" "),hn(r));case"I":return c(Li,v.chr("0"),Di(hn(r)));case"-I":return k(Di(hn(r)));case"l":return c(Li,v.chr(" "),Di(hn(r)));case"p":return v.cmp(hn(r),12)<0?"AM":"PM";case"P":return v.cmp(hn(r),12)<0?"am":"pm";case"M":return c(Li,v.chr("0"),dn(r));case"S":return c(Li,v.chr("0"),fn(r));case"L":return l(ji,3,v.chr("0"),ln(r));case"%":return o;case"z":return c(Pi,"",t);case":z":return c(Pi,":",t);default:return""}}),Fi=Pn("%(Y|m|_m|-m|B|^B|b|^b|d|-d|e|A|^A|a|^a|H|-H|k|I|-I|l|p|P|M|S|%|L|z|:z)"),Ui=n(function(e,t,r,n){var o=Ii(n),i=o-t;return f(Dn,Mn,Fi,l(Bi,e,t,c(xi,i,n)),r)}),Ji=r(function(e,t,r){return f(Ui,e,Ii(r),t,r)}),Hi=r(function(e,t,r){return f(Ui,e,0,t,r)}),Wi="%Y-%m-%dT%H:%M:%S.%L%z",Vi=(c(Ji,mi,Wi),"%Y-%m-%dT%H:%M:%S.%L"),zi=(c(Ji,mi,Vi),function(e){return c(w["++"],l(Hi,mi,Vi,e),"Z")}),Gi=function(e){return function(t){return function(r){return function(n){return function(o){return function(i){return function(a){return function(u){return function(s){return function(c){return{id:e,url:t,name:r,season:n,number:o,airdate:i,airtime:a,airstamp:u,runtime:s,summary:c}}}}}}}}}}},Ki=l(Zt,"summary",Wt,l(Zt,"runtime",Jt,l(Zt,"airstamp",Wt,l(Zt,"airtime",Wt,l(Zt,"airdate",Wt,l(Zt,"number",Jt,l(Zt,"season",Jt,l(Zt,"name",Wt,l(Zt,"url",Wt,l(Zt,"id",Jt,Qt(Gi))))))))))),$i=(t(function(e,t){return{medium:e,original:t}}),t(function(e,t){return{score:e,show:t}})),Qi=t(function(e,t){return{time:e,days:t}}),Xi=l(Zt,"days",Ft(Wt),l(Zt,"time",Wt,Qt(Qi))),Yi=function(e){return{average:e}},Zi=l(Zt,"average",Mt(Ht),Qt(Yi)),ea=r(function(e,t,r){return{name:e,code:t,timezone:r}}),ta=l(Zt,"timezone",Wt,l(Zt,"code",Wt,l(Zt,"name",Wt,Qt(ea)))),ra=r(function(e,t,r){return{id:e,name:t,country:r}}),na=l(Zt,"country",ta,l(Zt,"name",Wt,l(Zt,"id",Jt,Qt(ra)))),oa=r(function(e,t,r){return{tvrage:e,thetvdb:t,imdb:r}}),ia=l(Zt,"imdb",Mt(Wt),l(Zt,"thetvdb",Mt(Jt),l(Zt,"tvrage",Mt(Jt),Qt(oa)))),aa=t(function(e,t){return{medium:e,original:t}}),ua=l(Zt,"original",Wt,l(Zt,"medium",Wt,Qt(aa))),sa=(t(function(e,t){return{self:e,previousepisode:t}}),function(e){return function(t){return function(r){return function(n){return function(o){return function(i){return function(a){return function(u){return function(s){return function(c){return function(l){return function(f){return function(d){return function(h){return function(p){return function(_){return function(v){return{id:e,url:t,name:r,type$:n,language:o,genres:i,status:a,runtime:u,premiered:s,schedule:c,rating:l,weight:f,network:d,externals:h,image:p,summary:_,updated:v}}}}}}}}}}}}}}}}}}),ca=l(Zt,"updated",Jt,l(Zt,"summary",Wt,l(Zt,"image",Mt(ua),l(Zt,"externals",ia,l(Zt,"network",Mt(na),l(Zt,"weight",Jt,l(Zt,"rating",Zi,l(Zt,"schedule",Xi,l(Zt,"premiered",Mt(Wt),l(Zt,"runtime",Mt(Jt),l(Zt,"status",Wt,l(Zt,"genres",Ft(Wt),l(Zt,"language",Wt,l(Zt,"type",Wt,l(Zt,"name",Wt,l(Zt,"url",Wt,l(Zt,"id",Jt,Qt(sa)))))))))))))))))),la=l(Zt,"show",ca,l(Zt,"score",Ht,Qt($i))),fa=Ft(Ki),da=Ft(la),ha="/api",pa=function(e){return c($o,da,c(w["++"],ha,c(w["++"],"/search/shows?q=",Po(e))))},_a=function(e){return c($o,fa,c(w["++"],ha,c(w["++"],"/shows/",c(w["++"],k(e),"/episodes"))))},va=_e.outgoingPort("showNotification",function(e){return e}),ma=_e.outgoingPort("scrollPosition",function(e){return e}),ga=_e.outgoingPort("focusElement",function(e){return e}),ya=function(e){return c(ro,M.fromArray([vo("elmtv__panel mdl-shadow--2dp")]),M.fromArray([Qn(c(q,"",e))]))},ba=function(e){var t={medium:"http://lorempixel.com/72/100/abstract"},r=e;return"Nothing"===r.ctor?t.medium:r._0.medium},wa={term:"",visible:!1,results:M.fromArray([]),error:j},ka={ctor:"_Tuple2",_0:wa,_1:be},Ea=(n(function(e,t,r,n){return{visible:e,term:t,results:r,error:n}}),function(e){return{ctor:"SwallowError",_0:e}}),Sa=function(e){return{ctor:"AddShow",_0:e}},Aa=function(e){return{ctor:"StartAdd",_0:e}},Ta=t(function(e,t){return c(ro,M.fromArray([]),M.fromArray([c(ro,M.fromArray([So(M.fromArray([{ctor:"_Tuple2",_0:"display",_1:"flex"},{ctor:"_Tuple2",_0:"overflow",_1:"auto"},{ctor:"_Tuple2",_0:"min-height",_1:"100px"},{ctor:"_Tuple2",_0:"margin-bottom",_1:"15px"}]))]),M.fromArray([c(io,M.fromArray([So(M.fromArray([{ctor:"_Tuple2",_0:"height",_1:"100px"}])),go(ba(t.show.image))]),M.fromArray([])),c(ro,M.fromArray([So(M.fromArray([{ctor:"_Tuple2",_0:"padding-left",_1:"15px"},{ctor:"_Tuple2",_0:"flex",_1:"1"}]))]),M.fromArray([c(ro,M.fromArray([vo("mdl-typography--headline")]),M.fromArray([Qn(t.show.name)])),c(ro,M.fromArray([vo("mdl-typography--title")]),M.fromArray([Qn(function(){var e=t.show.network;return"Nothing"===e.ctor?"":e._0.name}())])),c(ro,M.fromArray([]),M.fromArray([c(Yo,M.fromArray([]),t.show.summary)]))]))])),c(ro,M.fromArray([]),M.fromArray([function(){var r=c(tr,t.show.id,e);return r===!1?c(co,M.fromArray([Io(Aa(t)),vo("mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored")]),M.fromArray([Qn("Add")])):c(co,M.fromArray([vo("mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored"),Eo(!0)]),M.fromArray([Qn("Already added")]))}()]))]))}),xa=t(function(e,t){return c(ro,M.fromArray([vo("elmtv__panel mdl-shadow--2dp elmtv__search-results")]),c(ce,c(to,M.fromArray([]),M.fromArray([])),c(ee,Ta(t),e)))}),Oa={ctor:"HideSearch"},Ca={ctor:"ShowSearch"},Na=function(e){return c(ro,M.fromArray([vo("elmtv__search--collapsed")]),M.fromArray([c(ro,M.fromArray([So(M.fromArray([{ctor:"_Tuple2",_0:"float",_1:"right"}]))]),M.fromArray([c(co,M.fromArray([vo("mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored"),Io(Ca)]),M.fromArray([c(oo,M.fromArray([vo("material-icons")]),M.fromArray([Qn("add")]))]))]))]))},Ra=function(e){return{ctor:"ShowError",_0:e}},Ia=function(e){return{ctor:"ShowResults",_0:e}},qa=t(function(e,t){var r=e;switch(r.ctor){case"UpdateTerm":return{ctor:"_Tuple2",_0:v.update(t,{term:r._0}),_1:be};case"SearchShows":return{ctor:"_Tuple2",_0:t,_1:l(Kr,Ra,Ia,pa(t.term))};case"ShowResults":return{ctor:"_Tuple2",_0:v.update(t,{results:r._0}),_1:ga(".elmtv__search-results .mdl-button:not([disabled]):first-child")};case"ShowError":var n=r._0;return"UnexpectedPayload"===n.ctor?{ctor:"_Tuple2",_0:v.update(t,{error:D(n._0)}),_1:be}:{ctor:"_Tuple2",_0:v.update(t,{error:D("Sorry, something went wrong during your search. You might be offline.")}),_1:be};case"ShowSearch":return{ctor:"_Tuple2",_0:v.update(t,{visible:!0}),_1:ye(M.fromArray([ma(0),ga("#searchInput")]))};case"HideSearch":return{ctor:"_Tuple2",_0:v.update(t,{visible:!1}),_1:be};case"StartAdd":return{ctor:"_Tuple2",_0:v.update(t,{visible:!1,results:M.fromArray([])}),_1:l(Kr,Ea,Sa,c(Lr,wn,function(e){return Br({ctor:"_Tuple2",_0:e,_1:r._0})}))};case"AddShow":return{ctor:"_Tuple2",_0:t,_1:be};default:return{ctor:"_Tuple2",_0:t,_1:be}}}),ja={ctor:"SearchShows"},La=function(e){return{ctor:"UpdateTerm",_0:e}},Da=t(function(e,t){return c(ao,M.fromArray([No(ja)]),M.fromArray([c(ro,M.fromArray([So(M.fromArray([{ctor:"_Tuple2",_0:"padding-top",_1:"15px"},{ctor:"_Tuple2",_0:"padding-bottom",_1:"15px"}]))]),M.fromArray([c(ro,M.fromArray([]),M.fromArray([c(ro,M.fromArray([vo("mdl-textfield mdl-js-textfield mdl-textfield--floating-label")]),M.fromArray([c(so,M.fromArray([yo("text"),Ro(La),vo("mdl-textfield__input"),mo("searchInput")]),M.fromArray([])),c(uo,M.fromArray([vo("mdl-textfield__label"),bo("searchInput")]),M.fromArray([Qn("Search for shows")]))]))])),c(co,M.fromArray([yo("submit"),vo("mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored elmtv__button--spacing")]),M.fromArray([Qn("Search")])),c(co,M.fromArray([yo("button"),Io(Oa),vo("mdl-button mdl-js-button mdl-button--flat mdl-button--accent")]),M.fromArray([Qn("Cancel")]))])),v.cmp(K(e.results),0)>0?c(xa,e.results,t):v.eq(e.error,j)?c(ro,M.fromArray([]),M.fromArray([])):ya(e.error)]))}),Pa=t(function(e,t){return e.visible?c(Da,e,t):Na(e)}),Ma=(i(function(e,t,r,n,o,i){return{id:e,name:t,summary:r,season:n,number:o,airstamp:i}}),t(function(e,t){return{number:e,episodes:t}}),a(function(e,t,r,n,o,i,a){return{id:e,lastEpisodeWatched:t,name:r,image:n,seasons:o,rev:i,added:a}}),n(function(e,t,r,n){return{today:e,show:t,seasonsListVisible:r,visibleSeasons:n}}),r(function(e,t,r){return{id:e,rev:t,name:r}}),function(e){return{ctor:"RemoveShow",_0:e}}),Ba=function(e){return{ctor:"SetRev",_0:e}},Fa=function(e){return{ctor:"SetTodaysDate",_0:e}},Ua=function(e){return{ctor:"ShowTimeError",_0:e}},Ja=function(e){return{ctor:"ShowError",_0:e}},Ha=function(e){return{ctor:"UpdateEpisodes",_0:e}},Wa={ctor:"UpdateShow"},Va=function(e){return{ctor:"ToggleSeasons",_0:e}},za=function(e){return{ctor:"MarkEpisodeWatched",_0:e}},Ga=function(e){return{ctor:"MarkSeasonWatched",_0:e}},Ka={ctor:"MarkAllEpisodesWatched"},$a=t(function(e,t){return{ctor:"ToggleSeason",_0:e,_1:t}}),Qa=(t(function(e,t){return{list:e,error:t}}),t(function(e,t){return{id:e,rev:t}}),function(e){return{ctor:"LoadRev",_0:e}}),Xa=t(function(e,t){return{ctor:"ShowMsg",_0:e,_1:t}}),Ya=function(e){return{ctor:"LoadShows",_0:e}},Za=function(e){return{ctor:"AddToList",_0:e}},eu=t(function(e,t){var r=de(bn(t.airstamp));return"Nothing"===r.ctor?!0:l(fi,di,e,r._0)}),tu=t(function(e,t){return c(te,function(e){return!v.eq(e.episodes,M.fromArray([]))},c(ee,function(t){return v.update(t,{episodes:c(te,eu(e),t.episodes)})},t))}),ru=t(function(e,t){var r=e,n=r._0;return v.cmp(t.season,n)<0?!0:!!(v.eq(t.season,n)&&v.cmp(t.number,r._1)<1)}),nu=t(function(e,t){var r=t.episodes;return"[]"===r.ctor?!1:c(ru,e,r._0)}),ou=t(function(e,t){return c(ro,M.fromArray([]),M.fromArray([c(ro,M.fromArray([vo("mdl-typography--title")]),M.fromArray([Qn(c(w["++"],"Episode ",c(w["++"],k(t.number),c(w["++"]," - ",t.name))))])),c(ro,M.fromArray([vo("elmtv__episode-desc")]),M.fromArray([c(Yo,M.fromArray([]),t.summary)])),c(ro,M.fromArray([vo("elmtv__episode-watched")]),M.fromArray([c(co,M.fromArray([Io(za({ctor:"_Tuple2",_0:t.season,_1:t.number})),Eo(c(ru,e,t)),vo("\n                    mdl-button\n                    mdl-js-button\n                    mdl-button--raised\n                    mdl-js-ripple-effect\n                    mdl-button--colored\n                    elmtv__button--spacing")]),M.fromArray([Qn("I watched this")]))]))]))}),iu=r(function(e,t,r){var n=t;return n===!0?c(ro,M.fromArray([]),c(ee,ou(e),r.episodes)):c(ro,M.fromArray([]),M.fromArray([]))}),au=r(function(e,t,r){var n=function(){var e=c(Ve,r.number,t);return"Nothing"===e.ctor?!1:e._0}();return c(ro,M.fromArray([]),M.fromArray([c(ro,M.fromArray([vo("elmtv__season-content")]),M.fromArray([c(ro,M.fromArray([vo("elmtv__season-title")]),M.fromArray([Qn(c(w["++"],"Season ",k(r.number)))])),c(ro,M.fromArray([]),M.fromArray([c(ro,M.fromArray([]),M.fromArray([v.eq(c(nu,e,r),!0)?c(ro,M.fromArray([]),M.fromArray([])):c(co,M.fromArray([Io(Ga(r.number)),vo("\n                                    mdl-button\n                                    mdl-js-button\n                                    mdl-button--raised\n                                    mdl-js-ripple-effect\n                                    mdl-button--colored\n                                    elmtv__button--spacing")]),M.fromArray([Qn("I watched this")]))])),c(ro,M.fromArray([vo("elmtv__episodes-toggle")]),M.fromArray([c(co,M.fromArray([Io(c($a,r.number,A(n))),vo("\n                                mdl-button\n                                mdl-js-button\n                                mdl-button--raised\n                                mdl-js-ripple-effect\n                                mdl-button--accent\n                                elmtv__button--spacing")]),M.fromArray([Qn(n?"Hide episodes":"Show episodes")]))]))]))])),l(iu,e,n,r),c(to,M.fromArray([]),M.fromArray([]))]))}),uu=r(function(e,t,r){return c(ro,M.fromArray([]),c(Z["::"],c(to,M.fromArray([]),M.fromArray([])),c(ee,c(au,e,r),t)))}),su=function(e){var t=e;return"Nothing"===t.ctor?"http://lorempixel.com/72/100/abstract":f(Dn,Mn,Pn("http"),function(e){return"https"},t._0)},cu=function(e){var t=e,r=t.show,n=t.seasonsListVisible,o=c(tu,t.today,r.seasons),i=ae(c(ee,function(e){return e.episodes},o)),a=K(i),u=function(){var e=r.lastEpisodeWatched;return"_Tuple2"===e.ctor&&0===e._0&&0===e._1?a:K(c(te,function(e){return A(c(ru,r.lastEpisodeWatched,e))},i))}(),s=function(){var e=u;switch(e){case 0:return"All caught up";case 1:return c(w["++"],k(u)," episode to watch");default:return c(w["++"],k(u)," episodes to watch")}}();return c(ro,M.fromArray([vo("elmtv__show")]),M.fromArray([c(co,M.fromArray([Io(Ma({id:r.id,rev:r.rev,name:r.name})),vo("mdl-button mdl-js-button mdl-button--icon mdl-button--accent elmtv__remove-show")]),M.fromArray([c(oo,M.fromArray([vo("material-icons")]),M.fromArray([Qn("delete")]))])),c(ro,M.fromArray([vo("elmtv__show-content")]),M.fromArray([c(io,M.fromArray([vo("elmtv__show-image"),go(su(r.image))]),M.fromArray([])),c(ro,M.fromArray([So(M.fromArray([{ctor:"_Tuple2",_0:"padding-left",_1:"15px"},{ctor:"_Tuple2",_0:"flex",_1:"1"}]))]),M.fromArray([c(ro,M.fromArray([vo("elmtv__show-headline")]),M.fromArray([Qn(r.name)])),c(ro,M.fromArray([vo("mdl-typography--title")]),M.fromArray([Qn(v.cmp(a,0)>0?s:"")])),c(co,M.fromArray([Io(Va(A(n))),vo("\n                            mdl-button\n                            mdl-js-button\n                            mdl-button--raised\n                            mdl-js-ripple-effect\n                            mdl-button--colored\n                            elmtv__button--spacing")]),M.fromArray([Qn(n?"Hide seasons":"Show seasons")])),v.eq(u,0)?c(ro,M.fromArray([]),M.fromArray([])):c(co,M.fromArray([Io(Ka),vo("\n                                mdl-button\n                                mdl-js-button\n                                mdl-button--raised\n                                mdl-js-ripple-effect\n                                mdl-button--accent\n                                elmtv__button--spacing")]),M.fromArray([Qn("I'm caught up")]))]))])),v.eq(n,!0)?l(uu,r.lastEpisodeWatched,o,t.visibleSeasons):c(ro,M.fromArray([]),M.fromArray([]))]))},lu=function(e){var t=e.list;return"[]"===t.ctor?c(ro,M.fromArray([]),M.fromArray([])):c(ro,M.fromArray([vo("elmtv__panel")]),c(ce,c(to,M.fromArray([]),M.fromArray([])),c(ee,function(e){return c(ho,Xa(e.show.id),c(qo,cu,e))},t)))},fu=(t(function(e,t){var r=Tt(t);return c(ee,function(e){return v.update(e,{episodes:c(q,M.fromArray([]),c(Ve,e.id,r))})},e)}),function(e){var t=e;return"[]"===t.ctor?0:t._0.season}),du=function(e){return _a(e.id)},hu={ctor:"_Tuple2",_0:{today:gn(0),seasonsListVisible:!1,visibleSeasons:ot,show:{id:0,name:"",lastEpisodeWatched:{ctor:"_Tuple2",_0:0,_1:0},image:j,seasons:M.fromArray([]),rev:"",added:zi(gn(0))}},_1:l(Kr,Ua,Fa,wn)},pu=_e.outgoingPort("persistShow",function(e){return{id:e.id,lastEpisodeWatched:[e.lastEpisodeWatched._0,e.lastEpisodeWatched._1],name:e.name,image:"Nothing"===e.image.ctor?null:e.image._0,seasons:M.toArray(e.seasons).map(function(e){return{number:e.number,episodes:M.toArray(e.episodes).map(function(e){return{id:e.id,name:e.name,summary:e.summary,season:e.season,number:e.number,airstamp:e.airstamp}})}}),rev:e.rev,added:e.added}}),_u=t(function(e,r){var n=e;switch(n.ctor){case"MarkEpisodeWatched":var o=v.update(r,{lastEpisodeWatched:n._0});return{ctor:"_Tuple2",_0:o,_1:pu(o)};case"MarkSeasonWatched":var i=n._0,a=c(Er,function(e){return v.eq(e.number,i)},r.seasons),u=a;if("Nothing"===u.ctor)return{ctor:"_Tuple2",_0:r,_1:be};var s=u._0.episodes;if("[]"===s.ctor)return{ctor:"_Tuple2",_0:r,_1:be};var o=v.update(r,{lastEpisodeWatched:{ctor:"_Tuple2",_0:i,_1:s._0.number}});return{ctor:"_Tuple2",_0:o,_1:pu(o)};case"MarkAllEpisodesWatched":var f=function(){var e=r.seasons;if("[]"===e.ctor)return{ctor:"_Tuple2",_0:0,_1:0};var t=e._0,n=t.episodes;return"[]"===n.ctor?{ctor:"_Tuple2",_0:0,_1:0}:{ctor:"_Tuple2",_0:t.number,_1:n._0.number}}(),o=v.update(r,{lastEpisodeWatched:f});return{ctor:"_Tuple2",_0:o,_1:ye(M.fromArray([pu(o),va(c(w["++"],"Caught up on ",r.name))]))};case"UpdateEpisodes":var d=c(ee,function(e){return{episodes:e,number:fu(e)}},c(Cr,t(function(e,t){return v.eq(e.season,t.season)}),c(ee,function(e){return{id:e.id,name:e.name,summary:e.summary,season:e.season,number:e.number,airstamp:e.airstamp}},ne(n._0)))),o=v.update(r,{seasons:d});return{ctor:"_Tuple2",_0:o,_1:v.eq(o,r)?be:pu(o)};case"UpdateShow":return{ctor:"_Tuple2",_0:r,_1:l(Kr,Ja,Ha,du(r))};case"SetRev":return{ctor:"_Tuple2",_0:v.update(r,{rev:n._0}),_1:be};default:return{ctor:"_Tuple2",_0:r,_1:be}}}),vu=t(function(e,t){var r=e;switch(r.ctor){case"SetTodaysDate":return{ctor:"_Tuple2",_0:v.update(t,{today:r._0}),_1:be};case"ToggleSeasons":return{ctor:"_Tuple2",_0:v.update(t,{seasonsListVisible:r._0}),_1:be};case"ToggleSeason":var n=l(wt,r._0,r._1,t.visibleSeasons);return{ctor:"_Tuple2",_0:v.update(t,{visibleSeasons:n}),_1:be};case"RemoveShow":return{ctor:"_Tuple2",_0:t,_1:be};default:var o=c(_u,e,t.show),i=o._0,a=o._1;return{ctor:"_Tuple2",_0:v.update(t,{show:i}),_1:a}}}),mu=function(e){var t=hu,r=t._0,n=t._1,o=c(vu,Wa,v.update(r,{show:e})),i=o._0,a=o._1;return{ctor:"_Tuple2",_0:i,_1:ye(M.fromArray([c(ke,Xa(e.id),n),c(ke,Xa(e.id),a)]))}},gu=r(function(e,t,r){if(v.eq(r.show.id,e)){var n=c(vu,t,r),o=n._0,i=n._1;return{ctor:"_Tuple2",_0:o,_1:c(ke,Xa(e),i)}}return{ctor:"_Tuple2",_0:r,_1:be}}),yu={list:M.fromArray([]),error:j},bu=_e.incomingPort("loadShows",Ft(c(jt,c(zt[":="],"id",Jt),function(e){return c(jt,c(zt[":="],"lastEpisodeWatched",l(It,t(function(e,t){return{ctor:"_Tuple2",_0:e,_1:t}}),Jt,Jt)),function(t){return c(jt,c(zt[":="],"name",Wt),function(r){return c(jt,c(zt[":="],"image",Vt(M.fromArray([Bt(j),c($t,D,Wt)]))),function(n){return c(jt,c(zt[":="],"seasons",Ft(c(jt,c(zt[":="],"number",Jt),function(e){return c(jt,c(zt[":="],"episodes",Ft(c(jt,c(zt[":="],"id",Jt),function(e){return c(jt,c(zt[":="],"name",Wt),function(t){return c(jt,c(zt[":="],"summary",Wt),function(r){return c(jt,c(zt[":="],"season",Jt),function(n){return c(jt,c(zt[":="],"number",Jt),function(o){return c(jt,c(zt[":="],"airstamp",Wt),function(i){return qt({id:e,name:t,summary:r,season:n,number:o,airstamp:i})})})})})})}))),function(t){return qt({number:e,episodes:t})})}))),function(o){return c(jt,c(zt[":="],"rev",Wt),function(i){return c(jt,c(zt[":="],"added",Wt),function(a){return qt({id:e,lastEpisodeWatched:t,name:r,image:n,seasons:o,rev:i,added:a})})})})})})})}))),wu=_e.incomingPort("loadRev",c(jt,c(zt[":="],"id",Jt),function(e){return c(jt,c(zt[":="],"rev",Wt),function(t){return qt({id:e,rev:t})})})),ku=function(e){return Ee(M.fromArray([bu(Ya),wu(Qa)]))},Eu=_e.outgoingPort("removeShow",function(e){return{id:e.id,rev:e.rev,name:e.name}}),Su=t(function(e,t){var r=e;switch(r.ctor){case"ShowMsg":var n=r._1,o=n;switch(o.ctor){case"RemoveShow":var i=o._0,a=c(te,function(e){return!v.eq(i.id,e.show.id)},t.list);return{ctor:"_Tuple2",_0:v.update(t,{list:a}),_1:ye(M.fromArray([Eu(i),va(c(w["++"],"Removed ",i.name))]))};case"ShowError":var u=o._0;return"UnexpectedPayload"===u.ctor?{ctor:"_Tuple2",_0:v.update(t,{error:D(u._0)}),_1:be}:{ctor:"_Tuple2",_0:v.update(t,{error:D("Sorry, something went wrong during your search. You might be offline.")}),_1:be};default:var s=se(c(ee,c(gu,r._0,n),t.list)),l=s._0,f=s._1;return{ctor:"_Tuple2",_0:v.update(t,{list:l}),_1:ye(f)}}case"AddToList":var d=r._0._1,h=hu,p=h._0,_=h._1,m=p.show,g=function(e){var t=e.image;return"Nothing"===t.ctor?j:D(t._0.medium)},y=v.update(m,{id:d.show.id,name:d.show.name,image:g(d.show),added:zi(r._0._0)}),b=c(vu,Wa,v.update(p,{show:y})),k=b._0,f=b._1,E=c(Z["::"],k,t.list);return{ctor:"_Tuple2",_0:v.update(t,{list:E}),_1:ye(M.fromArray([c(ke,Xa(k.show.id),_),c(ke,Xa(k.show.id),f),va(c(w["++"],"Added ",y.name))]))};case"LoadShows":var S=se(c(ee,mu,r._0)),A=S._0,f=S._1;return{ctor:"_Tuple2",_0:v.update(t,{list:A}),_1:ye(f)};default:var T=r._0,x=se(c(ee,c(gu,T.id,Ba(T.rev)),t.list)),l=x._0,f=x._1;return{ctor:"_Tuple2",_0:v.update(t,{list:l}),_1:ye(f)}}}),Au={loggedIn:!1,picture:"",email:""},Tu=_e.outgoingPort("logInUser",function(e){return e}),xu=_e.outgoingPort("logOutUser",function(e){return e}),Ou=t(function(e,t){var r=e;switch(r.ctor){case"LogInUser":return{ctor:"_Tuple2",_0:t,_1:Tu(!0)};case"SetLoggedIn":return{ctor:"_Tuple2",_0:r._0,_1:be};default:return{ctor:"_Tuple2",_0:t,_1:xu(!0)}}}),Cu=_e.incomingPort("loggedInState",c(jt,c(zt[":="],"loggedIn",Ut),function(e){return c(jt,c(zt[":="],"picture",Wt),function(t){return c(jt,c(zt[":="],"email",Wt),function(r){return qt({loggedIn:e,picture:t,email:r})})})})),Nu=(r(function(e,t,r){return{loggedIn:e,picture:t,email:r}}),{ctor:"LogOutUser"}),Ru=function(e){return c(Yn,M.fromArray([vo("mdl-navigation")]),M.fromArray([c(no,M.fromArray([vo("mdl-navigation__link"),wo("#"),Io(Nu)]),M.fromArray([Qn("Sign out")])),c(io,M.fromArray([go(e.picture),vo("elmtv__profile-picture")]),M.fromArray([]))]))},Iu={ctor:"LogInUser"},qu=c(Yn,M.fromArray([vo("mdl-navigation")]),M.fromArray([c(no,M.fromArray([vo("mdl-navigation__link"),wo("#"),Io(Iu)]),M.fromArray([Qn("Sign in")]))])),ju=function(e){var t=e.loggedIn;return t===!0?Ru(e):qu},Lu=function(e){return{ctor:"SetLoggedIn",_0:e}},Du=function(e){return Cu(Lu)},Pu=function(e){return l(z,t(function(e,t){return c(or,e.show.id,t)}),nr,e.list)},Mu=(r(function(e,t,r){return{search:e,shows:t,login:r}}),function(e){return{ctor:"LoginMsg",_0:e}}),Bu=function(e){return{ctor:"ShowsMsg",_0:e}},Fu=function(e){return Ee(M.fromArray([c(Se,Bu,ku(e.shows)),c(Se,Mu,Du(e.login))]))},Uu=function(e){return{ctor:"SearchMsg",_0:e}},Ju=function(){var e=ka,t=e._0,r=e._1;return{ctor:"_Tuple2",_0:{search:t,shows:yu,login:Au},_1:c(ke,Uu,r)}}(),Hu=t(function(e,t){var r=e;switch(r.ctor){case"SearchMsg":var n=r._0,o=n;if("AddShow"===o.ctor){var i=c(qa,n,t.search),a=i._0,u=i._1,s=c(Su,Za(o._0),t.shows),l=s._0,f=s._1;return{ctor:"_Tuple2",_0:v.update(t,{shows:l,search:a}),_1:ye(M.fromArray([c(ke,Bu,f),c(ke,Uu,u)]))}}var d=c(qa,n,t.search),a=d._0,h=d._1;return{ctor:"_Tuple2",_0:v.update(t,{search:a}),_1:c(ke,Uu,h)};case"ShowsMsg":var p=c(Su,r._0,t.shows),l=p._0,h=p._1;return{ctor:"_Tuple2",_0:v.update(t,{shows:l}),_1:c(ke,Bu,h)};default:var _=c(Ou,r._0,t.login),m=_._0,g=_._1;return{ctor:"_Tuple2",_0:v.update(t,{login:m}),_1:c(ke,Mu,g)}}}),Wu=function(e){return c(ro,M.fromArray([vo("mdl-grid")]),M.fromArray([c(ro,M.fromArray([vo("mdl-cell mdl-cell--12-col")]),M.fromArray([c(ho,Uu,c(Pa,e.search,Pu(e.shows))),c(ho,Bu,lu(e.shows))]))]))},Vu=function(e){return c(ro,M.fromArray([vo("mdl-layout mdl-js-layout mdl-layout--fixed-header")]),M.fromArray([c(Zn,M.fromArray([vo("mdl-layout__header")]),M.fromArray([c(ro,M.fromArray([vo("mdl-layout__header-row elmtv__header--no-drawer")]),M.fromArray([c(oo,M.fromArray([vo("mdl-layout-title")]),M.fromArray([Qn("Elm TV")])),c(oo,M.fromArray([vo("mdl-layout-spacer")]),M.fromArray([])),c(ho,Mu,ju(e.login))]))])),c(eo,M.fromArray([vo("mdl-layout__content")]),M.fromArray([c(ro,M.fromArray([vo("page-content elmtv__main-content")]),M.fromArray([Wu(e)]))])),c(ro,M.fromArray([vo("mdl-snackbar mdl-js-snackbar js-elmtv__snackbar")]),M.fromArray([c(ro,M.fromArray([vo("mdl-snackbar__text")]),M.fromArray([])),c(co,M.fromArray([yo("button"),vo("mdl-snackbar__action")]),M.fromArray([]))]))]))},zu={main:fo({init:Ju,view:Vu,update:Hu,subscriptions:Fu})},Gu={};if(Gu.Main=Gu.Main||{},_e.addPublicModule(Gu.Main,"Main","undefined"==typeof zu?null:zu),"function"==typeof define&&define.amd)return void define([],function(){return Gu});if("object"==typeof e)return void(e.exports=Gu);var Ku=this.Elm;if("undefined"==typeof Ku)return void(this.Elm=Gu);for(var $u in Gu){if($u in Ku)throw new Error("There are two Elm modules called `"+$u+"` on this page! Rename one of them.");Ku[$u]=Gu[$u]}}).call(this)}]);