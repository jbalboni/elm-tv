!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="/dist/",t(0)}([function(e,t,r){"use strict";function n(){a.fetchShows().then(function(e){i.ports.loadShows.send(e)})["catch"](function(e){console.log(e)})}r(1).polyfill(),r(6);var o,i,a,u,c=r(7),s=r(8),l=r(35);o=r(67),u=new l("shows"),a=c(u),i=o.Main.embed(document.getElementById("elm")),i.ports.persistShow.subscribe(function(e){a.saveShow(e).then(function(t){i.ports.loadRev.send({id:e.id,rev:t.rev})})["catch"](function(e){console.log(e)})}),s.authenticate(),setTimeout(function(){s.isAuthenticated()&&s.start(u,function(e){"pull"===e.direction&&n()}),n()},0),"serviceWorker"in navigator&&navigator.serviceWorker.register("service-worker.js")},function(e,t,r){var n;(function(e,o,i){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
	 * @version   3.2.1
	 */
(function(){"use strict";function a(e){return"function"==typeof e||"object"==typeof e&&null!==e}function u(e){return"function"==typeof e}function c(e){X=e}function s(e){ee=e}function l(){return function(){e.nextTick(_)}}function f(){return function(){$(_)}}function d(){var e=0,t=new ne(_),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}function p(){var e=new MessageChannel;return e.port1.onmessage=_,function(){e.port2.postMessage(0)}}function h(){return function(){setTimeout(_,1)}}function _(){for(var e=0;Z>e;e+=2){var t=ae[e],r=ae[e+1];t(r),ae[e]=void 0,ae[e+1]=void 0}Z=0}function v(){try{var e=r(4);return $=e.runOnLoop||e.runOnContext,f()}catch(t){return h()}}function m(e,t){var r=this,n=new this.constructor(y);void 0===n[se]&&M(n);var o=r._state;if(o){var i=arguments[o-1];ee(function(){D(o,n,i,r._result)})}else q(r,n,e,t);return n}function g(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var r=new t(y);return T(r,e),r}function y(){}function b(){return new TypeError("You cannot resolve a promise with itself")}function w(){return new TypeError("A promises callback cannot return that same promise.")}function A(e){try{return e.then}catch(t){return pe.error=t,pe}}function k(e,t,r,n){try{e.call(t,r,n)}catch(o){return o}}function S(e,t,r){ee(function(e){var n=!1,o=k(r,t,function(r){n||(n=!0,t!==r?T(e,r):R(e,r))},function(t){n||(n=!0,C(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&o&&(n=!0,C(e,o))},e)}function E(e,t){t._state===fe?R(e,t._result):t._state===de?C(e,t._result):q(t,void 0,function(t){T(e,t)},function(t){C(e,t)})}function x(e,t,r){t.constructor===e.constructor&&r===ue&&constructor.resolve===ce?E(e,t):r===pe?C(e,pe.error):void 0===r?R(e,t):u(r)?S(e,t,r):R(e,t)}function T(e,t){e===t?C(e,b()):a(t)?x(e,t,A(t)):R(e,t)}function O(e){e._onerror&&e._onerror(e._result),N(e)}function R(e,t){e._state===le&&(e._result=t,e._state=fe,0!==e._subscribers.length&&ee(N,e))}function C(e,t){e._state===le&&(e._state=de,e._result=t,ee(O,e))}function q(e,t,r,n){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+fe]=r,o[i+de]=n,0===i&&e._state&&ee(N,e)}function N(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n,o,i=e._result,a=0;a<t.length;a+=3)n=t[a],o=t[a+r],n?D(r,n,o,i):o(i);e._subscribers.length=0}}function I(){this.error=null}function j(e,t){try{return e(t)}catch(r){return he.error=r,he}}function D(e,t,r,n){var o,i,a,c,s=u(r);if(s){if(o=j(r,n),o===he?(c=!0,i=o.error,o=null):a=!0,t===o)return void C(t,w())}else o=n,a=!0;t._state!==le||(s&&a?T(t,o):c?C(t,i):e===fe?R(t,o):e===de&&C(t,o))}function L(e,t){try{t(function(t){T(e,t)},function(t){C(e,t)})}catch(r){C(e,r)}}function B(){return _e++}function M(e){e[se]=_e++,e._state=void 0,e._result=void 0,e._subscribers=[]}function P(e){return new be(this,e).promise}function F(e){var t=this;return new t(Y(e)?function(r,n){for(var o=e.length,i=0;o>i;i++)t.resolve(e[i]).then(r,n)}:function(e,t){t(new TypeError("You must pass an array to race."))})}function U(e){var t=this,r=new t(y);return C(r,e),r}function J(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function H(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function W(e){this[se]=B(),this._result=this._state=void 0,this._subscribers=[],y!==e&&("function"!=typeof e&&J(),this instanceof W?L(this,e):H())}function z(e,t){this._instanceConstructor=e,this.promise=new e(y),this.promise[se]||M(this.promise),Y(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?R(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&R(this.promise,this._result))):C(this.promise,V())}function V(){return new Error("Array Methods must be provided an Array")}function G(){var e;if("undefined"!=typeof o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var r=e.Promise;r&&"[object Promise]"===Object.prototype.toString.call(r.resolve())&&!r.cast||(e.Promise=ye)}var K;K=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var $,X,Q,Y=K,Z=0,ee=function(e,t){ae[Z]=e,ae[Z+1]=t,Z+=2,2===Z&&(X?X(_):Q())},te="undefined"!=typeof window?window:void 0,re=te||{},ne=re.MutationObserver||re.WebKitMutationObserver,oe="undefined"==typeof self&&"undefined"!=typeof e&&"[object process]"==={}.toString.call(e),ie="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ae=new Array(1e3);Q=oe?l():ne?d():ie?p():void 0===te?v():h();var ue=m,ce=g,se=Math.random().toString(36).substring(16),le=void 0,fe=1,de=2,pe=new I,he=new I,_e=0,ve=P,me=F,ge=U,ye=W;W.all=ve,W.race=me,W.resolve=ce,W.reject=ge,W._setScheduler=c,W._setAsap=s,W._asap=ee,W.prototype={constructor:W,then:ue,"catch":function(e){return this.then(null,e)}};var be=z;z.prototype._enumerate=function(){for(var e=this.length,t=this._input,r=0;this._state===le&&e>r;r++)this._eachEntry(t[r],r)},z.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===ce){var o=A(e);if(o===ue&&e._state!==le)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(r===ye){var i=new r(y);x(i,e,o),this._willSettleAt(i,t)}else this._willSettleAt(new r(function(t){t(e)}),t)}else this._willSettleAt(n(e),t)},z.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===le&&(this._remaining--,e===de?C(n,r):this._result[t]=r),0===this._remaining&&R(n,this._result)},z.prototype._willSettleAt=function(e,t){var r=this;q(e,void 0,function(e){r._settledAt(fe,t,e)},function(e){r._settledAt(de,t,e)})};var we=G,Ae={Promise:ye,polyfill:we};r(5).amd?(n=function(){return Ae}.call(t,r,t,i),!(void 0!==n&&(i.exports=n))):"undefined"!=typeof i&&i.exports?i.exports=Ae:"undefined"!=typeof this&&(this.ES6Promise=Ae),we()}).call(this)}).call(t,r(2),function(){return this}(),r(3)(e))},function(e,t){function r(){s&&a&&(s=!1,a.length?c=a.concat(c):l=-1,c.length&&n())}function n(){if(!s){var e=setTimeout(r);s=!0;for(var t=c.length;t;){for(a=c,c=[];++l<t;)a&&a[l].run();l=-1,t=c.length}a=null,s=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function i(){}var a,u=e.exports={},c=[],s=!1,l=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new o(e,t)),1!==c.length||s||setTimeout(n,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=i,u.addListener=i,u.once=i,u.off=i,u.removeListener=i,u.removeAllListeners=i,u.emit=i,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function r(e){return"string"!=typeof e&&(e=String(e)),e}function n(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return _.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function u(e){var t=new FileReader;return t.readAsArrayBuffer(e),a(t)}function c(e){var t=new FileReader;return t.readAsText(e),a(t)}function s(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(_.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(_.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(_.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(e){if(!_.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):_.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},_.blob?(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(u)},this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return c(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=i(this);return e?e:Promise.resolve(this._bodyText)},_.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function l(e){var t=e.toUpperCase();return v.indexOf(t)>-1?t:e}function f(e,t){t=t||{};var r=t.body;if(f.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,r||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=l(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function d(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}}),t}function p(e){var t=new o,r=(e.getAllResponseHeaders()||"").trim().split("\n");return r.forEach(function(e){var r=e.trim().split(":"),n=r.shift().trim(),o=r.join(":").trim();t.append(n,o)}),t}function h(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof o?t.headers:new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var _={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};o.prototype.append=function(e,n){e=t(e),n=r(n);var o=this.map[e];o||(o=[],this.map[e]=o),o.push(n)},o.prototype["delete"]=function(e){delete this.map[t(e)]},o.prototype.get=function(e){var r=this.map[t(e)];return r?r[0]:null},o.prototype.getAll=function(e){return this.map[t(e)]||[]},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,n){this.map[t(e)]=[r(n)]},o.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(n){e.call(t,n,r,this)},this)},this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),n(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),n(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),n(e)},_.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this)},s.call(f.prototype),s.call(h.prototype),h.prototype.clone=function(){return new h(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},h.error=function(){var e=new h(null,{status:0,statusText:""});return e.type="error",e};var m=[301,302,303,307,308];h.redirect=function(e,t){if(-1===m.indexOf(t))throw new RangeError("Invalid status code");return new h(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=f,e.Response=h,e.fetch=function(e,t){return new Promise(function(r,n){function o(){return"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0}var i;i=f.prototype.isPrototypeOf(e)&&!t?e:new f(e,t);var a=new XMLHttpRequest;a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:p(a),url:o()},t="response"in a?a.response:a.responseText;r(new h(t,e))},a.onerror=function(){n(new TypeError("Network request failed"))},a.ontimeout=function(){n(new TypeError("Network request failed"))},a.open(i.method,i.url,!0),"include"===i.credentials&&(a.withCredentials=!0),"responseType"in a&&_.blob&&(a.responseType="blob"),i.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(e,t){"use strict";function r(e){var t={};return t.fetchShows=function(){return e.allDocs({include_docs:!0}).then(function(e){return e.total_rows>0?e.rows.map(function(e){return e.doc.rev=e.doc._rev,e.doc}):[]})},t.saveShow=function(t){return t._id=t.id.toString(),t._rev=t.rev,e.put(t)},t}e.exports=r},function(e,t,r){"use strict";var n=r(9),o=r(35),i=window.location.protocol+"//"+window.location.host+"/db/",t={};t.authenticate=function(){var e=new n({domain:{NODE_ENV:"production"}.AUTH0_URL,clientID:{NODE_ENV:"production"}.AUTH0_CLIENTID,callbackURL:"http://localhost:3000",callbackOnLocationHash:!0}),t=e.parseHash(window.location.hash);t&&(t.error?(console.log("There was an error logging in",t.error),alert("There was an error: "+t.error)):localStorage.setItem("id_token",t.idToken)),window.login=function(){e.login({connection:"google-oauth2"})}},t.isAuthenticated=function(){return!!localStorage.id_token},t.start=function(e,t){var r=localStorage.id_token;fetch("/db/name",{method:"POST",withCredentials:!0,headers:{Authorization:"Bearer "+r}}).then(function(e){if(e.ok)return e.json();throw new Error("Failed to get database name")}).then(function(n){var a=new o(i+n.name,{ajax:{headers:{Authorization:"Bearer "+r}}});e.sync(a,{live:!0,retry:!0}).on("change",function(e){t&&t(e)})})},e.exports=t},function(e,t,r){(function(t){function n(){var e,t=-1,r=navigator.userAgent;return"Microsoft Internet Explorer"===navigator.appName?(e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!=e.exec(r)&&(t=parseFloat(RegExp.$1))):r.indexOf("Trident")>-1&&(e=new RegExp("rv:([0-9]{2,2}[.0-9]{0,})"),null!==e.exec(r)&&(t=parseFloat(RegExp.$1))),t}function o(e){var t="";for(var r in e)t+=r+"="+e[r]+",";return t.slice(0,-1)}function i(e,t){return!(!e||null==e[t])}function a(e,t){var r=e.status,o="string"==typeof e.responseText?e.responseText:e,i=10===n()||11===n(),a=!r||0===r,u=!!window.navigator.onLine;a&&!u?(r=0,o={code:"offline"}):a&&i?(r=401,o={code:"invalid_user_password"}):a&&(r=0,o={code:"connection_refused_timeout"});var c=new A(r,o);t(c)}function u(e,t,r){return e+"//"+t+r}function c(e){return this instanceof c?(l(e,"clientID"),l(e,"domain"),this._useJSONP=null!=e.forceJSONP?!!e.forceJSONP:k()&&!b("https:",e.domain),this._clientID=e.clientID,this._callbackURL=e.callbackURL||document.location.href,this._shouldRedirect=!!e.callbackURL,this._domain=e.domain,this._callbackOnLocationHash=e.callbackOnLocationHash,this._cordovaSocialPlugins={facebook:this._phonegapFacebookLogin},this._useCordovaSocialPlugins=e.useCordovaSocialPlugins,void(this._sendClientInfo=null!=e.sendSDKClientInfo?e.sendSDKClientInfo:!0)):new c(e)}var s=r(10),l=r(12),f=r(13),d=r(14),p=r(15),h=r(16),_=r(22),v=r(23),m=r(24),g=r(25),y={param:"cbx",timeout:8e3,prefix:"__auth0jp"},b=r(29),w=r(30),A=r(32),k=r(33);c.version=r(34).str,c.clientInfo={name:"auth0.js",version:c.version},c.prototype.openWindow=function(e,t,r){return window.open(e,t,o(r))},c.prototype._redirect=function(e){t.window.location=e},c.prototype._getCallbackOnLocationHash=function(e){return e&&"undefined"!=typeof e.callbackOnLocationHash?e.callbackOnLocationHash:this._callbackOnLocationHash},c.prototype._getCallbackURL=function(e){return e&&"undefined"!=typeof e.callbackURL?e.callbackURL:this._callbackURL},c.prototype._getClientInfoString=function(){var e=JSON.stringify(c.clientInfo);return s.encode(e)},c.prototype._getClientInfoHeader=function(){return{"Auth0-Client":this._getClientInfoString()}},c.prototype._renderAndSubmitWSFedForm=function(e,t){var r=document.createElement("div");r.innerHTML=t;var n=document.body.appendChild(r).children[0];e.popup&&!this._getCallbackOnLocationHash(e)&&(n.target="auth0_signup_popup"),n.submit()},c.prototype._getMode=function(e){return{scope:"openid",response_type:this._getCallbackOnLocationHash(e)?"token":"code"}},c.prototype._configureOfflineMode=function(e){e.scope&&e.scope.indexOf("offline_access")>=0&&(e.device=e.device||"Browser")},c.prototype._getUserInfo=function(e,t,r){if(!e||e.user_id)return r(null,e);var n="https:",o=this._domain,i="/tokeninfo",a=u(n,o,i),c=function(e,t){var n=new Error(e+": "+(t||""));n.error=e,n.error_description=t,r(n)};return this._useJSONP?g(a+"?"+p.stringify({id_token:t}),y,function(e,t){return e?c(0,e.toString()):200===t.status?r(null,t.user):c(t.status,t.err||t.error)}):v({url:b(n,o)?i:a,method:"post",type:"json",crossOrigin:!b(n,o),data:{id_token:t}}).fail(function(e){c(e.status,e.responseText)}).then(function(e){r(null,e)})},c.prototype.getProfile=function(e,t){if("function"!=typeof t)throw new Error("A callback function is required");return e&&"string"==typeof e?void this._getUserInfo(this.decodeJwt(e),e,t):t(new Error("Invalid token"))},c.prototype.validateUser=function(e,t){var r="https:",n=this._domain,o="/public/api/users/validate_userpassword",i=u(r,n,o),a=h(e,{client_id:this._clientID,username:_(e.username||e.email||"")});return this._useJSONP?g(i+"?"+p.stringify(a),y,function(e,r){return e?t(e):"error"in r&&404!==r.status?t(new Error(r.error)):void t(null,200===r.status)}):void v({url:b(r,n)?o:i,method:"post",type:"text",data:a,crossOrigin:!b(r,n),error:function(e){return 404!==e.status?t(new Error(e.responseText)):void t(null,!1)},success:function(e){t(null,200===e.status)}})},c.prototype.decodeJwt=function(e){var t=e&&e.split(".")[1];return w(s.decode(t))},c.prototype.parseHash=function(e){e=e||window.location.hash;var t;if(e.match(/error/)){e=e.substr(1).replace(/^\//,""),t=p.parse(e);var r={error:t.error,error_description:t.error_description};return r}if(!e.match(/access_token/))return null;e=e.substr(1).replace(/^\//,""),t=p.parse(e);var n=t.id_token,o=t.refresh_token,i=this.decodeJwt(n),a=function(e){var t={error:"invalid_token",error_description:e};return t},u=f(i.aud)?i.aud:[i.aud];return-1===d(u,this._clientID)?a("The clientID configured ("+this._clientID+") does not match with the clientID set in the token ("+u.join(", ")+")."):i.iss&&i.iss!=="https://"+this._domain+"/"?a("The domain configured (https://"+this._domain+"/) does not match with the domain set in the token ("+i.iss+")."):{accessToken:t.access_token,idToken:n,idTokenPayload:i,refreshToken:o,state:t.state}},c.prototype.signup=function(e,t){function r(){return e.auto_login?o.login(e,t):"function"==typeof t?t():void 0}function n(e,r){var n=new A(e,r);if(s&&"function"==typeof s.kill&&s.kill(),"function"==typeof t)return t(n);throw n}var o=this,a={client_id:this._clientID,redirect_uri:this._getCallbackURL(e),email:_(e.email||e.username||""),tenant:this._domain.split(".")[0]};"string"==typeof e.username&&(a.username=_(e.username));var c=h(this._getMode(e),e,a);this._configureOfflineMode(c),i(e,"sso")||(e.sso=!0),i(e,"auto_login")||(e.auto_login=!0);var s,l=e.auto_login&&e.popup&&(!this._getCallbackOnLocationHash(e)||e.sso);l&&(s=this._buildPopupWindow(e));var f="https:",d=this._domain,m="/dbconnections/signup",w=u(f,d,m);return this._useJSONP?g(w+"?"+p.stringify(c),y,function(e,t){return e?n(0,e):200==t.status?r():n(t.status,t.err||t.error)}):void v({url:b(f,d)?m:w,method:"post",type:"html",data:c,success:r,crossOrigin:!b(f,d),error:function(e){n(e.status,e.responseText)}})},c.prototype.changePassword=function(e,t){function r(e,r){var n=new A(e,r);return t?t(n):void 0}var n={tenant:this._domain.split(".")[0],client_id:this._clientID,connection:e.connection,email:_(e.email||"")};"string"==typeof e.password&&(n.password=e.password);var o="https:",i=this._domain,a="/dbconnections/change_password",c=u(o,i,a);return this._useJSONP?g(c+"?"+p.stringify(n),y,function(e,n){return e?r(0,e):200==n.status?t(null,n.message):r(n.status,n.err||n.error)}):void v({url:b(o,i)?a:c,method:"post",type:"html",data:n,crossOrigin:!b(o,i),error:function(e){r(e.status,e.responseText)},success:function(e){t(null,e)}})},c.prototype._buildAuthorizeQueryString=function(e,t){var r=this._buildAuthorizationParameters(e,t);return p.stringify(r)},c.prototype._buildAuthorizationParameters=function(e,t){var r=h.apply(null,e);this._configureOfflineMode(r),this._sendClientInfo&&(r.auth0Client=this._getClientInfoString()),t=t||["popup","popupOptions"];var n,o;for(n=0;n<t.length;n++)o=t[n],delete r[o];return r.connection_scope&&f(r.connection_scope)&&(r.connection_scope=r.connection_scope.join(",")),r},c.prototype.login=c.prototype.signin=function(e,t){return i(e,"sso")||(e.sso=!0),"undefined"!=typeof e.passcode?this.loginWithPasscode(e,t):"undefined"!=typeof e.username||"undefined"!=typeof e.email?this.loginWithUsernamePassword(e,t):window.cordova||window.electron?this.loginPhonegap(e,t):e.popup&&this._getCallbackOnLocationHash(e)?this.loginWithPopup(e,t):void this._authorize(e)},c.prototype._authorize=function(e){var t=[this._getMode(e),e,{client_id:this._clientID,redirect_uri:this._getCallbackURL(e)}],r=this._buildAuthorizeQueryString(t),n=u("https:",this._domain,"/authorize?"+r);e.popup?this._buildPopupWindow(e,n):this._redirect(n)},c.prototype._computePopupPosition=function(e){e=e||{};var t=e.width||500,r=e.height||600,n="undefined"!=typeof window.screenX?window.screenX:window.screenLeft,o="undefined"!=typeof window.screenY?window.screenY:window.screenTop,i="undefined"!=typeof window.outerWidth?window.outerWidth:document.body.clientWidth,a="undefined"!=typeof window.outerHeight?window.outerHeight:document.body.clientHeight-22,u=n+(i-t)/2,c=o+(a-r)/2;return{width:t,height:r,left:u,top:c}},c.prototype.loginPhonegap=function(e,t){function r(e){return p?void 0:(t(new Error(e.message),null,null,null,null),p=!0,d.close())}function n(e){if(!(p||e.url&&0!==e.url.indexOf(i+"#")&&0!==e.url.indexOf(i+"?"))){var r=a.parseHash(e.url.slice(i.length));return r?r.id_token?(setTimeout(function(){t(null,a._prepareResult(r))},0),p=!0,d.close()):(t(new Error(r.err||r.error||"Something went wrong"),null,null,null,null),p=!0,d.close()):(t(new Error("Error parsing hash"),null,null,null,null),p=!0,d.close())}}function o(){p||(t(new Error("Browser window closed"),null,null,null,null),d.removeEventListener("loaderror",r),d.removeEventListener("loadstart",n),d.removeEventListener("exit",o))}if(this._shouldAuthenticateWithCordovaPlugin(e.connection))return void this._socialPhonegapLogin(e,t);var i=u("https:",this._domain,"/mobile"),a=this,c=[this._getMode(e),e,{client_id:this._clientID,redirect_uri:i}];this._sendClientInfo&&c.push({auth0Client:this._getClientInfoString()});var s=this._buildAuthorizeQueryString(c),l=u("https:",this._domain,"/authorize?"+s),f=h({location:"yes"},e.popupOptions);delete f.width,delete f.height;var d=this.openWindow(l,"_blank",f),p=!1;d.addEventListener("loaderror",r),d.addEventListener("loadstart",n),d.addEventListener("exit",o)},c.prototype.loginWithPopup=function(e,t){var r=this;if(!t)throw new Error("popup mode should receive a mandatory callback");var n=[this._getMode(e),e,{client_id:this._clientID,owp:!0}];this._sendClientInfo&&n.push({auth0Client:this._getClientInfoString()});var i=this._buildAuthorizeQueryString(n),a=u("https:",this._domain,"/authorize?"+i),c=this._computePopupPosition(e.popupOptions),s=h(c,e.popupOptions),l=m.open({url:a,relay_url:"https://"+this._domain+"/relay.html",window_features:o(s)},function(e,n){return r._current_popup=null,e?t(new A(e),null,null,null,null,null):n?n.id_token?t(null,r._prepareResult(n)):n.err?t(new A(n.err.status,n.err.details||n.err),null,null,null,null,null):n.error?t(new A(n.status,n.details||n),null,null,null,null,null):t(new A("Something went wrong"),null,null,null,null,null):t(new A("Something went wrong"),null,null,null,null,null)});l.focus()},c.prototype._shouldAuthenticateWithCordovaPlugin=function(e){var t=this._cordovaSocialPlugins[e];return this._useCordovaSocialPlugins&&!!t},c.prototype._socialPhonegapLogin=function(e,t){var r=this._cordovaSocialPlugins[e.connection],n=this;r(e.connection_scope,function(r,o,i){if(r)return void t(r,null,null,null,null);var a=h({access_token:o},e,i);n.loginWithSocialAccessToken(a,t)})},c.prototype._phonegapFacebookLogin=function(e,t){if(!window.facebookConnectPlugin||!window.facebookConnectPlugin.login)return void t(new Error("missing plugin phonegap-facebook-plugin"),null,null);var r;r=e&&f(e)?e:e?[e]:["public_profile"],window.facebookConnectPlugin.login(r,function(e){t(null,e.authResponse.accessToken,{})},function(e){t(new Error(e),null,null)})},c.prototype.loginWithUsernamePasswordAndSSO=function(e,t){var r=this,n=this._computePopupPosition(e.popupOptions),i=h(n,e.popupOptions),a=m.open({url:"https://"+this._domain+"/sso_dbconnection_popup/"+this._clientID,relay_url:"https://"+this._domain+"/relay.html",window_features:o(i),popup:this._current_popup,params:{domain:this._domain,clientID:this._clientID,options:{username:_(e.username||e.email||""),password:e.password,connection:e.connection,state:e.state,scope:e.scope}}},function(e,n){return r._current_popup=null,e?t(new A(e),null,null,null,null,null):n?n.id_token?t(null,r._prepareResult(n)):n.err?t(new A(n.err.status,n.err.details||n.err),null,null,null,null,null):n.error?t(new A(n.status,n.details||n),null,null,null,null,null):t(new A("Something went wrong"),null,null,null,null,null):t(new A("Something went wrong"),null,null,null,null,null)});a.focus()},c.prototype.loginWithResourceOwner=function(e,t){var r=this,n=h(this._getMode(e),e,{client_id:this._clientID,username:_(e.username||e.email||""),grant_type:"password"});this._configureOfflineMode(n);var o="https:",i=this._domain,c="/oauth/ro",s=u(o,i,c);return this._sendClientInfo&&this._useJSONP&&(n.auth0Client=this._getClientInfoString()),this._useJSONP?g(s+"?"+p.stringify(n),y,function(e,n){if(e)return t(e);if("error"in n){var o=new A(n.status,n.error);return t(o)}t(null,r._prepareResult(n))}):void v({url:b(o,i)?c:s,method:"post",type:"json",data:n,headers:this._getClientInfoHeader(),crossOrigin:!b(o,i),success:function(e){t(null,r._prepareResult(e))},error:function(e){a(e,t)}})},c.prototype.loginWithSocialAccessToken=function(e,t){var r=this,n=this._buildAuthorizationParameters([{scope:"openid"},e,{client_id:this._clientID}]),o="https:",i=this._domain,c="/oauth/access_token",s=u(o,i,c);return this._useJSONP?g(s+"?"+p.stringify(n),y,function(e,n){if(e)return t(e);if("error"in n){var o=new A(n.status,n.error);return t(o)}t(null,r._prepareResult(n))}):void v({url:b(o,i)?c:s,method:"post",type:"json",data:n,headers:this._getClientInfoHeader(),crossOrigin:!b(o,i),success:function(e){t(null,r._prepareResult(e))},error:function(e){a(e,t)}})},c.prototype._buildPopupWindow=function(e,t){if(this._current_popup&&!this._current_popup.closed)return this._current_popup;t=t||"about:blank";var r=this,n={width:500,height:600},i=h(n,e.popupOptions||{}),a=o(i);if(this._current_popup=window.open(t,"auth0_signup_popup",a),!this._current_popup)throw new Error("Popup window cannot not been created. Disable popup blocker or make sure to call Auth0 login or singup on an UI event.");return this._current_popup.kill=function(){this.close(),r._current_popup=null},this._current_popup},c.prototype.loginWithUsernamePassword=function(e,t){function r(e){if(t)return t(e);throw e}if(t&&t.length>1&&(!e.sso||window.cordova))return this.loginWithResourceOwner(e,t);var n,o=this;if(e.popup&&!this._getCallbackOnLocationHash(e)&&(n=this._buildPopupWindow(e)),t&&t.length>1&&e.sso)return this.loginWithUsernamePasswordAndSSO(e,t);var i=h(this._getMode(e),e,{client_id:this._clientID,redirect_uri:this._getCallbackURL(e),username:_(e.username||e.email||""),tenant:this._domain.split(".")[0]});this._configureOfflineMode(i);var c="https:",s=this._domain,l="/usernamepassword/login",f=u(c,s,l);return this._useJSONP?g(f+"?"+p.stringify(i),y,function(r,i){if(r)return n&&n.kill&&n.kill(),t(r);if("error"in i){n&&n.kill&&n.kill();var a=new A(i.status,i.error);return t(a)}o._renderAndSubmitWSFedForm(e,i.form)}):void v({url:b(c,s)?l:f,method:"post",type:"html",data:i,headers:this._getClientInfoHeader(),crossOrigin:!b(c,s),success:function(t){o._renderAndSubmitWSFedForm(e,t)},error:function(e){n&&n.kill&&n.kill(),a(e,r)}})},c.prototype.loginWithPasscode=function(e,t){if(null==e.email&&null==e.phoneNumber)throw new Error("email or phoneNumber is required for authentication");if(null==e.passcode)throw new Error("passcode is required for authentication");if(e.connection=null==e.email?"sms":"email",!this._shouldRedirect)return e=h(e,{username:null==e.email?e.phoneNumber:e.email,password:e.passcode,sso:!1}),delete e.email,delete e.phoneNumber,delete e.passcode,this.loginWithResourceOwner(e,t);var r={connection:e.connection};e.phoneNumber&&(e.phone_number=e.phoneNumber,delete e.phoneNumber,r.phone_number=e.phone_number),e.email&&(r.email=e.email),e.verification_code=e.passcode,delete e.passcode,r.verification_code=e.verification_code;var n=this;this._verify(r,function(r){return r?t(r):void n._verify_redirect(e)})},c.prototype._verify=function(e,t){var r="https:",n=this._domain,o="/passwordless/verify",i=u(r,n,o),a=e;return this._useJSONP?(this._sendClientInfo&&(a.auth0Client=this._getClientInfoString()),g(i+"?"+p.stringify(a),y,function(e,r){return e?t(new Error("0: "+e.toString())):200===r.status?t(null,!0):t({status:r.status})})):v({url:b(r,n)?o:i,method:"post",headers:this._getClientInfoHeader(),crossOrigin:!b(r,n),data:a}).fail(function(e){try{t(JSON.parse(e.responseText))}catch(r){var n=new Error(e.status+"("+e.statusText+"): "+e.responseText);n.statusCode=e.status,n.error=e.statusText,n.message=e.responseText,t(n)}}).then(function(e){t(null,e)})},c.prototype._verify_redirect=function(e){var t=[this._getMode(e),e,{client_id:this._clientID,redirect_uri:this._getCallbackURL(e)}],r=this._buildAuthorizeQueryString(t),n=u("https:",this._domain,"/passwordless/verify_redirect?"+r);this._redirect(n)},c.prototype.renewIdToken=function(e,t){this.getDelegationToken({id_token:e,scope:"passthrough",api:"auth0"},t)},c.prototype.refreshToken=function(e,t){this.getDelegationToken({refresh_token:e,scope:"passthrough",api:"auth0"},t)},c.prototype.getDelegationToken=function(e,t){if(e=e||{},!e.id_token&&!e.refresh_token)throw new Error("You must send either an id_token or a refresh_token to get a delegation token.");var r=h({grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",
client_id:this._clientID,target:e.targetClientId||this._clientID,api_type:e.api},e);delete r.hasOwnProperty,delete r.targetClientId,delete r.api;var o="https:",i=this._domain,a="/delegation",c=u(o,i,a);return this._useJSONP?g(c+"?"+p.stringify(r),y,function(e,r){if(e)return t(e);if("error"in r){var n=new A(r.status,r.error_description||r.error);return t(n)}t(null,r)}):void v({url:b(o,i)?a:c,method:"post",type:"json",data:r,crossOrigin:!b(o,i),success:function(e){t(null,e)},error:function(e){try{t(JSON.parse(e.responseText))}catch(r){var o=e,i=10===n()||11===n(),a=!o.status||0===o.status;a&&!window.navigator.onLine?(o={},o.status=0,o.responseText={code:"offline"}):a&&i?(o={},o.status=401,o.responseText={code:"invalid_operation"}):a?(o={},o.status=0,o.responseText={code:"connection_refused_timeout"}):o.responseText=e,t(new A(o.status,o.responseText))}}})},c.prototype.logout=function(e){var t=u("https:",this._domain,"/logout");e&&(t+="?"+p.stringify(e)),this._redirect(t)},c.prototype.getSSOData=function(e,t){"function"==typeof e&&(t=e,e=!1);var r={sso:!1};if(this._useJSONP){var n=new Error("The SSO data can't be obtained using JSONP");return void setTimeout(function(){t(n,r)},0)}var o="https:",i=this._domain,a="/user/ssodata",c=u(o,i,a),s=b(o,i),l={};return e&&(l={ldaps:1,client_id:this._clientID}),v({url:s?a:c,method:"get",type:"json",data:l,crossOrigin:!s,withCredentials:!s,timeout:3e3}).fail(function(e){var n=new Error("There was an error in the request that obtains the user's SSO data.");n.cause=e,t(n,r)}).then(function(e){t(null,e)})},c.prototype.getConnections=function(e){return g("https://"+this._domain+"/public/api/"+this._clientID+"/connections",y,e)},c.prototype.startPasswordless=function(e,t){if("object"!=typeof e)throw new Error("An options object is required");if("function"!=typeof t)throw new Error("A callback function is required");if(!e.email&&!e.phoneNumber)throw new Error("An `email` or a `phoneNumber` is required.");var r="https:",n=this._domain,o="/passwordless/start",i=u(r,n,o),a={client_id:this._clientID};return e.email?(a.email=e.email,a.connection="email",e.authParams&&(a.authParams=e.authParams),e.send&&"link"!==e.send||(a.authParams||(a.authParams={}),a.authParams.redirect_uri=this._callbackURL,a.authParams.response_type=this._shouldRedirect&&!this._callbackOnLocationHash?"code":"token"),e.send&&(a.send=e.send)):(a.phone_number=e.phoneNumber,a.connection="sms"),this._useJSONP?(this._sendClientInfo&&(a.auth0Client=this._getClientInfoString()),g(i+"?"+p.stringify(a),y,function(e,r){return e?t(new Error("0: "+e.toString())):200===r.status?t(null,!0):t(r.err||r.error)})):v({url:b(r,n)?o:i,method:"post",type:"json",headers:this._getClientInfoHeader(),crossOrigin:!b(r,n),data:a}).fail(function(e){try{t(JSON.parse(e.responseText))}catch(r){var n=new Error(e.status+"("+e.statusText+"): "+e.responseText);n.statusCode=e.status,n.error=e.statusText,n.message=e.responseText,t(n)}}).then(function(e){t(null,e)})},c.prototype.requestMagicLink=function(e,t){return this.startPasswordless(e,t)},c.prototype.requestEmailCode=function(e,t){return e.send="code",this.startPasswordless(e,t)},c.prototype.verifyEmailCode=function(e,t){return e.passcode=e.code,delete e.code,this.login(e,t)},c.prototype.requestSMSCode=function(e,t){return this.startPasswordless(e,t)},c.prototype.verifySMSCode=function(e,t){return e.passcode=e.code,delete e.code,this.login(e,t)},c.prototype.getUserCountry=function(e){var t="https:",r=this._domain,n="/user/geoloc/country",o=u(t,r,n);if(this._useJSONP){var i=new Error("The user's country can't be obtained using JSONP");return void setTimeout(function(){e(i)},0)}v({url:b(t,r)?n:o,method:"get",type:"json",headers:this._getClientInfoHeader(),crossOrigin:!b(t,r),success:function(t){e(null,t.country_code)},error:function(t){var r=new Error("There was an error in the request that obtains the user's country");r.cause=t,e(r)}})},c.prototype._prepareResult=function(e){if(e&&"object"==typeof e){var t=e.profile?e.profile:this.decodeJwt(e.id_token);return{accessToken:e.access_token,idToken:e.id_token,idTokenPayload:t,refreshToken:e.refresh_token,state:e.state}}},e.exports=c}).call(t,function(){return this}())},function(e,t,r){function n(e){return i.btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function o(e){return e+=Array(5-e.length%4).join("="),e=e.replace(/\-/g,"+").replace(/\_/g,"/"),i.atob(e)}var i=r(11);e.exports={encode:n,decode:o}},function(e,t,r){!function(){var e=t,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=function(){try{document.createElement("$")}catch(e){return e}}();e.btoa||(e.btoa=function(e){for(var t,o,i=0,a=r,u="";e.charAt(0|i)||(a="=",i%1);u+=a.charAt(63&t>>8-i%1*8)){if(o=e.charCodeAt(i+=.75),o>255)throw n;t=t<<8|o}return u}),e.atob||(e.atob=function(e){if(e=e.replace(/=+$/,""),e.length%4==1)throw n;for(var t,o,i=0,a=0,u="";o=e.charAt(a++);~o&&(t=i%4?64*t+o:o,i++%4)?u+=String.fromCharCode(255&t>>(-2*i&6)):0)o=r.indexOf(o);return u})}()},function(e,t){function r(e,t){if(!e[t])throw new Error(t+" is required.")}e.exports=r},function(e,t){function r(e){return"[object Array]"===n.call(e)}var n=Object.prototype.toString;e.exports=null!=Array.isArray?Array.isArray:r},function(e,t){function r(e,t,r){return e.indexOf(t,r)}function n(e,t,r){var n;if(null==e)throw new TypeError('"array" is null or not defined');var o=Object(e),i=o.length>>>0;if(0===i)return-1;var a=+r||0;if(Math.abs(a)===1/0&&(a=0),a>=i)return-1;for(n=Math.max(a>=0?a:i-Math.abs(a),0);i>n;){if(n in o&&o[n]===t)return n;n++}return-1}e.exports=Array.prototype.indexOf?r:n},function(e,t){function r(e,t){if(0==e[t].length)return e[t]={};var r={};for(var n in e[t])_.call(e[t],n)&&(r[n]=e[t][n]);return e[t]=r,r}function n(e,t,o,i){var a=e.shift();if(!_.call(Object.prototype,o))if(a){var u=t[o]=t[o]||[];"]"==a?m(u)?""!=i&&u.push(i):"object"==typeof u?u[g(u).length]=i:u=t[o]=[t[o],i]:~v(a,"]")?(a=a.substr(0,a.length-1),!w.test(a)&&m(u)&&(u=r(t,o)),n(e,u,a,i)):(!w.test(a)&&m(u)&&(u=r(t,o)),n(e,u,a,i))}else m(t[o])?t[o].push(i):"object"==typeof t[o]?t[o]=i:"undefined"==typeof t[o]?t[o]=i:t[o]=[t[o],i]}function o(e,t,r){if(~v(t,"]")){var o=t.split("[");o.length;n(o,e,"base",r)}else{if(!w.test(t)&&m(e.base)){var i={};for(var a in e.base)i[a]=e.base[a];e.base=i}f(e.base,t,r)}return e}function i(e){if("object"!=typeof e)return e;if(m(e)){var t=[];for(var r in e)_.call(e,r)&&t.push(e[r]);return t}for(var n in e)e[n]=i(e[n]);return e}function a(e){var t={base:{}};return y(g(e),function(r){o(t,r,e[r])}),i(t.base)}function u(e,t){var r=b(String(e).split(t.separator),function(e,t){var r=v(t,"="),n=d(t),i=t.substr(0,n||r),a=t.substr(n||r,t.length),a=a.substr(v(a,"=")+1,a.length);return""==i&&(i=t,a=""),""==i?e:o(e,p(i),p(a))},{base:{}}).base;return i(r)}function c(e,t){if(!t)throw new TypeError("stringify expects an object");return t+"="+encodeURIComponent(e)}function s(e,t){var r=[];if(!t)throw new TypeError("stringify expects an object");for(var n=0;n<e.length;n++)r.push(A(e[n],t+"["+n+"]"));return r.join("&")}function l(e,t){for(var r,n=[],o=g(e),i=0,a=o.length;a>i;++i)r=o[i],""!=r&&(null==e[r]?n.push(encodeURIComponent(r)+"="):n.push(A(e[r],t?t+"["+encodeURIComponent(r)+"]":encodeURIComponent(r))));return n.join("&")}function f(e,t,r){var n=e[t];_.call(Object.prototype,t)||(void 0===n?e[t]=r:m(n)?n.push(r):e[t]=[n,r])}function d(e){for(var t,r,n=e.length,o=0;n>o;++o)if(r=e[o],"]"==r&&(t=!1),"["==r&&(t=!0),"="==r&&!t)return o}function p(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}}var h=Object.prototype.toString,_=Object.prototype.hasOwnProperty,v="function"==typeof Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){"string"==typeof e&&"undefined"==typeof"a"[0]&&(e=e.split(""));for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1},m=Array.isArray||function(e){return"[object Array]"==h.call(e)},g=Object.keys||function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t},y="function"==typeof Array.prototype.forEach?function(e,t){return e.forEach(t)}:function(e,t){for(var r=0;r<e.length;r++)t(e[r])},b=function(e,t,r){if("function"==typeof e.reduce)return e.reduce(t,r);for(var n=r,o=0;o<e.length;o++)n=t(n,e[o]);return n},w=/^[0-9]+$/;t.parse=function(e,t){return null==e||""==e?{}:(t=t||{},t.separator=t.separator||"&","object"==typeof e?a(e):u(e,t))};var A=t.stringify=function(e,t){return m(e)?s(e,t):"[object Object]"==h.call(e)?l(e,t):"string"==typeof e?c(e,t):t+"="+encodeURIComponent(String(e))}},function(e,t,r){function n(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];if(i(r))for(var n=o(r),a=0;a<n.length;a++){var u=n[a];e[u]=r[u]}}return e}var o=r(17),i=r(21);e.exports=n},function(e,t,r){e.exports=Object.keys||r(18)},function(e,t,r){!function(){"use strict";var t,n=Object.prototype.hasOwnProperty,o=Object.prototype.toString,i=r(19),a=r(20),u=!{toString:null}.propertyIsEnumerable("toString"),c=function(){}.propertyIsEnumerable("prototype"),s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];t=function(e){var t=null!==e&&"object"==typeof e,r="[object Function]"===o.call(e),l=a(e),f=[];if(!t&&!r&&!l)throw new TypeError("Object.keys called on a non-object");if(l)i(e,function(e){f.push(e)});else{var d,p=c&&r;for(d in e)p&&"prototype"===d||!n.call(e,d)||f.push(d)}if(u){var h=e.constructor,_=h&&h.prototype===e;i(s,function(t){_&&"constructor"===t||!n.call(e,t)||f.push(t)})}return f},e.exports=t}()},function(e,t){var r=Object.prototype.hasOwnProperty,n=Object.prototype.toString,o=function(e){var t="function"==typeof e&&!(e instanceof RegExp)||"[object Function]"===n.call(e);return t||"undefined"==typeof window||(t=e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt),t};e.exports=function(e,t){if(!o(t))throw new TypeError("iterator must be a function");var n,i,a="string"==typeof e,u=e.length,c=arguments.length>2?arguments[2]:null;if(u===+u)for(n=0;u>n;n++)null===c?t(a?e.charAt(n):e[n],n,e):t.call(c,a?e.charAt(n):e[n],n,e);else for(i in e)r.call(e,i)&&(null===c?t(e[i],i,e):t.call(c,e[i],i,e))}},function(e,t){var r=Object.prototype.toString;e.exports=function n(e){var t=r.call(e),n="[object Arguments]"===t;return n||(n="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===r.call(e.callee)),n}},function(e,t){function r(e){return null!==e&&("object"==typeof e||"function"==typeof e)}e.exports=r},function(e,t){function r(e){return e.replace(/^\s*|\s*$/g,"")}t=e.exports=r,t.left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;/*!
	  * Reqwest! A general purpose XHR connection manager
	  * license MIT (c) Dustin Diaz 2014
	  * https://github.com/ded/reqwest
	  */
!function(e,t,r){"undefined"!=typeof module&&module.exports?module.exports=r():(__WEBPACK_AMD_DEFINE_FACTORY__=r,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}("reqwest",this,function(){function succeed(e){var t=protocolRe.exec(e.url);return t=t&&t[1]||window.location.protocol,httpsRe.test(t)?twoHundo.test(e.request.status):!!e.request.response}function handleReadyState(e,t,r){return function(){return e._aborted?r(e.request):e._timedOut?r(e.request,"Request is aborted: timeout"):void(e.request&&4==e.request[readyState]&&(e.request.onreadystatechange=noop,succeed(e)?t(e.request):r(e.request)))}}function setHeaders(e,t){var r,n=t.headers||{};n.Accept=n.Accept||defaultHeaders.accept[t.type]||defaultHeaders.accept["*"];var o="function"==typeof FormData&&t.data instanceof FormData;t.crossOrigin||n[requestedWith]||(n[requestedWith]=defaultHeaders.requestedWith),n[contentType]||o||(n[contentType]=t.contentType||defaultHeaders.contentType);for(r in n)n.hasOwnProperty(r)&&"setRequestHeader"in e&&e.setRequestHeader(r,n[r])}function setCredentials(e,t){"undefined"!=typeof t.withCredentials&&"undefined"!=typeof e.withCredentials&&(e.withCredentials=!!t.withCredentials)}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,r,n){var o=uniqid++,i=e.jsonpCallback||"callback",a=e.jsonpCallbackName||reqwest.getcallbackPrefix(o),u=new RegExp("((^|\\?|&)"+i+")=([^&]+)"),c=n.match(u),s=doc.createElement("script"),l=0,f=-1!==navigator.userAgent.indexOf("MSIE 10.0");return c?"?"===c[3]?n=n.replace(u,"$1="+a):a=c[3]:n=urlappend(n,i+"="+a),win[a]=generalCallback,s.type="text/javascript",s.src=n,s.async=!0,"undefined"==typeof s.onreadystatechange||f||(s.htmlFor=s.id="_reqwest_"+o),s.onload=s.onreadystatechange=function(){return s[readyState]&&"complete"!==s[readyState]&&"loaded"!==s[readyState]||l?!1:(s.onload=s.onreadystatechange=null,s.onclick&&s.onclick(),t(lastValue),lastValue=void 0,head.removeChild(s),void(l=1))},head.appendChild(s),{abort:function(){s.onload=s.onreadystatechange=null,r({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(s),l=1}}}function getRequest(e,t){var r,n=this.o,o=(n.method||"GET").toUpperCase(),i="string"==typeof n?n:n.url,a=n.processData!==!1&&n.data&&"string"!=typeof n.data?reqwest.toQueryString(n.data):n.data||null,u=!1;return"jsonp"!=n.type&&"GET"!=o||!a||(i=urlappend(i,a),a=null),"jsonp"==n.type?handleJsonp(n,e,t,i):(r=n.xhr&&n.xhr(n)||xhr(n),r.open(o,i,n.async!==!1),setHeaders(r,n),setCredentials(r,n),win[xDomainRequest]&&r instanceof win[xDomainRequest]?(r.onload=e,r.onerror=t,r.onprogress=function(){},u=!0):r.onreadystatechange=handleReadyState(this,e,t),n.before&&n.before(r),u?setTimeout(function(){r.send(a)},200):r.send(a),r)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){return e.match("json")?"json":e.match("javascript")?"js":e.match("text")?"html":e.match("xml")?"xml":void 0}function init(o,fn){function complete(e){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(e)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(e,t,r){for(e=self.request,self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=r,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(e,t,r);complete(e)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){timedOut()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,"\r\n"):""}function serial(e,t){var r,n,o,i,a=e.name,u=e.tagName.toLowerCase(),c=function(e){e&&!e.disabled&&t(a,normalize(e.attributes.value&&e.attributes.value.specified?e.value:e.text))};if(!e.disabled&&a)switch(u){case"input":/reset|button|image|file/i.test(e.type)||(r=/checkbox/i.test(e.type),n=/radio/i.test(e.type),o=e.value,(!(r||n)||e.checked)&&t(a,normalize(r&&""===o?"on":o)));break;case"textarea":t(a,normalize(e.value));break;case"select":if("select-one"===e.type.toLowerCase())c(e.selectedIndex>=0?e.options[e.selectedIndex]:null);else for(i=0;e.length&&i<e.length;i++)e.options[i].selected&&c(e.options[i])}}function eachFormElement(){var e,t,r=this,n=function(e,t){var n,o,i;for(n=0;n<t.length;n++)for(i=e[byTag](t[n]),o=0;o<i.length;o++)serial(i[o],r)};for(t=0;t<arguments.length;t++)e=arguments[t],/input|select|textarea/i.test(e.tagName)&&serial(e,r),n(e,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply(function(t,r){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(r)):e[t]=r},arguments),e}function buildParams(e,t,r,n){var o,i,a,u=/\[\]$/;if(isArray(t))for(i=0;t&&i<t.length;i++)a=t[i],r||u.test(e)?n(e,a):buildParams(e+"["+("object"==typeof a?i:"")+"]",a,r,n);else if(t&&"[object Object]"===t.toString())for(o in t)buildParams(e+"["+o+"]",t[o],r,n);else n(e,t)}var win=window,doc=document,httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(e.crossOrigin===!0){var t=win[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials"in t)return t;if(win[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return win[xmlHttpRequest]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(e){return e}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){return e=e||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this},"catch":function(e){return this.fail(e)}},reqwest.serializeArray=function(){var e=[];return eachFormElement.apply(function(t,r){e.push({name:t,value:r})},arguments),e},reqwest.serialize=function(){if(0===arguments.length)return"";var e,t,r=Array.prototype.slice.call(arguments,0);return e=r.pop(),e&&e.nodeType&&r.push(e)&&(e=null),e&&(e=e.type),t="map"==e?serializeHash:"array"==e?reqwest.serializeArray:serializeQueryString,t.apply(null,r)},reqwest.toQueryString=function(e,t){var r,n,o=t||!1,i=[],a=encodeURIComponent,u=function(e,t){t="function"==typeof t?t():null==t?"":t,i[i.length]=a(e)+"="+a(t)};if(isArray(e))for(n=0;e&&n<e.length;n++)u(e[n].name,e[n].value);else for(r in e)e.hasOwnProperty(r)&&buildParams(r,e[r],o,u);return i.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(e,t){return e&&(e.type&&(e.method=e.type)&&delete e.type,e.dataType&&(e.type=e.dataType),e.jsonpCallback&&(e.jsonpCallbackName=e.jsonpCallback)&&delete e.jsonpCallback,e.jsonp&&(e.jsonpCallback=e.jsonp)),new Reqwest(e,t)},reqwest.ajaxSetup=function(e){e=e||{};for(var t in e)globalSetupOptions[t]=e[t]},reqwest})},function(e,t){var r=function(){function e(e,t,r){e.attachEvent?e.attachEvent("on"+t,r):e.addEventListener&&e.addEventListener(t,r,!1)}function t(e,t,r){e.detachEvent?e.detachEvent("on"+t,r):e.removeEventListener&&e.removeEventListener(t,r,!1)}function r(){var e=-1,t=navigator.userAgent;if("Microsoft Internet Explorer"===navigator.appName){var r=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=r.exec(t)&&(e=parseFloat(RegExp.$1))}else if(t.indexOf("Trident")>-1){var r=new RegExp("rv:([0-9]{2,2}[.0-9]{0,})");null!==r.exec(t)&&(e=parseFloat(RegExp.$1))}return e>=8}function n(){try{var e=navigator.userAgent;return-1!=e.indexOf("Fennec/")||-1!=e.indexOf("Firefox/")&&-1!=e.indexOf("Android")}catch(t){}return!1}function o(){return window.JSON&&window.JSON.stringify&&window.JSON.parse&&window.postMessage}function i(e){/^https?:\/\//.test(e)||(e=window.location.href);var t=/^(https?:\/\/[\-_a-zA-Z\.0-9:]+)/.exec(e);return t?t[1]:e}function a(){for(var e=(window.location,window.opener.frames),t=e.length-1;t>=0;t--)try{if(e[t].location.protocol===window.location.protocol&&e[t].location.host===window.location.host&&e[t].name===u)return e[t]}catch(r){}}var u="__winchan_relay_frame",c="die",s=r();return o()?{open:function(r,o){function a(){if(d&&document.body.removeChild(d),d=void 0,v&&(v=clearInterval(v)),t(window,"message",l),t(window,"unload",a),_)try{_.close()}catch(e){h.postMessage(c,p)}_=h=void 0}function l(e){if(e.origin===p)try{var t=JSON.parse(e.data);"ready"===t.a?h.postMessage(m,p):"error"===t.a?(a(),o&&(o(t.d),o=null)):"response"===t.a&&(a(),o&&(o(null,t.d),o=null))}catch(r){}}if(!o)throw"missing required callback argument";var f;r.url||(f="missing required 'url' parameter"),r.relay_url||(f="missing required 'relay_url' parameter"),f&&setTimeout(function(){o(f)},0),r.window_name||(r.window_name=null),r.window_features&&!n()||(r.window_features=void 0);var d,p=i(r.url);if(p!==i(r.relay_url))return setTimeout(function(){o("invalid arguments: origin of url and relay_url must match")},0);var h;s&&(d=document.createElement("iframe"),d.setAttribute("src",r.relay_url),d.style.display="none",d.setAttribute("name",u),document.body.appendChild(d),h=d.contentWindow);var _=r.popup||window.open(r.url,r.window_name,r.window_features);r.popup&&(_.location.href=r.url),h||(h=_);var v=setInterval(function(){_&&_.closed&&(a(),o&&(o("User closed the popup window"),o=null))},500),m=JSON.stringify({a:"request",d:r.params});return e(window,"unload",a),e(window,"message",l),{close:a,focus:function(){if(_)try{_.focus()}catch(e){}}}},onOpen:function(r){function n(e){e=JSON.stringify(e),s?l.doPost(e,u):l.postMessage(e,u)}function o(e){var i;try{i=JSON.parse(e.data)}catch(a){}i&&"request"===i.a&&(t(window,"message",o),u=e.origin,r&&setTimeout(function(){r(u,i.d,function(e){r=void 0,n({a:"response",d:e})})},0))}function i(e){if(e.data===c)try{window.close()}catch(t){}}var u="*",l=s?a():window.opener;if(!l)throw"can't find relay frame";e(s?l:window,"message",o),e(s?l:window,"message",i);try{n({a:"ready"})}catch(f){e(l,"load",function(e){n({a:"ready"})})}var d=function(){try{t(s?l:window,"message",i)}catch(e){}r&&n({a:"error",d:"client closed window"}),r=void 0;try{window.close()}catch(o){}};return e(window,"unload",d),{detach:function(){t(window,"unload",d)}}}}:{open:function(e,t,r,n){setTimeout(function(){n("unsupported browser")},0)},onOpen:function(e){setTimeout(function(){e("unsupported browser")},0)}}}();"undefined"!=typeof e&&e.exports&&(e.exports=r)},function(e,t,r){function n(){}function o(e,t,r){function o(){u.parentNode.removeChild(u),window[h]=n}"function"==typeof t&&(r=t,t={}),t||(t={});var u,c,s=t.prefix||"__jp",l=t.param||"callback",f=null!=t.timeout?t.timeout:6e4,d=encodeURIComponent,p=document.getElementsByTagName("script")[0]||document.head,h=s+a++;f&&(c=setTimeout(function(){o(),r&&r(new Error("Timeout"))},f)),window[h]=function(e){i("jsonp got",e),c&&clearTimeout(c),o(),r&&r(null,e)},e+=(~e.indexOf("?")?"&":"?")+l+"="+d(h),e=e.replace("?&","?"),i('jsonp req "%s"',e),u=document.createElement("script"),u.src=e,p.parentNode.insertBefore(u,p)}var i=r(26)("jsonp");e.exports=o;var a=0},function(e,t,r){function n(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return e;var n="color: "+this.color;e=[e[0],n,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,n),e}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(r){}}function u(){var e;try{e=t.storage.debug}catch(r){}return e}function c(){try{return window.localStorage}catch(e){}}t=e.exports=r(27),t.log=i,t.formatArgs=o,t.save=a,t.load=u,t.useColors=n,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){return JSON.stringify(e)},t.enable(u())},function(e,t,r){function n(){return t.colors[l++%t.colors.length]}function o(e){function r(){}function o(){var e=o,r=+new Date,i=r-(s||r);e.diff=i,e.prev=s,e.curr=r,s=r,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=n());var a=Array.prototype.slice.call(arguments);a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var u=0;a[0]=a[0].replace(/%([a-z%])/g,function(r,n){if("%%"===r)return r;u++;var o=t.formatters[n];if("function"==typeof o){var i=a[u];r=o.call(e,i),a.splice(u,1),u--}return r}),"function"==typeof t.formatArgs&&(a=t.formatArgs.apply(e,a));var c=o.log||t.log||console.log.bind(console);c.apply(e,a)}r.enabled=!1,o.enabled=!0;var i=t.enabled(e)?o:r;return i.namespace=e,i}function i(e){t.save(e);for(var r=(e||"").split(/[\s,]+/),n=r.length,o=0;n>o;o++)r[o]&&(e=r[o].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function a(){t.enable("")}function u(e){var r,n;for(r=0,n=t.skips.length;n>r;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;n>r;r++)if(t.names[r].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=o,t.coerce=c,t.disable=a,t.enable=i,t.enabled=u,t.humanize=r(28),t.names=[],t.skips=[],t.formatters={};var s,l=0},function(e,t){function r(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*l;case"days":case"day":case"d":return r*s;case"hours":case"hour":case"hrs":case"hr":case"h":return r*c;case"minutes":case"minute":case"mins":case"min":case"m":return r*u;case"seconds":case"second":case"secs":case"sec":case"s":return r*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r}}}}function n(e){return e>=s?Math.round(e/s)+"d":e>=c?Math.round(e/c)+"h":e>=u?Math.round(e/u)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function o(e){return i(e,s,"day")||i(e,c,"hour")||i(e,u,"minute")||i(e,a,"second")||e+" ms"}function i(e,t,r){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}var a=1e3,u=60*a,c=60*u,s=24*c,l=365.25*s;e.exports=function(e,t){return t=t||{},"string"==typeof e?r(e):t["long"]?o(e):n(e)}},function(e,t){function r(e,t,r){return r=r||"",n===e&&o===t&&i===r}var n=window.location.protocol,o=window.location.hostname,i=window.location.port;e.exports=r},function(e,t,r){e.exports="undefined"==typeof window.JSON?r(31).parse:window.JSON.parse},function(module,exports){var JSON={};!function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var r,n,o,i,a,u=gap,c=t[e];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(e)),"function"==typeof rep&&(c=rep.call(t,e,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(c)){for(i=c.length,r=0;i>r;r+=1)a[r]=str(r,c)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+u+"]":"["+a.join(",")+"]",gap=u,o}if(rep&&"object"==typeof rep)for(i=rep.length,r=0;i>r;r+=1)"string"==typeof rep[r]&&(n=rep[r],o=str(n,c),o&&a.push(quote(n)+(gap?": ":":")+o));else for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(o=str(n,c),o&&a.push(quote(n)+(gap?": ":":")+o));return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+u+"}":"{"+a.join(",")+"}",gap=u,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,r){var n;if(gap="",indent="","number"==typeof r)for(n=0;r>n;n+=1)indent+=" ";else"string"==typeof r&&(indent=r);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var r,n,o=e[t];if(o&&"object"==typeof o)for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n=walk(o,r),void 0!==n?o[r]=n:delete o[r]);return reviver.call(e,t,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),module.exports=JSON},function(e,t,r){function n(e,t){var r;if("string"==typeof t)try{r=o(t)}catch(n){r={message:t}}else r=t||{description:"server error"};r.code||(r.code=r.error),"unauthorized"===r.code&&(e=401);var i=r.description||r.message||r.error;"PasswordStrengthError"===r.name&&(i="Password is not strong enough.");var a=Error.call(this,i);return a.status=e,a.name=r.code,a.code=r.code,a.details=r,0===e&&(a.code&&"offline"===a.code||(a.code="Unknown",a.message="Unknown error.")),a}var o=r(30);e.exports=n,Object&&Object.create&&(n.prototype=Object.create(Error.prototype,{constructor:{value:n}}))},function(e,t){function r(){var e=window.XMLHttpRequest?new XMLHttpRequest:null;return!(e&&"withCredentials"in e)}e.exports=r},function(e,t){e.exports={str:"7.0.2"}},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}var o=n(r(36)),i=n(r(49)),a=n(r(56)),u=n(r(58)),c=n(r(60)),s=n(r(64));o.plugin(i).plugin(a).plugin(u).plugin(c).plugin(s),e.exports=o},function(e,t,r){(function(t,n){"use strict";function o(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function i(e){return j("return "+e+";",{})}function a(e){return new Function("doc",["var emitted = false;","var emit = function (a, b) {","  emitted = true;","};","var view = "+e+";","view(doc);","if (emitted) {","  return true;","}"].join("\n"))}function u(e,t){try{e.emit("change",t)}catch(r){N.guardedConsole("error",'Error in .on("change", function):',r)}}function c(e,t,r){function n(){o.cancel()}q.EventEmitter.call(this);var o=this;this.db=e,t=t?N.clone(t):{};var i=t.complete=N.once(function(t,r){t?N.listenerCount(o,"error")>0&&o.emit("error",t):o.emit("complete",r),o.removeAllListeners(),e.removeListener("destroyed",n)});r&&(o.on("complete",function(e){r(null,e)}),o.on("error",r)),e.once("destroyed",n),t.onChange=function(e){t.isCancelled||(u(o,e),o.startSeq&&o.startSeq<=e.seq&&(o.startSeq=!1))};var a=new O(function(e,r){t.complete=function(t,n){t?r(t):e(n)}});o.once("cancel",function(){e.removeListener("destroyed",n),t.complete(null,{status:"cancelled"})}),this.then=a.then.bind(a),this["catch"]=a["catch"].bind(a),this.then(function(e){i(null,e)},i),e.taskqueue.isReady?o.doChanges(t):e.taskqueue.addTask(function(){o.isCancelled?o.emit("cancel"):o.doChanges(t)})}function s(e,t,r){var n=[{rev:e._rev}];"all_docs"===r.style&&(n=I.collectLeaves(t.rev_tree).map(function(e){return{rev:e.rev}}));var o={id:t.id,changes:n,doc:e};return I.isDeleted(t,e._rev)&&(o.deleted=!0),r.conflicts&&(o.doc._conflicts=I.collectConflicts(t),o.doc._conflicts.length||delete o.doc._conflicts),o}function l(e,t){return t>e?-1:e>t?1:0}function f(e,t){for(var r=0;r<e.length;r++)if(t(e[r],r)===!0)return e[r]}function d(e){return function(t,r){t||r[0]&&r[0].error?e(t||r[0]):e(null,r.length?r[0]:r)}}function p(e){for(var t=0;t<e.length;t++){var r=e[t];if(r._deleted)delete r._attachments;else if(r._attachments)for(var n=Object.keys(r._attachments),o=0;o<n.length;o++){var i=n[o];r._attachments[i]=N.pick(r._attachments[i],["data","digest","content_type","length","revpos","stub"])}}}function h(e,t){var r=l(e._id,t._id);if(0!==r)return r;var n=e._revisions?e._revisions.start:0,o=t._revisions?t._revisions.start:0;return l(n,o)}function _(e){var t={},r=[];return I.traverseRevTree(e,function(e,n,o,i){var a=n+"-"+o;return e&&(t[a]=0),void 0!==i&&r.push({from:i,to:a}),a}),r.reverse(),r.forEach(function(e){void 0===t[e.from]?t[e.from]=1+t[e.to]:t[e.from]=Math.min(t[e.from],1+t[e.to])}),t}function v(e,t,r){var n="limit"in t?t.keys.slice(t.skip,t.limit+t.skip):t.skip>0?t.keys.slice(t.skip):t.keys;if(t.descending&&n.reverse(),!n.length)return e._allDocs({limit:0},r);var o={offset:t.skip};return O.all(n.map(function(r){var n=E.extend({key:r,deleted:"ok"},t);return["limit","skip","keys"].forEach(function(e){delete n[e]}),new O(function(t,i){e._allDocs(n,function(e,n){return e?i(e):(o.total_rows=n.total_rows,void t(n.rows[0]||{key:r,error:"not_found"}))})})})).then(function(e){return o.rows=e,o})}function m(e){var r=e._compactionQueue[0],n=r.opts,o=r.callback;e.get("_local/compaction")["catch"](function(){return!1}).then(function(r){r&&r.last_seq&&(n.last_seq=r.last_seq),e._compact(n,function(r,n){r?o(r):o(null,n),t.nextTick(function(){e._compactionQueue.shift(),e._compactionQueue.length&&m(e)})})})}function g(e){return"_"===e.charAt(0)?e+"is not a valid attachment name, attachment names cannot start with '_'":!1}function y(){q.EventEmitter.call(this)}function b(){this.isReady=!1,this.failed=!1,this.queue=[]}function w(e){e&&n.debug&&N.guardedConsole("error",e)}function A(e,t){function r(){i.emit("destroyed",o)}function n(){e.removeListener("destroyed",r),e.emit("destroyed",e)}var o=t.originalName,i=e.constructor,a=i._destructionListeners;e.once("destroyed",r),a.has(o)||a.set(o,[]),a.get(o).push(n)}function k(e,t,r){if(!(this instanceof k))return new k(e,t,r);var n=this;if("function"!=typeof t&&"undefined"!=typeof t||(r=t,t={}),e&&"object"==typeof e&&(t=e,e=void 0),"undefined"==typeof r)r=w;else{var o=r;r=function(){return N.guardedConsole("warn","Using a callback for new PouchDB()is deprecated."),o.apply(null,arguments)}}e=e||t.name,t=N.clone(t),delete t.name,this.__opts=t;var i=r;n.auto_compaction=t.auto_compaction,n.prefix=k.prefix,y.call(n),n.taskqueue=new b;var a=new O(function(o,i){r=function(e,t){return e?i(e):(delete t.then,void o(t))},t=N.clone(t);var a,u;return function(){try{if("string"!=typeof e)throw u=new Error("Missing/invalid DB name"),u.code=400,u;var r=(t.prefix||"")+e;if(a=k.parseAdapter(r,t),t.originalName=e,t.name=a.name,t.adapter=t.adapter||a.adapter,n._adapter=t.adapter,x("pouchdb:adapter")("Picked adapter: "+t.adapter),n._db_name=e,!k.adapters[t.adapter])throw u=new Error("Adapter is missing"),u.code=404,u;if(!k.adapters[t.adapter].valid())throw u=new Error("Invalid Adapter"),u.code=404,u}catch(o){n.taskqueue.fail(o)}}(),u?i(u):(n.adapter=t.adapter,n.replicate={},n.replicate.from=function(e,t,r){return n.constructor.replicate(e,n,t,r)},n.replicate.to=function(e,t,r){return n.constructor.replicate(n,e,t,r)},n.sync=function(e,t,r){return n.constructor.sync(n,e,t,r)},n.replicate.sync=n.sync,void k.adapters[t.adapter].call(n,t,function(e){return e?(n.taskqueue.fail(e),void r(e)):(A(n,t),n.emit("created",n),k.emit("created",t.originalName),n.taskqueue.ready(n),void r(null,n))}))});a.then(function(e){i(null,e)},i),n.then=a.then.bind(a),n["catch"]=a["catch"].bind(a)}function S(e){Object.keys(q.EventEmitter.prototype).forEach(function(t){"function"==typeof q.EventEmitter.prototype[t]&&(e[t]=L[t].bind(L))});var t=e._destructionListeners=new R.Map;e.on("destroyed",function(e){t.get(e).forEach(function(e){e()}),t["delete"](e)})}var E=r(37),x=o(r(26)),T=o(r(38)),O=o(r(39)),R=r(42),C=o(r(43)),q=r(44),N=r(45),I=r(47),j=o(r(48)),D=r(46);T(c,q.EventEmitter),c.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},c.prototype.doChanges=function(e){var t=this,r=e.complete;if(e=N.clone(e),"live"in e&&!("continuous"in e)&&(e.continuous=e.live),e.processChange=s,"latest"===e.since&&(e.since="now"),e.since||(e.since=0),"now"===e.since)return void this.db.info().then(function(n){return t.isCancelled?void r(null,{status:"cancelled"}):(e.since=n.update_seq,void t.doChanges(e))},r);if(e.continuous&&"now"!==e.since&&this.db.info().then(function(e){t.startSeq=e.update_seq},function(e){if("idbNull"!==e.id)throw e}),e.view&&!e.filter&&(e.filter="_view"),e.filter&&"string"==typeof e.filter&&("_view"===e.filter?e.view=N.normalizeDdocFunctionName(e.view):e.filter=N.normalizeDdocFunctionName(e.filter),"http"!==this.db.type()&&!e.doc_ids))return this.filterChanges(e);"descending"in e||(e.descending=!1),e.limit=0===e.limit?1:e.limit,e.complete=r;var n=this.db._changes(e);if(n&&"function"==typeof n.cancel){var o=t.cancel;t.cancel=C(function(e){n.cancel(),o.apply(this,e)})}},c.prototype.filterChanges=function(e){var t=this,r=e.complete;if("_view"===e.filter){if(!e.view||"string"!=typeof e.view){var n=D.createError(D.BAD_REQUEST,"`view` filter parameter not found or invalid.");return r(n)}var o=N.parseDdocFunctionName(e.view);this.db.get("_design/"+o[0],function(n,i){if(t.isCancelled)return r(null,{status:"cancelled"});if(n)return r(D.generateErrorFromResponse(n));var u=i&&i.views&&i.views[o[1]]&&i.views[o[1]].map;return u?(e.filter=a(u),void t.doChanges(e)):r(D.createError(D.MISSING_DOC,i.views?"missing json key: "+o[1]:"missing json key: views"))})}else{var u=N.parseDdocFunctionName(e.filter);if(!u)return t.doChanges(e);this.db.get("_design/"+u[0],function(n,o){if(t.isCancelled)return r(null,{status:"cancelled"});if(n)return r(D.generateErrorFromResponse(n));var a=o&&o.filters&&o.filters[u[1]];return a?(e.filter=i(a),void t.doChanges(e)):r(D.createError(D.MISSING_DOC,o&&o.filters?"missing json key: "+u[1]:"missing json key: filters"))})}},T(y,q.EventEmitter),y.prototype.post=N.adapterFun("post",function(e,t,r){return"function"==typeof t&&(r=t,t={}),"object"!=typeof e||Array.isArray(e)?r(D.createError(D.NOT_AN_OBJECT)):void this.bulkDocs({docs:[e]},t,d(r))}),y.prototype.put=N.adapterFun("put",C(function(e){function t(){a||(N.guardedConsole("warn","db.put(doc, id, rev) has been deprecated and will be removed in a future release, please use db.put({_id: id, _rev: rev}) instead"),a=!0)}var r,n,o,i,a=!1,u=e.shift(),c="_id"in u;if("object"!=typeof u||Array.isArray(u))return(i=e.pop())(D.createError(D.NOT_AN_OBJECT));for(;;)if(r=e.shift(),n=typeof r,"string"!==n||c?"string"!==n||!c||"_rev"in u?"object"===n?o=r:"function"===n&&(i=r):(t(),u._rev=r):(t(),u._id=r,c=!0),!e.length)break;return o=o||{},N.invalidIdError(u._id),I.isLocalId(u._id)&&"function"==typeof this._putLocal?u._deleted?this._removeLocal(u,i):this._putLocal(u,i):void this.bulkDocs({docs:[u]},o,d(i))})),y.prototype.putAttachment=N.adapterFun("putAttachment",function(e,t,r,n,o){function i(e){var r="_rev"in e?parseInt(e._rev,10):0;return e._attachments=e._attachments||{},e._attachments[t]={content_type:o,data:n,revpos:++r},a.put(e)}var a=this;return"function"==typeof o&&(o=n,n=r,r=null),"undefined"==typeof o&&(o=n,n=r,r=null),a.get(e).then(function(e){if(e._rev!==r)throw D.createError(D.REV_CONFLICT);return i(e)},function(t){if(t.reason===D.MISSING_DOC.message)return i({_id:e});throw t})}),y.prototype.removeAttachment=N.adapterFun("removeAttachment",function(e,t,r,n){var o=this;o.get(e,function(e,i){return e?void n(e):i._rev!==r?void n(D.createError(D.REV_CONFLICT)):i._attachments?(delete i._attachments[t],0===Object.keys(i._attachments).length&&delete i._attachments,void o.put(i,n)):n()})}),y.prototype.remove=N.adapterFun("remove",function(e,t,r,n){var o;"string"==typeof t?(o={_id:e,_rev:t},"function"==typeof r&&(n=r,r={})):(o=e,"function"==typeof t?(n=t,r={}):(n=r,r=t)),r=r||{},r.was_delete=!0;var i={_id:o._id,_rev:o._rev||r.rev};return i._deleted=!0,I.isLocalId(i._id)&&"function"==typeof this._removeLocal?this._removeLocal(o,n):void this.bulkDocs({docs:[i]},r,d(n))}),y.prototype.revsDiff=N.adapterFun("revsDiff",function(e,t,r){function n(e,t){u.has(e)||u.set(e,{missing:[]}),u.get(e).missing.push(t)}function o(t,r){var o=e[t].slice(0);I.traverseRevTree(r,function(e,r,i,a,u){var c=r+"-"+i,s=o.indexOf(c);-1!==s&&(o.splice(s,1),"available"!==u.status&&n(t,c))}),o.forEach(function(e){n(t,e)})}"function"==typeof t&&(r=t,t={});var i=Object.keys(e);if(!i.length)return r(null,{});
var a=0,u=new R.Map;i.map(function(t){this._getRevisionTree(t,function(n,c){if(n&&404===n.status&&"missing"===n.message)u.set(t,{missing:e[t]});else{if(n)return r(n);o(t,c)}if(++a===i.length){var s={};return u.forEach(function(e,t){s[t]=e}),r(null,s)}})},this)}),y.prototype.bulkGet=N.adapterFun("bulkGet",function(e,t){N.bulkGetShim(this,e,t)}),y.prototype.compactDocument=N.adapterFun("compactDocument",function(e,t,r){var n=this;this._getRevisionTree(e,function(o,i){if(o)return r(o);var a=_(i),u=[],c=[];Object.keys(a).forEach(function(e){a[e]>t&&u.push(e)}),I.traverseRevTree(i,function(e,t,r,n,o){var i=t+"-"+r;"available"===o.status&&-1!==u.indexOf(i)&&c.push(i)}),n._doCompaction(e,c,r)})}),y.prototype.compact=N.adapterFun("compact",function(e,t){"function"==typeof e&&(t=e,e={});var r=this;e=e||{},r._compactionQueue=r._compactionQueue||[],r._compactionQueue.push({opts:e,callback:t}),1===r._compactionQueue.length&&m(r)}),y.prototype._compact=function(e,t){function r(e){a.push(o.compactDocument(e.id,0))}function n(e){var r=e.last_seq;O.all(a).then(function(){return N.upsert(o,"_local/compaction",function(e){return!e.last_seq||e.last_seq<r?(e.last_seq=r,e):!1})}).then(function(){t(null,{ok:!0})})["catch"](t)}var o=this,i={return_docs:!1,last_seq:e.last_seq||0},a=[];o.changes(i).on("change",r).on("complete",n).on("error",t)},y.prototype.get=N.adapterFun("get",function(e,t,r){function n(){var n=[],a=o.length;return a?void o.forEach(function(o){i.get(e,{rev:o,revs:t.revs,attachments:t.attachments},function(e,t){e?n.push({missing:o}):n.push({ok:t}),a--,a||r(null,n)})}):r(null,n)}if("function"==typeof t&&(r=t,t={}),"string"!=typeof e)return r(D.createError(D.INVALID_ID));if(I.isLocalId(e)&&"function"==typeof this._getLocal)return this._getLocal(e,r);var o=[],i=this;if(!t.open_revs)return this._get(e,t,function(e,n){if(e)return r(e);var o=n.doc,a=n.metadata,u=n.ctx;if(t.conflicts){var c=I.collectConflicts(a);c.length&&(o._conflicts=c)}if(I.isDeleted(a,o._rev)&&(o._deleted=!0),t.revs||t.revs_info){var s=I.rootToLeaf(a.rev_tree),l=f(s,function(e){return-1!==e.ids.map(function(e){return e.id}).indexOf(o._rev.split("-")[1])}),d=l.ids.map(function(e){return e.id}).indexOf(o._rev.split("-")[1])+1,p=l.ids.length-d;if(l.ids.splice(d,p),l.ids.reverse(),t.revs&&(o._revisions={start:l.pos+l.ids.length-1,ids:l.ids.map(function(e){return e.id})}),t.revs_info){var h=l.pos+l.ids.length;o._revs_info=l.ids.map(function(e){return h--,{rev:h+"-"+e.id,status:e.opts.status}})}}if(t.attachments&&o._attachments){var _=o._attachments,v=Object.keys(_).length;if(0===v)return r(null,o);Object.keys(_).forEach(function(e){this._getAttachment(o._id,e,_[e],{rev:o._rev,binary:t.binary,ctx:u},function(t,n){var i=o._attachments[e];i.data=n,delete i.stub,delete i.length,--v||r(null,o)})},i)}else{if(o._attachments)for(var m in o._attachments)o._attachments.hasOwnProperty(m)&&(o._attachments[m].stub=!0);r(null,o)}});if("all"===t.open_revs)this._getRevisionTree(e,function(e,t){return e?r(e):(o=I.collectLeaves(t).map(function(e){return e.rev}),void n())});else{if(!Array.isArray(t.open_revs))return r(D.createError(D.UNKNOWN_ERROR,"function_clause"));o=t.open_revs;for(var a=0;a<o.length;a++){var u=o[a];if("string"!=typeof u||!/^\d+-/.test(u))return r(D.createError(D.INVALID_REV))}n()}}),y.prototype.getAttachment=N.adapterFun("getAttachment",function(e,t,r,n){var o=this;r instanceof Function&&(n=r,r={}),this._get(e,r,function(i,a){return i?n(i):a.doc._attachments&&a.doc._attachments[t]?(r.ctx=a.ctx,r.binary=!0,o._getAttachment(e,t,a.doc._attachments[t],r,n),void 0):n(D.createError(D.MISSING_DOC))})}),y.prototype.allDocs=N.adapterFun("allDocs",function(e,t){if("function"==typeof e&&(t=e,e={}),e.skip="undefined"!=typeof e.skip?e.skip:0,e.start_key&&(e.startkey=e.start_key),e.end_key&&(e.endkey=e.end_key),"keys"in e){if(!Array.isArray(e.keys))return t(new TypeError("options.keys must be an array"));var r=["startkey","endkey","key"].filter(function(t){return t in e})[0];if(r)return void t(D.createError(D.QUERY_PARSE_ERROR,"Query parameter `"+r+"` is not compatible with multi-get"));if("http"!==this.type())return v(this,e,t)}return this._allDocs(e,t)}),y.prototype.changes=function(e,t){return"function"==typeof e&&(t=e,e={}),new c(this,e,t)},y.prototype.close=N.adapterFun("close",function(e){return this._closed=!0,this._close(e)}),y.prototype.info=N.adapterFun("info",function(e){var t=this;this._info(function(r,n){return r?e(r):(n.db_name=n.db_name||t._db_name,n.auto_compaction=!(!t.auto_compaction||"http"===t.type()),n.adapter=t.type(),void e(null,n))})}),y.prototype.id=N.adapterFun("id",function(e){return this._id(e)}),y.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},y.prototype.bulkDocs=N.adapterFun("bulkDocs",function(e,t,r){if("function"==typeof t&&(r=t,t={}),t=t||{},Array.isArray(e)&&(e={docs:e}),!e||!e.docs||!Array.isArray(e.docs))return r(D.createError(D.MISSING_BULK_DOCS));for(var n=0;n<e.docs.length;++n)if("object"!=typeof e.docs[n]||Array.isArray(e.docs[n]))return r(D.createError(D.NOT_AN_OBJECT));var o;return e.docs.forEach(function(e){e._attachments&&Object.keys(e._attachments).forEach(function(e){o=o||g(e)})}),o?r(D.createError(D.BAD_REQUEST,o)):("new_edits"in t||("new_edits"in e?t.new_edits=e.new_edits:t.new_edits=!0),t.new_edits||"http"===this.type()||e.docs.sort(h),p(e.docs),this._bulkDocs(e,t,function(e,n){return e?r(e):(t.new_edits||(n=n.filter(function(e){return e.error})),void r(null,n))}))}),y.prototype.registerDependentDatabase=N.adapterFun("registerDependentDatabase",function(e,t){function r(t){return t.dependentDbs=t.dependentDbs||{},t.dependentDbs[e]?!1:(t.dependentDbs[e]=!0,t)}var n=new this.constructor(e,this.__opts);N.upsert(this,"_local/_pouch_dependentDbs",r).then(function(){t(null,{db:n})})["catch"](t)}),y.prototype.destroy=N.adapterFun("destroy",function(e,t){function r(){n._destroy(e,function(e,r){return e?t(e):(n._destroyed=!0,n.emit("destroyed"),void t(null,r||{ok:!0}))})}"function"==typeof e&&(t=e,e={});var n=this,o="use_prefix"in n?n.use_prefix:!0;return"http"===n.type()?r():void n.get("_local/_pouch_dependentDbs",function(e,i){if(e)return 404!==e.status?t(e):r();var a=i.dependentDbs,u=n.constructor,c=Object.keys(a).map(function(e){var t=o?e.replace(new RegExp("^"+u.prefix),""):e;return new u(t,n.__opts).destroy()});O.all(c).then(r,t)})}),b.prototype.execute=function(){var e;if(this.failed)for(;e=this.queue.shift();)e(this.failed);else for(;e=this.queue.shift();)e()},b.prototype.fail=function(e){this.failed=e,this.execute()},b.prototype.ready=function(e){this.isReady=!0,this.db=e,this.execute()},b.prototype.addTask=function(e){this.queue.push(e),this.failed&&this.execute()},T(k,y),k.debug=x,k.adapters={},k.preferredAdapters=[],k.prefix="_pouch_";var L=new q.EventEmitter;S(k),k.parseAdapter=function(e,t){var r,n,o=e.match(/([a-z\-]*):\/\/(.*)/);if(o){if(e=/http(s?)/.test(o[1])?o[1]+"://"+o[2]:o[2],r=o[1],!k.adapters[r].valid())throw"Invalid adapter";return{name:e,adapter:o[1]}}var i="idb"in k.adapters&&"websql"in k.adapters&&N.hasLocalStorage()&&localStorage["_pouch__websqldb_"+k.prefix+e];if(t.adapter)n=t.adapter;else if("undefined"!=typeof t&&t.db)n="leveldb";else for(var a=0;a<k.preferredAdapters.length;++a)if(n=k.preferredAdapters[a],n in k.adapters){if(i&&"idb"===n){N.guardedConsole("log",'PouchDB is downgrading "'+e+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');continue}break}r=k.adapters[n];var u=r&&"use_prefix"in r?r.use_prefix:!0;return{name:u?k.prefix+e:e,adapter:n}},k.adapter=function(e,t,r){t.valid()&&(k.adapters[e]=t,r&&k.preferredAdapters.push(e))},k.plugin=function(e){return"function"==typeof e?e(k):Object.keys(e).forEach(function(t){k.prototype[t]=e[t]}),k},k.defaults=function(e){function t(r,n,o){return this instanceof t?("function"!=typeof n&&"undefined"!=typeof n||(o=n,n={}),r&&"object"==typeof r&&(n=r,r=void 0),n=E.extend({},e,n),void k.call(this,r,n,o)):new t(r,n,o)}return T(t,k),t.preferredAdapters=k.preferredAdapters.slice(),Object.keys(k).forEach(function(e){e in t||(t[e]=k[e])}),t};var B="5.4.1";k.version=B,e.exports=k}).call(t,r(2),function(){return this}())},function(e,t,r){(function(e){e(t)}).call(this,function(e){var t=Array.prototype.slice,r=Array.prototype.forEach,n=function(e){if("object"!=typeof e)throw e+" is not an object";var o=t.call(arguments,1);return r.call(o,function(t){if(t)for(var r in t)"object"==typeof t[r]&&e[r]?n.call(e,e[r],t[r]):e[r]=t[r]}),e};e.extend=n})},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}var o=n(r(40)),i="function"==typeof Promise?Promise:o;e.exports=i},function(e,t,r){(function(t){"use strict";function n(){}function o(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,t.browser||(this.handled=y),e!==n&&c(this,e)}function i(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function a(e,t,r){h(function(){var n;try{n=t(r)}catch(o){return _.reject(e,o)}n===e?_.reject(e,new TypeError("Cannot resolve promise with itself")):_.resolve(e,n)})}function u(e){var t=e&&e.then;return e&&"object"==typeof e&&"function"==typeof t?function(){t.apply(e,arguments)}:void 0}function c(e,t){function r(t){i||(i=!0,_.reject(e,t))}function n(t){i||(i=!0,_.resolve(e,t))}function o(){t(n,r)}var i=!1,a=s(o);"error"===a.status&&r(a.value)}function s(e,t){var r={};try{r.value=e(t),r.status="success"}catch(n){r.status="error",r.value=n}return r}function l(e){return e instanceof this?e:_.resolve(new this(n),e)}function f(e){var t=new this(n);return _.reject(t,e)}function d(e){function t(e,t){function n(e){a[t]=e,++u!==o||i||(i=!0,_.resolve(s,a))}r.resolve(e).then(n,function(e){i||(i=!0,_.reject(s,e))})}var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var o=e.length,i=!1;if(!o)return this.resolve([]);for(var a=new Array(o),u=0,c=-1,s=new this(n);++c<o;)t(e[c],c);return s}function p(e){function t(e){r.resolve(e).then(function(e){i||(i=!0,_.resolve(u,e))},function(e){i||(i=!0,_.reject(u,e))})}var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var o=e.length,i=!1;if(!o)return this.resolve([]);for(var a=-1,u=new this(n);++a<o;)t(e[a]);return u}var h=r(41),_={},v=["REJECTED"],m=["FULFILLED"],g=["PENDING"];if(!t.browser)var y=["UNHANDLED"];e.exports=o,o.prototype["catch"]=function(e){return this.then(null,e)},o.prototype.then=function(e,r){if("function"!=typeof e&&this.state===m||"function"!=typeof r&&this.state===v)return this;var o=new this.constructor(n);if(t.browser||this.handled===y&&(this.handled=null),this.state!==g){var u=this.state===m?e:r;a(o,u,this.outcome)}else this.queue.push(new i(o,e,r));return o},i.prototype.callFulfilled=function(e){_.resolve(this.promise,e)},i.prototype.otherCallFulfilled=function(e){a(this.promise,this.onFulfilled,e)},i.prototype.callRejected=function(e){_.reject(this.promise,e)},i.prototype.otherCallRejected=function(e){a(this.promise,this.onRejected,e)},_.resolve=function(e,t){var r=s(u,t);if("error"===r.status)return _.reject(e,r.value);var n=r.value;if(n)c(e,n);else{e.state=m,e.outcome=t;for(var o=-1,i=e.queue.length;++o<i;)e.queue[o].callFulfilled(t)}return e},_.reject=function(e,r){e.state=v,e.outcome=r,t.browser||e.handled===y&&h(function(){e.handled===y&&t.emit("unhandledRejection",r,e)});for(var n=-1,o=e.queue.length;++n<o;)e.queue[n].callRejected(r);return e},o.resolve=l,o.reject=f,o.all=d,o.race=p}).call(t,r(2))},function(e,t,r){(function(t,r){"use strict";function n(){f=!0;for(var e,t,r=d.length;r;){for(t=d,d=[],e=-1;++e<r;)t[e]();r=d.length}f=!1}function o(e){1!==d.push(e)||f||i()}var i,a=t.MutationObserver||t.WebKitMutationObserver;if(r.browser)if(a){var u=0,c=new a(n),s=t.document.createTextNode("");c.observe(s,{characterData:!0}),i=function(){s.data=u=++u%2}}else if(t.setImmediate||"undefined"==typeof t.MessageChannel)i="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){n(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(n,0)};else{var l=new t.MessageChannel;l.port1.onmessage=n,i=function(){l.port2.postMessage(0)}}else i=function(){r.nextTick(n)};var f,d=[];e.exports=o}).call(t,function(){return this}(),r(2))},function(e,t){"use strict";function r(){this.store={}}function n(e){if(this.store=new r,e&&Array.isArray(e))for(var t=0,n=e.length;n>t;t++)this.add(e[t])}t.Map=r,t.Set=n,r.prototype.mangle=function(e){if("string"!=typeof e)throw new TypeError("key must be a string but Got "+e);return"$"+e},r.prototype.unmangle=function(e){return e.substring(1)},r.prototype.get=function(e){var t=this.mangle(e);return t in this.store?this.store[t]:void 0},r.prototype.set=function(e,t){var r=this.mangle(e);return this.store[r]=t,!0},r.prototype.has=function(e){var t=this.mangle(e);return t in this.store},r.prototype["delete"]=function(e){var t=this.mangle(e);return t in this.store?(delete this.store[t],!0):!1},r.prototype.forEach=function(e){for(var t=Object.keys(this.store),r=0,n=t.length;n>r;r++){var o=t[r],i=this.store[o];o=this.unmangle(o),e(i,o)}},n.prototype.add=function(e){return this.store.set(e,!0)},n.prototype.has=function(e){return this.store.has(e)},n.prototype["delete"]=function(e){return this.store["delete"](e)}},function(e,t){"use strict";function r(e){return function(){var t=arguments.length;if(t){for(var r=[],n=-1;++n<t;)r[n]=arguments[n];return e.call(this,r)}return e.call(this,[])}}e.exports=r},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function o(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,o,u,c,s;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[e],a(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),r.apply(this,u)}else if(i(r))for(u=Array.prototype.slice.call(arguments,1),s=r.slice(),o=s.length,c=0;o>c;c++)s[c].apply(this,u);return!0},r.prototype.addListener=function(e,t){var o;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(o=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),o||(o=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var o=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,o,a,u;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],a=r.length,o=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(u=a;u-- >0;)if(r[u]===t||r[u].listener&&r[u].listener===t){o=u;break}if(0>o)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,r){(function(e){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(e){return e instanceof ArrayBuffer||"undefined"!=typeof Blob&&e instanceof Blob}function i(e){if("function"==typeof e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength),r=new Uint8Array(t),n=new Uint8Array(e);return r.set(n),t}function a(e){if(e instanceof ArrayBuffer)return i(e);var t=e.size,r=e.type;return"function"==typeof e.slice?e.slice(0,t,r):e.webkitSlice(0,t,r)}function u(e){var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=t.constructor;return"function"==typeof r&&r instanceof r&&G.call(r)==K}function c(e){var t,r,n;if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(t=[],r=0,n=e.length;n>r;r++)t[r]=c(e[r]);return t}if(e instanceof Date)return e.toISOString();if(o(e))return a(e);if(!u(e))return e;t={};for(r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=c(e[r]);"undefined"!=typeof i&&(t[r]=i)}return t}function s(e){var t=!1;return J(function(r){if(t)throw new Error("once called more than once");t=!0,e.apply(this,r)})}function l(t){return J(function(r){r=c(r);var n,o=this,i="function"==typeof r[r.length-1]?r.pop():!1;i&&(n=function(t,r){e.nextTick(function(){i(t,r)})});var a=new U(function(e,n){var i;try{var a=s(function(t,r){t?n(t):e(r)});r.push(a),i=t.apply(o,r),i&&"function"==typeof i.then&&e(i)}catch(u){n(u)}});return n&&a.then(function(e){n(null,e)},n),a})}function f(e,t){function r(e,t,r){if($.enabled){for(var n=[e._db_name,t],o=0;o<r.length-1;o++)n.push(r[o]);$.apply(null,n);var i=r[r.length-1];r[r.length-1]=function(r,n){var o=[e._db_name,t];o=o.concat(r?["error",r]:["success",n]),$.apply(null,o),i(r,n)}}}return l(J(function(n){if(this._closed)return U.reject(new Error("database is closed"));if(this._destroyed)return U.reject(new Error("database is destroyed"));var o=this;return r(o,e,n),this.taskqueue.isReady?t.apply(this,n):new U(function(t,r){o.taskqueue.addTask(function(i){i?r(i):t(o[e].apply(o,n))})})}))}function d(e,t){for(var r={},n=0,o=t.length;o>n;n++){var i=t[n];i in e&&(r[i]=e[i])}return r}function p(e){return e}function h(e){return[{ok:e}]}function _(e,t,r){function n(){var e=[];_.forEach(function(t){t.docs.forEach(function(r){e.push({id:t.id,docs:[r]})})}),r(null,{results:e})}function o(){++f===l&&n()}function i(e,t,r){_[e]={id:t,docs:r},o()}function a(){if(!(m>=v.length)){var e=Math.min(m+X,v.length),t=v.slice(m,e);u(t,m),m+=t.length}}function u(r,n){r.forEach(function(r,o){var u=n+o,c=s[r],l=d(c[0],["atts_since","attachments"]);l.open_revs=c.map(function(e){return e.rev}),l.open_revs=l.open_revs.filter(p);var f=p;0===l.open_revs.length&&(delete l.open_revs,f=h),["revs","attachments","binary","ajax"].forEach(function(e){e in t&&(l[e]=t[e])}),e.get(r,l,function(e,t){var n;n=e?[{error:e}]:f(t),i(u,r,n),a()})})}var c=t.docs,s={};c.forEach(function(e){e.id in s?s[e.id].push(e):s[e.id]=[e]});var l=Object.keys(s).length,f=0,_=new Array(l),v=Object.keys(s),m=0;a()}function v(){return"undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage&&"undefined"!=typeof chrome.storage.local}function m(){return F}function g(e){v()?chrome.storage.onChanged.addListener(function(t){null!=t.db_name&&e.emit(t.dbName.newValue)}):m()&&("undefined"!=typeof addEventListener?addEventListener("storage",function(t){e.emit(t.key)}):window.attachEvent("storage",function(t){e.emit(t.key)}))}function y(){W.EventEmitter.call(this),this._listeners={},g(this)}function b(e){if("undefined"!==console&&e in console){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}function w(e,t){var r=6e5;e=parseInt(e,10)||0,t=parseInt(t,10),t!==t||e>=t?t=(e||1)<<1:t+=1,t>r&&(e=r>>1,t=r);var n=Math.random(),o=t-e;return~~(o*n+e)}function A(e){var t=0;return e||(t=2e3),w(e,t)}function k(e,t){b("info","The above "+e+" is totally normal. "+t)}function S(e,t){for(var r in t)if(t.hasOwnProperty(r)){var n=c(t[r]);"undefined"!=typeof n&&(e[r]=n)}}function E(e,t,r){return S(e,t),r&&S(e,r),e}function x(e,t,r){try{return!e(t,r)}catch(n){var o="Filter function threw: "+n.toString();return V.createError(V.BAD_REQUEST,o)}}function T(e){var t={},r=e.filter&&"function"==typeof e.filter;return t.query=e.query_params,function(n){n.doc||(n.doc={});var o=r&&x(e.filter,n.doc,t);if("object"==typeof o)return o;if(o)return!1;if(e.include_docs){if(!e.attachments)for(var i in n.doc._attachments)n.doc._attachments.hasOwnProperty(i)&&(n.doc._attachments[i].stub=!0)}else delete n.doc;return!0}}function O(e){for(var t=[],r=0,n=e.length;n>r;r++)t=t.concat(e[r]);return t}function R(){}function C(e){var t;if(e?"string"!=typeof e?t=V.createError(V.INVALID_ID):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=V.createError(V.RESERVED_ID)):t=V.createError(V.MISSING_ID),t)throw t}function q(){return"undefined"!=typeof cordova||"undefined"!=typeof PhoneGap||"undefined"!=typeof phonegap}function N(e,t){return"listenerCount"in e?e.listenerCount(t):W.EventEmitter.listenerCount(e,t)}function I(e){if(!e)return null;var t=e.split("/");return 2===t.length?t:1===t.length?[e,e]:null}function j(e){var t=I(e);return t?t.join("/"):null}function D(e){for(var t=oe.exec(e),r={},n=14;n--;){var o=te[n],i=t[n]||"",a=-1!==["user","password"].indexOf(o);r[o]=a?decodeURIComponent(i):i}return r[re]={},r[te[12]].replace(ne,function(e,t,n){t&&(r[re][t]=n)}),r}function L(e,t,r){return new U(function(n,o){e.get(t,function(i,a){if(i){if(404!==i.status)return o(i);a={}}var u=a._rev,c=r(a);return c?(c._id=t,c._rev=u,void n(B(e,c,r))):n({updated:!1,rev:u})})})}function B(e,t,r){return e.put(t).then(function(e){return{updated:!0,rev:e.rev}},function(n){if(409!==n.status)throw n;return L(e,t._id,r)})}function M(e){return 0|Math.random()*e}function P(e,t){t=t||ie.length;var r="",n=-1;if(e){for(;++n<e;)r+=ie[M(t)];return r}for(;++n<36;)switch(n){case 8:case 13:case 18:case 23:r+="-";break;case 19:r+=ie[3&M(16)|8];break;default:r+=ie[M(16)]}return r}Object.defineProperty(t,"__esModule",{value:!0});var F,U=n(r(39)),J=n(r(43)),H=n(r(26)),W=r(44),z=n(r(38)),V=r(46),G=Function.prototype.toString,K=G.call(Object),$=H("pouchdb:api"),X=6;if(v())F=!1;else try{localStorage.setItem("_pouch_check_localstorage",1),F=!!localStorage.getItem("_pouch_check_localstorage")}catch(Q){F=!1}z(y,W.EventEmitter),y.prototype.addListener=function(e,t,r,n){function o(){function e(){a=!1}if(i._listeners[t]){if(a)return void(a="waiting");a=!0;var u=d(n,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary"]);r.changes(u).on("change",function(e){e.seq>n.since&&!n.cancelled&&(n.since=e.seq,n.onChange(e))}).on("complete",function(){"waiting"===a&&setTimeout(function(){o()},0),a=!1}).on("error",e)}}if(!this._listeners[t]){var i=this,a=!1;this._listeners[t]=o,this.on(e,o)}},y.prototype.removeListener=function(e,t){t in this._listeners&&W.EventEmitter.prototype.removeListener.call(this,e,this._listeners[t])},y.prototype.notifyLocalWindows=function(e){v()?chrome.storage.local.set({dbName:e}):m()&&(localStorage[e]="a"===localStorage[e]?"b":"a")},y.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)};var Y,Z=R.name;Y=Z?function(e){return e.name}:function(e){return e.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]};var ee=Y,te=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],re="queryKey",ne=/(?:^|&)([^&=]*)=?([^&]*)/g,oe=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ie="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");t.adapterFun=f,t.bulkGetShim=_,t.changesHandler=y,t.clone=c,t.defaultBackOff=A,t.explainError=k,t.extend=E,t.filterChange=T,t.flatten=O,t.functionName=ee,t.guardedConsole=b,t.hasLocalStorage=m,t.invalidIdError=C,t.isChromeApp=v,t.isCordova=q,t.listenerCount=N,t.normalizeDdocFunctionName=j,t.once=s,t.parseDdocFunctionName=I,t.parseUri=D,t.pick=d,t.toPromise=l,t.upsert=L,t.uuid=P}).call(t,r(2))},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(e){Error.call(this,e.reason),this.status=e.status,this.name=e.error,this.message=e.reason,this.error=!0}function i(e,t,r){function n(t){for(var n in e)"function"!=typeof e[n]&&(this[n]=e[n]);void 0!==r&&(this.name=r),void 0!==t&&(this.reason=t)}return n.prototype=o.prototype,new n(t)}function a(e){var t,r,n,o,a;return r=e.error===!0&&"string"==typeof e.name?e.name:e.error,a=e.reason,n=I("name",r,a),e.missing||"missing"===a||"deleted"===a||"not_found"===r?n=l:"doc_validation"===r?(n=b,o=a):"bad_request"===r&&n.message!==a&&(n=w),n||(n=I("status",e.status,a)||v),t=i(n,a,r),o&&(t.message=o),e.id&&(t.id=e.id),e.status&&(t.status=e.status),e.missing&&(t.missing=e.missing),t}Object.defineProperty(t,"__esModule",{value:!0});var u=n(r(38));u(o,Error),o.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};var c=new o({status:401,error:"unauthorized",reason:"Name or password is incorrect."}),s=new o({status:400,error:"bad_request",reason:"Missing JSON list of 'docs'"}),l=new o({status:404,error:"not_found",reason:"missing"}),f=new o({status:409,error:"conflict",reason:"Document update conflict"}),d=new o({status:400,error:"invalid_id",reason:"_id field must contain a string"}),p=new o({status:412,error:"missing_id",reason:"_id is required for puts"}),h=new o({status:400,error:"bad_request",reason:"Only reserved document ids may start with underscore."}),_=new o({status:412,error:"precondition_failed",reason:"Database not open"}),v=new o({status:500,error:"unknown_error",reason:"Database encountered an unknown error"}),m=new o({status:500,error:"badarg",reason:"Some query argument is invalid"}),g=new o({status:400,error:"invalid_request",reason:"Request was invalid"}),y=new o({status:400,error:"query_parse_error",reason:"Some query parameter is invalid"}),b=new o({status:500,error:"doc_validation",reason:"Bad special document member"}),w=new o({status:400,error:"bad_request",reason:"Something wrong with the request"}),A=new o({status:400,error:"bad_request",reason:"Document must be a JSON object"}),k=new o({status:404,error:"not_found",reason:"Database not found"}),S=new o({status:500,error:"indexed_db_went_bad",reason:"unknown"}),E=new o({status:500,error:"web_sql_went_bad",reason:"unknown"}),x=new o({status:500,error:"levelDB_went_went_bad",reason:"unknown"}),T=new o({status:403,error:"forbidden",reason:"Forbidden by design doc validate_doc_update function"}),O=new o({status:400,error:"bad_request",reason:"Invalid rev format"}),R=new o({status:412,error:"file_exists",reason:"The database could not be created, the file already exists."}),C=new o({status:412,error:"missing_stub"}),q=new o({status:413,error:"invalid_url",reason:"Provided URL is invalid"}),N=[c,s,l,f,d,p,h,_,v,m,g,y,b,w,A,k,E,x,T,O,R,C,S,q],I=function(e,t,r){var n=N.filter(function(r){return r[e]===t});return r&&n.filter(function(e){return e.message===r})[0]||n[0]};t.UNAUTHORIZED=c,t.MISSING_BULK_DOCS=s,t.MISSING_DOC=l,t.REV_CONFLICT=f,t.INVALID_ID=d,t.MISSING_ID=p,t.RESERVED_ID=h,t.NOT_OPEN=_,t.UNKNOWN_ERROR=v,t.BAD_ARG=m,t.INVALID_REQUEST=g,t.QUERY_PARSE_ERROR=y,t.DOC_VALIDATION=b,t.BAD_REQUEST=w,t.NOT_AN_OBJECT=A,t.DB_MISSING=k,t.WSQ_ERROR=E,t.LDB_ERROR=x,t.FORBIDDEN=T,t.INVALID_REV=O,t.FILE_EXISTS=R,t.MISSING_STUB=C,t.IDB_ERROR=S,t.INVALID_URL=q,t.getErrorTypeByProp=I,t.createError=i,t.generateErrorFromResponse=a},function(e,t){"use strict";function r(e){for(var t,r,n,o,i=e.rev_tree.slice();o=i.pop();){var a=o.ids,u=a[2],c=o.pos;if(u.length)for(var s=0,l=u.length;l>s;s++)i.push({pos:c+1,ids:u[s]});else{var f=!!a[1].deleted,d=a[0];t&&!(n!==f?n:r!==c?c>r:d>t)||(t=d,r=c,n=f)}}return r+"-"+t}function n(e,t){for(var r,n=e.slice();r=n.pop();)for(var o=r.pos,i=r.ids,a=i[2],u=t(0===a.length,o,i[0],r.ctx,i[1]),c=0,s=a.length;s>c;c++)n.push({pos:o+1,ids:a[c],ctx:u})}function o(e,t){return e.pos-t.pos}function i(e){var t=[];n(e,function(e,r,n,o,i){e&&t.push({rev:r+"-"+n,pos:r,opts:i})}),t.sort(o).reverse();for(var r=0,i=t.length;i>r;r++)delete t[r].pos;return t}function a(e){for(var t=r(e),n=i(e.rev_tree),o=[],a=0,u=n.length;u>a;a++){var c=n[a];c.rev===t||c.opts.deleted||o.push(c.rev)}return o}function u(e){var t=[];return n(e.rev_tree,function(e,r,n,o,i){"available"!==i.status||e||(t.push(r+"-"+n),i.status="missing")}),t}function c(e){for(var t,r=[],n=e.slice();t=n.pop();){var o=t.pos,i=t.ids,a=i[0],u=i[1],c=i[2],s=0===c.length,l=t.history?t.history.slice():[];l.push({id:a,opts:u}),s&&r.push({pos:o+1-l.length,ids:l});for(var f=0,d=c.length;d>f;f++)n.push({pos:o+1,ids:c[f],history:l})}return r.reverse()}function s(e,t){return e.pos-t.pos}function l(e,t,r){for(var n,o=0,i=e.length;i>o;)n=o+i>>>1,r(e[n],t)<0?o=n+1:i=n;return o}function f(e,t,r){var n=l(e,t,r);e.splice(n,0,t)}function d(e,t){for(var r,n,o=t,i=e.length;i>o;o++){var a=e[o],u=[a.id,a.opts,[]];n?(n[2].push(u),n=u):r=n=u}return r}function p(e,t){return e[0]<t[0]?-1:1}function h(e,t){for(var r=[{tree1:e,tree2:t}],n=!1;r.length>0;){var o=r.pop(),i=o.tree1,a=o.tree2;(i[1].status||a[1].status)&&(i[1].status="available"===i[1].status||"available"===a[1].status?"available":"missing");for(var u=0;u<a[2].length;u++)if(i[2][0]){for(var c=!1,s=0;s<i[2].length;s++)i[2][s][0]===a[2][u][0]&&(r.push({tree1:i[2][s],tree2:a[2][u]}),c=!0);c||(n="new_branch",f(i[2],a[2][u],p))}else n="new_leaf",i[2][0]=a[2][u]}return{conflicts:n,tree:e}}function _(e,t,r){var n,o=[],i=!1,a=!1;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var u=0,c=e.length;c>u;u++){var l=e[u];if(l.pos===t.pos&&l.ids[0]===t.ids[0])n=h(l.ids,t.ids),o.push({pos:l.pos,ids:n.tree}),i=i||n.conflicts,a=!0;else if(r!==!0){var f=l.pos<t.pos?l:t,d=l.pos<t.pos?t:l,p=d.pos-f.pos,_=[],v=[];for(v.push({ids:f.ids,diff:p,parent:null,parentIdx:null});v.length>0;){var m=v.pop();if(0!==m.diff)for(var g=m.ids[2],y=0,b=g.length;b>y;y++)v.push({ids:g[y],diff:m.diff-1,parent:m.ids,parentIdx:y});else m.ids[0]===d.ids[0]&&_.push(m)}var w=_[0];w?(n=h(w.ids,d.ids),w.parent[2][w.parentIdx]=n.tree,
o.push({pos:f.pos,ids:f.ids}),i=i||n.conflicts,a=!0):o.push(l)}else o.push(l)}return a||o.push(t),o.sort(s),{tree:o,conflicts:i||"internal_node"}}function v(e,t){for(var r,o=c(e),i={},a=0,u=o.length;u>a;a++){for(var s=o[a],l=s.ids,f=Math.max(0,l.length-t),p={pos:s.pos+f,ids:d(l,f)},h=0;f>h;h++){var v=s.pos+h+"-"+l[h].id;i[v]=!0}r=r?_(r,p,!0).tree:[p]}return n(r,function(e,t,r){delete i[t+"-"+r]}),{tree:r,revs:Object.keys(i)}}function m(e,t,r){var n=_(e,t),o=v(n.tree,r);return{tree:o.tree,stemmedRevs:o.revs,conflicts:n.conflicts}}function g(e,t){for(var r,n=e.slice(),o=t.split("-"),i=parseInt(o[0],10),a=o[1];r=n.pop();){if(r.pos===i&&r.ids[0]===a)return!0;for(var u=r.ids[2],c=0,s=u.length;s>c;c++)n.push({pos:r.pos+1,ids:u[c]})}return!1}function y(e){return e.ids}function b(e,t){t||(t=r(e));for(var n,o=t.substring(t.indexOf("-")+1),i=e.rev_tree.map(y);n=i.pop();){if(n[0]===o)return!!n[1].deleted;i=i.concat(n[2])}}function w(e){return/^_local/.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.collectConflicts=a,t.collectLeaves=i,t.compactTree=u,t.isDeleted=b,t.isLocalId=w,t.merge=m,t.revExists=g,t.rootToLeaf=c,t.traverseRevTree=n,t.winningRev=r},function(e,t){(function(){var t={}.hasOwnProperty,r=[].slice;e.exports=function(e,n){var o,i,a,u;i=[],u=[];for(o in n)t.call(n,o)&&(a=n[o],"this"!==o&&(i.push(o),u.push(a)));return Function.apply(null,r.call(i).concat([e])).apply(n["this"],u)}}).call(this)},function(e,t,r){(function(t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(e,t,r,n){try{e.apply(t,r)}catch(o){n.emit("error",o)}}function i(e){if(!J.running&&J.queue.length){J.running=!0;var r=J.queue.shift();r.action(function(n,a){o(r.callback,this,[n,a],e),J.running=!1,t.nextTick(function(){i(e)})})}}function a(e){return function(t){var r="unknown_error";t.target&&t.target.error&&(r=t.target.error.name||t.target.error.message),e(O.createError(O.IDB_ERROR,r,t.type))}}function u(e,t,r){return{data:N.safeJsonStringify(e),winningRev:t,deletedOrLocal:r?"1":"0",seq:e.seq,id:e.id}}function c(e){if(!e)return null;var t=N.safeJsonParse(e.data);return t.winningRev=e.winningRev,t.deleted="1"===e.deletedOrLocal,t.seq=e.seq,t}function s(e){if(!e)return e;var t=e._doc_id_rev.lastIndexOf(":");return e._id=e._doc_id_rev.substring(0,t-1),e._rev=e._doc_id_rev.substring(t+1),delete e._doc_id_rev,e}function l(e,t,r,n){r?n(e?"string"!=typeof e?e:I.base64StringToBlobOrBuffer(e,t):I.blob([""],{type:t})):e?"string"!=typeof e?I.readAsBinaryString(e,function(e){n(I.btoa(e))}):n(e):n("")}function f(e,t,r,n){function o(){++u===a.length&&n&&n()}function i(e,t){var n=e._attachments[t],i=n.digest,a=r.objectStore(B).get(i);a.onsuccess=function(e){n.body=e.target.result.body,o()}}var a=Object.keys(e._attachments||{});if(!a.length)return n&&n();var u=0;a.forEach(function(r){t.attachments&&t.include_docs?i(e,r):(e._attachments[r].stub=!0,o())})}function d(e,t){return q.all(e.map(function(e){if(e.doc&&e.doc._attachments){var r=Object.keys(e.doc._attachments);return q.all(r.map(function(r){var n=e.doc._attachments[r];if("body"in n){var o=n.body,i=n.content_type;return new q(function(a){l(o,i,t,function(t){e.doc._attachments[r]=C.extend(E.pick(n,["digest","content_type"]),{data:t}),a()})})}}))}}))}function p(e,t,r){function n(){s--,s||o()}function o(){i.length&&i.forEach(function(e){var t=c.index("digestSeq").count(IDBKeyRange.bound(e+"::",e+"::￿",!1,!1));t.onsuccess=function(t){var r=t.target.result;r||u["delete"](e)}})}var i=[],a=r.objectStore(L),u=r.objectStore(B),c=r.objectStore(M),s=e.length;e.forEach(function(e){var r=a.index("_doc_id_rev"),o=t+"::"+e;r.getKey(o).onsuccess=function(e){var t=e.target.result;if("number"!=typeof t)return n();a["delete"](t);var r=c.index("seq").openCursor(IDBKeyRange.only(t));r.onsuccess=function(e){var t=e.target.result;if(t){var r=t.value.digestSeq.split("::")[0];i.push(r),c["delete"](t.primaryKey),t["continue"]()}else n()}}})}function h(e,t,r){try{return{txn:e.transaction(t,r)}}catch(n){return{error:n}}}function _(e,t,r,n,o,i,s){function l(){var e=[D,L,B,F,M],t=h(o,e,"readwrite");return t.error?s(t.error):(k=t.txn,k.onabort=a(s),k.ontimeout=a(s),k.oncomplete=_,S=k.objectStore(D),E=k.objectStore(L),C=k.objectStore(B),q=k.objectStore(M),void m(function(e){return e?(z=!0,s(e)):void d()}))}function f(){R.processDocs(e.revs_limit,I,n,W,k,H,g,r)}function d(){function e(){++r===I.length&&f()}function t(t){var r=c(t.target.result);r&&W.set(r.id,r),e()}if(I.length)for(var r=0,n=0,o=I.length;o>n;n++){var i=I[n];if(i._id&&R.isLocalId(i._id))e();else{var a=S.get(i.metadata.id);a.onsuccess=t}}}function _(){z||(i.notify(n._meta.name),n._meta.docCount+=j,s(null,H))}function v(e,t){var r=C.get(e);r.onsuccess=function(r){if(r.target.result)t();else{var n=O.createError(O.MISSING_STUB,"unknown stub attachment with digest "+e);n.status=412,t(n)}}}function m(e){function t(){++o===r.length&&e(n)}var r=[];if(I.forEach(function(e){e.data&&e.data._attachments&&Object.keys(e.data._attachments).forEach(function(t){var n=e.data._attachments[t];n.stub&&r.push(n.digest)})}),!r.length)return e();var n,o=0;r.forEach(function(e){v(e,function(e){e&&!n&&(n=e),t()})})}function g(e,t,r,n,o,i,a,u){j+=i,e.metadata.winningRev=t,e.metadata.deleted=r;var c=e.data;c._id=e.metadata.id,c._rev=e.metadata.rev,n&&(c._deleted=!0);var s=c._attachments&&Object.keys(c._attachments).length;return s?b(e,t,r,o,a,u):void y(e,t,r,o,a,u)}function y(e,t,r,o,i,a){function c(i){var a=e.stemmedRevs||[];o&&n.auto_compaction&&(a=a.concat(x.compactTree(e.metadata))),a&&a.length&&p(a,e.metadata.id,k),d.seq=i.target.result,delete d.rev;var c=u(d,t,r),s=S.put(c);s.onsuccess=l}function s(e){e.preventDefault(),e.stopPropagation();var t=E.index("_doc_id_rev"),r=t.getKey(f._doc_id_rev);r.onsuccess=function(e){var t=E.put(f,e.target.result);t.onsuccess=c}}function l(){H[i]={ok:!0,id:d.id,rev:t},W.set(e.metadata.id,e.metadata),w(e,d.seq,a)}var f=e.data,d=e.metadata;f._doc_id_rev=d.id+"::"+d.rev,delete f._id,delete f._rev;var h=E.put(f);h.onsuccess=c,h.onerror=s}function b(e,t,r,n,o,i){function a(){s===l.length&&y(e,t,r,n,o,i)}function u(){s++,a()}var c=e.data,s=0,l=Object.keys(c._attachments);l.forEach(function(r){var n=e.data._attachments[r];if(n.stub)s++,a();else{var o=n.data;delete n.data,n.revpos=parseInt(t,10);var i=n.digest;A(i,o,u)}})}function w(e,t,r){function n(){++i===a.length&&r()}function o(r){var o=e.data._attachments[r].digest,i=q.put({seq:t,digestSeq:o+"::"+t});i.onsuccess=n,i.onerror=function(e){e.preventDefault(),e.stopPropagation(),n()}}var i=0,a=Object.keys(e.data._attachments||{});if(!a.length)return r();for(var u=0;u<a.length;u++)o(a[u])}function A(e,t,r){var n=C.count(e);n.onsuccess=function(n){var o=n.target.result;if(o)return r();var i={digest:e,body:t},a=C.put(i);a.onsuccess=r}}for(var k,S,E,C,q,N,I=t.docs,j=0,P=0,U=I.length;U>P;P++){var J=I[P];J._id&&R.isLocalId(J._id)||(J=I[P]=R.parseDoc(J,r.new_edits),J.error&&!N&&(N=J))}if(N)return s(N);var H=new Array(I.length),W=new T.Map,z=!1,V=n._meta.blobSupport?"blob":"base64";R.preprocessAttachments(I,V,function(e){return e?s(e):void l()})}function v(e,t,r,n,o){try{if(e&&t)return o?IDBKeyRange.bound(t,e,!r,!1):IDBKeyRange.bound(e,t,!1,!r);if(e)return o?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(t)return o?IDBKeyRange.lowerBound(t,!r):IDBKeyRange.upperBound(t,!r);if(n)return IDBKeyRange.only(n)}catch(i){return{error:i}}return null}function m(e,t,r,n){return"DataError"===r.name&&0===r.code?n(null,{total_rows:e._meta.docCount,offset:t.skip,rows:[]}):void n(O.createError(O.IDB_ERROR,r.name,r.message))}function g(e,t,r,n){function o(e,n){function o(t,r,n){var o=t.id+"::"+n;q.get(o).onsuccess=function(n){r.doc=s(n.target.result),e.conflicts&&(r.doc._conflicts=x.collectConflicts(t)),f(r.doc,e,T)}}function i(t,r,n){var i={id:n.id,key:n.id,value:{rev:r}},a=n.deleted;if("ok"===e.deleted)N.push(i),a?(i.value.deleted=!0,i.doc=null):e.include_docs&&o(n,i,r);else if(!a&&y--<=0&&(N.push(i),e.include_docs&&o(n,i,r),0===--b))return;t["continue"]()}function a(e){I=t._meta.docCount;var r=e.target.result;if(r){var n=c(r.value),o=n.winningRev;i(r,o,n)}}function u(){n(null,{total_rows:I,offset:e.skip,rows:N})}function l(){e.attachments?d(N,e.binary).then(u):u()}var p="startkey"in e?e.startkey:!1,_="endkey"in e?e.endkey:!1,g="key"in e?e.key:!1,y=e.skip||0,b="number"==typeof e.limit?e.limit:-1,w=e.inclusive_end!==!1,A="descending"in e&&e.descending?"prev":null,k=v(p,_,w,g,A);if(k&&k.error)return m(t,e,k.error,n);var S=[D,L];e.attachments&&S.push(B);var E=h(r,S,"readonly");if(E.error)return n(E.error);var T=E.txn,O=T.objectStore(D),R=T.objectStore(L),C=A?O.openCursor(k,A):O.openCursor(k),q=R.index("_doc_id_rev"),N=[],I=0;T.oncomplete=l,C.onsuccess=a}function i(e,r){return 0===e.limit?r(null,{total_rows:t._meta.docCount,offset:e.skip,rows:[]}):void o(e,r)}i(e,n)}function y(e){return new q(function(t){var r=I.blob([""]);e.objectStore(U).put(r,"key"),e.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},e.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);t(r||!e||parseInt(e[1],10)>=43)}})["catch"](function(){return!1})}function b(e,t){var r=this;J.queue.push({action:function(t){w(r,e,t)},callback:t}),i(r.constructor)}function w(e,r,n){function o(e){var t=e.createObjectStore(D,{keyPath:"id"});e.createObjectStore(L,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),e.createObjectStore(B,{keyPath:"digest"}),e.createObjectStore(P,{keyPath:"id",autoIncrement:!1}),e.createObjectStore(U),t.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),e.createObjectStore(F,{keyPath:"_id"});var r=e.createObjectStore(M,{autoIncrement:!0});r.createIndex("seq","seq"),r.createIndex("digestSeq","digestSeq",{unique:!0})}function i(e,t){var r=e.objectStore(D);r.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),r.openCursor().onsuccess=function(e){var n=e.target.result;if(n){var o=n.value,i=x.isDeleted(o);o.deletedOrLocal=i?"1":"0",r.put(o),n["continue"]()}else t()}}function v(e){e.createObjectStore(F,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}function m(e,t){var r=e.objectStore(F),n=e.objectStore(D),o=e.objectStore(L),i=n.openCursor();i.onsuccess=function(e){var i=e.target.result;if(i){var a=i.value,u=a.id,c=x.isLocalId(u),s=x.winningRev(a);if(c){var l=u+"::"+s,f=u+"::",d=u+"::~",p=o.index("_doc_id_rev"),h=IDBKeyRange.bound(f,d,!1,!1),_=p.openCursor(h);_.onsuccess=function(e){if(_=e.target.result){var t=_.value;t._doc_id_rev===l&&r.put(t),o["delete"](_.primaryKey),_["continue"]()}else n["delete"](i.primaryKey),i["continue"]()}}else i["continue"]()}else t&&t()}}function b(e){var t=e.createObjectStore(M,{autoIncrement:!0});t.createIndex("seq","seq"),t.createIndex("digestSeq","digestSeq",{unique:!0})}function w(e,t){var r=e.objectStore(L),n=e.objectStore(B),o=e.objectStore(M),i=n.count();i.onsuccess=function(e){var n=e.target.result;return n?void(r.openCursor().onsuccess=function(e){var r=e.target.result;if(!r)return t();for(var n=r.value,i=r.primaryKey,a=Object.keys(n._attachments||{}),u={},c=0;c<a.length;c++){var s=n._attachments[a[c]];u[s.digest]=!0}var l=Object.keys(u);for(c=0;c<l.length;c++){var f=l[c];o.put({seq:i,digestSeq:f+"::"+i})}r["continue"]()}):t()}}function k(e){function t(e){return e.data?c(e):(e.deleted="1"===e.deletedOrLocal,e)}var r=e.objectStore(L),n=e.objectStore(D),o=n.openCursor();o.onsuccess=function(e){function o(){var e=c.id+"::",t=c.id+"::￿",n=r.index("_doc_id_rev").openCursor(IDBKeyRange.bound(e,t)),o=0;n.onsuccess=function(e){var t=e.target.result;if(!t)return c.seq=o,i();var r=t.primaryKey;r>o&&(o=r),t["continue"]()}}function i(){var e=u(c,c.winningRev,c.deleted),t=n.put(e);t.onsuccess=function(){a["continue"]()}}var a=e.target.result;if(a){var c=t(a.value);return c.winningRev=c.winningRev||x.winningRev(c),c.seq?i():void o()}}}var R=r.name,C=null;e._meta=null,e.type=function(){return"idb"},e._id=E.toPromise(function(t){t(null,e._meta.instanceId)}),e._bulkDocs=function(t,n,o){_(r,t,n,e,C,W,o)},e._get=function(e,t,r){function n(){r(a,{doc:o,metadata:i,ctx:u})}var o,i,a,u=t.ctx;if(!u){var l=h(C,[D,L,B],"readonly");if(l.error)return r(l.error);u=l.txn}u.objectStore(D).get(e).onsuccess=function(e){if(i=c(e.target.result),!i)return a=O.createError(O.MISSING_DOC,"missing"),n();if(x.isDeleted(i)&&!t.rev)return a=O.createError(O.MISSING_DOC,"deleted"),n();var r=u.objectStore(L),l=t.rev||i.winningRev,f=i.id+"::"+l;r.index("_doc_id_rev").get(f).onsuccess=function(e){return o=e.target.result,o&&(o=s(o)),o?void n():(a=O.createError(O.MISSING_DOC,"missing"),n())}}},e._getAttachment=function(e,t,r,n,o){var i;if(n.ctx)i=n.ctx;else{var a=h(C,[D,L,B],"readonly");if(a.error)return o(a.error);i=a.txn}var u=r.digest,c=r.content_type;i.objectStore(B).get(u).onsuccess=function(e){var t=e.target.result.body;l(t,c,n.binary,function(e){o(null,e)})}},e._info=function(t){if(null===C||!H.has(R)){var r=new Error("db isn't open");return r.id="idbNull",t(r)}var n,o,i=h(C,[L],"readonly");if(i.error)return t(i.error);var a=i.txn,u=a.objectStore(L).openCursor(null,"prev");u.onsuccess=function(t){var r=t.target.result;n=r?r.key:0,o=e._meta.docCount},a.oncomplete=function(){t(null,{doc_count:o,update_seq:n,idb_attachment_format:e._meta.blobSupport?"binary":"base64"})}},e._allDocs=function(t,r){g(t,e,C,r)},e._changes=function(t){function r(e){function r(){return u.seq!==a?e["continue"]():(p=a,u.winningRev===i._rev?o(i):void n())}function n(){var e=i._id+"::"+u.winningRev,t=b.get(e);t.onsuccess=function(e){o(s(e.target.result))}}function o(r){var n=t.processChange(r,u,t);n.seq=u.seq;var o=k(n);return"object"==typeof o?t.complete(o):(o&&(A++,v&&w.push(n),t.attachments&&t.include_docs?f(r,t,m,function(){d([n],t.binary).then(function(){t.onChange(n)})}):t.onChange(n)),void(A!==_&&e["continue"]()))}var i=s(e.value),a=e.key;if(l&&!l.has(i._id))return e["continue"]();var u;return(u=S.get(i._id))?r():void(y.get(i._id).onsuccess=function(e){u=c(e.target.result),S.set(i._id,u),r()})}function n(e){var t=e.target.result;t&&r(t)}function o(){var e=[D,L];t.attachments&&e.push(B);var r=h(C,e,"readonly");if(r.error)return t.complete(r.error);m=r.txn,m.onabort=a(t.complete),m.oncomplete=i,g=m.objectStore(L),y=m.objectStore(D),b=g.index("_doc_id_rev");var o;o=t.descending?g.openCursor(null,"prev"):g.openCursor(IDBKeyRange.lowerBound(t.since,!0)),o.onsuccess=n}function i(){function e(){t.complete(null,{results:w,last_seq:p})}!t.continuous&&t.attachments?d(w).then(e):e()}if(t=E.clone(t),t.continuous){var u=R+":"+E.uuid();return W.addListener(R,u,e,t),W.notify(R),{cancel:function(){W.removeListener(R,u)}}}var l=t.doc_ids&&new T.Set(t.doc_ids);t.since=t.since||0;var p=t.since,_="limit"in t?t.limit:-1;0===_&&(_=1);var v;v="return_docs"in t?t.return_docs:"returnDocs"in t?t.returnDocs:!0;var m,g,y,b,w=[],A=0,k=E.filterChange(t),S=new T.Map;o()},e._close=function(e){return null===C?e(O.createError(O.NOT_OPEN)):(C.close(),H["delete"](R),C=null,void e())},e._getRevisionTree=function(e,t){var r=h(C,[D],"readonly");if(r.error)return t(r.error);var n=r.txn,o=n.objectStore(D).get(e);o.onsuccess=function(e){var r=c(e.target.result);r?t(null,r.rev_tree):t(O.createError(O.MISSING_DOC))}},e._doCompaction=function(e,t,r){var n=[D,L,B,M],o=h(C,n,"readwrite");if(o.error)return r(o.error);var i=o.txn,s=i.objectStore(D);s.get(e).onsuccess=function(r){var n=c(r.target.result);x.traverseRevTree(n.rev_tree,function(e,r,n,o,i){var a=r+"-"+n;-1!==t.indexOf(a)&&(i.status="missing")}),p(t,e,i);var o=n.winningRev,a=n.deleted;i.objectStore(D).put(u(n,o,a))},i.onabort=a(r),i.oncomplete=function(){r()}},e._getLocal=function(e,t){var r=h(C,[F],"readonly");if(r.error)return t(r.error);var n=r.txn,o=n.objectStore(F).get(e);o.onerror=a(t),o.onsuccess=function(e){var r=e.target.result;r?(delete r._doc_id_rev,t(null,r)):t(O.createError(O.MISSING_DOC))}},e._putLocal=function(e,t,r){"function"==typeof t&&(r=t,t={}),delete e._revisions;var n=e._rev,o=e._id;n?e._rev="0-"+(parseInt(n.split("-")[1],10)+1):e._rev="0-1";var i,u=t.ctx;if(!u){var c=h(C,[F],"readwrite");if(c.error)return r(c.error);u=c.txn,u.onerror=a(r),u.oncomplete=function(){i&&r(null,i)}}var s,l=u.objectStore(F);n?(s=l.get(o),s.onsuccess=function(o){var a=o.target.result;if(a&&a._rev===n){var u=l.put(e);u.onsuccess=function(){i={ok:!0,id:e._id,rev:e._rev},t.ctx&&r(null,i)}}else r(O.createError(O.REV_CONFLICT))}):(s=l.add(e),s.onerror=function(e){r(O.createError(O.REV_CONFLICT)),e.preventDefault(),e.stopPropagation()},s.onsuccess=function(){i={ok:!0,id:e._id,rev:e._rev},t.ctx&&r(null,i)})},e._removeLocal=function(e,t,r){"function"==typeof t&&(r=t,t={});var n=t.ctx;if(!n){var o=h(C,[F],"readwrite");if(o.error)return r(o.error);n=o.txn,n.oncomplete=function(){i&&r(null,i)}}var i,u=e._id,c=n.objectStore(F),s=c.get(u);s.onerror=a(r),s.onsuccess=function(n){var o=n.target.result;o&&o._rev===e._rev?(c["delete"](u),i={ok:!0,id:u,rev:"0-0"},t.ctx&&r(null,i)):r(O.createError(O.MISSING_DOC))}},e._destroy=function(e,t){W.removeAllListeners(R);var r=z.get(R);r&&r.result&&(r.result.close(),H["delete"](R));var n=indexedDB.deleteDatabase(R);n.onsuccess=function(){z["delete"](R),E.hasLocalStorage()&&R in localStorage&&delete localStorage[R],t(null,{ok:!0})},n.onerror=a(t)};var q=H.get(R);if(q)return C=q.idb,e._meta=q.global,void t.nextTick(function(){n(null,e)});var N;N=r.storage?A(R,r.storage):indexedDB.open(R,j),z.set(R,N),N.onupgradeneeded=function(e){function t(){var e=a[u-1];u++,e&&e(n,t)}var r=e.target.result;if(e.oldVersion<1)return o(r);var n=e.currentTarget.transaction;e.oldVersion<3&&v(r),e.oldVersion<4&&b(r);var a=[i,m,w,k],u=e.oldVersion;t()},N.onsuccess=function(t){C=t.target.result,C.onversionchange=function(){C.close(),H["delete"](R)},C.onabort=function(e){E.guardedConsole("error","Database has a global failure",e.target.error),C.close(),H["delete"](R)};var r=C.transaction([P,U,D],"readwrite"),o=r.objectStore(P).get(P),i=null,a=null,u=null;o.onsuccess=function(t){var o=function(){null!==i&&null!==a&&null!==u&&(e._meta={name:R,instanceId:u,blobSupport:i,docCount:a},H.set(R,{idb:C,global:e._meta}),n(null,e))},c=t.target.result||{id:P};R+"_id"in c?(u=c[R+"_id"],o()):(u=E.uuid(),c[R+"_id"]=u,r.objectStore(P).put(c).onsuccess=function(){o()}),S||(S=y(r)),S.then(function(e){i=e,o()});var s=r.objectStore(D).index("deletedOrLocal");s.count(IDBKeyRange.only("0")).onsuccess=function(e){a=e.target.result,o()}}},N.onerror=function(){var e="Failed to open indexedDB, are you in private browsing mode?";E.guardedConsole("error",e),n(O.createError(O.IDB_ERROR,e))}}function A(e,t){try{return indexedDB.open(e,{version:j,storage:t})}catch(r){return indexedDB.open(e,j)}}function k(e){e.adapter("idb",b,!0)}var S,E=r(45),x=r(47),T=r(42),O=r(46),R=r(50),C=r(37),q=n(r(39)),N=r(54),I=r(51),j=5,D="document-store",L="by-sequence",B="attach-store",M="attach-seq-store",P="meta-store",F="local-store",U="detect-blob-support",J={running:!1,queue:[]},H=new T.Map,W=new E.changesHandler,z=new T.Map;b.valid=function(){var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform);return!e&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange},e.exports=k}).call(t,r(2))},function(e,t,r){"use strict";function n(e){return e.reduce(function(e,t){return e[t]=!0,e},{})}function o(e){if(!/^\d+\-./.test(e))return d.createError(d.INVALID_REV);var t=e.indexOf("-"),r=e.substring(0,t),n=e.substring(t+1);return{prefix:parseInt(r,10),id:n}}function i(e,t){for(var r=e.start-e.ids.length+1,n=e.ids,o=[n[0],t,[]],i=1,a=n.length;a>i;i++)o=[n[i],{status:"missing"},[o]];return[{pos:r,ids:o}]}function a(e,t){var r,n,a,u={status:"available"};if(e._deleted&&(u.deleted=!0),t)if(e._id||(e._id=f.uuid()),n=f.uuid(32,16).toLowerCase(),e._rev){if(a=o(e._rev),a.error)return a;e._rev_tree=[{pos:a.prefix,ids:[a.id,{status:"missing"},[[n,u,[]]]]}],r=a.prefix+1}else e._rev_tree=[{pos:1,ids:[n,u,[]]}],r=1;else if(e._revisions&&(e._rev_tree=i(e._revisions,u),r=e._revisions.start,n=e._revisions.ids[0]),!e._rev_tree){if(a=o(e._rev),a.error)return a;r=a.prefix,n=a.id,e._rev_tree=[{pos:r,ids:[n,u,[]]}]}f.invalidIdError(e._id),e._rev=r+"-"+n;var c={metadata:{},data:{}};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var l="_"===s[0];if(l&&!m[s]){var p=d.createError(d.DOC_VALIDATION,s);throw p.message=d.DOC_VALIDATION.message+": "+s,p}l&&!g[s]?c.metadata[s.slice(1)]=e[s]:c.data[s]=e[s]}return c}function u(e,t,r){function n(e){try{return h.atob(e)}catch(t){var r=d.createError(d.BAD_ARG,"Attachment is not a valid base64 string");return{error:r}}}function o(e,r){if(e.stub)return r();if("string"==typeof e.data){var o=n(e.data);if(o.error)return r(o.error);e.length=o.length,"blob"===t?e.data=h.binaryStringToBlobOrBuffer(o,e.content_type):"base64"===t?e.data=h.btoa(o):e.data=o,_.binaryMd5(o,function(t){e.digest="md5-"+t,r()})}else h.readAsArrayBuffer(e.data,function(n){"binary"===t?e.data=h.arrayBufferToBinaryString(n):"base64"===t&&(e.data=h.arrayBufferToBase64(n)),_.binaryMd5(n,function(t){e.digest="md5-"+t,e.length=n.byteLength,r()})})}function i(){u++,e.length===u&&(a?r(a):r())}if(!e.length)return r();var a,u=0;e.forEach(function(e){function t(e){a=e,n++,n===r.length&&i()}var r=e.data&&e.data._attachments?Object.keys(e.data._attachments):[],n=0;if(!r.length)return i();for(var u in e.data._attachments)e.data._attachments.hasOwnProperty(u)&&o(e.data._attachments[u],t)})}function c(e,t,r,n,o,i,u,c){if(p.revExists(t.rev_tree,r.metadata.rev))return n[o]=r,i();var s=t.winningRev||p.winningRev(t),l="deleted"in t?t.deleted:p.isDeleted(t,s),f="deleted"in r.metadata?r.metadata.deleted:p.isDeleted(r.metadata),h=/^1-/.test(r.metadata.rev);if(l&&!f&&c&&h){var _=r.data;_._rev=s,_._id=r.metadata.id,r=a(_,c)}var v=p.merge(t.rev_tree,r.metadata.rev_tree[0],e),m=c&&(l&&f||!l&&"new_leaf"!==v.conflicts||l&&!f&&"new_branch"===v.conflicts);if(m){var g=d.createError(d.REV_CONFLICT);return n[o]=g,i()}var y=r.metadata.rev;r.metadata.rev_tree=v.tree,r.stemmedRevs=v.stemmedRevs||[],t.rev_map&&(r.metadata.rev_map=t.rev_map);var b,w=p.winningRev(r.metadata),A=p.isDeleted(r.metadata,w),k=l===A?0:A>l?-1:1;b=y===w?A:p.isDeleted(r.metadata,y),u(r,w,A,b,!0,k,o,i)}function s(e){return"missing"===e.metadata.rev_tree[0].ids[1].status}function l(e,t,r,n,o,i,a,u,l){function f(e,t,r){var n=p.winningRev(e.metadata),o=p.isDeleted(e.metadata,n);if("was_delete"in u&&o)return i[t]=d.createError(d.MISSING_DOC,"deleted"),r();var c=_&&s(e);if(c){var l=d.createError(d.REV_CONFLICT);return i[t]=l,r()}var f=o?0:1;a(e,n,o,o,!1,f,t,r)}function h(){++g===y&&l&&l()}e=e||1e3;var _=u.new_edits,m=new v.Map,g=0,y=t.length;t.forEach(function(e,t){if(e._id&&p.isLocalId(e._id)){var n=e._deleted?"_removeLocal":"_putLocal";return void r[n](e,{ctx:o},function(e,r){i[t]=e||r,h()})}var a=e.metadata.id;m.has(a)?(y--,m.get(a).push([e,t])):m.set(a,[[e,t]])}),m.forEach(function(t,r){function o(){++s<t.length?u():h()}function u(){var u=t[s],l=u[0],d=u[1];if(n.has(r))c(e,n.get(r),l,i,d,o,a,_);else{var h=p.merge([],l.metadata.rev_tree[0],e);l.metadata.rev_tree=h.tree,l.stemmedRevs=h.stemmedRevs||[],f(l,d,o)}}var s=0;u()})}Object.defineProperty(t,"__esModule",{value:!0});var f=r(45),d=r(46),p=r(47),h=r(51),_=r(52),v=r(42),m=n(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),g=n(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);t.invalidIdError=f.invalidIdError,t.isDeleted=p.isDeleted,t.isLocalId=p.isLocalId,t.normalizeDdocFunctionName=f.normalizeDdocFunctionName,t.parseDdocFunctionName=f.parseDdocFunctionName,t.parseDoc=a,t.preprocessAttachments=u,t.processDocs=l,t.updateDoc=c},function(e,t){"use strict";function r(e){for(var t="",r=new Uint8Array(e),n=r.byteLength,o=0;n>o;o++)t+=String.fromCharCode(r[o]);return t}function n(e){return p(r(e))}function o(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(r){if("TypeError"!==r.name)throw r;for(var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,o=new n,i=0;i<e.length;i+=1)o.append(e[i]);return o.getBlob(t.type)}}function i(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),o=0;t>o;o++)n[o]=e.charCodeAt(o);return r}function a(e,t){return o([i(e)],{type:t})}function u(e,t){return a(d(e),t)}function c(e,t){if("undefined"==typeof FileReader)return t(r((new FileReaderSync).readAsArrayBuffer(e)));var n=new FileReader,o="function"==typeof n.readAsBinaryString;n.onloadend=function(e){var n=e.target.result||"";return o?t(n):void t(r(n))},o?n.readAsBinaryString(e):n.readAsArrayBuffer(e)}function s(e,t){c(e,function(e){t(p(e))})}function l(e,t){if("undefined"==typeof FileReader)return t((new FileReaderSync).readAsArrayBuffer(e));var r=new FileReader;r.onloadend=function(e){var r=e.target.result||new ArrayBuffer(0);t(r)},r.readAsArrayBuffer(e)}function f(){}Object.defineProperty(t,"__esModule",{value:!0});var d=function(e){return atob(e)},p=function(e){return btoa(e)};t.arrayBufferToBase64=n,t.arrayBufferToBinaryString=r,t.atob=d,t.btoa=p,t.base64StringToBlobOrBuffer=u,t.binaryStringToArrayBuffer=i,t.binaryStringToBlobOrBuffer=a,t.blob=o,t.blobOrBufferToBase64=s,t.readAsArrayBuffer=l,t.readAsBinaryString=c,t.typedBuffer=f},function(e,t,r){(function(e){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(e){return s.btoa(e)}function i(e,t,r,n){(r>0||n<t.byteLength)&&(t=new Uint8Array(t,r,Math.min(n,t.byteLength)-r)),e.append(t)}function a(e,t,r,n){(r>0||n<t.length)&&(t=t.substring(r,n)),e.appendBinary(t)}function u(e,t){function r(){var n=p*c,i=n+c;if(p++,s>p)_(h,e,n,i),f(r);else{_(h,e,n,i);var a=h.end(!0),u=o(a);t(u),h.destroy()}}var n="string"==typeof e,u=n?e.length:e.byteLength,c=Math.min(d,u),s=Math.ceil(u/c),p=0,h=n?new l:new l.ArrayBuffer,_=n?a:i;r()}function c(e){return l.hash(e)}Object.defineProperty(t,"__esModule",{value:!0});var s=r(51),l=n(r(53)),f=e.setImmediate||e.setTimeout,d=32768;t.binaryMd5=u,t.stringMd5=c}).call(t,function(){return this}())},function(e,t,r){!function(t){e.exports=t()}(function(e){"use strict";function t(e,t,r,n,o,i){return t=y(y(t,e),y(n,i)),y(t<<o|t>>>32-o,r)}function r(e,r,n,o,i,a,u){return t(r&n|~r&o,e,r,i,a,u)}function n(e,r,n,o,i,a,u){return t(r&o|n&~o,e,r,i,a,u)}function o(e,r,n,o,i,a,u){return t(r^n^o,e,r,i,a,u)}function i(e,r,n,o,i,a,u){return t(n^(r|~o),e,r,i,a,u)}function a(e,t){var a=e[0],u=e[1],c=e[2],s=e[3];a=r(a,u,c,s,t[0],7,-680876936),s=r(s,a,u,c,t[1],12,-389564586),c=r(c,s,a,u,t[2],17,606105819),u=r(u,c,s,a,t[3],22,-1044525330),a=r(a,u,c,s,t[4],7,-176418897),s=r(s,a,u,c,t[5],12,1200080426),c=r(c,s,a,u,t[6],17,-1473231341),u=r(u,c,s,a,t[7],22,-45705983),a=r(a,u,c,s,t[8],7,1770035416),s=r(s,a,u,c,t[9],12,-1958414417),c=r(c,s,a,u,t[10],17,-42063),u=r(u,c,s,a,t[11],22,-1990404162),a=r(a,u,c,s,t[12],7,1804603682),s=r(s,a,u,c,t[13],12,-40341101),c=r(c,s,a,u,t[14],17,-1502002290),u=r(u,c,s,a,t[15],22,1236535329),a=n(a,u,c,s,t[1],5,-165796510),s=n(s,a,u,c,t[6],9,-1069501632),c=n(c,s,a,u,t[11],14,643717713),u=n(u,c,s,a,t[0],20,-373897302),a=n(a,u,c,s,t[5],5,-701558691),s=n(s,a,u,c,t[10],9,38016083),c=n(c,s,a,u,t[15],14,-660478335),u=n(u,c,s,a,t[4],20,-405537848),a=n(a,u,c,s,t[9],5,568446438),s=n(s,a,u,c,t[14],9,-1019803690),c=n(c,s,a,u,t[3],14,-187363961),u=n(u,c,s,a,t[8],20,1163531501),a=n(a,u,c,s,t[13],5,-1444681467),s=n(s,a,u,c,t[2],9,-51403784),c=n(c,s,a,u,t[7],14,1735328473),u=n(u,c,s,a,t[12],20,-1926607734),a=o(a,u,c,s,t[5],4,-378558),s=o(s,a,u,c,t[8],11,-2022574463),c=o(c,s,a,u,t[11],16,1839030562),u=o(u,c,s,a,t[14],23,-35309556),a=o(a,u,c,s,t[1],4,-1530992060),s=o(s,a,u,c,t[4],11,1272893353),c=o(c,s,a,u,t[7],16,-155497632),u=o(u,c,s,a,t[10],23,-1094730640),a=o(a,u,c,s,t[13],4,681279174),s=o(s,a,u,c,t[0],11,-358537222),c=o(c,s,a,u,t[3],16,-722521979),u=o(u,c,s,a,t[6],23,76029189),a=o(a,u,c,s,t[9],4,-640364487),s=o(s,a,u,c,t[12],11,-421815835),c=o(c,s,a,u,t[15],16,530742520),u=o(u,c,s,a,t[2],23,-995338651),a=i(a,u,c,s,t[0],6,-198630844),s=i(s,a,u,c,t[7],10,1126891415),c=i(c,s,a,u,t[14],15,-1416354905),u=i(u,c,s,a,t[5],21,-57434055),a=i(a,u,c,s,t[12],6,1700485571),s=i(s,a,u,c,t[3],10,-1894986606),c=i(c,s,a,u,t[10],15,-1051523),u=i(u,c,s,a,t[1],21,-2054922799),a=i(a,u,c,s,t[8],6,1873313359),s=i(s,a,u,c,t[15],10,-30611744),c=i(c,s,a,u,t[6],15,-1560198380),u=i(u,c,s,a,t[13],21,1309151649),a=i(a,u,c,s,t[4],6,-145523070),s=i(s,a,u,c,t[11],10,-1120210379),c=i(c,s,a,u,t[2],15,718787259),u=i(u,c,s,a,t[9],21,-343485551),e[0]=y(a,e[0]),e[1]=y(u,e[1]),e[2]=y(c,e[2]),e[3]=y(s,e[3])}function u(e){var t,r=[];for(t=0;64>t;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}function c(e){var t,r=[];for(t=0;64>t;t+=4)r[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return r}function s(e){var t,r,n,o,i,c,s=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;s>=t;t+=64)a(l,u(e.substring(t-64,t)));for(e=e.substring(t-64),r=e.length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;r>t;t+=1)n[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(a(l,n),t=0;16>t;t+=1)n[t]=0;return o=8*s,o=o.toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(o[2],16),c=parseInt(o[1],16)||0,n[14]=i,n[15]=c,a(l,n),l}function l(e){var t,r,n,o,i,u,s=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;s>=t;t+=64)a(l,c(e.subarray(t-64,t)));for(e=s>t-64?e.subarray(t-64):new Uint8Array(0),r=e.length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;r>t;t+=1)n[t>>2]|=e[t]<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(a(l,n),t=0;16>t;t+=1)n[t]=0;return o=8*s,o=o.toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(o[2],16),u=parseInt(o[1],16)||0,n[14]=i,n[15]=u,a(l,n),l}function f(e){var t,r="";for(t=0;4>t;t+=1)r+=b[e>>8*t+4&15]+b[e>>8*t&15];return r}function d(e){var t;for(t=0;t<e.length;t+=1)e[t]=f(e[t]);return e.join("")}function p(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function h(e,t){var r,n=e.length,o=new ArrayBuffer(n),i=new Uint8Array(o);for(r=0;n>r;r+=1)i[r]=e.charCodeAt(r);return t?i:o}function _(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function v(e,t,r){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e)),n.set(new Uint8Array(t),e.byteLength),r?n:n.buffer}function m(e){var t,r=[],n=e.length;for(t=0;n-1>t;t+=2)r.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,r)}function g(){this.reset()}var y=function(e,t){return e+t&4294967295},b=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return"5d41402abc4b2a76b9719d911017c592"!==d(s("hello"))&&(y=function(e,t){var r=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(r>>16);return n<<16|65535&r}),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||!function(){function t(e,t){return e=0|e||0,0>e?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(r,n){var o,i,a,u,c=this.byteLength,s=t(r,c),l=c;return n!==e&&(l=t(n,c)),s>l?new ArrayBuffer(0):(o=l-s,i=new ArrayBuffer(o),a=new Uint8Array(i),u=new Uint8Array(this,s,o),a.set(u),i)}}(),g.prototype.append=function(e){return this.appendBinary(p(e)),this},g.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,r=this._buff.length;for(t=64;r>=t;t+=64)a(this._hash,u(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},g.prototype.end=function(e){var t,r,n=this._buff,o=n.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;o>t;t+=1)i[t>>2]|=n.charCodeAt(t)<<(t%4<<3);return this._finish(i,o),r=d(this._hash),e&&(r=m(r)),this.reset(),r},g.prototype.reset=function(){
return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},g.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},g.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},g.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},g.prototype._finish=function(e,t){var r,n,o,i=t;if(e[i>>2]|=128<<(i%4<<3),i>55)for(a(this._hash,e),i=0;16>i;i+=1)e[i]=0;r=8*this._length,r=r.toString(16).match(/(.*?)(.{0,8})$/),n=parseInt(r[2],16),o=parseInt(r[1],16)||0,e[14]=n,e[15]=o,a(this._hash,e)},g.hash=function(e,t){return g.hashBinary(p(e),t)},g.hashBinary=function(e,t){var r=s(e),n=d(r);return t?m(n):n},g.ArrayBuffer=function(){this.reset()},g.ArrayBuffer.prototype.append=function(e){var t,r=v(this._buff.buffer,e,!0),n=r.length;for(this._length+=e.byteLength,t=64;n>=t;t+=64)a(this._hash,c(r.subarray(t-64,t)));return this._buff=n>t-64?new Uint8Array(r.buffer.slice(t-64)):new Uint8Array(0),this},g.ArrayBuffer.prototype.end=function(e){var t,r,n=this._buff,o=n.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;o>t;t+=1)i[t>>2]|=n[t]<<(t%4<<3);return this._finish(i,o),r=d(this._hash),e&&(r=m(r)),this.reset(),r},g.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},g.ArrayBuffer.prototype.getState=function(){var e=g.prototype.getState.call(this);return e.buff=_(e.buff),e},g.ArrayBuffer.prototype.setState=function(e){return e.buff=h(e.buff,!0),g.prototype.setState.call(this,e)},g.ArrayBuffer.prototype.destroy=g.prototype.destroy,g.ArrayBuffer.prototype._finish=g.prototype._finish,g.ArrayBuffer.hash=function(e,t){var r=l(new Uint8Array(e)),n=d(r);return t?m(n):n},g})},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(e){try{return JSON.parse(e)}catch(t){return u.parse(e)}}function i(e){return e.length<5e4?JSON.parse(e):o(e)}function a(e){try{return JSON.stringify(e)}catch(t){return u.stringify(e)}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(r(55));t.safeJsonParse=i,t.safeJsonStringify=a},function(e,t){"use strict";function r(e,t,r){var n=r[r.length-1];e===n.element&&(r.pop(),n=r[r.length-1]);var o=n.element,i=n.index;if(Array.isArray(o))o.push(e);else if(i===t.length-2){var a=t.pop();o[a]=e}else t.push(e)}t.stringify=function(e){var t=[];t.push({obj:e});for(var r,n,o,i,a,u,c,s,l,f,d,p="";r=t.pop();)if(n=r.obj,o=r.prefix||"",i=r.val||"",p+=o,i)p+=i;else if("object"!=typeof n)p+="undefined"==typeof n?null:JSON.stringify(n);else if(null===n)p+="null";else if(Array.isArray(n)){for(t.push({val:"]"}),a=n.length-1;a>=0;a--)u=0===a?"":",",t.push({obj:n[a],prefix:u});t.push({val:"["})}else{c=[];for(s in n)n.hasOwnProperty(s)&&c.push(s);for(t.push({val:"}"}),a=c.length-1;a>=0;a--)l=c[a],f=n[l],d=a>0?",":"",d+=JSON.stringify(l)+":",t.push({obj:f,prefix:d});t.push({val:"{"})}return p},t.parse=function(e){for(var t,n,o,i,a,u,c,s,l,f=[],d=[],p=0;;)if(t=e[p++],"}"!==t&&"]"!==t&&"undefined"!=typeof t)switch(t){case" ":case"	":case"\n":case":":case",":break;case"n":p+=3,r(null,f,d);break;case"t":p+=3,r(!0,f,d);break;case"f":p+=4,r(!1,f,d);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(n="",p--;;){if(o=e[p++],!/[\d\.\-e\+]/.test(o)){p--;break}n+=o}r(parseFloat(n),f,d);break;case'"':for(i="",a=void 0,u=0;;){if(c=e[p++],'"'===c&&("\\"!==a||u%2!==1))break;i+=c,a=c,"\\"===a?u++:u=0}r(JSON.parse('"'+i+'"'),f,d);break;case"[":s={element:[],index:f.length},f.push(s.element),d.push(s);break;case"{":l={element:{},index:f.length},f.push(l.element),d.push(l);break;default:throw new Error("unexpectedly reached end of input: "+t)}else{if(1===f.length)return f.pop();r(f.pop(),f,d)}}},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(){try{return openDatabase("_pouch_validate_websql",1,"",1),!0}catch(e){return!1}}function i(){if("undefined"==typeof indexedDB||null===indexedDB||!/iP(hone|od|ad)/.test(navigator.userAgent))return!0;var e=d.hasLocalStorage(),t="_pouch__websqldb_valid_"+navigator.userAgent;if(e&&localStorage[t])return"1"===localStorage[t];var r=o();return e&&(localStorage[t]=r?"1":"0"),r}function a(){return"undefined"!=typeof SQLitePlugin?!0:"undefined"==typeof openDatabase?!1:i()}function u(e){return function(t,r,n,o){if("undefined"!=typeof sqlitePlugin){var i=f.extend({},e,{name:t,version:r,description:n,size:o});return sqlitePlugin.openDatabase(i)}return openDatabase(t,r,n,o)}}function c(e,t){var r=u(e),n=f.extend({websql:r},e);l.call(this,n,t)}function s(e){e.adapter("websql",c,!0)}var l=n(r(57)),f=r(37),d=r(45);c.valid=a,c.use_prefix=!0,e.exports=s},function(e,t,r){"use strict";function n(e){return decodeURIComponent(escape(e))}function o(e){return 65>e?e-48:e-55}function i(e,t,r){for(var n="";r>t;)n+=String.fromCharCode(o(e.charCodeAt(t++))<<4|o(e.charCodeAt(t++)));return n}function a(e,t,r){for(var n="";r>t;)n+=String.fromCharCode(o(e.charCodeAt(t+2))<<12|o(e.charCodeAt(t+3))<<8|o(e.charCodeAt(t))<<4|o(e.charCodeAt(t+1))),t+=4;return n}function u(e,t){return"UTF-8"===t?n(i(e,0,e.length)):a(e,0,e.length)}function c(e){return"'"+e+"'"}function s(e){return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"")}function l(e){return e.replace(/\u0001\u0001/g,"\x00").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,"")}function f(e){return delete e._id,delete e._rev,JSON.stringify(e)}function d(e,t,r){return e=JSON.parse(e),e._id=t,e._rev=r,e}function p(e){for(var t="(";e--;)t+="?",e&&(t+=",");return t+")"}function h(e,t,r,n,o){return"SELECT "+e+" FROM "+("string"==typeof t?t:t.join(" JOIN "))+(r?" ON "+r:"")+(n?" WHERE "+("string"==typeof n?n:n.join(" AND ")):"")+(o?" ORDER BY "+o:"")}function _(e,t,r){function n(){++i===e.length&&o()}function o(){if(a.length){var e="SELECT DISTINCT digest AS digest FROM "+M+" WHERE seq IN "+p(a.length);r.executeSql(e,a,function(e,t){for(var r=[],n=0;n<t.rows.length;n++)r.push(t.rows.item(n).digest);if(r.length){var o="DELETE FROM "+M+" WHERE seq IN ("+a.map(function(){return"?"}).join(",")+")";e.executeSql(o,a,function(e){var t="SELECT digest FROM "+M+" WHERE digest IN ("+r.map(function(){return"?"}).join(",")+")";e.executeSql(t,r,function(e,t){for(var n=new C.Set,o=0;o<t.rows.length;o++)n.add(t.rows.item(o).digest);r.forEach(function(t){n.has(t)||(e.executeSql("DELETE FROM "+M+" WHERE digest=?",[t]),e.executeSql("DELETE FROM "+D+" WHERE digest=?",[t]))})})})}})}}if(e.length){var i=0,a=[];e.forEach(function(e){var o="SELECT seq FROM "+j+" WHERE doc_id=? AND rev=?";r.executeSql(o,[t,e],function(e,t){if(!t.rows.length)return n();var r=t.rows.item(0).seq;a.push(r),e.executeSql("DELETE FROM "+j+" WHERE seq=?",[r],n)})})}}function v(e){return function(t){E.guardedConsole("error","WebSQL threw an error",t);var r=t&&t.constructor.toString().match(/function ([^\(]+)/),n=r&&r[1]||t.type,o=t.target||t.message;e(q.createError(q.WSQ_ERROR,o,n))}}function m(e){if("size"in e)return 1e6*e.size;var t="undefined"!=typeof navigator&&/Android/.test(navigator.userAgent);return t?5e6:1}function g(e,t,r,n,o,i,a){function u(){return S?a(S):(i.notify(n._name),n._docCount=-1,void a(null,E))}function c(e,t){var r="SELECT count(*) as cnt FROM "+D+" WHERE digest=?";k.executeSql(r,[e],function(r,n){if(0===n.rows.item(0).cnt){var o=q.createError(q.MISSING_STUB,"unknown stub attachment with digest "+e);t(o)}else t()})}function l(e){function t(){++o===r.length&&e(n)}var r=[];if(w.forEach(function(e){e.data&&e.data._attachments&&Object.keys(e.data._attachments).forEach(function(t){var n=e.data._attachments[t];n.stub&&r.push(n.digest)})}),!r.length)return e();var n,o=0;r.forEach(function(e){c(e,function(e){e&&!n&&(n=e),t()})})}function d(e,t,r,o,i,a,u,c){function s(){function t(e,t){function n(){return++i===a.length&&t(),!1}function o(t){var o="INSERT INTO "+M+" (digest, seq) VALUES (?,?)",i=[r._attachments[t].digest,e];k.executeSql(o,i,n,n)}var i=0,a=Object.keys(r._attachments||{});if(!a.length)return t();for(var u=0;u<a.length;u++)o(a[u])}var r=e.data,n=o?1:0,i=r._id,a=r._rev,u=f(r),c="INSERT INTO "+j+" (doc_id, rev, json, deleted) VALUES (?, ?, ?, ?);",s=[i,a,u,n];k.executeSql(c,s,function(e,r){var n=r.insertId;t(n,function(){p(e,n)})},function(){var e=h("seq",j,null,"doc_id=? AND rev=?");return k.executeSql(e,[i,a],function(e,r){var o=r.rows.item(0).seq,c="UPDATE "+j+" SET json=?, deleted=? WHERE doc_id=? AND rev=?;",s=[u,n,i,a];e.executeSql(c,s,function(e){t(o,function(){p(e,o)})})}),!1})}function l(e){v||(e?(v=e,c(v)):m===y.length&&s())}function d(e){m++,l(e)}function p(r,o){var a=e.metadata.id,s=e.stemmedRevs||[];i&&n.auto_compaction&&(s=T.compactTree(e.metadata).concat(s)),s.length&&_(s,a,r),e.metadata.seq=o,delete e.metadata.rev;var l=i?"UPDATE "+I+" SET json=?, max_seq=?, winningseq=(SELECT seq FROM "+j+" WHERE doc_id="+I+".id AND rev=?) WHERE id=?":"INSERT INTO "+I+" (id, winningseq, max_seq, json) VALUES (?,?,?,?);",f=O.safeJsonStringify(e.metadata),d=i?[f,o,t,a]:[a,o,o,f];r.executeSql(l,d,function(){E[u]={ok:!0,id:e.metadata.id,rev:t},R.set(a,e.metadata),c()})}var v=null,m=0;e.data._id=e.metadata.id,e.data._rev=e.metadata.rev;var y=Object.keys(e.data._attachments||{});o&&(e.data._deleted=!0),y.forEach(function(r){var n=e.data._attachments[r];if(n.stub)m++,l();else{var o=n.data;delete n.data,n.revpos=parseInt(t,10);var i=n.digest;g(i,o,d)}}),y.length||s()}function p(){x.processDocs(e.revs_limit,w,n,R,k,E,d,r)}function m(e){function t(){++r===w.length&&e()}if(!w.length)return e();var r=0;w.forEach(function(e){if(e._id&&x.isLocalId(e._id))return t();var r=e.metadata.id;k.executeSql("SELECT json FROM "+I+" WHERE id = ?",[r],function(e,n){if(n.rows.length){var o=O.safeJsonParse(n.rows.item(0).json);R.set(r,o)}t()})})}function g(e,t,r){var n="SELECT digest FROM "+D+" WHERE digest=?";k.executeSql(n,[e],function(o,i){return i.rows.length?r():(n="INSERT INTO "+D+" (digest, body, escaped) VALUES (?,?,1)",void o.executeSql(n,[e,s(t)],function(){r()},function(){return r(),!1}))})}var y=r.new_edits,b=t.docs,w=b.map(function(e){if(e._id&&x.isLocalId(e._id))return e;var t=x.parseDoc(e,y);return t}),A=w.filter(function(e){return e.error});if(A.length)return a(A[0]);var k,S,E=new Array(w.length),R=new C.Map;x.preprocessAttachments(w,"binary",function(e){return e?a(e):void o.transaction(function(e){k=e,l(function(e){e?S=e:m(p)})},v(a),u)})}function y(e){return e.websql(e.name,e.version,e.description,e.size)}function b(e){try{return{db:y(e)}}catch(t){return{error:t}}}function w(e){var t=P.get(e.name);return t||(t=b(e),P.set(e.name,t),t.db&&(t.db._sqlitePlugin="undefined"!=typeof sqlitePlugin)),t}function A(e,t,r,n,o){function i(){++c===u.length&&o&&o()}function a(e,o){var a=e._attachments[o],u={binary:t.binary,ctx:n};r._getAttachment(e._id,o,a,u,function(t,r){e._attachments[o]=S.extend(E.pick(a,["digest","content_type"]),{data:r}),i()})}var u=Object.keys(e._attachments||{});if(!u.length)return o&&o();var c=0;u.forEach(function(r){t.attachments&&t.include_docs?a(e,r):(e._attachments[r].stub=!0,i())})}function k(e,t){function r(){E.hasLocalStorage()&&(window.localStorage["_pouch__websqldb_"+Q._name]=!0),t(null,Q)}function n(e,t){e.executeSql(W),e.executeSql("ALTER TABLE "+j+" ADD COLUMN deleted TINYINT(1) DEFAULT 0",[],function(){e.executeSql(J),e.executeSql("ALTER TABLE "+I+" ADD COLUMN local TINYINT(1) DEFAULT 0",[],function(){e.executeSql("CREATE INDEX IF NOT EXISTS 'doc-store-local-idx' ON "+I+" (local, id)");var r="SELECT "+I+".winningseq AS seq, "+I+".json AS metadata FROM "+j+" JOIN "+I+" ON "+j+".seq = "+I+".winningseq";e.executeSql(r,[],function(e,r){for(var n=[],o=[],i=0;i<r.rows.length;i++){var a=r.rows.item(i),u=a.seq,c=JSON.parse(a.metadata);x.isDeleted(c)&&n.push(u),x.isLocalId(c.id)&&o.push(c.id)}e.executeSql("UPDATE "+I+"SET local = 1 WHERE id IN "+p(o.length),o,function(){e.executeSql("UPDATE "+j+" SET deleted = 1 WHERE seq IN "+p(n.length),n,t)})})})})}function o(e,t){var r="CREATE TABLE IF NOT EXISTS "+L+" (id UNIQUE, rev, json)";e.executeSql(r,[],function(){var r="SELECT "+I+".id AS id, "+j+".json AS data FROM "+j+" JOIN "+I+" ON "+j+".seq = "+I+".winningseq WHERE local = 1";e.executeSql(r,[],function(e,r){function n(){if(!o.length)return t(e);var r=o.shift(),i=JSON.parse(r.data)._rev;e.executeSql("INSERT INTO "+L+" (id, rev, json) VALUES (?,?,?)",[r.id,i,r.data],function(e){e.executeSql("DELETE FROM "+I+" WHERE id=?",[r.id],function(e){e.executeSql("DELETE FROM "+j+" WHERE seq=?",[r.seq],function(){n()})})})}for(var o=[],i=0;i<r.rows.length;i++)o.push(r.rows.item(i));n()})})}function i(e,t){function r(r){function n(){if(!r.length)return t(e);var o=r.shift(),i=u(o.hex,X),a=i.lastIndexOf("::"),c=i.substring(0,a),s=i.substring(a+2),l="UPDATE "+j+" SET doc_id=?, rev=? WHERE doc_id_rev=?";e.executeSql(l,[c,s,i],function(){n()})}n()}var n="ALTER TABLE "+j+" ADD COLUMN doc_id";e.executeSql(n,[],function(e){var t="ALTER TABLE "+j+" ADD COLUMN rev";e.executeSql(t,[],function(e){e.executeSql(H,[],function(e){var t="SELECT hex(doc_id_rev) as hex FROM "+j;e.executeSql(t,[],function(e,t){for(var n=[],o=0;o<t.rows.length;o++)n.push(t.rows.item(o));r(n)})})})})}function a(e,t){function r(e){var r="SELECT COUNT(*) AS cnt FROM "+D;e.executeSql(r,[],function(e,r){function n(){var r=h(K+", "+I+".id AS id",[I,j],G,null,I+".id ");r+=" LIMIT "+a+" OFFSET "+i,i+=a,e.executeSql(r,[],function(e,r){function o(e,t){var r=i[e]=i[e]||[];-1===r.indexOf(t)&&r.push(t)}if(!r.rows.length)return t(e);for(var i={},a=0;a<r.rows.length;a++)for(var u=r.rows.item(a),c=d(u.data,u.id,u.rev),s=Object.keys(c._attachments||{}),l=0;l<s.length;l++){var f=c._attachments[s[l]];o(f.digest,u.seq)}var p=[];if(Object.keys(i).forEach(function(e){var t=i[e];t.forEach(function(t){p.push([e,t])})}),!p.length)return n();var h=0;p.forEach(function(t){var r="INSERT INTO "+M+" (digest, seq) VALUES (?,?)";e.executeSql(r,t,function(){++h===p.length&&n()})})})}var o=r.rows.item(0).cnt;if(!o)return t(e);var i=0,a=10;n()})}var n="CREATE TABLE IF NOT EXISTS "+M+" (digest, seq INTEGER)";e.executeSql(n,[],function(e){e.executeSql(V,[],function(e){e.executeSql(z,[],r)})})}function c(e,t){var r="ALTER TABLE "+D+" ADD COLUMN escaped TINYINT(1) DEFAULT 0";e.executeSql(r,[],t)}function s(e,t){var r="ALTER TABLE "+I+" ADD COLUMN max_seq INTEGER";e.executeSql(r,[],function(e){var r="UPDATE "+I+" SET max_seq=(SELECT MAX(seq) FROM "+j+" WHERE doc_id=id)";e.executeSql(r,[],function(e){var r="CREATE UNIQUE INDEX IF NOT EXISTS 'doc-max-seq-idx' ON "+I+" (max_seq)";e.executeSql(r,[],t)})})}function y(e,t){e.executeSql('SELECT HEX("a") AS hex',[],function(e,r){var n=r.rows.item(0).hex;X=2===n.length?"UTF-8":"UTF-16",t()})}function b(){for(;ee.length>0;){var e=ee.pop();e(null,Y)}}function k(e,t){if(0===t){var r="CREATE TABLE IF NOT EXISTS "+B+" (dbid, db_version INTEGER)",u="CREATE TABLE IF NOT EXISTS "+D+" (digest UNIQUE, escaped TINYINT(1), body BLOB)",l="CREATE TABLE IF NOT EXISTS "+M+" (digest, seq INTEGER)",f="CREATE TABLE IF NOT EXISTS "+I+" (id unique, json, winningseq, max_seq INTEGER UNIQUE)",d="CREATE TABLE IF NOT EXISTS "+j+" (seq INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, json, deleted TINYINT(1), doc_id, rev)",p="CREATE TABLE IF NOT EXISTS "+L+" (id UNIQUE, rev, json)";e.executeSql(u),e.executeSql(p),e.executeSql(l,[],function(){e.executeSql(z),e.executeSql(V)}),e.executeSql(f,[],function(){e.executeSql(W),e.executeSql(d,[],function(){e.executeSql(J),e.executeSql(H),e.executeSql(r,[],function(){var t="INSERT INTO "+B+" (db_version, dbid) VALUES (?,?)";Y=E.uuid();var r=[N,Y];e.executeSql(t,r,function(){b()})})})})}else{var h=function(){var r=N>t;r&&e.executeSql("UPDATE "+B+" SET db_version = "+N);var n="SELECT dbid FROM "+B;e.executeSql(n,[],function(e,t){Y=t.rows.item(0).dbid,b()})},_=[n,o,i,a,c,s,h],v=t,m=function(e){_[v-1](e,m),v++};m(e)}}function C(){ne.transaction(function(e){y(e,function(){P(e)})},v(t),r)}function P(e){var t="SELECT sql FROM sqlite_master WHERE tbl_name = "+B;e.executeSql(t,[],function(e,t){t.rows.length?/db_version/.test(t.rows.item(0).sql)?e.executeSql("SELECT db_version FROM "+B,[],function(e,t){var r=t.rows.item(0).db_version;k(e,r)}):e.executeSql("ALTER TABLE "+B+" ADD COLUMN db_version INTEGER",[],function(){k(e,1)}):k(e,0)})}function $(e,t){if(-1!==Q._docCount)return t(Q._docCount);var r=h("COUNT("+I+".id) AS 'num'",[I,j],G,j+".deleted=0");e.executeSql(r,[],function(e,r){Q._docCount=r.rows.item(0).num,t(Q._docCount)})}var X,Q=this,Y=null,Z=m(e),ee=[];Q._docCount=-1,Q._name=e.name;var te=S.extend({},e,{version:U,description:e.name,size:Z}),re=w(te);if(re.error)return v(t)(re.error);var ne=re.db;"function"!=typeof ne.readTransaction&&(ne.readTransaction=ne.transaction),C(),Q.type=function(){return"websql"},Q._id=E.toPromise(function(e){e(null,Y)}),Q._info=function(e){ne.readTransaction(function(t){$(t,function(r){var n="SELECT MAX(seq) AS seq FROM "+j;t.executeSql(n,[],function(t,n){var o=n.rows.item(0).seq||0;e(null,{doc_count:r,update_seq:o,sqlite_plugin:ne._sqlitePlugin,websql_encoding:X})})})},v(e))},Q._bulkDocs=function(t,r,n){g(e,t,r,Q,ne,F,n)},Q._get=function(e,t,r){function n(){r(a,{doc:o,metadata:i,ctx:u})}var o,i,a,u=t.ctx;if(!u)return ne.readTransaction(function(n){Q._get(e,S.extend({ctx:n},t),r)});var c,s;t.rev?(c=h(K,[I,j],I+".id="+j+".doc_id",[j+".doc_id=?",j+".rev=?"]),s=[e,t.rev]):(c=h(K,[I,j],G,I+".id=?"),s=[e]),u.executeSql(c,s,function(e,r){if(!r.rows.length)return a=q.createError(q.MISSING_DOC,"missing"),n();var u=r.rows.item(0);return i=O.safeJsonParse(u.metadata),u.deleted&&!t.rev?(a=q.createError(q.MISSING_DOC,"deleted"),n()):(o=d(u.data,i.id,u.rev),void n())})},Q._allDocs=function(e,t){var r,n=[],o="startkey"in e?e.startkey:!1,i="endkey"in e?e.endkey:!1,a="key"in e?e.key:!1,u="descending"in e?e.descending:!1,c="limit"in e?e.limit:-1,s="skip"in e?e.skip:0,l=e.inclusive_end!==!1,f=[],p=[];if(a!==!1)p.push(I+".id = ?"),f.push(a);else if(o!==!1||i!==!1){if(o!==!1&&(p.push(I+".id "+(u?"<=":">=")+" ?"),f.push(o)),i!==!1){var _=u?">":"<";l&&(_+="="),p.push(I+".id "+_+" ?"),f.push(i)}a!==!1&&(p.push(I+".id = ?"),f.push(a))}"ok"!==e.deleted&&p.push(j+".deleted = 0"),ne.readTransaction(function(t){$(t,function(o){if(r=o,0!==c){var i=h(K,[I,j],G,p,I+".id "+(u?"DESC":"ASC"));i+=" LIMIT "+c+" OFFSET "+s,t.executeSql(i,f,function(t,r){for(var o=0,i=r.rows.length;i>o;o++){var a=r.rows.item(o),u=O.safeJsonParse(a.metadata),c=u.id,s=d(a.data,c,a.rev),l=s._rev,f={id:c,key:c,value:{rev:l}};if(e.include_docs&&(f.doc=s,f.doc._rev=l,e.conflicts&&(f.doc._conflicts=T.collectConflicts(u)),A(f.doc,e,Q,t)),a.deleted){if("ok"!==e.deleted)continue;f.value.deleted=!0,f.doc=null}n.push(f)}})}})},v(t),function(){t(null,{total_rows:r,offset:e.skip,rows:n})})},Q._changes=function(e){function t(){var t=I+".json AS metadata, "+I+".max_seq AS maxSeq, "+j+".json AS winningDoc, "+j+".rev AS winningRev ",r=I+" JOIN "+j,c=I+".id="+j+".doc_id AND "+I+".winningseq="+j+".seq",s=["maxSeq > ?"],l=[e.since];e.doc_ids&&(s.push(I+".id IN "+p(e.doc_ids.length)),l=l.concat(e.doc_ids));var f="maxSeq "+(n?"DESC":"ASC"),_=h(t,r,c,s,f),m=E.filterChange(e);e.view||e.filter||(_+=" LIMIT "+o);var g=e.since||0;ne.readTransaction(function(t){t.executeSql(_,l,function(t,r){function n(t){return function(){e.onChange(t)}}for(var c=0,s=r.rows.length;s>c;c++){var l=r.rows.item(c),f=O.safeJsonParse(l.metadata);g=l.maxSeq;var p=d(l.winningDoc,f.id,l.winningRev),h=e.processChange(p,f,e);h.seq=l.maxSeq;var _=m(h);if("object"==typeof _)return e.complete(_);if(_&&(u++,i&&a.push(h),e.attachments&&e.include_docs?A(p,e,Q,t,n(h)):n(h)()),u===o)break}})},v(e.complete),function(){e.continuous||e.complete(null,{results:a,last_seq:g})})}if(e=E.clone(e),e.continuous){var r=Q._name+":"+E.uuid();return F.addListener(Q._name,r,Q,e),F.notify(Q._name),{cancel:function(){F.removeListener(Q._name,r)}}}var n=e.descending;e.since=e.since&&!n?e.since:0;var o="limit"in e?e.limit:-1;0===o&&(o=1);var i;i="return_docs"in e?e.return_docs:"returnDocs"in e?e.returnDocs:!0;var a=[],u=0;t()},Q._close=function(e){e()},Q._getAttachment=function(e,t,r,n,o){var i,a=n.ctx,c=r.digest,s=r.content_type,f="SELECT escaped, CASE WHEN escaped = 1 THEN body ELSE HEX(body) END AS body FROM "+D+" WHERE digest=?";a.executeSql(f,[c],function(e,t){var r=t.rows.item(0),a=r.escaped?l(r.body):u(r.body,X);i=n.binary?R.binaryStringToBlobOrBuffer(a,s):R.btoa(a),o(null,i)})},Q._getRevisionTree=function(e,t){ne.readTransaction(function(r){var n="SELECT json AS metadata FROM "+I+" WHERE id = ?";r.executeSql(n,[e],function(e,r){if(r.rows.length){var n=O.safeJsonParse(r.rows.item(0).metadata);t(null,n.rev_tree)}else t(q.createError(q.MISSING_DOC))})})},Q._doCompaction=function(e,t,r){return t.length?void ne.transaction(function(r){var n="SELECT json AS metadata FROM "+I+" WHERE id = ?";r.executeSql(n,[e],function(r,n){var o=O.safeJsonParse(n.rows.item(0).metadata);T.traverseRevTree(o.rev_tree,function(e,r,n,o,i){var a=r+"-"+n;-1!==t.indexOf(a)&&(i.status="missing")});var i="UPDATE "+I+" SET json = ? WHERE id = ?";r.executeSql(i,[O.safeJsonStringify(o),e])}),_(t,e,r)},v(r),function(){r()}):r()},Q._getLocal=function(e,t){ne.readTransaction(function(r){var n="SELECT json, rev FROM "+L+" WHERE id=?";r.executeSql(n,[e],function(r,n){if(n.rows.length){var o=n.rows.item(0),i=d(o.json,e,o.rev);t(null,i)}else t(q.createError(q.MISSING_DOC))})})},Q._putLocal=function(e,t,r){function n(e){var n,s;i?(n="UPDATE "+L+" SET rev=?, json=? WHERE id=? AND rev=?",s=[o,c,a,i]):(n="INSERT INTO "+L+" (id, rev, json) VALUES (?,?,?)",s=[a,o,c]),e.executeSql(n,s,function(e,n){n.rowsAffected?(u={ok:!0,id:a,rev:o},t.ctx&&r(null,u)):r(q.createError(q.REV_CONFLICT))},function(){return r(q.createError(q.REV_CONFLICT)),!1})}"function"==typeof t&&(r=t,t={}),delete e._revisions;var o,i=e._rev,a=e._id;o=i?e._rev="0-"+(parseInt(i.split("-")[1],10)+1):e._rev="0-1";var u,c=f(e);t.ctx?n(t.ctx):ne.transaction(n,v(r),function(){u&&r(null,u)})},Q._removeLocal=function(e,t,r){function n(n){var i="DELETE FROM "+L+" WHERE id=? AND rev=?",a=[e._id,e._rev];n.executeSql(i,a,function(n,i){return i.rowsAffected?(o={ok:!0,id:e._id,rev:"0-0"},void(t.ctx&&r(null,o))):r(q.createError(q.MISSING_DOC))})}"function"==typeof t&&(r=t,t={});var o;t.ctx?n(t.ctx):ne.transaction(n,v(r),function(){o&&r(null,o)})},Q._destroy=function(e,t){F.removeAllListeners(Q._name),ne.transaction(function(e){var t=[I,j,D,B,L,M];t.forEach(function(t){e.executeSql("DROP TABLE IF EXISTS "+t,[])})},v(t),function(){E.hasLocalStorage()&&(delete window.localStorage["_pouch__websqldb_"+Q._name],delete window.localStorage[Q._name]),t(null,{ok:!0})})}}var S=r(37),E=r(45),x=r(50),T=r(47),O=r(54),R=r(51),C=r(42),q=r(46),N=7,I=c("document-store"),j=c("by-sequence"),D=c("attach-store"),L=c("local-store"),B=c("metadata-store"),M=c("attach-seq-store"),P=new C.Map,F=new E.changesHandler,U=1,J="CREATE INDEX IF NOT EXISTS 'by-seq-deleted-idx' ON "+j+" (seq, deleted)",H="CREATE UNIQUE INDEX IF NOT EXISTS 'by-seq-doc-id-rev' ON "+j+" (doc_id, rev)",W="CREATE INDEX IF NOT EXISTS 'doc-winningseq-idx' ON "+I+" (winningseq)",z="CREATE INDEX IF NOT EXISTS 'attach-seq-seq-idx' ON "+M+" (seq)",V="CREATE UNIQUE INDEX IF NOT EXISTS 'attach-seq-digest-idx' ON "+M+" (digest, seq)",G=j+".seq = "+I+".winningseq",K=j+".seq AS seq, "+j+".deleted AS deleted, "+j+".json AS data, "+j+".rev AS rev, "+I+".json AS metadata";e.exports=k},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(e){var t=e.doc&&e.doc._attachments;t&&Object.keys(t).forEach(function(e){var r=t[e];r.data=g.base64StringToBlobOrBuffer(r.data,r.content_type)})}function i(e){return/^_design/.test(e)?"_design/"+encodeURIComponent(e.slice(8)):/^_local/.test(e)?"_local/"+encodeURIComponent(e.slice(7)):encodeURIComponent(e)}function a(e){return e._attachments&&Object.keys(e._attachments)?h.all(Object.keys(e._attachments).map(function(t){var r=e._attachments[t];return r.data&&"string"!=typeof r.data?new h(function(e){g.blobOrBufferToBase64(r.data,e)}).then(function(e){r.data=e}):void 0})):h.resolve()}function u(e){var t=m.parseUri(e);(t.user||t.password)&&(t.auth={username:t.user,password:t.password});var r=t.path.replace(/(^\/|\/$)/g,"").split("/");return t.db=r.pop(),-1===t.db.indexOf("%")&&(t.db=encodeURIComponent(t.db)),t.path=r.join("/"),t}function c(e,t){return s(e,e.db+"/"+t)}function s(e,t){var r=e.path?"/":"";return e.protocol+"://"+e.host+(e.port?":"+e.port:"")+"/"+e.path+r+t}function l(e){return"?"+Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&")}function f(e,t){function r(e,t,r){var n=e.ajax||{},o=p.extend(m.clone(C),n,t);return E(o.method+" "+o.url),x._ajax(o,r)}function n(e,t){return new h(function(n,o){r(e,t,function(e,t){return e?o(e):void n(t)})})}function f(e,t){return m.adapterFun(e,v(function(e){d().then(function(){return t.apply(this,e)})["catch"](function(t){var r=e.pop();r(t)})}))}function d(){if(e.skipSetup||e.skip_setup)return h.resolve();if(j)return j;var t={method:"GET",url:R};return j=n({},t)["catch"](function(e){return e&&e.status&&404===e.status?(m.explainError(404,"PouchDB is just detecting if the remote exists."),n({},{method:"PUT",url:R})):h.reject(e)})["catch"](function(e){return e&&e.status&&412===e.status?!0:h.reject(e)}),j["catch"](function(){j=null}),j}function b(e){return e.split("/").map(encodeURIComponent).join("/")}var x=this,T=u;e.getHost&&(T=e.getHost);var O=T(e.name,e),R=c(O,"");e=m.clone(e);var C=e.ajax||{};if(x.getUrl=function(){return R},x.getHeaders=function(){return C.headers||{}},e.auth||O.auth){var q=e.auth||O.auth,N=q.username+":"+q.password,I=g.btoa(unescape(encodeURIComponent(N)));C.headers=C.headers||{},C.headers.Authorization="Basic "+I}x._ajax=_;var j;setTimeout(function(){t(null,x)}),x.type=function(){return"http"},x.id=f("id",function(e){r({},{method:"GET",url:s(O,"")},function(t,r){var n=r&&r.uuid?r.uuid+O.db:c(O,"");e(null,n)})}),x.request=f("request",function(e,t){e.url=c(O,e.url),r({},e,t)}),x.compact=f("compact",function(e,t){"function"==typeof e&&(t=e,e={}),e=m.clone(e),r(e,{url:c(O,"_compact"),method:"POST"},function(){function r(){x.info(function(n,o){o&&!o.compact_running?t(null,{ok:!0}):setTimeout(r,e.interval||200)})}r()})}),x.bulkGet=m.adapterFun("bulkGet",function(e,t){function n(t){var n={};e.revs&&(n.revs=!0),e.attachments&&(n.attachments=!0),r({},{url:c(O,"_bulk_get"+l(n)),method:"POST",body:{docs:e.docs}},t)}function o(){function r(e){return function(r,n){u[e]=n.results,++a===o&&t(null,{results:m.flatten(u)})}}for(var n=A,o=Math.ceil(e.docs.length/n),a=0,u=new Array(o),c=0;o>c;c++){var s=m.pick(e,["revs","attachments"]);s.ajax=C,s.docs=e.docs.slice(c*n,Math.min(e.docs.length,(c+1)*n)),m.bulkGetShim(i,s,r(c))}}var i=this,a=s(O,""),u=k[a];"boolean"!=typeof u?n(function(e,r){if(e){var n=Math.floor(e.status/100);4===n||5===n?(k[a]=!1,m.explainError(e.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),o()):t(e)}else k[a]=!0,t(null,r)}):u?n(t):o()}),x._info=function(e){d().then(function(){r({},{method:"GET",url:c(O,"")},function(t,r){return t?e(t):(r.host=c(O,""),void e(null,r))})})["catch"](e)},x.get=f("get",function(e,t,r){function o(e){var r=e._attachments,o=r&&Object.keys(r);return r&&o.length?h.all(o.map(function(o){var a=r[o],u=i(e._id)+"/"+b(o)+"?rev="+e._rev;return n(t,{method:"GET",url:c(O,u),binary:!0}).then(function(e){return t.binary?e:new h(function(t){g.blobOrBufferToBase64(e,t)})}).then(function(e){delete a.stub,delete a.length,a.data=e})})):void 0}function a(e){return Array.isArray(e)?h.all(e.map(function(e){return e.ok?o(e.ok):void 0})):o(e)}"function"==typeof t&&(r=t,t={}),t=m.clone(t);var u={};t.revs&&(u.revs=!0),t.revs_info&&(u.revs_info=!0),t.open_revs&&("all"!==t.open_revs&&(t.open_revs=JSON.stringify(t.open_revs)),u.open_revs=t.open_revs),t.rev&&(u.rev=t.rev),t.conflicts&&(u.conflicts=t.conflicts),e=i(e);var s={method:"GET",url:c(O,e+l(u))};n(t,s).then(function(e){return h.resolve().then(function(){return t.attachments?a(e):void 0}).then(function(){r(null,e)})})["catch"](r)}),x.remove=f("remove",function(e,t,n,o){var a;"string"==typeof t?(a={_id:e,_rev:t},"function"==typeof n&&(o=n,n={})):(a=e,"function"==typeof t?(o=t,n={}):(o=n,n=t));var u=a._rev||n.rev;r(n,{method:"DELETE",url:c(O,i(a._id))+"?rev="+u},o)}),x.getAttachment=f("getAttachment",function(e,t,n,o){"function"==typeof n&&(o=n,n={});var a=n.rev?"?rev="+n.rev:"",u=c(O,i(e))+"/"+b(t)+a;r(n,{method:"GET",url:u,binary:!0},o)}),x.removeAttachment=f("removeAttachment",function(e,t,n,o){var a=c(O,i(e)+"/"+b(t))+"?rev="+n;r({},{method:"DELETE",url:a},o)}),x.putAttachment=f("putAttachment",function(e,t,n,o,a,u){"function"==typeof a&&(u=a,a=o,o=n,n=null);var s=i(e)+"/"+b(t),l=c(O,s);if(n&&(l+="?rev="+n),"string"==typeof o){var f;try{f=g.atob(o)}catch(d){return u(y.createError(y.BAD_ARG,"Attachment is not a valid base64 string"))}o=f?g.binaryStringToBlobOrBuffer(f,a):""}var p={headers:{"Content-Type":a},method:"PUT",url:l,processData:!1,body:o,timeout:C.timeout||6e4};r({},p,u)}),x._bulkDocs=function(e,t,n){e.new_edits=t.new_edits,d().then(function(){return h.all(e.docs.map(a))}).then(function(){r(t,{method:"POST",url:c(O,"_bulk_docs"),body:e},function(e,t){return e?n(e):(t.forEach(function(e){e.ok=!0}),void n(null,t))})})["catch"](n)},x.allDocs=f("allDocs",function(e,t){"function"==typeof e&&(t=e,e={}),e=m.clone(e);var r,i={},a="GET";e.conflicts&&(i.conflicts=!0),e.descending&&(i.descending=!0),e.include_docs&&(i.include_docs=!0),e.attachments&&(i.attachments=!0),e.key&&(i.key=JSON.stringify(e.key)),e.start_key&&(e.startkey=e.start_key),e.startkey&&(i.startkey=JSON.stringify(e.startkey)),e.end_key&&(e.endkey=e.end_key),e.endkey&&(i.endkey=JSON.stringify(e.endkey)),"undefined"!=typeof e.inclusive_end&&(i.inclusive_end=!!e.inclusive_end),"undefined"!=typeof e.limit&&(i.limit=e.limit),"undefined"!=typeof e.skip&&(i.skip=e.skip);var u=l(i);if("undefined"!=typeof e.keys){var s="keys="+encodeURIComponent(JSON.stringify(e.keys));s.length+u.length+1<=S?u+="&"+s:(a="POST",r={keys:e.keys})}n(e,{method:a,url:c(O,"_all_docs"+u),body:r}).then(function(r){e.include_docs&&e.attachments&&e.binary&&r.rows.forEach(o),t(null,r)})["catch"](t)}),x._changes=function(e){var t="batch_size"in e?e.batch_size:w;e=m.clone(e),e.timeout="timeout"in e?e.timeout:"timeout"in C?C.timeout:3e4;var n,i=e.timeout?{timeout:e.timeout-5e3}:{},a="undefined"!=typeof e.limit?e.limit:!1;n="return_docs"in e?e.return_docs:"returnDocs"in e?e.returnDocs:!0;var u=a;if(e.style&&(i.style=e.style),(e.include_docs||e.filter&&"function"==typeof e.filter)&&(i.include_docs=!0),e.attachments&&(i.attachments=!0),e.continuous&&(i.feed="longpoll"),e.conflicts&&(i.conflicts=!0),e.descending&&(i.descending=!0),"heartbeat"in e?e.heartbeat&&(i.heartbeat=e.heartbeat):i.heartbeat=1e4,e.filter&&"string"==typeof e.filter&&(i.filter=e.filter),e.view&&"string"==typeof e.view&&(i.filter="_view",i.view=e.view),e.query_params&&"object"==typeof e.query_params)for(var s in e.query_params)e.query_params.hasOwnProperty(s)&&(i[s]=e.query_params[s]);var f,p="GET";if(e.doc_ids){i.filter="_doc_ids";var h=JSON.stringify(e.doc_ids);h.length<S?i.doc_ids=h:(p="POST",f={doc_ids:e.doc_ids})}var _,v,g=function(n,o){if(!e.aborted){i.since=n,"object"==typeof i.since&&(i.since=JSON.stringify(i.since)),e.descending?a&&(i.limit=u):i.limit=!a||u>t?t:u;var s={method:p,url:c(O,"_changes"+l(i)),timeout:e.timeout,body:f};v=n,e.aborted||d().then(function(){_=r(e,s,o)})["catch"](o)}},y={results:[]},b=function(r,i){if(!e.aborted){var c=0;if(i&&i.results){c=i.results.length,y.last_seq=i.last_seq;var s={};s.query=e.query_params,i.results=i.results.filter(function(t){u--;var r=m.filterChange(e)(t);return r&&(e.include_docs&&e.attachments&&e.binary&&o(t),n&&y.results.push(t),e.onChange(t)),
r})}else if(r)return e.aborted=!0,void e.complete(r);i&&i.last_seq&&(v=i.last_seq);var l=a&&0>=u||i&&t>c||e.descending;(!e.continuous||a&&0>=u)&&l?e.complete(null,y):setTimeout(function(){g(v,b)},0)}};return g(e.since||0,b),{cancel:function(){e.aborted=!0,_&&_.abort()}}},x.revsDiff=f("revsDiff",function(e,t,n){"function"==typeof t&&(n=t,t={}),r(t,{method:"POST",url:c(O,"_revs_diff"),body:e},n)}),x._close=function(e){e()},x._destroy=function(e,t){r(e,{url:c(O,""),method:"DELETE"},function(e,r){return e&&e.status&&404!==e.status?t(e):void t(null,r)})}}function d(e){e.adapter("http",f,!1),e.adapter("https",f,!1)}var p=r(37),h=n(r(39)),_=n(r(59)),v=n(r(43)),m=r(45),g=r(51),y=r(46),b=n(r(26)),w=25,A=50,k={},S=1800,E=b("pouchdb:http");f.valid=function(){return!0},e.exports=d},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(){for(var e={},t=new p(function(t,r){e.resolve=t,e.reject=r}),r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.promise=t,p.resolve().then(function(){return fetch.apply(null,r)}).then(function(t){e.resolve(t)})["catch"](function(t){e.reject(t)}),e}function i(e,t){var r,n,i,a=new Headers,u={method:e.method,credentials:"include",headers:a};return e.json&&(a.set("Accept","application/json"),a.set("Content-Type",e.headers["Content-Type"]||"application/json")),e.body&&e.body instanceof Blob?d.readAsArrayBuffer(e.body,function(e){u.body=e}):e.body&&e.processData&&"string"!=typeof e.body?u.body=JSON.stringify(e.body):"body"in e?u.body=e.body:u.body=null,Object.keys(e.headers).forEach(function(t){e.headers.hasOwnProperty(t)&&a.set(t,e.headers[t])}),r=o(e.url,u),e.timeout>0&&(n=setTimeout(function(){r.reject(new Error("Load timeout for resource: "+e.url))},e.timeout)),r.promise.then(function(t){return i={statusCode:t.status},e.timeout>0&&clearTimeout(n),i.statusCode>=200&&i.statusCode<300?e.binary?t.blob():t.text():t.json()}).then(function(e){i.statusCode>=200&&i.statusCode<300?t(null,i,e):t(e,i)})["catch"](function(e){t(e,i)}),{abort:r.reject}}function a(e,t){var r,n,o=!1,i=function(){r.abort()},a=function(){o=!0,r.abort()};r=e.xhr?new e.xhr:new XMLHttpRequest;try{r.open(e.method,e.url)}catch(u){t(u,{statusCode:413})}r.withCredentials="withCredentials"in e?e.withCredentials:!0,"GET"===e.method?delete e.headers["Content-Type"]:e.json&&(e.headers.Accept="application/json",e.headers["Content-Type"]=e.headers["Content-Type"]||"application/json",e.body&&e.processData&&"string"!=typeof e.body&&(e.body=JSON.stringify(e.body))),e.binary&&(r.responseType="arraybuffer"),"body"in e||(e.body=null);for(var c in e.headers)e.headers.hasOwnProperty(c)&&r.setRequestHeader(c,e.headers[c]);return e.timeout>0&&(n=setTimeout(a,e.timeout),r.onprogress=function(){clearTimeout(n),4!==r.readyState&&(n=setTimeout(a,e.timeout))},"undefined"!=typeof r.upload&&(r.upload.onprogress=r.onprogress)),r.onreadystatechange=function(){if(4===r.readyState){var n={statusCode:r.status};if(r.status>=200&&r.status<300){var i;i=e.binary?d.blob([r.response||""],{type:r.getResponseHeader("Content-Type")}):r.responseText,t(null,n,i)}else{var a={};if(o)a=new Error("ETIMEDOUT"),n.statusCode=400;else try{a=JSON.parse(r.response)}catch(u){}t(a,n)}}},e.body&&e.body instanceof Blob?d.readAsArrayBuffer(e.body,function(e){r.send(e)}):r.send(e.body),{abort:i}}function u(){try{return new XMLHttpRequest,!0}catch(e){return!1}}function c(e,t){return m||e.xhr?a(e,t):i(e,t)}function s(){return""}function l(e,t){function r(t,r,n){if(!e.binary&&e.json&&"string"==typeof t)try{t=JSON.parse(t)}catch(o){return n(o)}Array.isArray(t)&&(t=t.map(function(e){return e.error||e.missing?_.generateErrorFromResponse(e):e})),e.binary&&g(t,r),n(null,t,r)}function n(e,t){var r,n;if(e.code&&e.status){var o=new Error(e.message||e.code);return o.status=e.status,t(o)}if(e.message&&"ETIMEDOUT"===e.message)return t(e);try{r=JSON.parse(e.responseText),n=_.generateErrorFromResponse(r)}catch(i){n=_.generateErrorFromResponse(e)}t(n)}e=v.clone(e);var o={method:"GET",headers:{},json:!0,processData:!0,timeout:1e4,cache:!1};return e=h.extend(o,e),e.json&&(e.binary||(e.headers.Accept="application/json"),e.headers["Content-Type"]=e.headers["Content-Type"]||"application/json"),e.binary&&(e.encoding=null,e.json=!1),e.processData||(e.json=!1),c(e,function(o,i,a){if(o)return o.status=i?i.statusCode:400,n(o,t);var u,c=i.headers&&i.headers["content-type"],l=a||s();if(!e.binary&&(e.json||!e.processData)&&"object"!=typeof l&&(/json/.test(c)||/^[\s]*\{/.test(l)&&/\}[\s]*$/.test(l)))try{l=JSON.parse(l.toString())}catch(f){}i.statusCode>=200&&i.statusCode<300?r(l,i,t):(u=_.generateErrorFromResponse(l),u.status=i.statusCode,t(u))})}function f(e,t){var r=navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",n=-1!==r.indexOf("safari")&&-1===r.indexOf("chrome"),o=-1!==r.indexOf("msie"),i=-1!==r.indexOf("edge"),a=n||(o||i)&&"GET"===e.method,u="cache"in e?e.cache:!0,c=/^blob:/.test(e.url);if(!c&&(a||!u)){var s=-1!==e.url.indexOf("?");e.url+=(s?"&":"?")+"_nonce="+Date.now()}return l(e,t)}var d=r(51),p=n(r(39)),h=r(37),_=r(46),v=r(45),m=u(),g=function(){};e.exports=f},function(e,t,r){(function(t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(){this.promise=new W(function(e){e()})}function i(e){var t=e.db,r=e.viewName,n=e.map,o=e.reduce,i=e.temporary,a=n.toString()+(o&&o.toString())+"undefined";if(!i&&t._cachedViews){var u=t._cachedViews[a];if(u)return W.resolve(u)}return t.info().then(function(e){function u(e){e.views=e.views||{};var t=r;-1===t.indexOf("/")&&(t=r+"/"+r);var n=e.views[t]=e.views[t]||{};if(!n[c])return n[c]=!0,e}var c=e.db_name+"-mrview-"+(i?"temp":z.stringMd5(a));return U.upsert(t,"_local/mrviews",u).then(function(){return t.registerDependentDatabase(c).then(function(e){var r=e.db;r.auto_compaction=!0;var u={name:c,db:r,sourceDB:t,adapter:t.adapter,mapFun:n,reduceFun:o};return u.db.get("_local/lastSeq")["catch"](function(e){if(404!==e.status)throw e}).then(function(e){return u.seq=e?e.seq:0,i||(t._cachedViews=t._cachedViews||{},t._cachedViews[a]=u,u.db.once("destroyed",function(){delete t._cachedViews[a]})),u})})})})}function a(e,t,r,n,o,i){return V("return ("+e.replace(/;\s*$/,"")+");",{emit:t,sum:r,log:n,isArray:o,toJSON:i})}function u(e){return-1===e.indexOf("/")?[e,e]:e.split("/")}function c(e){return 1===e.length&&/^1-/.test(e[0].rev)}function s(e,t){try{e.emit("error",t)}catch(r){U.guardedConsole("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),U.guardedConsole("error",t)}}function l(e,t,r){try{return{output:t.apply(null,r)}}catch(n){return s(e,n),{error:n}}}function f(e,t){var r=H.collate(e.key,t.key);return 0!==r?r:H.collate(e.value,t.value)}function d(e,t,r){return r=r||0,"number"==typeof t?e.slice(r,t+r):r>0?e.slice(r):e}function p(e){var t=e.value,r=t&&"object"==typeof t&&t._id||e.id;return r}function h(e){e.rows.forEach(function(e){var t=e.doc&&e.doc._attachments;t&&Object.keys(t).forEach(function(e){var r=t[e];t[e].data=J.base64StringToBlobOrBuffer(r.data,r.content_type)})})}function _(e){return function(t){return e.include_docs&&e.attachments&&e.binary&&h(t),t}}function v(e){var t="builtin "+e+" function requires map values to be numbers or number arrays";return new F(t)}function m(e){for(var t=0,r=0,n=e.length;n>r;r++){var o=e[r];if("number"!=typeof o){if(!Array.isArray(o))throw v("_sum");t="number"==typeof t?[t]:t;for(var i=0,a=o.length;a>i;i++){var u=o[i];if("number"!=typeof u)throw v("_sum");"undefined"==typeof t[i]?t.push(u):t[i]+=u}}else"number"==typeof t?t+=o:t[0]+=o}return t}function g(e,t,r,n){var o=t[e];"undefined"!=typeof o&&(n&&(o=encodeURIComponent(JSON.stringify(o))),r.push(e+"="+o))}function y(e){if("undefined"!=typeof e){var t=Number(e);return isNaN(t)||t!==parseInt(e,10)?e:t}}function b(e){return e.group_level=y(e.group_level),e.limit=y(e.limit),e.skip=y(e.skip),e}function w(e){if(e){if("number"!=typeof e)return new M('Invalid value for integer: "'+e+'"');if(0>e)return new M('Invalid value for positive integer: "'+e+'"')}}function A(e,t){var r=e.descending?"endkey":"startkey",n=e.descending?"startkey":"endkey";if("undefined"!=typeof e[r]&&"undefined"!=typeof e[n]&&H.collate(e[r],e[n])>0)throw new M("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(t.reduce&&e.reduce!==!1){if(e.include_docs)throw new M("{include_docs:true} is invalid for reduce");if(e.keys&&e.keys.length>1&&!e.group&&!e.group_level)throw new M("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(t){var r=w(e[t]);if(r)throw r})}function k(e,t,r){var n,o=[],i="GET";if(g("reduce",r,o),g("include_docs",r,o),g("attachments",r,o),g("limit",r,o),g("descending",r,o),g("group",r,o),g("group_level",r,o),g("skip",r,o),g("stale",r,o),g("conflicts",r,o),g("startkey",r,o,!0),g("start_key",r,o,!0),g("endkey",r,o,!0),g("end_key",r,o,!0),g("inclusive_end",r,o),g("key",r,o,!0),o=o.join("&"),o=""===o?"":"?"+o,"undefined"!=typeof r.keys){var a=2e3,c="keys="+encodeURIComponent(JSON.stringify(r.keys));c.length+o.length+1<=a?o+=("?"===o[0]?"&":"?")+c:(i="POST","string"==typeof t?n={keys:r.keys}:t.keys=r.keys)}if("string"==typeof t){var s=u(t);return e.request({method:i,url:"_design/"+s[0]+"/_view/"+s[1]+o,body:n}).then(_(r))}return n=n||{},Object.keys(t).forEach(function(e){Array.isArray(t[e])?n[e]=t[e]:n[e]=t[e].toString()}),e.request({method:"POST",url:"_temp_view"+o,body:n}).then(_(r))}function S(e,t,r){return new W(function(n,o){e._query(t,r,function(e,t){return e?o(e):void n(t)})})}function E(e){return new W(function(t,r){e._viewCleanup(function(e,n){return e?r(e):void t(n)})})}function x(e){return function(t){if(404===t.status)return e;throw t}}function T(e,t,r){function n(){return c(f)?W.resolve(u):t.db.get(a)["catch"](x(u))}function o(e){return e.keys.length?t.db.allDocs({keys:e.keys,include_docs:!0}):W.resolve({rows:[]})}function i(e,t){for(var r=[],n={},o=0,i=t.rows.length;i>o;o++){var a=t.rows[o],u=a.doc;if(u&&(r.push(u),n[u._id]=!0,u._deleted=!l[u._id],!u._deleted)){var c=l[u._id];"value"in c&&(u.value=c.value)}}var s=Object.keys(l);return s.forEach(function(e){if(!n[e]){var t={_id:e},o=l[e];"value"in o&&(t.value=o.value),r.push(t)}}),e.keys=G.uniq(s.concat(e.keys)),r.push(e),r}var a="_local/doc_"+e,u={_id:a,keys:[]},s=r[e],l=s.indexableKeysToKeyValues,f=s.changes;return n().then(function(e){return o(e).then(function(t){return i(e,t)})})}function O(e,t,r){var n="_local/lastSeq";return e.db.get(n)["catch"](x({_id:n,seq:0})).then(function(n){var o=Object.keys(t);return W.all(o.map(function(r){return T(r,e,t)})).then(function(t){var o=U.flatten(t);return n.seq=r,o.push(n),e.db.bulkDocs({docs:o})})})}function R(e){var t="string"==typeof e?e:e.name,r=$[t];return r||(r=$[t]=new o),r}function C(e){return G.sequentialize(R(e),function(){return q(e)})()}function q(e){function t(e,t){var r={id:i._id,key:H.normalizeKey(e)};"undefined"!=typeof t&&null!==t&&(r.value=H.normalizeKey(t)),n.push(r)}function r(t,r){return function(){return O(e,t,r)}}var n,i,u;if("function"==typeof e.mapFun&&2===e.mapFun.length){var c=e.mapFun;u=function(e){return c(e,t)}}else u=a(e.mapFun.toString(),t,m,Y,Array.isArray,JSON.parse);var s=e.seq||0,d=new o;return new W(function(t,o){function a(){d.finish().then(function(){e.seq=s,t()})}function c(){function t(e){o(e)}e.sourceDB.changes({conflicts:!0,include_docs:!0,style:"all_docs",since:s,limit:Q}).on("complete",function(t){var o=t.results;if(!o.length)return a();for(var p={},h=0,_=o.length;_>h;h++){var v=o[h];if("_"!==v.doc._id[0]){n=[],i=v.doc,i._deleted||l(e.sourceDB,u,[i]),n.sort(f);for(var m,g={},y=0,b=n.length;b>y;y++){var w=n[y],A=[w.key,w.id];0===H.collate(w.key,m)&&A.push(y);var k=H.toIndexableString(A);g[k]=w,m=w.key}p[v.doc._id]={indexableKeysToKeyValues:g,changes:v.changes}}s=v.seq}return d.add(r(p,s)),o.length<Q?a():c()}).on("error",t)}c()})}function N(e,t,r){0===r.group_level&&delete r.group_level;var n,o=r.group||r.group_level;n=Z[e.reduceFun]?Z[e.reduceFun]:a(e.reduceFun.toString(),null,m,Y,Array.isArray,JSON.parse);var i=[],u=isNaN(r.group_level)?Number.POSITIVE_INFINITY:r.group_level;t.forEach(function(e){var t=i[i.length-1],r=o?e.key:null;return o&&Array.isArray(r)&&(r=r.slice(0,u)),t&&0===H.collate(t.groupKey,r)?(t.keys.push([e.key,e.id]),void t.values.push(e.value)):void i.push({keys:[[e.key,e.id]],values:[e.value],groupKey:r})}),t=[];for(var c=0,s=i.length;s>c;c++){var f=i[c],p=l(e.sourceDB,n,[f.keys,f.values,!1]);if(p.error&&p.error instanceof F)throw p.error;t.push({value:p.error?null:p.output,key:f.groupKey})}return{rows:d(t,r.limit,r.skip)}}function I(e,t){return G.sequentialize(R(e),function(){return j(e,t)})()}function j(e,t){function r(t){return t.include_docs=!0,e.db.allDocs(t).then(function(e){return o=e.total_rows,e.rows.map(function(e){if("value"in e.doc&&"object"==typeof e.doc.value&&null!==e.doc.value){var t=Object.keys(e.doc.value).sort(),r=["id","key","value"];if(!(r>t||t>r))return e.doc.value}var n=H.parseIndexableString(e.doc._id);return{key:n[0],id:n[1],value:"value"in e.doc?e.doc.value:null}})})}function n(r){var n;if(n=i?N(e,r,t):{total_rows:o,offset:a,rows:r},t.include_docs){var u=G.uniq(r.map(p));return e.sourceDB.allDocs({keys:u,include_docs:!0,conflicts:t.conflicts,attachments:t.attachments,binary:t.binary}).then(function(e){var t={};return e.rows.forEach(function(e){e.doc&&(t["$"+e.id]=e.doc)}),r.forEach(function(e){var r=p(e),n=t["$"+r];n&&(e.doc=n)}),n})}return n}var o,i=e.reduceFun&&t.reduce!==!1,a=t.skip||0;if("undefined"==typeof t.keys||t.keys.length||(t.limit=0,delete t.keys),"undefined"!=typeof t.keys){var u=t.keys,c=u.map(function(e){var t={startkey:H.toIndexableString([e]),endkey:H.toIndexableString([e,{}])};return r(t)});return W.all(c).then(U.flatten).then(n)}var s={descending:t.descending};if(t.start_key&&(t.startkey=t.start_key),t.end_key&&(t.endkey=t.end_key),"undefined"!=typeof t.startkey&&(s.startkey=t.descending?H.toIndexableString([t.startkey,{}]):H.toIndexableString([t.startkey])),"undefined"!=typeof t.endkey){var l=t.inclusive_end!==!1;t.descending&&(l=!l),s.endkey=H.toIndexableString(l?[t.endkey,{}]:[t.endkey])}if("undefined"!=typeof t.key){var f=H.toIndexableString([t.key]),d=H.toIndexableString([t.key,{}]);s.descending?(s.endkey=f,s.startkey=d):(s.startkey=f,s.endkey=d)}return i||("number"==typeof t.limit&&(s.limit=t.limit),s.skip=a),r(s).then(n)}function D(e){return e.request({method:"POST",url:"_view_cleanup"})}function L(e){return e.get("_local/mrviews").then(function(t){var r={};Object.keys(t.views).forEach(function(e){var t=u(e),n="_design/"+t[0],o=t[1];r[n]=r[n]||{},r[n][o]=!0});var n={keys:Object.keys(r),include_docs:!0};return e.allDocs(n).then(function(n){var o={};n.rows.forEach(function(e){var n=e.key.substring(8);Object.keys(r[e.key]).forEach(function(r){var i=n+"/"+r;t.views[i]||(i=r);var a=Object.keys(t.views[i]),u=e.doc&&e.doc.views&&e.doc.views[r];a.forEach(function(e){o[e]=o[e]||u})})});var i=Object.keys(o).filter(function(e){return!o[e]}),a=i.map(function(t){return G.sequentialize(R(t),function(){return new e.constructor(t,e.__opts).destroy()})()});return W.all(a).then(function(){return{ok:!0}})})},x({ok:!0}))}function B(e,r,n){if("http"===e.type())return k(e,r,n);if("function"==typeof e._query)return S(e,r,n);if("string"!=typeof r){A(n,r);var o={db:e,viewName:"temp_view/temp_view",map:r.map,reduce:r.reduce,temporary:!0};return X.add(function(){return i(o).then(function(e){function t(){return e.db.destroy()}return G.fin(C(e).then(function(){return I(e,n)}),t)})}),X.finish()}var a=r,c=u(a),s=c[0],l=c[1];return e.get("_design/"+s).then(function(r){var o=r.views&&r.views[l];if(!o||"string"!=typeof o.map)throw new P("ddoc "+s+" has no view named "+l);A(n,o);var u={db:e,viewName:a,map:o.map,reduce:o.reduce};return i(u).then(function(e){return"ok"===n.stale||"update_after"===n.stale?("update_after"===n.stale&&t.nextTick(function(){C(e)}),I(e,n)):C(e).then(function(){return I(e,n)})})})}function M(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,M)}catch(t){}}function P(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,P)}catch(t){}}function F(e){this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,F)}catch(t){}}var U=r(45),J=r(51),H=r(61),W=n(r(39)),z=r(52),V=n(r(48)),G=r(63),K=n(r(38));o.prototype.add=function(e){return this.promise=this.promise["catch"](function(){}).then(function(){return e()}),this.promise},o.prototype.finish=function(){return this.promise};var $={},X=new o,Q=50,Y=U.guardedConsole.bind(null,"log"),Z={_sum:function(e,t){return m(t)},_count:function(e,t){return t.length},_stats:function(e,t){function r(e){for(var t=0,r=0,n=e.length;n>r;r++){var o=e[r];t+=o*o}return t}return{sum:m(t),min:Math.min.apply(null,t),max:Math.max.apply(null,t),count:t.length,sumsqr:r(t)}}},ee=G.callbackify(function(){var e=this;return"http"===e.type()?D(e):"function"==typeof e._viewCleanup?E(e):L(e)}),te=function(e,t,r){"function"==typeof t&&(r=t,t={}),t=t?b(t):{},"function"==typeof e&&(e={map:e});var n=this,o=W.resolve().then(function(){return B(n,e,t)});return G.promisedCallback(o,r),o};K(M,Error),K(P,Error),K(F,Error);var re={query:te,viewCleanup:ee};e.exports=re}).call(t,r(2))},function(e,t,r){"use strict";function n(e){if(null!==e)switch(typeof e){case"boolean":return e?1:0;case"number":return l(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var r=Array.isArray(e),n=r?e:Object.keys(e),o=-1,i=n.length,a="";if(r)for(;++o<i;)a+=t.toIndexableString(n[o]);else for(;++o<i;){var u=n[o];a+=t.toIndexableString(u)+t.toIndexableString(e[u])}return a}return""}function o(e,t){var r,n=t,o="1"===e[t];if(o)r=0,t++;else{var i="0"===e[t];t++;var a="",u=e.substring(t,t+d),c=parseInt(u,10)+f;for(i&&(c=-c),t+=d;;){var s=e[t];if("\x00"===s)break;a+=s,t++}a=a.split("."),r=1===a.length?parseInt(a,10):parseFloat(a[0]+"."+a[1]),i&&(r-=10),0!==c&&(r=parseFloat(r+"e"+c))}return{num:r,length:t-n}}function i(e,t){var r=e.pop();if(t.length){var n=t[t.length-1];r===n.element&&(t.pop(),n=t[t.length-1]);var o=n.element,i=n.index;if(Array.isArray(o))o.push(r);else if(i===e.length-2){var a=e.pop();o[a]=r}else e.push(r)}}function a(e,r){for(var n=Math.min(e.length,r.length),o=0;n>o;o++){var i=t.collate(e[o],r[o]);if(0!==i)return i}return e.length===r.length?0:e.length>r.length?1:-1}function u(e,t){return e===t?0:e>t?1:-1}function c(e,r){for(var n=Object.keys(e),o=Object.keys(r),i=Math.min(n.length,o.length),a=0;i>a;a++){var u=t.collate(n[a],o[a]);if(0!==u)return u;if(u=t.collate(e[n[a]],r[o[a]]),0!==u)return u}return n.length===o.length?0:n.length>o.length?1:-1}function s(e){var t=["boolean","number","string","object"],r=t.indexOf(typeof e);return~r?null===e?1:Array.isArray(e)?5:3>r?r+2:r+3:Array.isArray(e)?5:void 0}function l(e){if(0===e)return"1";var t=e.toExponential().split(/e\+?/),r=parseInt(t[1],10),n=0>e,o=n?"0":"2",i=(n?-r:r)-f,a=h.padLeft(i.toString(),"0",d);o+=p+a;var u=Math.abs(parseFloat(t[0]));n&&(u=10-u);var c=u.toFixed(20);return c=c.replace(/\.?0+$/,""),o+=p+c}var f=-324,d=3,p="",h=r(62);t.collate=function(e,r){if(e===r)return 0;e=t.normalizeKey(e),r=t.normalizeKey(r);var n=s(e),o=s(r);if(n-o!==0)return n-o;if(null===e)return 0;switch(typeof e){case"number":return e-r;case"boolean":return e===r?0:r>e?-1:1;case"string":return u(e,r)}return Array.isArray(e)?a(e,r):c(e,r)},t.normalizeKey=function(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-(1/0)||isNaN(e)?null:e;case"object":var r=e;if(Array.isArray(e)){var n=e.length;e=new Array(n);for(var o=0;n>o;o++)e[o]=t.normalizeKey(r[o])}else{if(e instanceof Date)return e.toJSON();if(null!==e){e={};for(var i in r)if(r.hasOwnProperty(i)){var a=r[i];"undefined"!=typeof a&&(e[i]=t.normalizeKey(a))}}}}return e},t.toIndexableString=function(e){var r="\x00";return e=t.normalizeKey(e),s(e)+p+n(e)+r},t.parseIndexableString=function(e){for(var t=[],r=[],n=0;;){var a=e[n++];if("\x00"!==a)switch(a){case"1":t.push(null);break;case"2":t.push("1"===e[n]),n++;break;case"3":var u=o(e,n);t.push(u.num),n+=u.length;break;case"4":for(var c="";;){var s=e[n];if("\x00"===s)break;c+=s,n++}c=c.replace(/\u0001\u0001/g,"\x00").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(c);break;case"5":var l={element:[],index:t.length};t.push(l.element),r.push(l);break;case"6":var f={element:{},index:t.length};t.push(f.element),r.push(f);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+a)}else{if(1===t.length)return t.pop();i(t,r)}}}},function(e,t){"use strict";function r(e,t,r){for(var n="",o=r-e.length;n.length<o;)n+=t;return n}t.padLeft=function(e,t,n){var o=r(e,t,n);return o+e},t.padRight=function(e,t,n){var o=r(e,t,n);return e+o},t.stringLexCompare=function(e,t){var r,n=e.length,o=t.length;for(r=0;n>r;r++){if(r===o)return 1;var i=e.charAt(r),a=t.charAt(r);if(i!==a)return a>i?-1:1}return o>n?-1:0},t.intToDecimalForm=function(e){var t=0>e,r="";do{var n=t?-Math.ceil(e%10):Math.floor(e%10);r=n+r,e=t?Math.ceil(e/10):Math.floor(e/10)}while(e);return t&&"0"!==r&&(r="-"+r),r}},function(e,t,r){(function(e){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(43)),i=function(t,r){return r&&t.then(function(t){e.nextTick(function(){r(null,t)})},function(t){e.nextTick(function(){r(t)})}),t},a=function(e){return o(function(t){var r=t.pop(),n=e.apply(this,t);return"function"==typeof r&&i(n,r),n})},u=function(e,t){return e.then(function(e){return t().then(function(){return e})},function(e){return t().then(function(){throw e})})},c=function(e,t){return function(){var r=arguments,n=this;return e.add(function(){return t.apply(n,r)})}},s=function(e){for(var t={},r=0,n=e.length;n>r;r++)t["$"+e[r]]=!0;var o=Object.keys(t),i=new Array(o.length);for(r=0,n=o.length;n>r;r++)i[r]=o[r].substring(1);return i};t.uniq=s,t.sequentialize=c,t.fin=u,t.callbackify=a,t.promisedCallback=i}).call(t,r(2))},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(e){return/^1-/.test(e)}function i(e,t,r){return!e._attachments||!e._attachments[r]||e._attachments[r].digest!==t._attachments[r].digest}function a(e,t){var r=Object.keys(t._attachments);return y.all(r.map(function(r){return e.getAttachment(t._id,r,{rev:t._rev})}))}function u(e,t,r){var n="http"===t.type()&&"http"!==e.type(),o=Object.keys(r._attachments);return n?e.get(r._id).then(function(n){return y.all(o.map(function(o){return i(n,r,o)?t.getAttachment(r._id,o):e.getAttachment(n._id,o)}))})["catch"](function(e){if(404!==e.status)throw e;return a(t,r)}):a(t,r)}function c(e){var t=[];return Object.keys(e).forEach(function(r){var n=e[r].missing;n.forEach(function(e){t.push({id:r,rev:e})})}),{docs:t,revs:!0}}function s(e,t,r,n){function i(){var o=c(r);if(o.docs.length)return e.bulkGet(o).then(function(r){if(n.cancelled)throw new Error("cancelled");return y.all(r.results.map(function(r){return y.all(r.docs.map(function(r){var n=r.ok;return r.error&&(p=!1),n&&n._attachments?u(t,e,n).then(function(e){var t=Object.keys(n._attachments);return e.forEach(function(e,r){var o=n._attachments[t[r]];delete o.stub,delete o.length,o.data=e}),n}):n}))})).then(function(e){d=d.concat(g.flatten(e).filter(Boolean))})})}function a(e){return e._attachments&&Object.keys(e._attachments).length>0}function s(t){return e.allDocs({keys:t,include_docs:!0}).then(function(e){if(n.cancelled)throw new Error("cancelled");e.rows.forEach(function(e){!e.deleted&&e.doc&&o(e.value.rev)&&!a(e.doc)&&(d.push(e.doc),delete r[e.id])})})}function l(){var e=Object.keys(r).filter(function(e){var t=r[e].missing;return 1===t.length&&o(t[0])});return e.length>0?s(e):void 0}function f(){return{ok:p,docs:d}}r=g.clone(r);var d=[],p=!0;return y.resolve().then(l).then(i).then(f)}function l(e,t,r,n){return e.retry===!1?(t.emit("error",r),void t.removeAllListeners()):("function"!=typeof e.back_off_function&&(e.back_off_function=g.defaultBackOff),t.emit("requestError",r),"active"!==t.state&&"pending"!==t.state||(t.emit("paused",r),t.state="stopped",t.once("active",function(){e.current_back_off=x})),e.current_back_off=e.current_back_off||x,e.current_back_off=e.back_off_function(e.current_back_off),void setTimeout(n,e.current_back_off))}function f(e,t,r,n,o){function i(){return R?y.resolve():w(e,t,r).then(function(r){O=r,R=new b(e,t,O,n)})}function a(){if(J=[],0!==T.docs.length){var e=T.docs;return t.bulkDocs({docs:e,new_edits:!1}).then(function(t){if(n.cancelled)throw v(),new Error("cancelled");var r=[],i={};t.forEach(function(e){e.error&&(o.doc_write_failures++,r.push(e),i[e.id]=e)}),U=U.concat(r),o.docs_written+=T.docs.length-r.length;var a=r.filter(function(e){return"unauthorized"!==e.name&&"forbidden"!==e.name});if(e.forEach(function(e){var t=i[e._id];t?n.emit("denied",g.clone(t)):J.push(e)}),a.length>0){var u=new Error("bulkDocs error");throw u.other_errors=r,_("target.bulkDocs failed to write docs",u),new Error("bulkWrite partial failure")}},function(t){throw o.doc_write_failures+=e.length,t})}}function u(){if(T.error)throw new Error("There was a problem getting docs.");o.last_seq=D=T.seq;var e=g.clone(o);return J.length&&(e.docs=J,n.emit("change",e)),N=!0,R.writeCheckpoint(T.seq,H).then(function(){if(N=!1,n.cancelled)throw v(),new Error("cancelled");T=void 0,S()})["catch"](x)}function c(){var e={};return T.changes.forEach(function(t){"_user/"!==t.id&&(e[t.id]=t.changes.map(function(e){return e.rev}))}),t.revsDiff(e).then(function(e){if(n.cancelled)throw v(),new Error("cancelled");T.diffs=e})}function d(){return s(e,t,T.diffs,n).then(function(e){T.error=!e.ok,e.docs.forEach(function(e){delete T.diffs[e._id],o.docs_read++,T.docs.push(e)})})}function p(){if(!n.cancelled&&!T){if(0===C.length)return void h(!0);T=C.shift(),c().then(d).then(a).then(u).then(p)["catch"](function(e){_("batch processing terminated with error",e)})}}function h(e){return 0===q.changes.length?void(0!==C.length||T||((L&&W.live||I)&&(n.state="pending",n.emit("paused")),I&&v())):void((e||I||q.changes.length>=B)&&(C.push(q),q={seq:0,changes:[],docs:[]},"pending"!==n.state&&"stopped"!==n.state||(n.state="active",n.emit("active")),p()))}function _(e,t){j||(t.message||(t.message=e),o.ok=!1,o.status="aborting",o.errors.push(t),U=U.concat(t),C=[],q={seq:0,changes:[],docs:[]},v())}function v(){if(!(j||n.cancelled&&(o.status="cancelled",N))){o.status=o.status||"complete",o.end_time=new Date,o.last_seq=D,j=!0;var i=U.filter(function(e){return"unauthorized"!==e.name&&"forbidden"!==e.name});if(i.length>0){var a=U.pop();U.length>0&&(a.other_errors=U),a.result=o,l(r,n,a,function(){f(e,t,r,n)})}else o.errors=U,n.emit("complete",o),n.removeAllListeners()}}function m(e){if(n.cancelled)return v();var t=g.filterChange(r)(e);t&&(q.seq=e.seq,q.changes.push(e),h(0===C.length&&W.live))}function A(e){if(P=!1,n.cancelled)return v();if(e.results.length>0)W.since=e.last_seq,S(),h(!0);else{var t=function(){L?(W.live=!0,S()):I=!0,h(!0)};T||0!==e.results.length?t():(N=!0,R.writeCheckpoint(e.last_seq,H).then(function(){N=!1,o.last_seq=D=e.last_seq,t()})["catch"](x))}}function k(e){return P=!1,n.cancelled?v():void _("changes rejected",e)}function S(){function t(){i.cancel()}function o(){n.removeListener("cancel",t)}if(!P&&!I&&C.length<M){P=!0,n._changes&&(n.removeListener("cancel",n._abortChanges),n._changes.cancel()),n.once("cancel",t);var i=e.changes(W).on("change",m);i.then(o,o),i.then(A)["catch"](k),r.retry&&(n._changes=i,n._abortChanges=t)}}function E(){i().then(function(){return n.cancelled?void v():R.getCheckpoint().then(function(e){D=e,W={since:D,limit:B,batch_size:B,style:"all_docs",doc_ids:F,return_docs:!0},r.filter&&("string"!=typeof r.filter?W.include_docs=!0:W.filter=r.filter),"heartbeat"in r&&(W.heartbeat=r.heartbeat),"timeout"in r&&(W.timeout=r.timeout),r.query_params&&(W.query_params=r.query_params),r.view&&(W.view=r.view),S()})})["catch"](function(e){_("getCheckpoint rejected with ",e)})}function x(e){throw N=!1,_("writeCheckpoint completed with error",e),e}var T,O,R,C=[],q={seq:0,changes:[],docs:[]},N=!1,I=!1,j=!1,D=0,L=r.continuous||r.live||!1,B=r.batch_size||100,M=r.batches_limit||10,P=!1,F=r.doc_ids,U=[],J=[],H=g.uuid();o=o||{ok:!0,start_time:new Date,docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var W={};return n.ready(e,t),n.cancelled?void v():(n._addedListeners||(n.once("cancel",v),"function"==typeof r.complete&&(n.once("error",r.complete),n.once("complete",function(e){r.complete(null,e)})),n._addedListeners=!0),void("undefined"==typeof r.since?E():i().then(function(){return N=!0,R.writeCheckpoint(r.since,H)}).then(function(){return N=!1,n.cancelled?void v():(D=r.since,void E())})["catch"](x)))}function d(){A.EventEmitter.call(this),this.cancelled=!1,this.state="pending";var e=this,t=new y(function(t,r){e.once("complete",t),e.once("error",r)});e.then=function(e,r){return t.then(e,r)},e["catch"]=function(e){return t["catch"](e)},e["catch"](function(){})}function p(e,t){var r=t.PouchConstructor;return"string"==typeof e?new r(e,t):e}function h(e,t,r,n){if("function"==typeof r&&(n=r,r={}),"undefined"==typeof r&&(r={}),r.doc_ids&&!Array.isArray(r.doc_ids))throw S.createError(S.BAD_REQUEST,"`doc_ids` filter parameter is not a list.");r.complete=n,r=g.clone(r),r.continuous=r.continuous||r.live,r.retry="retry"in r?r.retry:!1,r.PouchConstructor=r.PouchConstructor||this;var o=new d(r),i=p(e,r),a=p(t,r);return f(i,a,r,o),o}function _(e,t,r,n){return"function"==typeof r&&(n=r,r={}),"undefined"==typeof r&&(r={}),r=g.clone(r),r.PouchConstructor=r.PouchConstructor||this,e=p(e,r),t=p(t,r),new v(e,t,r,n)}function v(e,t,r,n){function o(e){p.emit("change",{direction:"pull",change:e})}function i(e){p.emit("change",{direction:"push",change:e})}function a(e){p.emit("denied",{direction:"push",doc:e})}function u(e){p.emit("denied",{direction:"pull",doc:e})}function c(){p.pushPaused=!0,p.pullPaused&&p.emit("paused")}function s(){p.pullPaused=!0,p.pushPaused&&p.emit("paused")}function l(){p.pushPaused=!1,p.pullPaused&&p.emit("active",{direction:"push"})}function f(){p.pullPaused=!1,p.pushPaused&&p.emit("active",{direction:"pull"})}function d(e){return function(t,r){var n="change"===t&&(r===o||r===i),d="denied"===t&&(r===u||r===a),h="paused"===t&&(r===s||r===c),_="active"===t&&(r===f||r===l);(n||d||h||_)&&(t in m||(m[t]={}),m[t][e]=!0,2===Object.keys(m[t]).length&&p.removeAllListeners(t))}}var p=this;this.canceled=!1;var _=r.push?E.extend({},r,r.push):r,v=r.pull?E.extend({},r,r.pull):r;this.push=h(e,t,_),this.pull=h(t,e,v),this.pushPaused=!0,this.pullPaused=!0;var m={};r.live&&(this.push.on("complete",p.pull.cancel.bind(p.pull)),this.pull.on("complete",p.push.cancel.bind(p.push))),this.on("newListener",function(e){"change"===e?(p.pull.on("change",o),p.push.on("change",i)):"denied"===e?(p.pull.on("denied",u),p.push.on("denied",a)):"active"===e?(p.pull.on("active",f),p.push.on("active",l)):"paused"===e&&(p.pull.on("paused",s),p.push.on("paused",c))}),this.on("removeListener",function(e){"change"===e?(p.pull.removeListener("change",o),p.push.removeListener("change",i)):"denied"===e?(p.pull.removeListener("denied",u),p.push.removeListener("denied",a)):"active"===e?(p.pull.removeListener("active",f),p.push.removeListener("active",l)):"paused"===e&&(p.pull.removeListener("paused",s),p.push.removeListener("paused",c))}),this.pull.on("removeListener",d("pull")),this.push.on("removeListener",d("push"));var g=y.all([this.push,this.pull]).then(function(e){var t={push:e[0],pull:e[1]};return p.emit("complete",t),n&&n(null,t),p.removeAllListeners(),
t},function(e){if(p.cancel(),n?n(e):p.emit("error",e),p.removeAllListeners(),n)throw e});this.then=function(e,t){return g.then(e,t)},this["catch"]=function(e){return g["catch"](e)}}function m(e){e.replicate=h,e.sync=_}var g=r(45),y=n(r(39)),b=n(r(65)),w=n(r(66)),A=r(44),k=n(r(38)),S=r(46),E=r(37),x=0;k(d,A.EventEmitter),d.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")},d.prototype.ready=function(e,t){function r(){o.cancel()}function n(){e.removeListener("destroyed",r),t.removeListener("destroyed",r)}var o=this;o._readyCalled||(o._readyCalled=!0,e.once("destroyed",r),t.once("destroyed",r),o.once("complete",n))},k(v,A.EventEmitter),v.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())},e.exports=m},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(e,t,r,n,i){return e.get(t)["catch"](function(r){if(404===r.status)return"http"===e.type()&&f.explainError(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:n,_id:t,history:[],replicator:h,version:p};throw r}).then(function(a){return i.cancelled?void 0:(a.history=(a.history||[]).filter(function(e){return e.session_id!==n}),a.history.unshift({last_seq:r,session_id:n}),a.history=a.history.slice(0,_),a.version=p,a.replicator=h,a.session_id=n,a.last_seq=r,e.put(a)["catch"](function(a){if(409===a.status)return o(e,t,r,n,i);throw a}))})}function i(e,t,r,n){this.src=e,this.target=t,this.id=r,this.returnValue=n}function a(e,t){return e.session_id===t.session_id?{last_seq:e.last_seq,history:e.history}:u(e.history,t.history)}function u(e,t){var r=e[0],n=e.slice(1),o=t[0],i=t.slice(1);if(!r||0===t.length)return{last_seq:v,history:[]};var a=r.session_id;if(c(a,t))return{last_seq:r.last_seq,history:e};var s=o.session_id;return c(s,n)?{last_seq:o.last_seq,history:i}:u(n,i)}function c(e,t){var r=t[0],n=t.slice(1);return e&&0!==t.length?e===r.session_id?!0:c(e,n):!1}function s(e){return"number"==typeof e.status&&4===Math.floor(e.status/100)}var l=n(r(39)),f=r(45),d=r(61),p=1,h="pouchdb",_=5,v=0;i.prototype.writeCheckpoint=function(e,t){var r=this;return this.updateTarget(e,t).then(function(){return r.updateSource(e,t)})},i.prototype.updateTarget=function(e,t){return o(this.target,this.id,e,t,this.returnValue)},i.prototype.updateSource=function(e,t){var r=this;return this.readOnlySource?l.resolve(!0):o(this.src,this.id,e,t,this.returnValue)["catch"](function(e){if(s(e))return r.readOnlySource=!0,!0;throw e})};var m={undefined:function(e,t){return 0===d.collate(e.last_seq,t.last_seq)?t.last_seq:0},1:function(e,t){return a(t,e).last_seq}};i.prototype.getCheckpoint=function(){var e=this;return e.target.get(e.id).then(function(t){return e.readOnlySource?l.resolve(t.last_seq):e.src.get(e.id).then(function(e){if(t.version!==e.version)return v;var r;return r=t.version?t.version.toString():"undefined",r in m?m[r](t,e):v},function(r){if(404===r.status&&t.last_seq)return e.src.put({_id:e.id,last_seq:v}).then(function(){return v},function(r){return s(r)?(e.readOnlySource=!0,t.last_seq):v});throw r})})["catch"](function(e){if(404!==e.status)throw e;return v})},e.exports=i},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function o(e){return Object.keys(e).sort(c.collate).reduce(function(t,r){return t[r]=e[r],t},{})}function i(e,t,r){var n=r.doc_ids?r.doc_ids.sort(c.collate):"",i=r.filter?r.filter.toString():"",s="",l="";return r.filter&&r.query_params&&(s=JSON.stringify(o(r.query_params))),r.filter&&"_view"===r.filter&&(l=r.view.toString()),a.all([e.id(),t.id()]).then(function(e){var t=e[0]+e[1]+i+l+s+n;return new a(function(e){u.binaryMd5(t,e)})}).then(function(e){return e=e.replace(/\//g,".").replace(/\+/g,"_"),"_local/"+e})}var a=n(r(39)),u=r(52),c=r(61);e.exports=i},function(e,t){(function(){"use strict";function t(e){function t(t){return function(r){return e(t,r)}}return t.arity=2,t.func=e,t}function r(e){function t(t){return function(r){return function(n){return e(t,r,n)}}}return t.arity=3,t.func=e,t}function n(e){function t(t){return function(r){return function(n){return function(o){return e(t,r,n,o)}}}}return t.arity=4,t.func=e,t}function o(e){function t(t){return function(r){return function(n){return function(o){return function(i){return e(t,r,n,o,i)}}}}}return t.arity=5,t.func=e,t}function i(e){function t(t){return function(r){return function(n){return function(o){return function(i){return function(a){return e(t,r,n,o,i,a)}}}}}}return t.arity=6,t.func=e,t}function a(e){function t(t){return function(r){return function(n){return function(o){return function(i){return function(a){return function(u){return e(t,r,n,o,i,a,u)}}}}}}}return t.arity=7,t.func=e,t}function u(e){function t(t){return function(r){return function(n){return function(o){return function(i){return function(a){return function(u){return function(c){return e(t,r,n,o,i,a,u,c)}}}}}}}}return t.arity=8,t.func=e,t}function c(e){function t(t){return function(r){return function(n){return function(o){return function(i){return function(a){return function(u){return function(c){return function(s){return e(t,r,n,o,i,a,u,c,s)}}}}}}}}}return t.arity=9,t.func=e,t}function s(e,t,r){return 2===e.arity?e.func(t,r):e(t)(r)}function l(e,t,r,n){return 3===e.arity?e.func(t,r,n):e(t)(r)(n)}function f(e,t,r,n,o){return 4===e.arity?e.func(t,r,n,o):e(t)(r)(n)(o)}function d(e,t,r,n,o,i){return 5===e.arity?e.func(t,r,n,o,i):e(t)(r)(n)(o)(i)}function p(e,t,r,n,o,i,a){return 6===e.arity?e.func(t,r,n,o,i,a):e(t)(r)(n)(o)(i)(a)}function h(e,t,r,n,o,i,a,u){return 7===e.arity?e.func(t,r,n,o,i,a,u):e(t)(r)(n)(o)(i)(a)(u)}var _=function(){function e(e,t){return e/t|0}function n(e,t){return e%t}function o(e,t){if(0===t)throw new Error("Cannot perform mod 0. Division by zero error.");var r=e%t,n=0===e?0:t>0?e>=0?r:r+t:-o(-e,-t);return n===t?0:n}function i(e,t){return Math.log(t)/Math.log(e)}function a(e){return-e}function u(e){return 0>e?-e:e}function c(e,t){return v.cmp(e,t)<0?e:t}function s(e,t){return v.cmp(e,t)>0?e:t}function l(e,t,r){return v.cmp(r,e)<0?e:v.cmp(r,t)>0?t:r}function f(e,t){return{ctor:w[v.cmp(e,t)+1]}}function d(e,t){return e!==t}function p(e){return!e}function h(e){return e===1/0||e===-(1/0)}function _(e){return 0|e}function m(e){return e*Math.PI/180}function g(e){return 2*Math.PI*e}function y(e){var t=e._0,r=e._1;return v.Tuple2(t*Math.cos(r),t*Math.sin(r))}function b(e){var t=e._0,r=e._1;return v.Tuple2(Math.sqrt(t*t+r*r),Math.atan2(r,t))}var w=["LT","EQ","GT"];return{div:t(e),rem:t(n),mod:t(o),pi:Math.PI,e:Math.E,cos:Math.cos,sin:Math.sin,tan:Math.tan,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:t(Math.atan2),degrees:m,turns:g,fromPolar:y,toPolar:b,sqrt:Math.sqrt,logBase:t(i),negate:a,abs:u,min:t(c),max:t(s),clamp:r(l),compare:t(f),xor:t(d),not:p,truncate:_,ceiling:Math.ceil,floor:Math.floor,round:Math.round,toFloat:function(e){return e},isNaN:isNaN,isInfinite:h}}(),v=function(){function e(e,t){for(var r=[{x:e,y:t}];r.length>0;){var n=r.pop(),o=n.x,i=n.y;if(o!==i){if("object"!=typeof o){if("function"==typeof o)throw new Error("Equality error: general function equality is undecidable, and therefore, unsupported");return!1}var a=0;for(var u in o){if(++a,!(u in i))return!1;"ctor"!==u&&r.push({x:o[u],y:i[u]})}if("ctor"in o&&r.push({x:o.ctor,y:i.ctor}),a!==Object.keys(i).length)return!1}}return!0}function r(e,t){var n;if("object"!=typeof e)return e===t?v:t>e?_:m;if(e instanceof String){var o=e.valueOf(),i=t.valueOf();return o===i?v:i>o?_:m}if("::"!==e.ctor&&"[]"!==e.ctor){if("_Tuple"===e.ctor.slice(0,6)){var a=e.ctor.slice(6)-0,u="cannot compare tuples with more than 6 elements.";if(0===a)return v;if(a>=1){if(n=r(e._0,t._0),n!==v)return n;if(a>=2){if(n=r(e._1,t._1),n!==v)return n;if(a>=3){if(n=r(e._2,t._2),n!==v)return n;if(a>=4){if(n=r(e._3,t._3),n!==v)return n;if(a>=5){if(n=r(e._4,t._4),n!==v)return n;if(a>=6){if(n=r(e._5,t._5),n!==v)return n;if(a>=7)throw new Error("Comparison error: "+u)}}}}}}return v}throw new Error("Comparison error: comparison is only defined on ints, floats, times, chars, strings, lists of comparable values, and tuples of comparable values.")}for(;;){if("[]"===e.ctor&&"[]"===t.ctor)return v;if(e.ctor!==t.ctor)return"[]"===e.ctor?_:m;if(n=r(e._0,t._0),n!==v)return n;e=e._1,t=t._1}}function n(e,t){return{ctor:"_Tuple2",_0:e,_1:t}}function o(e){return new String(e)}function i(e){return y++}function a(e,t){var r={};for(var n in e){var o=n in t?t[n]:e[n];r[n]=o}return r}function u(e,t){return{ctor:"::",_0:e,_1:t}}function c(e,t){if("string"==typeof e)return e+t;if("[]"===e.ctor)return t;var r=u(e._0,b),n=r;for(e=e._1;"[]"!==e.ctor;)n._1=u(e._0,b),e=e._1,n=n._1;return n._1=t,r}function l(e,t){return function(r){throw new Error("Ran into a `Debug.crash` in module `"+e+"` "+d(t)+"\nThe message provided by the code author is:\n\n    "+r)}}function f(e,t,r){return function(n){throw new Error("Ran into a `Debug.crash` in module `"+e+"`\n\nThis was caused by the `case` expression "+d(t)+".\nOne of the branches ended with a crash and the following value got through:\n\n    "+p(r)+"\n\nThe message provided by the code author is:\n\n    "+n)}}function d(e){return e.start.line==e.end.line?"on line "+e.start.line:"between lines "+e.start.line+" and "+e.end.line}function p(e){var t=typeof e;if("function"===t){var r=e.func?e.func.name:e.name;return"<function"+(""===r?"":":")+r+">"}if("boolean"===t)return e?"True":"False";if("number"===t)return e+"";if(e instanceof String)return"'"+h(e,!0)+"'";if("string"===t)return'"'+h(e,!1)+'"';if(null===e)return"null";if("object"===t&&"ctor"in e){var n=e.ctor.substring(0,5);if("_Tupl"===n){var o=[];for(var i in e)"ctor"!==i&&o.push(p(e[i]));return"("+o.join(",")+")"}if("_Task"===n)return"<task>";if("_Array"===e.ctor){var a=Re(e);return"Array.fromList "+p(a)}if("<decoder>"===e.ctor)return"<decoder>";if("_Process"===e.ctor)return"<process:"+e.id+">";if("::"===e.ctor){var o="["+p(e._0);for(e=e._1;"::"===e.ctor;)o+=","+p(e._0),e=e._1;return o+"]"}if("[]"===e.ctor)return"[]";if("RBNode_elm_builtin"===e.ctor||"RBEmpty_elm_builtin"===e.ctor||"Set_elm_builtin"===e.ctor){var r,a;return"Set_elm_builtin"===e.ctor?(r="Set",a=s(ne,function(e){return e._0},Ve(e._0))):(r="Dict",a=Ve(e)),r+".fromList "+p(a)}var o="";for(var u in e)if("ctor"!==u){var c=p(e[u]),l=c[0],f="{"===l||"("===l||"<"===l||'"'===l||c.indexOf(" ")<0;o+=" "+(f?c:"("+c+")")}return e.ctor+o}if("object"===t){var o=[];for(var i in e)o.push(i+" = "+p(e[i]));return 0===o.length?"{}":"{ "+o.join(", ")+" }"}return"<internal structure>"}function h(e,t){var r=e.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return t?r.replace(/\'/g,"\\'"):r.replace(/\"/g,'\\"')}var _=-1,v=0,m=1,g={ctor:"_Tuple0"},y=0,b={ctor:"[]"};return{eq:e,cmp:r,Tuple0:g,Tuple2:n,chr:o,update:a,guid:i,append:t(c),crash:l,crashCase:f,toString:p}}(),m=(t(function(e,t){var r=t;return s(e,r._0,r._1)}),r(function(e,t,r){return e({ctor:"_Tuple2",_0:t,_1:r})}),r(function(e,t,r){return s(e,r,t)})),g=function(e){var t=e;return t._1},y=function(e){var t=e;return t._0},b=t(function(e,t){return e}),w=function(e){return e},A=A||{};A["<|"]=t(function(e,t){return e(t)});var A=A||{};A["|>"]=t(function(e,t){return t(e)});var A=A||{};A[">>"]=r(function(e,t,r){return t(e(r))});var A=A||{};A["<<"]=r(function(e,t,r){return e(t(r))});var A=A||{};A["++"]=v.append;var k=v.toString,S=(_.isInfinite,_.isNaN,_.toFloat),E=(_.ceiling,_.floor),x=(_.truncate,_.round,_.not),A=(_.xor,A||{});A["||"]=_.or;var A=A||{};A["&&"]=_.and;var T=_.max,O=_.min,R=_.compare,A=A||{};A[">="]=_.ge;var A=A||{};A["<="]=_.le;var A=A||{};A[">"]=_.gt;var A=A||{};A["<"]=_.lt;var A=A||{};A["/="]=_.neq;var A=A||{};A["=="]=_.eq;var C=(_.e,_.pi,_.clamp),q=(_.logBase,_.abs),N=_.negate,A=(_.sqrt,_.atan2,_.atan,_.asin,_.acos,_.tan,_.sin,_.cos,A||{});A["^"]=_.exp;var A=A||{};A["%"]=_.mod;var A=(_.rem,A||{});A["//"]=_.div;var A=A||{};A["/"]=_.floatDiv;var A=A||{};A["*"]=_.mul;var A=A||{};A["-"]=_.sub;var A=A||{};A["+"]=_.add;var I=(_.toPolar,_.fromPolar,_.turns,_.degrees,function(){function e(e,t){var r=e+": "+v.toString(t),n=n||{};return n.stdout?n.stdout.write(r):console.log(r),t}function r(e){throw new Error(e)}return{crash:r,log:t(e)}}()),j=(I.crash,I.log,t(function(e,t){var r=t;return"Just"===r.ctor?r._0:e})),D={ctor:"Nothing"},L=function(e){for(;;){var t=e;if("[]"===t.ctor)return D;var r=t._0,n=r;{if("Nothing"!==n.ctor)return r;var o=t._1;e=o}}},B=t(function(e,t){var r=e;return"Just"===r.ctor?t(r._0):D}),M=function(e){return{ctor:"Just",_0:e}},P=t(function(e,t){var r=t;return"Just"===r.ctor?M(e(r._0)):D}),F=(r(function(e,t,r){var n={ctor:"_Tuple2",_0:t,_1:r};return"_Tuple2"===n.ctor&&"Just"===n._0.ctor&&"Just"===n._1.ctor?M(s(e,n._0._0,n._1._0)):D}),n(function(e,t,r,n){var o={ctor:"_Tuple3",_0:t,_1:r,_2:n};return"_Tuple3"===o.ctor&&"Just"===o._0.ctor&&"Just"===o._1.ctor&&"Just"===o._2.ctor?M(l(e,o._0._0,o._1._0,o._2._0)):D}),o(function(e,t,r,n,o){var i={ctor:"_Tuple4",_0:t,_1:r,_2:n,_3:o};return"_Tuple4"===i.ctor&&"Just"===i._0.ctor&&"Just"===i._1.ctor&&"Just"===i._2.ctor&&"Just"===i._3.ctor?M(f(e,i._0._0,i._1._0,i._2._0,i._3._0)):D}),i(function(e,t,r,n,o,i){var a={ctor:"_Tuple5",_0:t,_1:r,_2:n,_3:o,_4:i};return"_Tuple5"===a.ctor&&"Just"===a._0.ctor&&"Just"===a._1.ctor&&"Just"===a._2.ctor&&"Just"===a._3.ctor&&"Just"===a._4.ctor?M(d(e,a._0._0,a._1._0,a._2._0,a._3._0,a._4._0)):D}),function(){function e(e,t){return{ctor:"::",_0:e,_1:t}}function a(t){for(var r=w,n=t.length;n--;)r=e(t[n],r);return r}function u(e){for(var t=[];"[]"!==e.ctor;)t.push(e._0),e=e._1;return t}function c(t,r){var n=w;if(r>=t)do n=e(r,n);while(r-- >t);return n}function p(e,t,r){for(var n=u(r),o=t,i=n.length;i--;)o=s(e,n[i],o);return o}function h(e,t,r){for(var n=[];"[]"!==t.ctor&&"[]"!==r.ctor;)n.push(s(e,t._0,r._0)),t=t._1,r=r._1;return a(n)}function _(e,t,r,n){for(var o=[];"[]"!==t.ctor&&"[]"!==r.ctor&&"[]"!==n.ctor;)o.push(l(e,t._0,r._0,n._0)),t=t._1,r=r._1,n=n._1;return a(o)}function m(e,t,r,n,o){for(var i=[];"[]"!==t.ctor&&"[]"!==r.ctor&&"[]"!==n.ctor&&"[]"!==o.ctor;)i.push(f(e,t._0,r._0,n._0,o._0)),t=t._1,r=r._1,n=n._1,o=o._1;return a(i)}function g(e,t,r,n,o,i){for(var u=[];"[]"!==t.ctor&&"[]"!==r.ctor&&"[]"!==n.ctor&&"[]"!==o.ctor&&"[]"!==i.ctor;)u.push(d(e,t._0,r._0,n._0,o._0,i._0)),t=t._1,r=r._1,n=n._1,o=o._1,i=i._1;return a(u)}function y(e,t){return a(u(t).sort(function(t,r){return v.cmp(e(t),e(r))}))}function b(e,t){return a(u(t).sort(function(t,r){var n=e(t)(r).ctor;return"EQ"===n?0:"LT"===n?-1:1}))}var w={ctor:"[]"};return{Nil:w,Cons:e,cons:t(e),toArray:u,fromArray:a,range:c,foldr:r(p),map2:r(h),map3:n(_),map4:o(m),map5:i(g),sortBy:t(y),sortWith:t(b)}}()),U=(F.sortWith,F.sortBy,t(function(e,t){for(;;){if(v.cmp(e,0)<1)return t;var r=t;if("[]"===r.ctor)return t;var n=e-1,o=r._1;e=n,t=o}})),J=F.map5,H=F.map4,W=F.map3,z=F.map2,V=t(function(e,t){for(;;){var r=t;if("[]"===r.ctor)return!1;if(e(r._0))return!0;var n=e,o=r._1;e=n,t=o}}),G=t(function(e,t){return x(s(V,function(t){return x(e(t))},t))}),K=F.foldr,$=r(function(e,t,r){for(;;){var n=r;if("[]"===n.ctor)return t;var o=e,i=s(e,n._0,t),a=n._1;e=o,t=i,r=a}}),X=function(e){return l($,t(function(e,t){return t+1}),0,e)},Q=t(function(e,t){return l(z,e,F.range(0,X(t)-1),t)}),Y=t(function(e,t){return s(V,function(t){return v.eq(t,e)},t)}),Z=function(e){var t=e;return"[]"===t.ctor},ee=function(e){var t=e;return"::"===t.ctor?M(t._1):D},te=function(e){var t=e;return"::"===t.ctor?M(t._0):D},re=re||{};re["::"]=F.cons;var ne=t(function(e,r){return l(K,t(function(t,r){return s(re["::"],e(t),r)}),F.fromArray([]),r)}),oe=t(function(e,r){var n=t(function(t,r){return e(t)?s(re["::"],t,r):r});return l(K,n,F.fromArray([]),r)}),ie=r(function(e,t,r){var n=e(t);return"Just"===n.ctor?s(re["::"],n._0,r):r}),ae=(t(function(e,t){return l(K,ie(e),F.fromArray([]),t)}),function(e){return l($,t(function(e,t){return s(re["::"],e,t)}),F.fromArray([]),e)}),ue=r(function(e,r,n){var o=t(function(t,r){var n=r;return"::"===n.ctor?s(re["::"],s(e,t,n._0),r):F.fromArray([])});return ae(l($,o,F.fromArray([r]),n))}),ce=t(function(e,r){var n=r;return"[]"===n.ctor?e:l(K,t(function(e,t){return s(re["::"],e,t)}),r,e)}),se=function(e){return l(K,ce,F.fromArray([]),e)},le=t(function(e,t){return se(s(ne,e,t))}),fe=(t(function(e,r){var n=t(function(t,r){var n=r,o=n._0,i=n._1;return e(t)?{ctor:"_Tuple2",_0:s(re["::"],t,o),_1:i}:{ctor:"_Tuple2",_0:o,_1:s(re["::"],t,i)}});return l(K,n,{ctor:"_Tuple2",_0:F.fromArray([]),_1:F.fromArray([])},r)}),function(e){var r=t(function(e,t){var r=e,n=t;return{ctor:"_Tuple2",_0:s(re["::"],r._0,n._0),_1:s(re["::"],r._1,n._1)}});return l(K,r,{ctor:"_Tuple2",_0:F.fromArray([]),_1:F.fromArray([])},e)}),de=t(function(e,r){var n=r;if("[]"===n.ctor)return F.fromArray([]);var o=t(function(t,r){return s(re["::"],e,s(re["::"],t,r))}),i=l(K,o,F.fromArray([]),n._1);return s(re["::"],n._0,i)}),pe=t(function(e,t){if(v.cmp(e,0)<1)return F.fromArray([]);var r=t;return"[]"===r.ctor?t:s(re["::"],r._0,s(pe,e-1,r._1))}),he=r(function(e,t,r){for(;;){if(v.cmp(t,0)<1)return e;var n=s(re["::"],r,e),o=t-1,i=r;e=n,t=o,r=i}}),_e=(t(function(e,t){return l(he,F.fromArray([]),e,t)}),function(e){var t=e;return"Ok"===t.ctor?M(t._0):D}),ve=(t(function(e,t){var r=t;return"Ok"===r.ctor?r._0:e}),function(e){return{ctor:"Err",_0:e}}),me=(t(function(e,t){var r=e;return"Ok"===r.ctor?t(r._0):ve(r._0)}),function(e){return{ctor:"Ok",_0:e}}),ge=(t(function(e,t){var r=t;return"Ok"===r.ctor?me(e(r._0)):ve(r._0)}),r(function(e,t,r){var n={ctor:"_Tuple2",_0:t,_1:r};return"Ok"===n._0.ctor?"Ok"===n._1.ctor?me(s(e,n._0._0,n._1._0)):ve(n._1._0):ve(n._0._0)}),n(function(e,t,r,n){var o={ctor:"_Tuple3",_0:t,_1:r,_2:n};return"Ok"===o._0.ctor?"Ok"===o._1.ctor?"Ok"===o._2.ctor?me(l(e,o._0._0,o._1._0,o._2._0)):ve(o._2._0):ve(o._1._0):ve(o._0._0)}),o(function(e,t,r,n,o){var i={ctor:"_Tuple4",_0:t,_1:r,_2:n,_3:o};return"Ok"===i._0.ctor?"Ok"===i._1.ctor?"Ok"===i._2.ctor?"Ok"===i._3.ctor?me(f(e,i._0._0,i._1._0,i._2._0,i._3._0)):ve(i._3._0):ve(i._2._0):ve(i._1._0):ve(i._0._0)}),i(function(e,t,r,n,o,i){var a={ctor:"_Tuple5",_0:t,_1:r,_2:n,_3:o,_4:i};return"Ok"===a._0.ctor?"Ok"===a._1.ctor?"Ok"===a._2.ctor?"Ok"===a._3.ctor?"Ok"===a._4.ctor?me(d(e,a._0._0,a._1._0,a._2._0,a._3._0,a._4._0)):ve(a._4._0):ve(a._3._0):ve(a._2._0):ve(a._1._0):ve(a._0._0)}),t(function(e,t){var r=t;return"Ok"===r.ctor?me(r._0):ve(e(r._0))}),t(function(e,t){var r=t;return"Just"===r.ctor?me(r._0):ve(e)}),function(){function e(e,t,r){var o=r?i(t,r):n(t);e.worker=function(e){return o(void 0,e,!1)},e.embed=function(e,t){return o(e,t,!0)},e.fullscreen=function(e){return o(document.body,e,!0)}}function n(e){return function(t){var r="Cannot initialize module `"+e+"` because it has no `main` value!\nWhat should I show on screen?";throw t.innerHTML=o(r),new Error(r)}}function o(e){return'<div style="padding-left:1em;"><h2 style="font-weight:normal;"><b>Oops!</b> Something went wrong when starting your Elm program.</h2><pre style="padding-left:1em;">'+e+"</pre></div>"}function i(e,t){return function(r,n,i){try{var c=u(e,t);return i||(c.renderer=a),p(e,c,r,n)}catch(s){throw r.innerHTML=o(s.message),s}}}function a(){return{update:function(){}}}function u(e,r){var n=r.main;if("undefined"==typeof n.init){var o=w(F.Nil),i=v.Tuple2(v.Tuple0,o);return Gn({init:function(){return i},view:function(){return n},update:t(function(){return i}),subscriptions:function(){return o}})}var a=r.flags,u=a?d(e,n.init,a):c(e,n.init);return Gn({init:u,view:n.view,update:n.update,subscriptions:n.subscriptions})}function c(e,t){return function(r){if("undefined"!=typeof r)throw new Error("You are giving module `"+e+"` an argument in JavaScript.\nThis module does not take arguments though! You probably need to change the\ninitialization code to something like `Elm."+e+".fullscreen()`");return t()}}function d(e,t,r){return function(n){var o=s(Lt.run,r,n);if("Err"===o.ctor)throw new Error("You are trying to initialize module `"+e+"` with an unexpected argument.\nWhen trying to convert it to a usable Elm value, I run into this problem:\n\n"+o._0);return t(o._0)}}function p(e,t,r,n){function o(e,t){return ye.nativeBinding(function(r){var n=s(c,e,t);t=n._0,a.update(f(t));var o=n._1,i=l(t);k(p,o,i),r(ye.succeed(t))})}function i(e){ye.rawSend(v,e)}var a,u=t.init,c=t.update,l=t.subscriptions,f=t.view,d=t.renderer,p={},_=ye.nativeBinding(function(e){var t=u(n),o=t._0;a=d(r,i,f(o));var c=t._1,s=l(o);k(p,c,s),e(ye.succeed(o))}),v=y(_,o),m=h(p,i);return m?{ports:m}:{}}function h(e,t){var r;for(var n in N){var o=N[n];o.isForeign&&(r=r||{},r[n]="cmd"===o.tag?R(n):q(n,t)),e[n]=_(o,t)}return r}function _(e,t){function r(e,t){if("self"===e.ctor)return l(a,n,e._0,t);var r=e._0;switch(o){case"cmd":return l(i,n,r.cmds,t);case"sub":return l(i,n,r.subs,t);case"fx":return f(i,n,r.cmds,r.subs,t)}}var n={main:t,self:void 0},o=e.tag,i=e.onEffects,a=e.onSelfMsg,u=y(e.init,r);return n.self=u,u}function m(e,t){return ye.nativeBinding(function(r){e.main(t),r(ye.succeed(v.Tuple0))})}function g(e,t){return s(ye.send,e.self,{ctor:"self",_0:t})}function y(e,t){function r(e){var o=ye.receive(function(r){return t(r,e)});return s(n,o,r)}var n=ye.andThen,o=s(n,e,r);return ye.rawSpawn(o)}function b(e){return function(t){return{type:"leaf",home:e,value:t}}}function w(e){return{type:"node",branches:e}}function A(e,t){return{type:"map",tagger:e,tree:t}}function k(e,t,r){var n={};S(!0,t,n,null),S(!1,r,n,null);for(var o in e){var i=o in n?n[o]:{cmds:F.Nil,subs:F.Nil};ye.rawSend(e[o],{ctor:"fx",_0:i})}}function S(e,t,r,n){switch(t.type){case"leaf":var o=t.home,i=E(e,o,n,t.value);return void(r[o]=x(e,i,r[o]));case"node":for(var a=t.branches;"[]"!==a.ctor;)S(e,a._0,r,n),a=a._1;return;case"map":return void S(e,t.tree,r,{tagger:t.tagger,rest:n})}}function E(e,t,r,n){function o(e){for(;r;)e=r.tagger(e),r=r.rest;return e}var i=e?N[t].cmdMap:N[t].subMap;return s(i,o,n)}function x(e,t,r){return r=r||{cmds:F.Nil,subs:F.Nil},e?(r.cmds=F.Cons(t,r.cmds),r):(r.subs=F.Cons(t,r.subs),r)}function T(e){if(e in N)throw new Error("There can only be one port named `"+e+"`, but your program has multiple.")}function O(e,t){return T(e),N[e]={tag:"cmd",cmdMap:I,converter:t,isForeign:!0},b(e)}function R(e){function t(e,t,r){for(;"[]"!==t.ctor;){for(var n=a(t._0),o=0;o<i.length;o++)i[o](n);t=t._1}return u}function n(e){i.push(e)}function o(e){var t=i.indexOf(e);t>=0&&i.splice(t,1)}var i=[],a=N[e].converter,u=ye.succeed(null);return N[e].init=u,N[e].onEffects=r(t),{subscribe:n,unsubscribe:o}}function C(e,t){return T(e),N[e]={tag:"sub",subMap:j,converter:t,isForeign:!0},b(e)}function q(e,t){function n(e,t,r){return i=t,u}function o(r){var n=s(Jt,a,r);if("Err"===n.ctor)throw new Error("Trying to send an unexpected type of value through port `"+e+"`:\n"+n._0);for(var r=n._0,o=i;"[]"!==o.ctor;)t(o._0(r)),o=o._1}var i=F.Nil,a=N[e].converter,u=ye.succeed(null);return N[e].init=u,N[e].onEffects=r(n),{send:o}}var N={},I=t(function(e,t){return t}),j=t(function(e,t){return function(r){return e(t(r))}});return{sendToApp:t(m),sendToSelf:t(g),mainToProgram:u,effectManagers:N,outgoingPort:O,incomingPort:C,addPublicModule:e,leaf:b,batch:w,map:t(A)}}()),ye=function(){function e(e){return{ctor:"_Task_succeed",value:e}}function r(e){return{ctor:"_Task_fail",value:e}}function n(e){return{ctor:"_Task_nativeBinding",callback:e,cancel:null}}function o(e,t){return{ctor:"_Task_andThen",task:e,callback:t}}function i(e,t){return{ctor:"_Task_onError",task:e,callback:t}}function a(e){return{ctor:"_Task_receive",callback:e}}function u(e){var t={ctor:"_Process",id:v.guid(),root:e,stack:null,mailbox:[]};return h(t),t}function c(t){return n(function(r){var n=u(t);r(e(n))})}function s(e,t){e.mailbox.push(t),h(e)}function l(t,r){return n(function(n){s(t,r),n(e(v.Tuple0))})}function f(t){return n(function(r){var n=t.root;"_Task_nativeBinding"===n.ctor&&n.cancel&&n.cancel(),t.root=null,r(e(v.Tuple0))})}function d(t){return n(function(r){var n=setTimeout(function(){r(e(v.Tuple0))},t);return function(){clearTimeout(n)}})}function p(e,t){for(;m>e;){var r=t.root.ctor;if("_Task_succeed"!==r)if("_Task_fail"!==r)if("_Task_andThen"!==r)if("_Task_onError"!==r){if("_Task_nativeBinding"===r){t.root.cancel=t.root.callback(function(e){t.root=e,h(t)});break}if("_Task_receive"!==r)throw new Error(r);var n=t.mailbox;if(0===n.length)break;t.root=t.root.callback(n.shift()),++e}else t.stack={ctor:"_Task_onError",callback:t.root.callback,rest:t.stack},t.root=t.root.task,++e;else t.stack={ctor:"_Task_andThen",callback:t.root.callback,rest:t.stack},t.root=t.root.task,++e;else{for(;t.stack&&"_Task_andThen"===t.stack.ctor;)t.stack=t.stack.rest;if(null===t.stack)break;t.root=t.stack.callback(t.root.value),t.stack=t.stack.rest,++e}else{for(;t.stack&&"_Task_onError"===t.stack.ctor;)t.stack=t.stack.rest;if(null===t.stack)break;t.root=t.stack.callback(t.root.value),t.stack=t.stack.rest,++e}}return m>e?e+1:(h(t),e)}function h(e){y.push(e),g||(setTimeout(_,0),g=!0)}function _(){for(var e,t=0;m>t&&(e=y.shift());)t=p(t,e);return e?void setTimeout(_,0):void(g=!1)}var m=1e4,g=!1,y=[];return{succeed:e,fail:r,nativeBinding:n,andThen:t(o),onError:t(i),receive:a,spawn:c,kill:f,sleep:d,send:t(l),rawSpawn:u,rawSend:s}}(),be=(ye.succeed,ge.sendToSelf),we=ge.sendToApp,Ae=ge.batch,ke=Ae(F.fromArray([])),Se=Se||{};Se["!"]=t(function(e,t){return{ctor:"_Tuple2",_0:e,_1:Ae(t)}});var Ee=ge.map,xe=ge.batch,Te=(xe(F.fromArray([])),ge.map),Oe=function(){function e(e,t){if(0>e||e>=L(t))throw new Error("Index "+e+" is out of range. Check the length of your array first or use getMaybe or getWithDefault.");return n(e,t)}function n(e,t){for(var r=t.height;r>0;r--){for(var n=e>>5*r;t.lengths[n]<=e;)n++;n>0&&(e-=t.lengths[n-1]),t=t.table[n]}return t.table[e]}function o(e,t,r){return 0>e||L(r)<=e?r:i(e,t,r)}function i(e,t,r){if(r=D(r),0===r.height)r.table[e]=t;else{var n=B(e,r);n>0&&(e-=r.lengths[n-1]),r.table[n]=i(e,t,r.table[n])}return r}function a(e,t){if(0>=e)return K;var r=Math.floor(Math.log(e)/Math.log(V));return u(t,r,0,e)}function u(e,t,r,n){if(0===t){for(var o=new Array((n-r)%(V+1)),i=0;i<o.length;i++)o[i]=e(r+i);return{ctor:"_Array",height:0,table:o}}for(var a=Math.pow(V,t),o=new Array(Math.ceil((n-r)/a)),c=new Array(o.length),i=0;i<o.length;i++)o[i]=u(e,t-1,r+i*a,Math.min(r+(i+1)*a,n)),c[i]=L(o[i])+(i>0?c[i-1]:0);return{ctor:"_Array",height:t,table:o,lengths:c}}function c(e){if("[]"===e.ctor)return K;for(var t=new Array(V),r=[],n=0;"[]"!==e.ctor;)if(t[n]=e._0,e=e._1,n++,n===V){var o={ctor:"_Array",height:0,table:t};l(o,r),t=new Array(V),n=0}if(n>0){var o={ctor:"_Array",height:0,table:t.splice(0,n)};l(o,r)}for(var i=0;i<r.length-1;i++)r[i].table.length>0&&l(r[i],r);var a=r[r.length-1];return a.height>0&&1===a.table.length?a.table[0]:a}function l(e,t){var r=e.height;if(t.length===r){var n={ctor:"_Array",height:r+1,table:[],lengths:[]};t.push(n)}t[r].table.push(e);var o=L(e);t[r].lengths.length>0&&(o+=t[r].lengths[t[r].lengths.length-1]),t[r].lengths.push(o),t[r].table.length===V&&(l(t[r],t),t[r]={ctor:"_Array",height:r+1,table:[],lengths:[]})}function f(e,t){var r=d(e,t);if(null!==r)return r;var n=M(e,t.height);return U(t,n)}function d(e,t){if(0===t.height){if(t.table.length<V){var r={ctor:"_Array",height:0,table:t.table.slice()};return r.table.push(e),r}return null}var n=d(e,I(t));if(null!==n){var r=D(t);return r.table[r.table.length-1]=n,r.lengths[r.lengths.length-1]++,r}if(t.table.length<V){var o=M(e,t.height-1),r=D(t);return r.table.push(o),r.lengths.push(r.lengths[r.lengths.length-1]+L(o)),r}return null}function p(e){return h(F.Nil,e)}function h(e,t){for(var r=t.table.length-1;r>=0;r--)e=0===t.height?F.Cons(t.table[r],e):h(e,t.table[r]);return e}function _(e,t){var r={ctor:"_Array",height:t.height,table:new Array(t.table.length)};t.height>0&&(r.lengths=t.lengths);for(var n=0;n<t.table.length;n++)r.table[n]=0===t.height?e(t.table[n]):_(e,t.table[n]);return r}function v(e,t){return m(e,t,0)}function m(e,t,r){var n={ctor:"_Array",height:t.height,table:new Array(t.table.length)};t.height>0&&(n.lengths=t.lengths);for(var o=0;o<t.table.length;o++)n.table[o]=0===t.height?s(e,r+o,t.table[o]):m(e,t.table[o],0==o?r:r+t.lengths[o-1]);return n}function g(e,t,r){if(0===r.height)for(var n=0;n<r.table.length;n++)t=s(e,r.table[n],t);else for(var n=0;n<r.table.length;n++)t=g(e,t,r.table[n]);return t}function y(e,t,r){if(0===r.height)for(var n=r.table.length;n--;)t=s(e,r.table[n],t);else for(var n=r.table.length;n--;)t=y(e,t,r.table[n]);return t}function b(e,t,r){return 0>e&&(e+=L(r)),0>t&&(t+=L(r)),A(e,w(t,r))}function w(e,t){if(e===L(t))return t;if(0===t.height){var r={ctor:"_Array",height:0};return r.table=t.table.slice(0,e),r}var n=B(e,t),o=w(e-(n>0?t.lengths[n-1]:0),t.table[n]);if(0===n)return o;var r={ctor:"_Array",height:t.height,table:t.table.slice(0,n),lengths:t.lengths.slice(0,n)};return o.table.length>0&&(r.table[n]=o,r.lengths[n]=L(o)+(n>0?r.lengths[n-1]:0)),r}function A(e,t){if(0===e)return t;if(0===t.height){var r={ctor:"_Array",height:0};return r.table=t.table.slice(e,t.table.length+1),r}var n=B(e,t),o=A(e-(n>0?t.lengths[n-1]:0),t.table[n]);if(n===t.table.length-1)return o;var r={ctor:"_Array",height:t.height,table:t.table.slice(n,t.table.length+1),lengths:new Array(t.table.length-n)};r.table[0]=o;for(var i=0,a=0;a<r.table.length;a++)i+=L(r.table[a]),r.lengths[a]=i;return r}function k(e,t){if(0===e.table.length)return t;if(0===t.table.length)return e;var r=S(e,t);if(r[0].table.length+r[1].table.length<=V){if(0===r[0].table.length)return r[1];if(0===r[1].table.length)return r[0];if(r[0].table=r[0].table.concat(r[1].table),r[0].height>0){for(var n=L(r[0]),o=0;o<r[1].lengths.length;o++)r[1].lengths[o]+=n;r[0].lengths=r[0].lengths.concat(r[1].lengths)}return r[0]}if(r[0].height>0){var i=T(e,t);i>G&&(r=N(r[0],r[1],i))}return U(r[0],r[1])}function S(e,t){if(0===e.height&&0===t.height)return[e,t];if(1!==e.height||1!==t.height)if(e.height===t.height){e=D(e),t=D(t);var r=S(I(e),j(t));E(e,r[1]),x(t,r[0])}else if(e.height>t.height){e=D(e);var r=S(I(e),t);E(e,r[0]),t=P(r[1],r[1].height+1)}else{t=D(t);var r=S(e,j(t)),n=0===r[0].table.length?0:1,o=0===n?1:0;x(t,r[n]),e=P(r[o],r[o].height+1)}if(0===e.table.length||0===t.table.length)return[e,t];var i=T(e,t);return G>=i?[e,t]:N(e,t,i)}function E(e,t){var r=e.table.length-1;e.table[r]=t,e.lengths[r]=L(t),e.lengths[r]+=r>0?e.lengths[r-1]:0}function x(e,t){if(t.table.length>0){e.table[0]=t,e.lengths[0]=L(t);for(var r=L(e.table[0]),n=1;n<e.lengths.length;n++)r+=L(e.table[n]),e.lengths[n]=r}else{e.table.shift();for(var n=1;n<e.lengths.length;n++)e.lengths[n]=e.lengths[n]-e.lengths[0];e.lengths.shift()}}function T(e,t){for(var r=0,n=0;n<e.table.length;n++)r+=e.table[n].table.length;for(var n=0;n<t.table.length;n++)r+=t.table[n].table.length;var o=e.table.length+t.table.length;return o-(Math.floor((r-1)/V)+1)}function O(e,t,r){return r<e.length?e[r]:t[r-e.length]}function R(e,t,r,n){r<e.length?e[r]=n:t[r-e.length]=n}function C(e,t,r,n){R(e.table,t.table,r,n);var o=0===r||r===e.lengths.length?0:O(e.lengths,e.lengths,r-1);R(e.lengths,t.lengths,r,o+L(n))}function q(e,t){0>t&&(t=0);var r={ctor:"_Array",height:e,table:new Array(t)};return e>0&&(r.lengths=new Array(t)),r}function N(e,t,r){for(var n=q(e.height,Math.min(V,e.table.length+t.table.length-r)),o=q(e.height,n.table.length-(e.table.length+t.table.length-r)),i=0;O(e.table,t.table,i).table.length%V===0;)R(n.table,o.table,i,O(e.table,t.table,i)),R(n.lengths,o.lengths,i,O(e.lengths,t.lengths,i)),i++;for(var a=i,u=new q(e.height-1,0),c=0;i-a-(u.table.length>0?1:0)<r;){var s=O(e.table,t.table,i),l=Math.min(V-u.table.length,s.table.length);if(u.table=u.table.concat(s.table.slice(c,l)),u.height>0)for(var f=u.lengths.length,d=f;f+l-c>d;d++)u.lengths[d]=L(u.table[d]),u.lengths[d]+=d>0?u.lengths[d-1]:0;c+=l,s.table.length<=l&&(i++,c=0),u.table.length===V&&(C(n,o,a,u),u=q(e.height-1,0),a++)}for(u.table.length>0&&(C(n,o,a,u),
a++);i<e.table.length+t.table.length;)C(n,o,a,O(e.table,t.table,i)),i++,a++;return[n,o]}function I(e){return e.table[e.table.length-1]}function j(e){return e.table[0]}function D(e){var t={ctor:"_Array",height:e.height,table:e.table.slice()};return e.height>0&&(t.lengths=e.lengths.slice()),t}function L(e){return 0===e.height?e.table.length:e.lengths[e.lengths.length-1]}function B(e,t){for(var r=e>>5*t.height;t.lengths[r]<=e;)r++;return r}function M(e,t){return 0===t?{ctor:"_Array",height:0,table:[e]}:{ctor:"_Array",height:t,table:[M(e,t-1)],lengths:[1]}}function P(e,t){return t===e.height?e:{ctor:"_Array",height:t,table:[P(e,t-1)],lengths:[L(e)]}}function U(e,t){return{ctor:"_Array",height:e.height+1,table:[e,t],lengths:[L(e),L(e)+L(t)]}}function J(e){var t=new Array(L(e));return H(t,0,e),t}function H(e,t,r){for(var n=0;n<r.table.length;n++)if(0===r.height)e[t+n]=r.table[n];else{var o=0===n?0:r.lengths[n-1];H(e,t+o,r.table[n])}}function W(e){if(0===e.length)return K;var t=Math.floor(Math.log(e.length)/Math.log(V));return z(e,t,0,e.length)}function z(e,t,r,n){if(0===t)return{ctor:"_Array",height:0,table:e.slice(r,n)};for(var o=Math.pow(V,t),i=new Array(Math.ceil((n-r)/o)),a=new Array(i.length),u=0;u<i.length;u++)i[u]=z(e,t-1,r+u*o,Math.min(r+(u+1)*o,n)),a[u]=L(i[u])+(u>0?a[u-1]:0);return{ctor:"_Array",height:t,table:i,lengths:a}}var V=32,G=2,K={ctor:"_Array",height:0,table:[]};return{empty:K,fromList:c,toList:p,initialize:t(a),append:t(k),push:t(f),slice:r(b),get:t(e),set:r(o),map:t(_),indexedMap:t(v),foldl:r(g),foldr:r(y),length:L,toJSArray:J,fromJSArray:W}}(),Re=(Oe.append,Oe.length,Oe.slice,Oe.set,t(function(e,t){return v.cmp(0,e)<1&&v.cmp(e,Oe.length(t))<0?M(s(Oe.get,e,t)):D}),Oe.push,Oe.empty,t(function(e,r){var n=t(function(t,r){return e(t)?s(Oe.push,t,r):r});return l(Oe.foldl,n,Oe.empty,r)}),Oe.foldr,Oe.foldl,Oe.indexedMap,Oe.map,Oe.toList),Ce=(Oe.fromList,Oe.initialize),qe=(t(function(e,t){return s(Ce,e,b(t))}),function(){function e(e){return 0===e.length}function n(e,t){return e+t}function o(e){var t=e[0];return t?M(v.Tuple2(v.chr(t),e.slice(1))):D}function i(e,t){return e+t}function a(e){return F.toArray(e).join("")}function u(e){return e.length}function c(e,t){for(var r=t.split(""),n=r.length;n--;)r[n]=e(v.chr(r[n]));return r.join("")}function l(e,t){return t.split("").map(v.chr).filter(e).join("")}function f(e){return e.split("").reverse().join("")}function d(e,t,r){for(var n=r.length,o=0;n>o;++o)t=s(e,v.chr(r[o]),t);return t}function p(e,t,r){for(var n=r.length;n--;)t=s(e,v.chr(r[n]),t);return t}function h(e,t){return F.fromArray(t.split(e))}function _(e,t){return F.toArray(t).join(e)}function m(e,t){for(var r="";e>0;)1&e&&(r+=t),e>>=1,t+=t;return r}function g(e,t,r){return r.slice(e,t)}function y(e,t){return 1>e?"":t.slice(0,e)}function b(e,t){return 1>e?"":t.slice(-e)}function w(e,t){return 1>e?t:t.slice(e)}function A(e,t){return 1>e?t:t.slice(0,-e)}function k(e,t,r){var n=(e-r.length)/2;return m(Math.ceil(n),t)+r+m(0|n,t)}function S(e,t,r){return r+m(e-r.length,t)}function E(e,t,r){return m(e-r.length,t)+r}function x(e){return e.trim()}function T(e){return e.replace(/^\s+/,"")}function O(e){return e.replace(/\s+$/,"")}function R(e){return F.fromArray(e.trim().split(/\s+/g))}function C(e){return F.fromArray(e.split(/\r\n|\r|\n/g))}function q(e){return e.toUpperCase()}function N(e){return e.toLowerCase()}function I(e,t){for(var r=t.length;r--;)if(e(v.chr(t[r])))return!0;return!1}function j(e,t){for(var r=t.length;r--;)if(!e(v.chr(t[r])))return!1;return!0}function L(e,t){return t.indexOf(e)>-1}function B(e,t){return 0===t.indexOf(e)}function P(e,t){return t.length>=e.length&&t.lastIndexOf(e)===t.length-e.length}function U(e,t){for(var r=e.length,n=0,o=[];(n=t.indexOf(e,n))>-1;)o.push(n),n+=r;return F.fromArray(o)}function J(e){var t=e.length;if(0===t)return ve("could not convert string '"+e+"' to an Int");var r=0;if("-"===e[0]){if(1===t)return ve("could not convert string '"+e+"' to an Int");r=1}for(var n=r;t>n;++n){var o=e[n];if("0">o||o>"9")return ve("could not convert string '"+e+"' to an Int")}return me(parseInt(e,10))}function H(e){var t=e.length;if(0===t)return ve("could not convert string '"+e+"' to a Float");var r=0;if("-"===e[0]){if(1===t)return ve("could not convert string '"+e+"' to a Float");r=1}for(var n=0,o=r;t>o;++o){var i=e[o];if(!(i>="0"&&"9">=i||"."===i&&(n+=1,1>=n)))return ve("could not convert string '"+e+"' to a Float")}return me(parseFloat(e))}function W(e){return F.fromArray(e.split("").map(v.chr))}function z(e){return F.toArray(e).join("")}return{isEmpty:e,cons:t(n),uncons:o,append:t(i),concat:a,length:u,map:t(c),filter:t(l),reverse:f,foldl:r(d),foldr:r(p),split:t(h),join:t(_),repeat:t(m),slice:r(g),left:t(y),right:t(b),dropLeft:t(w),dropRight:t(A),pad:r(k),padLeft:r(E),padRight:r(S),trim:x,trimLeft:T,trimRight:O,words:R,lines:C,toUpper:q,toLower:N,any:t(I),all:t(j),contains:t(L),startsWith:t(B),endsWith:t(P),indexes:t(U),toInt:J,toFloat:H,toList:W,fromList:z}}()),Ne=function(){return{fromCode:function(e){return v.chr(String.fromCharCode(e))},toCode:function(e){return e.charCodeAt(0)},toUpper:function(e){return v.chr(e.toUpperCase())},toLower:function(e){return v.chr(e.toLowerCase())},toLocaleUpper:function(e){return v.chr(e.toLocaleUpperCase())},toLocaleLower:function(e){return v.chr(e.toLocaleLowerCase())}}}(),Ie=(Ne.fromCode,Ne.toCode),je=(Ne.toLocaleLower,Ne.toLocaleUpper,Ne.toLower,Ne.toUpper,r(function(e,t,r){var n=Ie(r);return v.cmp(n,Ie(e))>-1&&v.cmp(n,Ie(t))<1})),De=(s(je,v.chr("A"),v.chr("Z")),s(je,v.chr("a"),v.chr("z")),s(je,v.chr("0"),v.chr("9")),s(je,v.chr("0"),v.chr("7")),qe.fromList,qe.toList,qe.toFloat,qe.toInt,qe.indexes,qe.indexes,qe.endsWith,qe.startsWith,qe.contains,qe.all,qe.any,qe.toLower,qe.toUpper),Le=(qe.lines,qe.words,qe.trimRight,qe.trimLeft,qe.trim),Be=(qe.padRight,qe.padLeft),Me=(qe.pad,qe.dropRight,qe.dropLeft,qe.right,qe.left,qe.slice),Pe=(qe.repeat,qe.join),Fe=qe.split,Ue=(qe.foldr,qe.foldl,qe.reverse,qe.filter,qe.map,qe.length),Je=qe.concat,He=(qe.append,qe.uncons,qe.cons,qe.isEmpty),We=r(function(e,t,r){for(;;){var n=r;if("RBEmpty_elm_builtin"===n.ctor)return t;var o=e,i=l(e,n._1,n._2,l(We,e,t,n._4)),a=n._3;e=o,t=i,r=a}}),ze=function(e){return l(We,r(function(e,t,r){return s(re["::"],e,r)}),F.fromArray([]),e)},Ve=function(e){return l(We,r(function(e,t,r){return s(re["::"],{ctor:"_Tuple2",_0:e,_1:t},r)}),F.fromArray([]),e)},Ge=r(function(e,t,r){for(;;){var n=r;if("RBEmpty_elm_builtin"===n.ctor)return t;var o=e,i=l(e,n._1,n._2,l(Ge,e,t,n._3)),a=n._4;e=o,t=i,r=a}}),Ke=i(function(e,n,o,i,a,u){var c=r(function(t,r,i){var a=i,u=a._1,c=a._0,s=c;if("[]"===s.ctor)return{ctor:"_Tuple2",_0:c,_1:l(o,t,r,u)};var d=s._1,p=s._0._1,h=s._0._0;return v.cmp(h,t)<0?{ctor:"_Tuple2",_0:d,_1:l(e,h,p,u)}:v.cmp(h,t)>0?{ctor:"_Tuple2",_0:c,_1:l(o,t,r,u)}:{ctor:"_Tuple2",_0:d,_1:f(n,h,p,r,u)}}),s=l(Ge,c,{ctor:"_Tuple2",_0:Ve(i),_1:u},a),d=s._0,p=s._1;return l($,t(function(t,r){var n=t;return l(e,n._0,n._1,r)}),p,d)}),$e=n(function(e,t,r,n){return I.crash(Je(F.fromArray(["Internal red-black tree invariant violated, expected ",e," and got ",k(t),"/",r,"/",n,"\nPlease report this bug to <https://github.com/elm-lang/core/issues>"])))}),Xe=function(e){var t=e;e:do{if("RBNode_elm_builtin"===t.ctor){if("BBlack"===t._0.ctor)return!0;break e}if("LBBlack"===t._0.ctor)return!0;break e}while(!1);return!1},Qe=t(function(e,t){for(;;){var r=t;if("RBEmpty_elm_builtin"===r.ctor)return e;var n=s(Qe,e+1,r._4),o=r._3;e=n,t=o}}),Ye=t(function(e,t){e:for(;;){var r=t;if("RBEmpty_elm_builtin"===r.ctor)return D;var n=s(R,e,r._1);switch(n.ctor){case"LT":var o=e,i=r._3;e=o,t=i;continue e;case"EQ":return M(r._2);default:var a=e,u=r._4;e=a,t=u;continue e}}}),Ze=t(function(e,t){var r=s(Ye,e,t);return"Just"===r.ctor}),et=r(function(e,t,r){for(;;){var n=r;if("RBEmpty_elm_builtin"===n.ctor)return{ctor:"_Tuple2",_0:e,_1:t};var o=n._1,i=n._2,a=n._4;e=o,t=i,r=a}}),tt={ctor:"NBlack"},rt={ctor:"BBlack"},nt={ctor:"Black"},ot=function(e){var t=e;if("RBNode_elm_builtin"===t.ctor){var r=t._0;return v.eq(r,nt)||v.eq(r,rt)}return!0},it={ctor:"Red"},at=function(e){var t=e;switch(t.ctor){case"Black":return rt;case"Red":return nt;case"NBlack":return it;default:return I.crash("Can't make a double black node more black!")}},ut=function(e){var t=e;switch(t.ctor){case"BBlack":return nt;case"Black":return it;case"Red":return tt;default:return I.crash("Can't make a negative black node less black!")}},ct={ctor:"LBBlack"},st={ctor:"LBlack"},lt=function(e){return{ctor:"RBEmpty_elm_builtin",_0:e}},ft=lt(st),dt=o(function(e,t,r,n,o){return{ctor:"RBNode_elm_builtin",_0:e,_1:t,_2:r,_3:n,_4:o}}),pt=function(e){var t=e;return"RBNode_elm_builtin"===t.ctor&&"Red"===t._0.ctor?d(dt,nt,t._1,t._2,t._3,t._4):e},ht=function(e){var t=e;return"RBNode_elm_builtin"===t.ctor?d(dt,ut(t._0),t._1,t._2,t._3,t._4):lt(st)},_t=function(e){return function(t){return function(r){return function(n){return function(o){return function(i){return function(a){return function(u){return function(c){return function(s){return function(l){return d(dt,ut(e),n,o,d(dt,nt,t,r,u,c),d(dt,nt,i,a,s,l))}}}}}}}}}}},vt=function(e){var t=e;return"RBEmpty_elm_builtin"===t.ctor?lt(st):d(dt,nt,t._1,t._2,t._3,t._4)},mt=function(e){var t=e;return"RBEmpty_elm_builtin"===t.ctor?I.crash("can't make a Leaf red"):d(dt,it,t._1,t._2,t._3,t._4)},gt=function(e){var t=e;e:do{t:do{r:do{n:do{o:do{i:do{a:do{if("RBNode_elm_builtin"!==t.ctor)break e;if("RBNode_elm_builtin"===t._3.ctor)if("RBNode_elm_builtin"===t._4.ctor)switch(t._3._0.ctor){case"Red":switch(t._4._0.ctor){case"Red":if("RBNode_elm_builtin"===t._3._3.ctor&&"Red"===t._3._3._0.ctor)break a;if("RBNode_elm_builtin"===t._3._4.ctor&&"Red"===t._3._4._0.ctor)break i;if("RBNode_elm_builtin"===t._4._3.ctor&&"Red"===t._4._3._0.ctor)break o;if("RBNode_elm_builtin"===t._4._4.ctor&&"Red"===t._4._4._0.ctor)break n;break e;case"NBlack":if("RBNode_elm_builtin"===t._3._3.ctor&&"Red"===t._3._3._0.ctor)break a;if("RBNode_elm_builtin"===t._3._4.ctor&&"Red"===t._3._4._0.ctor)break i;if("BBlack"===t._0.ctor&&"RBNode_elm_builtin"===t._4._3.ctor&&"Black"===t._4._3._0.ctor&&"RBNode_elm_builtin"===t._4._4.ctor&&"Black"===t._4._4._0.ctor)break r;break e;default:if("RBNode_elm_builtin"===t._3._3.ctor&&"Red"===t._3._3._0.ctor)break a;if("RBNode_elm_builtin"===t._3._4.ctor&&"Red"===t._3._4._0.ctor)break i;break e}case"NBlack":switch(t._4._0.ctor){case"Red":if("RBNode_elm_builtin"===t._4._3.ctor&&"Red"===t._4._3._0.ctor)break o;if("RBNode_elm_builtin"===t._4._4.ctor&&"Red"===t._4._4._0.ctor)break n;if("BBlack"===t._0.ctor&&"RBNode_elm_builtin"===t._3._3.ctor&&"Black"===t._3._3._0.ctor&&"RBNode_elm_builtin"===t._3._4.ctor&&"Black"===t._3._4._0.ctor)break t;break e;case"NBlack":if("BBlack"===t._0.ctor){if("RBNode_elm_builtin"===t._4._3.ctor&&"Black"===t._4._3._0.ctor&&"RBNode_elm_builtin"===t._4._4.ctor&&"Black"===t._4._4._0.ctor)break r;if("RBNode_elm_builtin"===t._3._3.ctor&&"Black"===t._3._3._0.ctor&&"RBNode_elm_builtin"===t._3._4.ctor&&"Black"===t._3._4._0.ctor)break t;break e}break e;default:if("BBlack"===t._0.ctor&&"RBNode_elm_builtin"===t._3._3.ctor&&"Black"===t._3._3._0.ctor&&"RBNode_elm_builtin"===t._3._4.ctor&&"Black"===t._3._4._0.ctor)break t;break e}default:switch(t._4._0.ctor){case"Red":if("RBNode_elm_builtin"===t._4._3.ctor&&"Red"===t._4._3._0.ctor)break o;if("RBNode_elm_builtin"===t._4._4.ctor&&"Red"===t._4._4._0.ctor)break n;break e;case"NBlack":if("BBlack"===t._0.ctor&&"RBNode_elm_builtin"===t._4._3.ctor&&"Black"===t._4._3._0.ctor&&"RBNode_elm_builtin"===t._4._4.ctor&&"Black"===t._4._4._0.ctor)break r;break e;default:break e}}else switch(t._3._0.ctor){case"Red":if("RBNode_elm_builtin"===t._3._3.ctor&&"Red"===t._3._3._0.ctor)break a;if("RBNode_elm_builtin"===t._3._4.ctor&&"Red"===t._3._4._0.ctor)break i;break e;case"NBlack":if("BBlack"===t._0.ctor&&"RBNode_elm_builtin"===t._3._3.ctor&&"Black"===t._3._3._0.ctor&&"RBNode_elm_builtin"===t._3._4.ctor&&"Black"===t._3._4._0.ctor)break t;break e;default:break e}else{if("RBNode_elm_builtin"!==t._4.ctor)break e;switch(t._4._0.ctor){case"Red":if("RBNode_elm_builtin"===t._4._3.ctor&&"Red"===t._4._3._0.ctor)break o;if("RBNode_elm_builtin"===t._4._4.ctor&&"Red"===t._4._4._0.ctor)break n;break e;case"NBlack":if("BBlack"===t._0.ctor&&"RBNode_elm_builtin"===t._4._3.ctor&&"Black"===t._4._3._0.ctor&&"RBNode_elm_builtin"===t._4._4.ctor&&"Black"===t._4._4._0.ctor)break r;break e;default:break e}}}while(!1);return _t(t._0)(t._3._3._1)(t._3._3._2)(t._3._1)(t._3._2)(t._1)(t._2)(t._3._3._3)(t._3._3._4)(t._3._4)(t._4)}while(!1);return _t(t._0)(t._3._1)(t._3._2)(t._3._4._1)(t._3._4._2)(t._1)(t._2)(t._3._3)(t._3._4._3)(t._3._4._4)(t._4)}while(!1);return _t(t._0)(t._1)(t._2)(t._4._3._1)(t._4._3._2)(t._4._1)(t._4._2)(t._3)(t._4._3._3)(t._4._3._4)(t._4._4)}while(!1);return _t(t._0)(t._1)(t._2)(t._4._1)(t._4._2)(t._4._4._1)(t._4._4._2)(t._3)(t._4._3)(t._4._4._3)(t._4._4._4)}while(!1);return d(dt,nt,t._4._3._1,t._4._3._2,d(dt,nt,t._1,t._2,t._3,t._4._3._3),d(yt,nt,t._4._1,t._4._2,t._4._3._4,mt(t._4._4)))}while(!1);return d(dt,nt,t._3._4._1,t._3._4._2,d(yt,nt,t._3._1,t._3._2,mt(t._3._3),t._3._4._3),d(dt,nt,t._1,t._2,t._3._4._4,t._4))}while(!1);return e},yt=o(function(e,t,r,n,o){var i=d(dt,e,t,r,n,o);return ot(i)?gt(i):i}),bt=o(function(e,t,r,n,o){return Xe(n)||Xe(o)?d(yt,at(e),t,r,ht(n),ht(o)):d(dt,e,t,r,n,o)}),wt=o(function(e,t,r,n,o){var i=o;return"RBEmpty_elm_builtin"===i.ctor?l(At,e,n,o):d(bt,e,t,r,n,d(wt,i._0,i._1,i._2,i._3,i._4))}),At=r(function(e,t,r){var n={ctor:"_Tuple2",_0:t,_1:r};if("RBEmpty_elm_builtin"!==n._0.ctor){if("RBEmpty_elm_builtin"===n._1.ctor){var o=n._1._0,i=n._0._0,a={ctor:"_Tuple3",_0:e,_1:i,_2:o};return"_Tuple3"===a.ctor&&"Black"===a._0.ctor&&"Red"===a._1.ctor&&"LBlack"===a._2.ctor?d(dt,nt,n._0._1,n._0._2,n._0._3,n._0._4):f($e,"Black/Red/LBlack",e,k(i),k(o))}var u=n._0._2,c=n._0._4,s=n._0._1,p=d(wt,n._0._0,s,u,n._0._3,c),h=l(et,s,u,c),_=h._0,v=h._1;return d(bt,e,_,v,p,r)}if("RBEmpty_elm_builtin"!==n._1.ctor){var m=n._1._0,g=n._0._0,y={ctor:"_Tuple3",_0:e,_1:g,_2:m};return"_Tuple3"===y.ctor&&"Black"===y._0.ctor&&"LBlack"===y._1.ctor&&"Red"===y._2.ctor?d(dt,nt,n._1._1,n._1._2,n._1._3,n._1._4):f($e,"Black/LBlack/Red",e,k(g),k(m))}var b=e;switch(b.ctor){case"Red":return lt(st);case"Black":return lt(ct);default:return I.crash("cannot have bblack or nblack nodes at this point")}}),kt=t(function(e,t){var r=t;if("RBEmpty_elm_builtin"===r.ctor)return lt(st);var n=r._1;return d(dt,r._0,n,s(e,n,r._2),s(kt,e,r._3),s(kt,e,r._4))}),St={ctor:"Same"},Et={ctor:"Remove"},xt={ctor:"Insert"},Tt=r(function(e,t,r){var n=function(r){var o=r;if("RBEmpty_elm_builtin"===o.ctor){var i=t(D);return"Nothing"===i.ctor?{ctor:"_Tuple2",_0:St,_1:ft}:{ctor:"_Tuple2",_0:xt,_1:d(dt,it,e,i._0,ft,ft)}}var a=o._2,u=o._4,c=o._3,f=o._1,p=o._0,h=s(R,e,f);switch(h.ctor){case"EQ":var _=t(M(a));return"Nothing"===_.ctor?{ctor:"_Tuple2",_0:Et,_1:l(At,p,c,u)}:{ctor:"_Tuple2",_0:St,_1:d(dt,p,f,_._0,c,u)};case"LT":var v=n(c),m=v._0,g=v._1,y=m;switch(y.ctor){case"Same":return{ctor:"_Tuple2",_0:St,_1:d(dt,p,f,a,g,u)};case"Insert":return{ctor:"_Tuple2",_0:xt,_1:d(yt,p,f,a,g,u)};default:return{ctor:"_Tuple2",_0:Et,_1:d(bt,p,f,a,g,u)}}default:var b=n(u),m=b._0,w=b._1,A=m;switch(A.ctor){case"Same":return{ctor:"_Tuple2",_0:St,_1:d(dt,p,f,a,c,w)};case"Insert":return{ctor:"_Tuple2",_0:xt,_1:d(yt,p,f,a,c,w)};default:return{ctor:"_Tuple2",_0:Et,_1:d(bt,p,f,a,c,w)}}}},o=n(r),i=o._0,a=o._1,u=i;switch(u.ctor){case"Same":return a;case"Insert":return pt(a);default:return vt(a)}}),Ot=r(function(e,t,r){return l(Tt,e,b(M(t)),r)}),Rt=(t(function(e,t){return l(Ot,e,t,ft)}),t(function(e,t){return l(Ge,Ot,t,e)})),Ct=t(function(e,t){var n=r(function(t,r,n){return s(e,t,r)?l(Ot,t,r,n):n});return l(Ge,n,ft,t)}),qt=t(function(e,r){return s(Ct,t(function(e,t){return s(Ze,e,r)}),e)}),Nt=t(function(e,t){var n=r(function(t,r,n){var o=n,i=o._1,a=o._0;return s(e,t,r)?{ctor:"_Tuple2",_0:l(Ot,t,r,a),_1:i}:{ctor:"_Tuple2",_0:a,_1:l(Ot,t,r,i)}});return l(Ge,n,{ctor:"_Tuple2",_0:ft,_1:ft},t)}),It=function(e){return l($,t(function(e,t){var r=e;return l(Ot,r._0,r._1,t)}),ft,e)},jt=t(function(e,t){return l(Tt,e,b(D),t)}),Dt=t(function(e,t){return l(Ge,r(function(e,t,r){return s(jt,e,r)}),e,t)}),Lt=function(){function e(e){return{ctor:"<decoder>",tag:"succeed",msg:e}}function s(e){return{ctor:"<decoder>",tag:"fail",msg:e}}function l(e){return{ctor:"<decoder>",tag:e}}function f(e,t){return{ctor:"<decoder>",tag:e,decoder:t}}function d(e){return{ctor:"<decoder>",tag:"null",value:e}}function p(e,t){return{ctor:"<decoder>",tag:"field",field:e,decoder:t}}function h(e){return{ctor:"<decoder>",tag:"key-value",decoder:e}}function _(e,t){return{ctor:"<decoder>",tag:"map-many",func:e,decoders:t}}function m(e,t){return{ctor:"<decoder>",tag:"tuple",func:e,decoders:t}}function g(e,t){return{ctor:"<decoder>",tag:"andThen",decoder:e,callback:t}}function y(e,t){return{ctor:"<decoder>",tag:"customAndThen",decoder:e,callback:t}}function b(e){return{ctor:"<decoder>",tag:"oneOf",decoders:e}}function w(e,t){return _(e,[t])}function A(e,t,r){return _(e,[t,r])}function k(e,t,r,n){return _(e,[t,r,n])}function S(e,t,r,n,o){return _(e,[t,r,n,o])}function E(e,t,r,n,o,i){return _(e,[t,r,n,o,i])}function x(e,t,r,n,o,i,a){return _(e,[t,r,n,o,i,a])}function T(e,t,r,n,o,i,a,u){return _(e,[t,r,n,o,i,a,u])}function O(e,t,r,n,o,i,a,u,c){return _(e,[t,r,n,o,i,a,u,c])}function R(e,t){return m(e,[t])}function C(e,t,r){return m(e,[t,r])}function q(e,t,r,n){return m(e,[t,r,n])}function N(e,t,r,n,o){return m(e,[t,r,n,o])}function I(e,t,r,n,o,i){return m(e,[t,r,n,o,i])}function j(e,t,r,n,o,i,a){return m(e,[t,r,n,o,i,a])}function L(e,t,r,n,o,i,a,u){return m(e,[t,r,n,o,i,a,u])}function B(e,t,r,n,o,i,a,u,c){return m(e,[t,r,n,o,i,a,u,c])}function P(e){return{tag:"ok",value:e}}function U(e,t){return{tag:"primitive",type:e,value:t}}function J(e,t){return{tag:"index",index:e,rest:t}}function H(e,t){return{tag:"field",field:e,rest:t}}function W(e){return{tag:"oneOf",problems:e}}function z(e){for(var t="_";e;)switch(e.tag){case"primitive":return"Expecting "+e.type+("_"===t?"":" at "+t)+" but instead got: "+V(e.value);case"index":t+="["+e.index+"]",e=e.rest;break;case"field":t+="."+e.field,e=e.rest;break;case"oneOf":for(var r=e.problems,n=0;n<r.length;n++)r[n]=z(r[n]);return"I ran into the following problems"+("_"===t?"":" at "+t)+":\n\n"+r.join("\n");case"fail":return"I ran into a `fail` decoder"+("_"===t?"":" at "+t)}}function V(e){return void 0===e?"undefined":JSON.stringify(e)}function G(e,t){var r;try{r=JSON.parse(t)}catch(n){return ve("Given an invalid JSON: "+n.message)}return K(e,r)}function K(e,t){var r=$(e,t);return"ok"===r.tag?me(r.value):ve(z(r))}function $(e,t){switch(e.tag){case"bool":return"boolean"==typeof t?P(t):U("a Bool",t);case"int":var r="number"!=typeof t||!(t>-2147483647&&2147483647>t&&(0|t)===t)||!(isFinite(t)&&!(t%1));return r?U("an Int",t):P(t);case"float":return"number"==typeof t?P(t):U("a Float",t);case"string":return"string"==typeof t?P(t):t instanceof String?P(t+""):U("a String",t);case"null":return null===t?P(e.value):U("null",t);case"value":return P(t);case"list":if(!(t instanceof Array))return U("a List",t);for(var n=F.Nil,o=t.length;o--;){var i=$(e.decoder,t[o]);if("ok"!==i.tag)return J(o,i);n=F.Cons(i.value,n)}return P(n);case"array":if(!(t instanceof Array))return U("an Array",t);for(var a=t.length,u=new Array(a),o=a;o--;){var i=$(e.decoder,t[o]);if("ok"!==i.tag)return J(o,i);u[o]=i.value}return P(Oe.fromJSArray(u));case"maybe":var i=$(e.decoder,t);return P("ok"===i.tag?M(i.value):D);case"field":var c=e.field;if("object"!=typeof t||null===t||!(c in t))return U("an object with a field named `"+c+"`",t);var i=$(e.decoder,t[c]);return"ok"===i.tag?i:H(c,i);case"key-value":if("object"!=typeof t||null===t||t instanceof Array)return err("an object",t);var s=F.Nil;for(var l in t){var i=$(e.decoder,t[l]);if("ok"!==i.tag)return H(l,i);var f=v.Tuple2(l,i.value);s=F.Cons(f,s)}return P(s);case"map-many":for(var d=e.func,p=e.decoders,o=0;o<p.length;o++){var i=$(p[o],t);if("ok"!==i.tag)return i;d=d(i.value)}return P(d);case"tuple":var p=e.decoders,a=p.length;if(!(t instanceof Array)||t.length!==a)return U("a Tuple with "+a+" entries",t);for(var d=e.func,o=0;a>o;o++){var i=$(p[o],t[o]);if("ok"!==i.tag)return J(o,i);d=d(i.value)}return P(d);case"customAndThen":var i=$(e.decoder,t);if("ok"!==i.tag)return i;var h=e.callback(i.value);return"Err"===h.ctor?U("something custom",t):P(h._0);case"andThen":var i=$(e.decoder,t);return"ok"!==i.tag?i:$(e.callback(i.value),t);case"oneOf":for(var _=[],m=e.decoders;"[]"!==m.ctor;){var i=$(m._0,t);if("ok"===i.tag)return i;_.push(i),m=m._1}return W(_);case"fail":return te;case"succeed":return P(e.msg)}}function X(e,t){if(e===t)return!0;if(e.tag!==t.tag)return!1;switch(e.tag){case"succeed":case"fail":return e.msg===t.msg;case"bool":case"int":case"float":case"string":case"value":return!0;case"null":return e.value===t.value;case"list":case"array":case"maybe":case"key-value":return X(e.decoder,t.decoder);case"field":return e.field===t.field&&X(e.decoder,t.decoder);case"map-many":case"tuple":return e.func!==t.func?!1:Q(e.decoders,t.decoders);case"andThen":case"customAndThen":return e.callback===t.callback&&X(e.decoder,t.decoder);case"oneOf":return Q(e.decoders,t.decoders)}}function Q(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;r>n;n++)if(!X(e[n],t[n]))return!1;return!0}function Y(e,t){return JSON.stringify(t,null,e)}function Z(e){return e}function ee(e){for(var t={};"[]"!==e.ctor;){var r=e._0;t[r._0]=r._1,e=e._1}return t}var te={tag:"fail"};return{encode:t(Y),runOnString:t(G),run:t(K),decodeNull:d,decodePrimitive:l,decodeContainer:t(f),decodeField:t(p),decodeObject1:t(w),decodeObject2:r(A),decodeObject3:n(k),decodeObject4:o(S),decodeObject5:i(E),decodeObject6:a(x),decodeObject7:u(T),decodeObject8:c(O),decodeKeyValuePairs:h,decodeTuple1:t(R),decodeTuple2:r(C),decodeTuple3:n(q),decodeTuple4:o(N),decodeTuple5:i(I),decodeTuple6:a(j),decodeTuple7:u(L),decodeTuple8:c(B),andThen:t(g),customAndThen:t(y),fail:s,succeed:e,oneOf:b,identity:Z,encodeNull:null,encodeArray:Oe.toJSArray,encodeList:F.toArray,encodeObject:ee,equality:X}}(),Bt=(Lt.encodeList,Lt.encodeArray,Lt.encodeObject,Lt.encodeNull,Lt.identity),Mt=(Lt.identity,Lt.identity,Lt.identity),Pt=(Lt.encode,Lt.decodeTuple8,Lt.decodeTuple7,Lt.decodeTuple6,Lt.decodeTuple5,Lt.decodeTuple4,Lt.decodeTuple3,Lt.decodeTuple2,Lt.decodeTuple1,Lt.succeed),Ft=(Lt.fail,Lt.andThen),Ut=Lt.customAndThen,Jt=Lt.run,Ht=Lt.decodePrimitive("value"),Wt=function(e){return s(Lt.decodeContainer,"maybe",e)},zt=Lt.decodeNull,Vt=function(e){return s(Lt.decodeContainer,"list",e)},Gt=Lt.decodePrimitive("bool"),Kt=Lt.decodePrimitive("int"),$t=Lt.decodePrimitive("float"),Xt=Lt.decodePrimitive("string"),Qt=Lt.oneOf,Yt=(Lt.decodeKeyValuePairs,Lt.decodeObject8,Lt.decodeObject7,Lt.decodeObject6,Lt.decodeObject5,Lt.decodeObject4,Lt.decodeObject3,Lt.decodeObject2,Lt.decodeObject1,Yt||{});Yt[":="]=Lt.decodeField;var Zt=t(function(e,r){return l(K,t(function(e,t){return s(Yt[":="],e,t)}),r,e)}),er=Lt.runOnString,tr=Lt.decodeObject1,rr=Pt,nr=t(function(e,t){return s(Ft,t,function(t){return s(tr,t,e)})}),or=(t(function(e,t){return s(Ft,t,function(t){return s(tr,t,Pt(e))})}),r(function(e,t,r){var n=function(n){var o=s(Jt,e,n);return"Ok"===o.ctor?s(Jt,t,o._0):me(r)};return s(Ut,Ht,n)})),ir=(n(function(e,t,r,n){return s(nr,l(or,s(Zt,e,Ht),t,r),n)}),n(function(e,t,r,n){return s(nr,l(or,s(Yt[":="],e,Ht),t,r),n)}),r(function(e,t,r){return s(nr,s(Zt,e,t),r)}),r(function(e,t,r){return s(nr,s(Yt[":="],e,t),r)})),ar=(r(function(e,t,n){var o=n;return l(We,r(function(t,r,n){return s(e,t,n)}),t,o._0)}),r(function(e,t,n){var o=n;return l(Ge,r(function(t,r,n){return s(e,t,n)}),t,o._0)}),function(e){var t=e;return ze(t._0)}),ur=t(function(e,t){var r=t;return s(Ze,e,r._0)}),cr=function(e){return{ctor:"Set_elm_builtin",_0:e}},sr=cr(ft),lr=t(function(e,t){var r=t;return cr(l(Ot,e,{ctor:"_Tuple0"},r._0))}),fr=function(e){return l($,lr,sr,e)},dr=(t(function(e,t){return fr(s(ne,e,ar(t)))}),t(function(e,t){var r=t;return cr(s(jt,e,r._0))}),t(function(e,t){var r=e,n=t;return cr(s(Rt,r._0,n._0))}),t(function(e,t){var r=e,n=t;return cr(s(qt,r._0,n._0))}),t(function(e,t){var r=e,n=t;return cr(s(Dt,r._0,n._0))}),t(function(e,r){var n=r;return cr(s(Ct,t(function(t,r){return e(t)}),n._0))}),t(function(e,r){var n=r,o=s(Nt,t(function(t,r){return e(t)}),n._0),i=o._0,a=o._1;return{ctor:"_Tuple2",_0:cr(i),_1:cr(a)}}),r(function(e,t,r){var n=v.cmp(X(r),0)>0,o=v.cmp(e,0)>0&&v.cmp(t,0)>0,i=s(U,t,r),a=s(pe,e,r);return o&&n?s(re["::"],a,l(dr,e,t,i)):F.fromArray([])})),pr=(t(function(e,t){return l(dr,e,e,t)}),r(function(e,t,r){var n=v.cmp(e,0)>0&&v.cmp(t,0)>0,o=s(U,t,r),i=s(pe,e,r),a=v.eq(e,X(i));return n&&a?s(re["::"],i,l(pr,e,t,o)):F.fromArray([])})),hr=(t(function(e,t){return l(pr,e,e,t)}),J(o(function(e,t,r,n,o){return{ctor:"_Tuple5",_0:e,_1:t,_2:r,_3:n,_4:o}})),H(n(function(e,t,r,n){return{ctor:"_Tuple4",_0:e,_1:t,_2:r,_3:n}})),W(r(function(e,t,r){return{ctor:"_Tuple3",_0:e,_1:t,_2:r}})),z(t(function(e,t){return{ctor:"_Tuple2",_0:e,_1:t}})),function(e){return function(r){return s(G,w,l(z,t(function(e,t){return v.eq(e,t)}),e,r))}}),_r=(t(function(e,t){return s(hr,ae(e),ae(t))}),function(e){var t=e;if("[]"===t.ctor)return F.fromArray([]);var r=t._1,n=t._0;return s(re["::"],{ctor:"_Tuple2",_0:n,_1:r},s(ne,function(e){var t=e;return{ctor:"_Tuple2",_0:t._0,_1:s(re["::"],n,t._1)}},_r(r)))}),vr=t(function(e,t){var r=t;if("::"===r.ctor){var n=r._0;return s(re["::"],s(re["::"],e,n),s(re["::"],n,r._1))}return F.fromArray([])}),mr=s(K,vr,F.fromArray([F.fromArray([])])),gr=(t(function(e,t){return s(V,hr(e),mr(t))}),s(K,t(function(e,r){return s(re["::"],F.fromArray([]),s(ne,t(function(e,t){return s(re["::"],e,t)})(e),r))}),F.fromArray([F.fromArray([])])),t(function(e,t){var r=t;if("[]"===r.ctor)return F.fromArray([]);if("[]"===r._1.ctor)return F.fromArray([F.fromArray([r._0])]);var n=r._0,o=s(gr,e,r._1);return"::"===o.ctor?s(e,n,r._1._0)?s(re["::"],s(re["::"],n,o._0),o._1):s(re["::"],F.fromArray([n]),o):F.fromArray([])})),yr=(t(function(e,r){var n=t(function(e,t){var r=t;return"Nothing"===r.ctor?D:"[]"===r._0.ctor?D:v.eq(e,r._0._0)?M(r._0._1):D});return l($,n,M(r),e)}),t(function(e,t){return{ctor:"_Tuple2",_0:s(pe,e,t),_1:s(U,e,t)}}),t(function(e,t){var r=e(t);return"Nothing"===r.ctor?F.fromArray([]):s(re["::"],r._0._0,s(yr,e,r._0._1))})),br=t(function(e,t){var r=t;if("[]"===r.ctor)return F.fromArray([]);if("[]"===r._1.ctor)return F.fromArray([r._0]);var n=s(br,e,r._1);return"::"===n.ctor?s(re["::"],s(e,r._0,n._0),n):F.fromArray([])}),wr=r(function(e,t,r){var n=r;if("[]"===n.ctor)return F.fromArray([t]);var o=l(wr,e,t,n._1);return"::"===o.ctor?s(re["::"],s(e,n._0,o._0),o):F.fromArray([])}),Ar=(t(function(e,t){var r=t;return"[]"===r.ctor?F.fromArray([]):l(ue,e,r._0,r._1)}),t(function(e,r){var n=t(function(t,r){return M(function(){var n=r;return"Nothing"===n.ctor?t:s(e,t,n._0)}())});return l(K,n,D,r)}),t(function(e,r){var n=t(function(t,r){return M(function(){var n=r;return"Nothing"===n.ctor?t:s(e,n._0,t)}())});return l($,n,D,r)})),kr=r(function(e,t,r){e:for(;;){var n={ctor:"_Tuple2",_0:e,_1:t};t:do{if("::"===n._0.ctor){if("::"===n._1.ctor){var o=n._0._1,i=n._1._1,a=s(A["++"],r,F.fromArray([n._0._0,n._1._0]));e=o,t=i,r=a;continue e}break t}if("[]"===n._1.ctor)break t;return s(A["++"],r,n._1)}while(!1);return s(A["++"],r,n._0)}}),Sr=(t(function(e,t){return l(kr,e,t,F.fromArray([]))}),function(e){var r=e;if("[]"===r.ctor)return F.fromArray([F.fromArray([])]);var n=function(e){var r=e;return s(ne,t(function(e,t){return s(re["::"],e,t)})(r._0),Sr(r._1))};return s(le,n,_r(r))}),Er=(t(function(e,t){return s(Y,e,Sr(t))}),function(e){var r=e;if("[]"===r.ctor)return F.fromArray([]);var n=r._0,o=t(function(e,t){return s(re["::"],e,s(re["::"],s(re["::"],n,e),t))});return s(re["::"],F.fromArray([n]),l(K,o,F.fromArray([]),Er(r._1)))}),xr=function(e){return s(re["::"],F.fromArray([]),Er(e))},Tr=(t(function(e,t){return s(Y,e,xr(t))}),t(function(e,t){return s(oe,function(t){return x(e(t))},t)}),t(function(e,t){if(v.cmp(e,0)<0)return t;var r=ee(s(U,e,t)),n=s(pe,e,t),o=r;return"Nothing"===o.ctor?t:s(ce,n,o._0)}),r(function(e,t,r){if(v.cmp(e,0)<0)return D;var n=ee(s(U,e,r)),o=s(pe,e,r),i=n;return"Nothing"===i.ctor?D:M(s(ce,o,s(re["::"],t,i._0)))}),t(function(e,t){return s(oe,function(t){return x(e(t))},t)}),r(function(e,r,n){return s(Q,t(function(t,n){return e(t)?r(n):n}),n)})),Or=(r(function(e,r,n){return v.cmp(e,0)<0||v.cmp(e,X(n))>-1?D:M(l(Tr,t(function(e,t){return v.eq(e,t)})(e),r,n))}),r(function(e,t,r){return s(ne,function(r){return e(r)?t(r):r},r)})),Rr=(r(function(e,t,r){return l(Or,e,b(t),r)}),t(function(e,t){for(;;){var r=t;if("[]"===r.ctor)return D;var n=r._0;if(e(n))return M(n);var o=e,i=r._1;e=o,t=i}})),Cr=m(le),qr=(r(function(e,t,r){return s(Cr,t,function(t){return s(Cr,r,function(r){return F.fromArray([s(e,t,r)])})})}),n(function(e,t,r,n){return s(Cr,t,function(t){return s(Cr,r,function(r){return s(Cr,n,function(n){return F.fromArray([l(e,t,r,n)])})})})}),o(function(e,t,r,n,o){return s(Cr,t,function(t){return s(Cr,r,function(r){return s(Cr,n,function(n){return s(Cr,o,function(o){return F.fromArray([f(e,t,r,n,o)])})})})})}),t(function(e,r){return l(z,t(function(e,t){return e(t)}),e,r)}),t(function(e,t){for(;;){var r=t;if("[]"===r.ctor)return F.fromArray([]);var n=r._1,o=r._0;{if(!s(ur,o,e))return s(re["::"],o,s(qr,s(lr,o,e),n));var i=e,a=n;e=i,t=a}}})),Nr=t(function(e,t){for(;;){var r=t;if("[]"===r.ctor)return F.fromArray([]);{if(!e(r._0))return t;var n=e,o=r._1;e=n,t=o}}}),Ir=t(function(e,t){var r=t;if("[]"===r.ctor)return F.fromArray([]);var n=r._0;return e(n)?s(re["::"],n,s(Ir,e,r._1)):F.fromArray([])}),jr=t(function(e,t){return{ctor:"_Tuple2",_0:s(Ir,e,t),_1:s(Nr,e,t)}}),Dr=t(function(e,t){var r=t;if("[]"===r.ctor)return F.fromArray([]);var n=r._0,o=s(jr,e(n),r._1),i=o._0,a=o._1;return s(re["::"],s(re["::"],n,i),s(Dr,e,a))}),Lr=(Dr(t(function(e,t){return v.eq(e,t)})),t(function(e,r){var n=t(function(t,r){var n=r,o=n._1,i=e(t);return v.cmp(i,o)<0?{ctor:"_Tuple2",_0:t,_1:i}:{ctor:"_Tuple2",_0:n._0,_1:o}}),o=r;if("::"===o.ctor){if("[]"===o._1.ctor)return M(o._0);var i=o._0;return M(y(l($,n,{ctor:"_Tuple2",_0:i,_1:e(i)},o._1)))}return D}),t(function(e,r){var n=t(function(t,r){var n=r,o=n._1,i=e(t);return v.cmp(i,o)>0?{ctor:"_Tuple2",_0:t,_1:i}:{ctor:"_Tuple2",_0:n._0,_1:o}}),o=r;if("::"===o.ctor){if("[]"===o._1.ctor)return M(o._0);var i=o._0;return M(y(l($,n,{ctor:"_Tuple2",_0:i,_1:e(i)},o._1)))}return D}),t(function(e,t){var r=e(t);return"Just"===r.ctor?s(re["::"],t,s(Lr,e,r._0)):F.fromArray([t])})),Br=t(function(e,t){return v.cmp(e,0)<0?D:te(s(U,e,t))}),Mr=Mr||{};Mr["!!"]=m(Br);var Pr=(function(){var e=t(function(e,t){return function(r){return s(j,e,s(P,t,r))}});return s(K,function(r){return s(t(function(e,t){return function(r){return e(t(r))}}),M,s(e,F.fromArray([]),t(function(e,t){return s(re["::"],e,t)})(r)))},D)}(),Ar(m(b)),function(){function e(e){var t=new Date(e);return isNaN(t.getTime())?ve("unable to parse '"+e+"' as a date"):me(t)}var t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return{fromString:e,year:function(e){return e.getFullYear()},month:function(e){return{ctor:r[e.getMonth()]}},day:function(e){return e.getDate()},hour:function(e){return e.getHours()},minute:function(e){return e.getMinutes()},second:function(e){return e.getSeconds()},millisecond:function(e){return e.getMilliseconds()},toTime:function(e){return e.getTime()},fromTime:function(e){return new Date(e)},dayOfWeek:function(e){return{ctor:t[e.getDay()]}}}}()),Fr=ye.onError,Ur=ye.andThen,Jr=t(function(e,t){var r=t;return ye.spawn(s(Ur,r._0,we(e)))}),Hr=ye.fail,Wr=t(function(e,t){return s(Fr,t,function(t){return Hr(e(t))})}),zr=ye.succeed,Vr=t(function(e,t){return s(Ur,t,function(t){return zr(e(t))})}),Gr=r(function(e,t,r){return s(Ur,t,function(t){return s(Ur,r,function(r){
return zr(s(e,t,r))})})}),Kr=(n(function(e,t,r,n){return s(Ur,t,function(t){return s(Ur,r,function(r){return s(Ur,n,function(n){return zr(l(e,t,r,n))})})})}),o(function(e,t,r,n,o){return s(Ur,t,function(t){return s(Ur,r,function(r){return s(Ur,n,function(n){return s(Ur,o,function(o){return zr(f(e,t,r,n,o))})})})})}),i(function(e,t,r,n,o,i){return s(Ur,t,function(t){return s(Ur,r,function(r){return s(Ur,n,function(n){return s(Ur,o,function(o){return s(Ur,i,function(i){return zr(d(e,t,r,n,o,i))})})})})})}),t(function(e,t){return s(Ur,e,function(e){return s(Ur,t,function(t){return zr(e(t))})})}),function(e){var r=e;return"[]"===r.ctor?zr(F.fromArray([])):l(Gr,t(function(e,t){return s(re["::"],e,t)}),r._0,Kr(r._1))}),$r=r(function(e,t,r){return s(Vr,function(e){return{ctor:"_Tuple0"}},Kr(s(ne,Jr(e),t)))}),Xr=(t(function(e,t){var r=t;return"Just"===r.ctor?zr(r._0):Hr(e)}),zr({ctor:"_Tuple0"})),Qr=r(function(e,t,r){return zr({ctor:"_Tuple0"})}),Yr=ge.leaf("Task"),Zr=function(e){return{ctor:"T",_0:e}},en=r(function(e,t,r){return Yr(Zr(s(Fr,s(Vr,t,r),function(t){return zr(e(t))})))}),tn=t(function(e,t){var r=t;return Zr(s(Vr,e,r._0))});ge.effectManagers.Task={pkg:"elm-lang/core",init:Xr,onEffects:$r,onSelfMsg:Qr,tag:"cmd",cmdMap:tn};var rn=function(){function e(e,t){return ye.nativeBinding(function(r){var n=setInterval(function(){ye.rawSpawn(t)},e);return function(){clearInterval(n)}})}var r=ye.nativeBinding(function(e){e(ye.succeed(Date.now()))});return{now:r,setInterval_:t(e)}}(),nn=rn.setInterval_,on=r(function(e,t,r){var n=t;if("[]"===n.ctor)return zr(r);var o=n._0;return s(Ur,ye.spawn(s(nn,o,s(be,e,o))),function(t){return l(on,e,n._1,l(Ot,o,t,r))})}),an=t(function(e,t){var r=e,n=r._1,o=r._0,i=s(Ye,o,t);return"Nothing"===i.ctor?l(Ot,o,F.fromArray([n]),t):l(Ot,o,s(re["::"],n,i._0),t)}),un=1,cn=rn.now,sn=r(function(e,t,r){var n=s(Ye,t,r.taggers);return"Nothing"===n.ctor?zr(r):s(Ur,cn,function(t){return s(Ur,Kr(s(ne,function(r){return s(we,e,r(t))},n._0)),function(e){return zr(r)})})}),ln=ge.leaf("Time"),fn=t(function(e,t){return{taggers:e,processes:t}}),dn=zr(s(fn,ft,ft)),pn=r(function(e,t,o){var i=o,a=r(function(e,t,r){var n=r;return{ctor:"_Tuple3",_0:n._0,_1:n._1,_2:s(Ur,ye.kill(t),function(e){return n._2})}}),u=n(function(e,t,r,n){var o=n;return{ctor:"_Tuple3",_0:o._0,_1:l(Ot,e,r,o._1),_2:o._2}}),c=r(function(e,t,r){var n=r;return{ctor:"_Tuple3",_0:s(re["::"],e,n._0),_1:n._1,_2:n._2}}),f=l($,an,ft,t),d=p(Ke,c,u,a,f,i.processes,{ctor:"_Tuple3",_0:F.fromArray([]),_1:ft,_2:zr({ctor:"_Tuple0"})}),h=d._0,_=d._1,v=d._2;return s(Ur,v,function(t){return s(Ur,l(on,e,h,_),function(e){return zr(s(fn,f,e))})})}),hn=t(function(e,t){return{ctor:"Every",_0:e,_1:t}}),_n=(t(function(e,t){return ln(s(hn,e,t))}),t(function(e,t){var r=t;return s(hn,r._0,function(t){return e(r._1(t))})}));ge.effectManagers.Time={pkg:"elm-lang/core",init:dn,onEffects:pn,onSelfMsg:sn,tag:"sub",subMap:_n};var vn=Pr.millisecond,mn=Pr.second,gn=Pr.minute,yn=Pr.hour,bn=Pr.dayOfWeek,wn=Pr.day,An=Pr.month,kn=Pr.year,Sn=Pr.fromTime,En=Pr.toTime,xn=Pr.fromString,Tn=s(Vr,Sn,cn),On={ctor:"Sun"},Rn={ctor:"Dec"},Cn={ctor:"Nov"},qn={ctor:"Oct"},Nn={ctor:"Sep"},In={ctor:"Aug"},jn={ctor:"Jul"},Dn={ctor:"Jun"},Ln={ctor:"May"},Bn={ctor:"Apr"},Mn={ctor:"Mar"},Pn={ctor:"Feb"},Fn={ctor:"Jan"},Un=function(){function e(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function o(e){return new RegExp(e.source,"gi")}function i(e){return new RegExp(e,"g")}function a(e,t){return null!==t.match(e)}function u(e,t,r){e="All"===e.ctor?1/0:e._0;for(var n,o=[],i=0,a=r,u=t.lastIndex,c=-1;i++<e&&(n=t.exec(a))&&c!==t.lastIndex;){for(var s=n.length-1,l=new Array(s);s>0;){var f=n[s];l[--s]=void 0===f?D:M(f)}o.push({match:n[0],submatches:F.fromArray(l),index:n.index,number:i}),c=t.lastIndex}return t.lastIndex=u,F.fromArray(o)}function c(e,t,r,n){function o(t){if(i++>=e)return t;for(var n=arguments.length-3,o=new Array(n);n>0;){var a=arguments[n];o[--n]=void 0===a?D:M(a)}return r({match:t,submatches:F.fromArray(o),index:arguments[n-1],number:i})}e="All"===e.ctor?1/0:e._0;var i=0;return n.replace(t,o)}function s(e,t,r){if(e="All"===e.ctor?1/0:e._0,e===1/0)return F.fromArray(r.split(t));for(var n,o=r,i=[],a=t.lastIndex;e--&&(n=t.exec(o));)i.push(o.slice(a,n.index)),a=t.lastIndex;return i.push(o.slice(a)),F.fromArray(i)}return{regex:i,caseInsensitive:o,escape:e,contains:t(a),find:r(u),replace:n(c),split:r(s)}}(),Jn=(Un.split,Un.replace),Hn=(Un.find,Un.contains),Wn=(Un.caseInsensitive,Un.regex),zn=(Un.escape,n(function(e,t,r,n){return{match:e,submatches:t,index:r,number:n}}),{ctor:"All"}),Vn=function(){function e(e){return{type:"text",text:e}}function o(e){return t(function(t,r){return i(e,t,r)})}function i(e,t,r){for(var n=h(t),o=n.namespace,i=n.facts,a=[],u=0;"[]"!==r.ctor;){var c=r._0;u+=c.descendantsCount||0,a.push(c),r=r._1}return u+=a.length,{type:"node",tag:e,facts:i,children:a,namespace:o,descendantsCount:u}}function a(e,t,r){var n=h(e).facts;return{type:"custom",facts:n,model:t,impl:r}}function u(e,t){return{type:"tagger",tagger:e,node:t,descendantsCount:1+(t.descendantsCount||0)}}function c(e,t,r){return{type:"thunk",func:e,args:t,thunk:r,node:null}}function f(e,t){return c(e,[t],function(){return e(t)})}function d(e,t,r){return c(e,[t,r],function(){return s(e,t,r)})}function p(e,t,r,n){return c(e,[t,r,n],function(){return l(e,t,r,n)})}function h(e){for(var t,r={};"[]"!==e.ctor;){var n=e._0,o=n.key;if(o===W||o===z||o===H){var i=r[o]||{};i[n.realKey]=n.value,r[o]=i}else if(o===J){for(var a=r[o]||{},u=n.value;"[]"!==u.ctor;){var c=u._0;a[c._0]=c._1,u=u._1}r[o]=a}else"namespace"===o?t=n.value:r[o]=n.value;e=e._1}return{facts:r,namespace:t}}function _(e){return{key:J,value:e}}function v(e,t){return{key:e,value:t}}function m(e,t){return{key:W,realKey:e,value:t}}function g(e,t,r){return{key:z,realKey:t,value:{value:r,namespace:e}}}function y(e,t,r){return{key:H,realKey:e,value:{options:t,decoder:r}}}function b(e,t){return!e.options!==t.options||e.stopPropagation===t.stopPropagation&&e.preventDefault===t.preventDefault?Lt.equality(e.decoder,t.decoder):!1}function w(e,t,r){function n(e){"NO_REQUEST"===u&&V(o),u="PENDING_REQUEST",s=e}function o(){switch(u){case"NO_REQUEST":throw new Error("Unexpected draw callback.\nPlease report this to <https://github.com/elm-lang/core/issues>.");case"PENDING_REQUEST":V(o),u="EXTRA_REQUEST";var e=R(c,s);return a=B(a,c,e,i),void(c=s);case"EXTRA_REQUEST":return void(u="NO_REQUEST")}}var i={tagger:t,parent:null},a=A(r,i);e.appendChild(a);var u="NO_REQUEST",c=r,s=r;return{update:n}}function A(e,t){switch(e.type){case"thunk":return e.node||(e.node=e.thunk()),A(e.node,t);case"tagger":for(var r=e.node,n=e.tagger;"tagger"===r.type;)"object"!=typeof n?n=[n,r.tagger]:n.push(r.tagger),r=r.node;var o={tagger:n,parent:t},i=A(r,o);return i.elm_event_node_ref=o,i;case"text":return document.createTextNode(e.text);case"node":var i=e.namespace?document.createElementNS(e.namespace,e.tag):document.createElement(e.tag);k(i,t,e.facts);for(var a=e.children,u=0;u<a.length;u++)i.appendChild(A(a[u],t));return i;case"custom":var i=e.impl.render(e.model);return k(i,t,e.facts),i}}function k(e,t,r){for(var n in r){var o=r[n];switch(n){case J:S(e,o);break;case H:E(e,t,o);break;case W:T(e,o);break;case z:O(e,o);break;case"value":e[n]!==o&&(e[n]=o);break;default:e[n]=o}}}function S(e,t){var r=e.style;for(var n in t)r[n]=t[n]}function E(e,t,r){var n=e.elm_handlers||{};for(var o in r){var i=n[o],a=r[o];if("undefined"==typeof a)e.removeEventListener(o,i),n[o]=void 0;else if("undefined"==typeof i){var i=x(t,a);e.addEventListener(o,i),n[o]=i}else i.info=a}e.elm_handlers=n}function x(e,t){function r(t){var n=r.info,o=s(Lt.run,n.decoder,t);if("Ok"===o.ctor){var i=n.options;i.stopPropagation&&t.stopPropagation(),i.preventDefault&&t.preventDefault();for(var a=o._0,u=e;u;){var c=u.tagger;if("function"==typeof c)a=c(a);else for(var l=c.length;l--;)a=c[l](a);u=u.parent}}}return r.info=t,r}function T(e,t){for(var r in t){var n=t[r];"undefined"==typeof n?e.removeAttribute(r):e.setAttribute(r,n)}}function O(e,t){for(var r in t){var n=t[r],o=n.namespace,i=n.value;"undefined"==typeof i?e.removeAttributeNS(o,r):e.setAttributeNS(o,r,i)}}function R(e,t){var r=[];return q(e,t,r,0),r}function C(e,t,r){return{index:t,type:e,data:r,domNode:null,eventNode:null}}function q(e,t,r,n){if(e!==t){var o=e.type,i=t.type;if(o!==i)return void r.push(C("p-redraw",n,t));switch(i){case"thunk":for(var a=e.args,u=t.args,c=a.length,s=e.func===t.func&&c===u.length;s&&c--;)s=a[c]===u[c];if(s)return void(t.node=e.node);t.node=t.thunk();var l=[];return q(e.node,t.node,l,0),void(l.length>0&&r.push(C("p-thunk",n,l)));case"tagger":for(var f=e.tagger,d=t.tagger,p=!1,h=e.node;"tagger"===h.type;)p=!0,"object"!=typeof f?f=[f,h.tagger]:f.push(h.tagger),h=h.node;for(var _=t.node;"tagger"===_.type;)p=!0,"object"!=typeof d?d=[d,_.tagger]:d.push(_.tagger),_=_.node;return p&&f.length!==d.length?void r.push(C("p-redraw",n,t)):((p?N(f,d):f===d)||r.push(C("p-tagger",n,d)),void q(h,_,r,n+1));case"text":if(e.text!==t.text)return void r.push(C("p-text",n,t.text));return;case"node":if(e.tag!==t.tag||e.namespace!==t.namespace)return void r.push(C("p-redraw",n,t));var v=I(e.facts,t.facts);return"undefined"!=typeof v&&r.push(C("p-facts",n,v)),void j(e,t,r,n);case"custom":if(e.impl!==t.impl)return void r.push(C("p-redraw",n,t));var v=I(e.facts,t.facts);"undefined"!=typeof v&&r.push(C("p-facts",n,v));var m=t.impl.diff(e,t);if(m)return void r.push(C("p-custom",n,m));return}}}function N(e,t){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function I(e,t,r){var n;for(var o in e)if(o!==J&&o!==H&&o!==W&&o!==z)if(o in t){var i=e[o],a=t[o];i===a&&"value"!==o||r===H&&b(i,a)||(n=n||{},n[o]=a)}else n=n||{},n[o]="undefined"==typeof r?"string"==typeof e[o]?"":null:r===J?"":r===H||r===W?void 0:{namespace:e[o].namespace,value:void 0};else{var u=I(e[o],t[o]||{},o);u&&(n=n||{},n[o]=u)}for(var c in t)c in e||(n=n||{},n[c]=t[c]);return n}function j(e,t,r,n){var o=e.children,i=t.children,a=o.length,u=i.length;a>u?r.push(C("p-remove",n,a-u)):u>a&&r.push(C("p-insert",n,i.slice(a)));for(var c=n,s=u>a?a:u,l=0;s>l;l++){c++;var f=o[l];q(f,i[l],r,c),c+=f.descendantsCount||0}}function D(e,t,r,n){L(e,t,r,0,0,t.descendantsCount,n)}function L(e,t,r,n,o,i,a){for(var u=r[n],c=u.index;c===o;){var s=u.type;if("p-thunk"===s?D(e,t.node,u.data,a):(u.domNode=e,u.eventNode=a),n++,!(u=r[n])||(c=u.index)>i)return n}switch(t.type){case"tagger":for(var l=t.node;"tagger"===l.type;)l=l.node;return L(e,l,r,n,o+1,i,e.elm_event_node_ref);case"node":for(var f=t.children,d=e.childNodes,p=0;p<f.length;p++){o++;var h=f[p],_=o+(h.descendantsCount||0);if(c>=o&&_>=c&&(n=L(d[p],h,r,n,o,_,a),!(u=r[n])||(c=u.index)>i))return n;o=_}return n;case"text":case"thunk":throw new Error("should never traverse `text` or `thunk` nodes like this")}}function B(e,t,r,n){return 0===r.length?e:(D(e,t,r,n),M(e,r))}function M(e,t){for(var r=0;r<t.length;r++){var n=t[r],o=n.domNode,i=P(o,n);o===e&&(e=i)}return e}function P(e,t){switch(t.type){case"p-redraw":return F(e,t.data,t.eventNode);case"p-facts":return k(e,t.eventNode,t.data),e;case"p-text":return e.replaceData(0,e.length,t.data),e;case"p-thunk":return M(e,t.data);case"p-tagger":return e.elm_event_node_ref.tagger=t.data,e;case"p-remove":for(var r=t.data;r--;)e.removeChild(e.lastChild);return e;case"p-insert":for(var n=t.data,r=0;r<n.length;r++)e.appendChild(A(n[r],t.eventNode));return e;case"p-custom":var o=t.data;return o.applyPatch(e,o.data);default:throw new Error("Ran into an unknown patch!")}}function F(e,t,r){var n=e.parentNode,o=A(t,r);return"undefined"==typeof o.elm_event_node_ref&&(o.elm_event_node_ref=e.elm_event_node_ref),n&&o!==e&&n.replaceChild(o,e),o}function U(e){return{init:e.init,update:e.update,subscriptions:e.subscriptions,view:e.view,renderer:w}}var J="STYLE",H="EVENT",W="ATTR",z="ATTR_NS",V="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:function(e){setTimeout(e,1e3/60)};return{node:o,text:e,custom:a,map:t(u),on:r(y),style:_,property:t(v),attribute:t(m),attributeNS:r(g),lazy:t(f),lazy2:r(d),lazy3:n(p),programWithFlags:U}}(),Gn=Vn.programWithFlags,Kn=(Vn.lazy3,Vn.lazy2,Vn.lazy,{stopPropagation:!1,preventDefault:!1}),$n=Vn.on,Xn=t(function(e,t){return l($n,e,Kn,t)}),Qn=Vn.style,Yn=(Vn.attributeNS,Vn.attribute,Vn.property),Zn=Vn.map,eo=Vn.text,to=Vn.node,ro=(t(function(e,t){return{stopPropagation:e,preventDefault:t}}),eo),no=to,oo=(no("body"),no("section"),no("nav"),no("article"),no("aside"),no("h1"),no("h2"),no("h3"),no("h4"),no("h5"),no("h6"),no("header"),no("footer"),no("address"),no("main"),no("p"),no("hr")),io=(no("pre"),no("blockquote"),no("ol"),no("ul"),no("li"),no("dl"),no("dt"),no("dd"),no("figure"),no("figcaption"),no("div")),ao=(no("a"),no("em"),no("strong"),no("small"),no("s"),no("cite"),no("q"),no("dfn"),no("abbr"),no("time"),no("code"),no("var"),no("samp"),no("kbd"),no("sub"),no("sup"),no("i"),no("b"),no("u"),no("mark"),no("ruby"),no("rt"),no("rp"),no("bdi"),no("bdo"),no("span")),uo=(no("br"),no("wbr"),no("ins"),no("del"),no("img")),co=(no("iframe"),no("embed"),no("object"),no("param"),no("video"),no("audio"),no("source"),no("track"),no("canvas"),no("svg"),no("math"),no("table"),no("caption"),no("colgroup"),no("col"),no("tbody"),no("thead"),no("tfoot"),no("tr"),no("td"),no("th"),no("form")),so=(no("fieldset"),no("legend"),no("label")),lo=no("input"),fo=no("button"),po=(no("select"),no("datalist"),no("optgroup"),no("option"),no("textarea"),no("keygen"),no("output"),no("progress"),no("meter"),no("details"),no("summary"),no("menuitem"),no("menu"),Gn),ho=function(e){return po(v.update(e,{init:function(t){return e.init}}))},_o=Zn,vo=Yn,mo=t(function(e,t){return s(vo,e,Mt(t))}),go=function(e){return s(mo,"className",e)},yo=function(e){return s(mo,"id",e)},bo=function(e){return s(mo,"src",e)},wo=function(e){return s(mo,"type",e)},Ao=t(function(e,t){return s(vo,e,Bt(t))}),ko=function(e){return s(Ao,"disabled",e)},So=Qn,Eo=(s(Yt[":="],"keyCode",Kt),s(Zt,F.fromArray(["target","checked"]),Gt),s(Zt,F.fromArray(["target","value"]),Xt)),xo=Kn,To=$n,Oo=Xn,Ro=v.update(xo,{preventDefault:!0}),Co=function(e){return l(To,"submit",Ro,Pt(e))},qo=function(e){return s(Oo,"input",s(tr,e,Eo))},No=function(e){return s(Oo,"click",Pt(e))},Io=(t(function(e,t){return{stopPropagation:e,preventDefault:t}}),function(){function e(e,t){return ye.nativeBinding(function(n){function o(e){i.setRequestHeader(e._0,e._1)}var i=new XMLHttpRequest;return"Just"===e.onStart.ctor&&i.addEventListener("loadStart",function(){var t=e.onStart._0;ye.rawSpawn(t)}),"Just"===e.onProgress.ctor&&i.addEventListener("progress",function(t){var r=t.lengthComputable?M({loaded:t.loaded,total:t.total}):D,n=e.onProgress._0(r);ye.rawSpawn(n)}),i.addEventListener("error",function(){return n(ye.fail({ctor:"RawNetworkError"}))}),i.addEventListener("timeout",function(){return n(ye.fail({ctor:"RawTimeout"}))}),i.addEventListener("load",function(){return n(ye.succeed(r(i)))}),i.open(t.verb,t.url,!0),s(ne,o,t.headers),i.timeout=e.timeout,i.withCredentials=e.withCredentials,"Just"===e.desiredResponseType.ctor&&i.overrideMimeType(e.desiredResponseType._0),"BodyFormData"===t.body.ctor?i.send(t.body.formData):i.send(t.body._0),function(){i.abort()}})}function r(e){var t="blob"===e.responseType?"Blob":"Text",r="Blob"===t?e.response:e.responseText;return{status:e.status,statusText:e.statusText,headers:n(e.getAllResponseHeaders()),url:e.responseURL,value:{ctor:t,_0:r}}}function n(e){var t=ft;if(!e)return t;for(var r=e.split("\r\n"),n=r.length;n--;){var o=r[n],i=o.indexOf(": ");if(i>0){var a=o.substring(0,i),u=o.substring(i+2);t=l(Tt,a,function(e){return M("Just"===e.ctor?u+", "+e._0:u)},t)}}return t}function o(e){for(var t=new FormData;"[]"!==e.ctor;){var r=e._0;if("StringData"===r.ctor)t.append(r._0,r._1);else{var n="Nothing"===r._1.ctor?void 0:r._1._0;t.append(r._0,r._2,n)}e=e._1}return{ctor:"BodyFormData",formData:t}}function i(e){return encodeURIComponent(e)}function a(e){return decodeURIComponent(e)}return{send:t(e),multipart:o,uriEncode:i,uriDecode:a}}()),jo=Io.send,Do={timeout:0,onStart:D,onProgress:D,desiredResponseType:D,withCredentials:!1},Lo=(Io.multipart,Io.uriDecode,Io.uriEncode),Bo=function(e){return s(Pe,"+",s(Fe,"%20",Lo(e)))},Mo=function(e){var t=e;return s(A["++"],Bo(t._0),s(A["++"],"=",Bo(t._1)))},Po=(t(function(e,t){var r=t;return"[]"===r.ctor?e:s(A["++"],e,s(A["++"],"?",s(Pe,"&",s(ne,Mo,t))))}),n(function(e,t,r,n){return{verb:e,headers:t,url:r,body:n}}),o(function(e,t,r,n,o){return{timeout:e,onStart:t,onProgress:r,desiredResponseType:n,withCredentials:o}}),o(function(e,t,r,n,o){return{status:e,statusText:t,headers:r,url:n,value:o}}),{ctor:"Empty"}),Fo=Po,Uo=(r(function(e,t,r){return{ctor:"FileData",_0:e,_1:t,_2:r}}),r(function(e,t,r){return{ctor:"BlobData",_0:e,_1:t,_2:r}}),t(function(e,t){return{ctor:"StringData",_0:e,_1:t}}),t(function(e,t){return{ctor:"BadResponse",_0:e,_1:t}})),Jo=function(e){return{ctor:"UnexpectedPayload",_0:e}},Ho=t(function(e,t){if(v.cmp(200,t.status)<1&&v.cmp(t.status,300)<0){var r=t.value;return"Text"===r.ctor?e(r._0):Hr(Jo("Response body is a blob, expecting a string."))}return Hr(s(Uo,t.status,t.statusText))}),Wo={ctor:"NetworkError"},zo={ctor:"Timeout"},Vo=function(e){var t=e;return"RawTimeout"===t.ctor?zo:Wo},Go=t(function(e,t){var r=function(t){var r=s(er,e,t);return"Ok"===r.ctor?zr(r._0):Hr(Jo(r._0))};return s(Ur,s(Wr,Vo,t),Ho(r))}),Ko=t(function(e,t){var r={verb:"GET",headers:F.fromArray([]),url:t,body:Fo};return s(Go,e,s(jo,Do,r))}),$o=(r(function(e,t,r){var n={verb:"POST",headers:F.fromArray([]),url:t,body:r};return s(Go,e,s(jo,Do,n))}),function(){function e(e,t,r){var n={options:e,markdown:r};return Vn.custom(t,n,a)}function t(e){var t=u(e.markdown,i(e.options)),r=document.createElement("div");return r.innerHTML=t,r}function n(e,t){return e.model.markdown===t.model.markdown&&e.model.options===t.model.options?null:{applyPatch:o,data:u(t.model.markdown,i(t.model.options))}}function o(e,t){return e.innerHTML=t,e}function i(e){function t(t,r){return r||"Just"!==e.defaultHighlighting.ctor||(r=e.defaultHighlighting._0),"undefined"!=typeof hljs&&r&&hljs.listLanguages().indexOf(r)>=0?hljs.highlight(r,t,!0).value:t}var r=e.githubFlavored;return"Just"===r.ctor?{highlight:t,gfm:!0,tables:r._0.tables,breaks:r._0.breaks,sanitize:e.sanitize,smartypants:e.smartypants}:{highlight:t,gfm:!1,tables:!1,breaks:!1,sanitize:e.sanitize,smartypants:e.smartypants}}var a={render:t,diff:n},u=function(){var e={},t=e.exports={};return function(){function r(e){this.tokens=[],this.tokens.links={},this.options=e||f.defaults,this.rules=d.normal,this.options.gfm&&(this.options.tables?this.rules=d.tables:this.rules=d.gfm)}function n(e,t){if(this.options=t||f.defaults,this.links=e,this.rules=p.normal,this.renderer=this.options.renderer||new o,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=p.breaks:this.rules=p.gfm:this.options.pedantic&&(this.rules=p.pedantic)}function o(e){this.options=e||{}}function i(e){this.tokens=[],this.token=null,this.options=e||f.defaults,this.options.renderer=this.options.renderer||new o,this.renderer=this.options.renderer,this.renderer.options=this.options}function a(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function u(e){return e.replace(/&([#\w]+);/g,function(e,t){return t=t.toLowerCase(),"colon"===t?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function c(e,t){return e=e.source,t=t||"",function r(n,o){return n?(o=o.source||o,o=o.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(n,o),r):new RegExp(e,t)}}function s(){}function l(e){for(var t,r,n=1;n<arguments.length;n++){t=arguments[n];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}function f(e,t,n){if(n||"function"==typeof t){n||(n=t,t=null),t=l({},f.defaults,t||{});var o,u,c=t.highlight,s=0;try{o=r.lex(e,t)}catch(d){return n(d)}u=o.length;var p=function(e){if(e)return t.highlight=c,n(e);var r;try{r=i.parse(o,t)}catch(a){e=a}return t.highlight=c,e?n(e):n(null,r)};if(!c||c.length<3)return p();if(delete t.highlight,!u)return p();for(;s<o.length;s++)!function(e){return"code"!==e.type?--u||p():c(e.text,e.lang,function(t,r){return t?p(t):null==r||r===e.text?--u||p():(e.text=r,e.escaped=!0,void(--u||p()))})}(o[s])}else try{return t&&(t=l({},f.defaults,t)),i.parse(r.lex(e,t),t)}catch(d){if(d.message+="\nPlease report this to https://github.com/chjj/marked.",(t||f.defaults).silent)return"<p>An error occured:</p><pre>"+a(d.message+"",!0)+"</pre>";throw d}}var d={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:s,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:s,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:s,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};d.bullet=/(?:[*+-]|\d+\.)/,d.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,d.item=c(d.item,"gm")(/bull/g,d.bullet)(),d.list=c(d.list)(/bull/g,d.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+d.def.source+")")(),d.blockquote=c(d.blockquote)("def",d.def)(),d._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",d.html=c(d.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,d._tag)(),d.paragraph=c(d.paragraph)("hr",d.hr)("heading",d.heading)("lheading",d.lheading)("blockquote",d.blockquote)("tag","<"+d._tag)("def",d.def)(),d.normal=l({},d),d.gfm=l({},d.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),d.gfm.paragraph=c(d.paragraph)("(?!","(?!"+d.gfm.fences.source.replace("\\1","\\2")+"|"+d.list.source.replace("\\1","\\3")+"|")(),d.tables=l({},d.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),r.rules=d,r.lex=function(e,t){var n=new r(t);return n.lex(e)},r.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},r.prototype.token=function(e,t,r){for(var n,o,i,a,u,c,s,l,f,e=e.replace(/^ +$/gm,"");e;)if((i=this.rules.newline.exec(e))&&(e=e.substring(i[0].length),i[0].length>1&&this.tokens.push({type:"space"})),i=this.rules.code.exec(e))e=e.substring(i[0].length),i=i[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?i:i.replace(/\n+$/,"")});else if(i=this.rules.fences.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"code",lang:i[2],text:i[3]});else if(i=this.rules.heading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:i[1].length,text:i[2]});else if(t&&(i=this.rules.nptable.exec(e))){for(e=e.substring(i[0].length),c={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/\n$/,"").split("\n")},l=0;l<c.align.length;l++)/^ *-+: *$/.test(c.align[l])?c.align[l]="right":/^ *:-+: *$/.test(c.align[l])?c.align[l]="center":/^ *:-+ *$/.test(c.align[l])?c.align[l]="left":c.align[l]=null;for(l=0;l<c.cells.length;l++)c.cells[l]=c.cells[l].split(/ *\| */);this.tokens.push(c)}else if(i=this.rules.lheading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:"="===i[2]?1:2,text:i[1]});else if(i=this.rules.hr.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"hr"});else if(i=this.rules.blockquote.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"blockquote_start"}),i=i[0].replace(/^ *> ?/gm,""),this.token(i,t,!0),this.tokens.push({type:"blockquote_end"});else if(i=this.rules.list.exec(e)){for(e=e.substring(i[0].length),a=i[2],this.tokens.push({type:"list_start",ordered:a.length>1}),i=i[0].match(this.rules.item),n=!1,f=i.length,l=0;f>l;l++)c=i[l],s=c.length,c=c.replace(/^ *([*+-]|\d+\.) +/,""),~c.indexOf("\n ")&&(s-=c.length,c=this.options.pedantic?c.replace(/^ {1,4}/gm,""):c.replace(new RegExp("^ {1,"+s+"}","gm"),"")),this.options.smartLists&&l!==f-1&&(u=d.bullet.exec(i[l+1])[0],a===u||a.length>1&&u.length>1||(e=i.slice(l+1).join("\n")+e,l=f-1)),o=n||/\n\n(?!\s*$)/.test(c),l!==f-1&&(n="\n"===c.charAt(c.length-1),o||(o=n)),this.tokens.push({type:o?"loose_item_start":"list_item_start"}),this.token(c,!1,r),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(i=this.rules.html.exec(e))e=e.substring(i[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===i[1]||"script"===i[1]||"style"===i[1],text:i[0]});else if(!r&&t&&(i=this.rules.def.exec(e)))e=e.substring(i[0].length),this.tokens.links[i[1].toLowerCase()]={href:i[2],title:i[3]};else if(t&&(i=this.rules.table.exec(e))){for(e=e.substring(i[0].length),c={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/(?: *\| *)?\n$/,"").split("\n")},l=0;l<c.align.length;l++)/^ *-+: *$/.test(c.align[l])?c.align[l]="right":/^ *:-+: *$/.test(c.align[l])?c.align[l]="center":/^ *:-+ *$/.test(c.align[l])?c.align[l]="left":c.align[l]=null;for(l=0;l<c.cells.length;l++)c.cells[l]=c.cells[l].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(c)}else if(t&&(i=this.rules.paragraph.exec(e)))e=e.substring(i[0].length),this.tokens.push({type:"paragraph",text:"\n"===i[1].charAt(i[1].length-1)?i[1].slice(0,-1):i[1]});else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"text",text:i[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var p={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:s,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:s,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};p._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,p._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,p.link=c(p.link)("inside",p._inside)("href",p._href)(),p.reflink=c(p.reflink)("inside",p._inside)(),p.normal=l({},p),p.pedantic=l({},p.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),p.gfm=l({},p.normal,{escape:c(p.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:c(p.text)("]|","~]|")("|","|https?://|")()}),p.breaks=l({},p.gfm,{br:c(p.br)("{2,}","*")(),text:c(p.gfm.text)("{2,}","*")()}),n.rules=p,n.output=function(e,t,r){var o=new n(t,r);return o.output(e)},n.prototype.output=function(e){for(var t,r,n,o,i="";e;)if(o=this.rules.escape.exec(e))e=e.substring(o[0].length),i+=o[1];else if(o=this.rules.autolink.exec(e))e=e.substring(o[0].length),"@"===o[2]?(r=":"===o[1].charAt(6)?this.mangle(o[1].substring(7)):this.mangle(o[1]),n=this.mangle("mailto:")+r):(r=a(o[1]),n=r),i+=this.renderer.link(n,null,r);else if(this.inLink||!(o=this.rules.url.exec(e))){if(o=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(o[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(o[0])&&(this.inLink=!1),e=e.substring(o[0].length),i+=this.options.sanitize?a(o[0]):o[0];else if(o=this.rules.link.exec(e))e=e.substring(o[0].length),this.inLink=!0,i+=this.outputLink(o,{href:o[2],title:o[3]}),this.inLink=!1;else if((o=this.rules.reflink.exec(e))||(o=this.rules.nolink.exec(e))){if(e=e.substring(o[0].length),t=(o[2]||o[1]).replace(/\s+/g," "),t=this.links[t.toLowerCase()],!t||!t.href){i+=o[0].charAt(0),e=o[0].substring(1)+e;continue}this.inLink=!0,i+=this.outputLink(o,t),this.inLink=!1}else if(o=this.rules.strong.exec(e))e=e.substring(o[0].length),i+=this.renderer.strong(this.output(o[2]||o[1]));else if(o=this.rules.em.exec(e))e=e.substring(o[0].length),i+=this.renderer.em(this.output(o[2]||o[1]));else if(o=this.rules.code.exec(e))e=e.substring(o[0].length),i+=this.renderer.codespan(a(o[2],!0));else if(o=this.rules.br.exec(e))e=e.substring(o[0].length),i+=this.renderer.br();else if(o=this.rules.del.exec(e))e=e.substring(o[0].length),i+=this.renderer.del(this.output(o[1]));else if(o=this.rules.text.exec(e))e=e.substring(o[0].length),i+=a(this.smartypants(o[0]));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else e=e.substring(o[0].length),r=a(o[1]),n=r,i+=this.renderer.link(n,null,r);return i},n.prototype.outputLink=function(e,t){var r=a(t.href),n=t.title?a(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(r,n,this.output(e[1])):this.renderer.image(r,n,a(e[1]))},n.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/--/g,"—").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},n.prototype.mangle=function(e){for(var t,r="",n=e.length,o=0;n>o;o++)t=e.charCodeAt(o),Math.random()>.5&&(t="x"+t.toString(16)),r+="&#"+t+";";return r},o.prototype.code=function(e,t,r){if(this.options.highlight){var n=this.options.highlight(e,t);null!=n&&n!==e&&(r=!0,e=n)}return t?'<pre><code class="'+this.options.langPrefix+a(t,!0)+'">'+(r?e:a(e,!0))+"\n</code></pre>\n":"<pre><code>"+(r?e:a(e,!0))+"\n</code></pre>"},o.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},o.prototype.html=function(e){return e},o.prototype.heading=function(e,t,r){return"<h"+t+' id="'+this.options.headerPrefix+r.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},o.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},o.prototype.list=function(e,t){var r=t?"ol":"ul";return"<"+r+">\n"+e+"</"+r+">\n"},o.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},o.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},o.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},o.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},o.prototype.tablecell=function(e,t){var r=t.header?"th":"td",n=t.align?"<"+r+' style="text-align:'+t.align+'">':"<"+r+">";return n+e+"</"+r+">\n"},o.prototype.strong=function(e){return"<strong>"+e+"</strong>"},o.prototype.em=function(e){return"<em>"+e+"</em>"},o.prototype.codespan=function(e){return"<code>"+e+"</code>"},o.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},o.prototype.del=function(e){return"<del>"+e+"</del>"},o.prototype.link=function(e,t,r){if(this.options.sanitize){try{var n=decodeURIComponent(u(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(o){return""}if(0===n.indexOf("javascript:"))return""}var i='<a href="'+e+'"';return t&&(i+=' title="'+t+'"'),i+=">"+r+"</a>"},o.prototype.image=function(e,t,r){var n='<img src="'+e+'" alt="'+r+'"';return t&&(n+=' title="'+t+'"'),n+=this.options.xhtml?"/>":">"},i.parse=function(e,t,r){var n=new i(t,r);return n.parse(e)},i.prototype.parse=function(e){this.inline=new n(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},i.prototype.next=function(){return this.token=this.tokens.pop()},i.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},i.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e);
},i.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,r,n,o,i="",a="";for(r="",e=0;e<this.token.header.length;e++)n={header:!0,align:this.token.align[e]},r+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(i+=this.renderer.tablerow(r),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],r="",o=0;o<t.length;o++)r+=this.renderer.tablecell(this.inline.output(t[o]),{header:!1,align:this.token.align[o]});a+=this.renderer.tablerow(r)}return this.renderer.table(i,a);case"blockquote_start":for(var a="";"blockquote_end"!==this.next().type;)a+=this.tok();return this.renderer.blockquote(a);case"list_start":for(var a="",u=this.token.ordered;"list_end"!==this.next().type;)a+=this.tok();return this.renderer.list(a,u);case"list_item_start":for(var a="";"list_item_end"!==this.next().type;)a+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(a);case"loose_item_start":for(var a="";"list_item_end"!==this.next().type;)a+=this.tok();return this.renderer.listitem(a);case"html":var c=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(c);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},s.exec=s,f.options=f.setOptions=function(e){return l(f.defaults,e),f},f.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new o,xhtml:!1},f.Parser=i,f.parser=i.parse,f.Renderer=o,f.Lexer=r,f.lexer=r.lex,f.InlineLexer=n,f.inlineLexer=n.output,f.parse=f,"undefined"!=typeof e&&"object"==typeof t?e.exports=f:"function"==typeof define&&define.amd?define(function(){return f}):this.marked=f}.call(function(){return this||("undefined"!=typeof window?window:global)}()),e.exports}();return{toHtml:r(e)}}()),Xo=($o.toHtml,{githubFlavored:M({tables:!1,breaks:!1}),defaultHighlighting:D,sanitize:!1,smartypants:!1}),Qo=t(function(e,t){return l($o.toHtml,Xo,e,t)}),Yo=(n(function(e,t,r,n){return{githubFlavored:e,defaultHighlighting:t,sanitize:r,smartypants:n}}),function(e){var t=e;switch(t.ctor){case"Jan":return 1;case"Feb":return 2;case"Mar":return 3;case"Apr":return 4;case"May":return 5;case"Jun":return 6;case"Jul":return 7;case"Aug":return 8;case"Sep":return 9;case"Oct":return 10;case"Nov":return 11;default:return 12}}),Zo=function(e){return v.eq(s(A["%"],e,4),0)&&!v.eq(s(A["%"],e,100),0)||v.eq(s(A["%"],e,400),0)},ei=t(function(e,t){var r=t;switch(r.ctor){case"Jan":return 31;case"Feb":return Zo(e)?29:28;case"Mar":return 31;case"Apr":return 30;case"May":return 31;case"Jun":return 30;case"Jul":return 31;case"Aug":return 31;case"Sep":return 30;case"Oct":return 31;case"Nov":return 30;default:return 31}}),ti=(F.fromArray([Fn,Pn,Mn,Bn,Ln,Dn,jn,In,Nn,qn,Cn,Rn]),function(e){return E(En(e))}),ri=function(e){return Sn(S(e))},ni=function(e){var t=e;switch(t.ctor){case"Mon":return 1;case"Tue":return 2;case"Wed":return 3;case"Thu":return 4;case"Fri":return 5;case"Sat":return 6;default:return 7}},oi=(t(function(e,t){var r=ni(t),n=ni(e);return v.cmp(n,r)<0?7+n-r:n-r}),E(un)),ii=1e3*oi,ai=60*ii,ui=60*ai,ci=24*ui,si=7*ci,li=(n(function(e,t,r,n){var o=ti(n),i=ti(r),a=s(T,i,o),u=s(O,i,o),c=ti(t),l=e;switch(l.ctor){case"Between":return v.cmp(c,u)>0&&v.cmp(c,a)<0;case"BetweenOpenStart":return v.cmp(c,u)>-1&&v.cmp(c,a)<0;case"BetweenOpenEnd":return v.cmp(c,u)>0&&v.cmp(c,a)<1;default:return v.cmp(c,u)>-1&&v.cmp(c,a)<1}}),r(function(e,t,r){var n=ti(r),o=ti(t),i=e;switch(i.ctor){case"Before":return v.cmp(o,n)<0;case"After":return v.cmp(o,n)>0;case"Same":return v.eq(o,n);case"SameOrBefore":return v.cmp(o,n)<1;default:return v.cmp(o,n)>-1}})),fi={ctor:"After"},di=(t(function(e,t){return{i18n:e,format:t}}),function(e){var t=e;switch(t.ctor){case"Jan":return"January";case"Feb":return"February";case"Mar":return"March";case"Apr":return"April";case"May":return"May";case"Jun":return"June";case"Jul":return"July";case"Aug":return"August";case"Sep":return"September";case"Oct":return"October";case"Nov":return"November";default:return"December"}}),pi=function(e){var t=e;switch(t.ctor){case"Jan":return"Jan";case"Feb":return"Feb";case"Mar":return"Mar";case"Apr":return"Apr";case"May":return"May";case"Jun":return"Jun";case"Jul":return"Jul";case"Aug":return"Aug";case"Sep":return"Sep";case"Oct":return"Oct";case"Nov":return"Nov";default:return"Dec"}},hi=function(e){var t=e;switch(t.ctor){case"Mon":return"Monday";case"Tue":return"Tuesday";case"Wed":return"Wednesday";case"Thu":return"Thursday";case"Fri":return"Friday";case"Sat":return"Saturday";default:return"Sunday"}},_i=function(e){var t=e;switch(t.ctor){case"Mon":return"Mon";case"Tue":return"Tue";case"Wed":return"Wed";case"Thu":return"Thu";case"Fri":return"Fri";case"Sat":return"Sat";default:return"Sun"}},vi={i18n:{dayShort:_i,dayName:hi,monthShort:pi,monthName:di},format:{date:"%-m/%-d/%Y",longDate:"%A, %B %d, %Y",time:"%-H:%M %p",longTime:"%-H:%M:%S %p",dateTime:"%-m/%-d/%Y %-I:%M %p",firstDayOfWeek:On}},mi=(t(function(e,t){var r=vn(e)-vn(t),n=mn(e)-mn(t),o=gn(e)-gn(t),i=yn(e)-yn(t),a=ti(e)-ti(t),u=a-i*ui-o*ai-n*ii-r*oi,c=u/ci|0,l=function(){if(v.cmp(c,0)<0){var e=q(c);return{ctor:"_Tuple2",_0:N(e/7|0),_1:N(s(A["%"],e,7))}}return{ctor:"_Tuple2",_0:c/7|0,_1:s(A["%"],c,7)}}(),f=l._0,d=l._1;return{week:f,day:d,hour:i,minute:o,second:n,millisecond:r}}),r(function(e,r,n){return ri(s(t(function(e,t){return e+t}),r*e,ti(n)))})),gi=function(e){var t=e;switch(t.ctor){case"Millisecond":return oi;case"Second":return ii;case"Minute":return ai;case"Hour":return ui;case"Day":return ci;case"Week":return si;default:var r=t._0;return oi*r.millisecond+ii*r.second+ai*r.minute+ui*r.hour+ci*r.day+si*r.week}},yi=function(e){return mi(gi(e))},bi=(i(function(e,t,r,n,o,i){return{week:e,day:t,hour:r,minute:n,second:o,millisecond:i}}),function(e){return{ctor:"Delta",_0:e}}),wi={ctor:"Millisecond"},Ai=r(function(e,t,r){var n=((153*(t+(v.cmp(t,2)>0?-3:9))+2)/5|0)+r-1,o=e-(v.cmp(t,2)<1?1:0),i=(v.cmp(o,0)>-1?o:o-399)/400|0,a=o-400*i,u=365*a+(a/4|0)-(a/100|0)+n;return 146097*i+u-719468}),ki=a(function(e,t,r,n,o,i,a){var u=Yo(t),c=v.cmp(e,0)<0?0:e,f=l(C,1,s(ei,c,t),r),d=l(Ai,c,u,f);return gi(bi({millisecond:l(C,0,999,a),second:l(C,0,59,i),minute:l(C,0,59,o),hour:l(C,0,23,n),day:d,week:0}))}),Si=function(e){return h(ki,kn(e),An(e),wn(e),yn(e),gn(e),mn(e),vn(e))},Ei=function(e){var t=Si(e),r=E(En(e));return(r-t)/ai|0},xi=t(function(e,r){return ri(s(t(function(e,t){return e+t}),e*ai,ti(r)))}),Ti=Sn(0),Oi=function(){var e=60*yn(Ti)+gn(Ti);return v.eq(kn(Ti),1969)?e-1440:e}(),Ri=function(e){return l(yi,wi,e-Oi*ai,Ti)},Ci=a(function(e,t,r,n,o,i,a){return Ri(h(ki,e,t,r,n,o,i,a))}),qi=(l(Ci,1970,Fn,1),Ei),Ni=function(e){return{ctor:"_Tuple2",_0:e/60|0,_1:s(A["%"],e,60)}},Ii=t(function(e,t){return function(r){return l(Be,e,t,k(r))}}),ji=function(e){return function(t){return l(Be,2,e,k(t))}},Di=function(e){return v.eq(s(A["%"],e,12),0)?12:s(A["%"],e,12)},Li=t(function(e,t){var r=Ni(q(t)),n=r._0,o=r._1;return s(A["++"],v.cmp(t,0)<1?"+":"-",s(A["++"],s(ji,v.chr("0"),n),s(A["++"],e,s(ji,v.chr("0"),o))))}),Bi=function(e){return s(B,e,w)},Mi=n(function(e,t,r,n){var o=s(j," ",Bi(te(n.submatches))),i=o;switch(i){case"Y":return l(Ii,4,v.chr("0"),kn(r));case"m":return s(ji,v.chr("0"),Yo(An(r)));case"_m":return s(ji,v.chr(" "),Yo(An(r)));case"-m":return k(Yo(An(r)));case"B":return e.i18n.monthName(An(r));case"^B":return De(e.i18n.monthName(An(r)));case"b":return e.i18n.monthShort(An(r));case"^b":return De(e.i18n.monthShort(An(r)));case"d":return s(ji,v.chr("0"),wn(r));case"-d":return k(wn(r));case"e":return s(ji,v.chr(" "),wn(r));case"A":return e.i18n.dayName(bn(r));case"^A":return De(e.i18n.dayName(bn(r)));case"a":return e.i18n.dayShort(bn(r));case"^a":return De(e.i18n.dayShort(bn(r)));case"H":return s(ji,v.chr("0"),yn(r));case"-H":return k(yn(r));case"k":return s(ji,v.chr(" "),yn(r));case"I":return s(ji,v.chr("0"),Di(yn(r)));case"-I":return k(Di(yn(r)));case"l":return s(ji,v.chr(" "),Di(yn(r)));case"p":return v.cmp(yn(r),12)<0?"AM":"PM";case"P":return v.cmp(yn(r),12)<0?"am":"pm";case"M":return s(ji,v.chr("0"),gn(r));case"S":return s(ji,v.chr("0"),mn(r));case"L":return l(Ii,3,v.chr("0"),vn(r));case"%":return o;case"z":return s(Li,"",t);case":z":return s(Li,":",t);default:return""}}),Pi=Wn("%(Y|m|_m|-m|B|^B|b|^b|d|-d|e|A|^A|a|^a|H|-H|k|I|-I|l|p|P|M|S|%|L|z|:z)"),Fi=n(function(e,t,r,n){var o=qi(n),i=o-t;return f(Jn,zn,Pi,l(Mi,e,t,s(xi,i,n)),r)}),Ui=r(function(e,t,r){return f(Fi,e,qi(r),t,r)}),Ji=(r(function(e,t,r){return f(Fi,e,0,t,r)}),"%Y-%m-%dT%H:%M:%S.%L%z"),Hi=(s(Ui,vi,Ji),"%Y-%m-%dT%H:%M:%S.%L"),Wi=(s(Ui,vi,Hi),function(e){return f(Jn,zn,Wn("[^a-zA-Z0-9_-]"),function(e){return""},f(Jn,zn,Wn("\\s+"),function(e){return"-"},Le(k(e))))}),zi=t(function(e,t){return s(A["++"],Wi(e),Wi(t))}),Vi=t(function(e,t){var r=t;return"[]"===r.ctor?t:"[]"===r._1.ctor?e(r._0):s(re["::"],r._0,s(Vi,e,r._1))}),Gi=t(function(e,t){var r=t;return"[]"===r.ctor?t:"[]"===r._1.ctor?F.fromArray([e(r._0)]):s(re["::"],r._0,s(Gi,e,r._1))}),Ki=(r(function(e,t,r){return{important:e,key:t,value:r}}),n(function(e,t,r,n){return{charset:e,imports:t,namespaces:r,declarations:n}}),function(e){return{ctor:"FontFeatureValues",_0:e}}),$i=function(e){return{ctor:"Viewport",_0:e}},Xi=t(function(e,t){return{ctor:"Keyframes",_0:e,_1:t}}),Qi=function(e){return{ctor:"FontFace",_0:e}},Yi=t(function(e,t){return{ctor:"PageRule",_0:e,_1:t}}),Zi=o(function(e,t,r,n,o){return{ctor:"DocumentRule",_0:e,_1:t,_2:r,_3:n,_4:o}}),ea=t(function(e,t){return{ctor:"SupportsRule",_0:e,_1:t}}),ta=t(function(e,t){return{ctor:"MediaRule",_0:e,_1:t}}),ra=function(e){return{ctor:"StyleBlockDeclaration",_0:e}},na=t(function(e,t){var r=t;e:do{if("[]"===r.ctor)return t;if("[]"!==r._1.ctor)break e;switch(r._0.ctor){case"StyleBlockDeclaration":return s(ne,ra,e(r._0._0));case"MediaRule":if("::"===r._0._1.ctor){if("[]"===r._0._1._1.ctor)return F.fromArray([s(ta,r._0._0,e(r._0._1._0))]);var n=s(na,e,F.fromArray([s(ta,r._0._0,r._0._1._1)]));return"::"===n.ctor&&"MediaRule"===n._0.ctor&&"[]"===n._1.ctor?F.fromArray([s(ta,n._0._0,s(re["::"],r._0._1._0,n._0._1))]):n}break e;case"SupportsRule":return F.fromArray([s(ea,r._0._0,s(na,e,r._0._1))]);case"DocumentRule":return s(ne,f(Zi,r._0._0,r._0._1,r._0._2,r._0._3),e(r._0._4));case"PageRule":return t;case"FontFace":return t;case"Keyframes":return t;case"Viewport":return t;case"CounterStyle":return t;default:return t}}while(!1);return s(re["::"],r._0,s(na,e,r._1))}),oa=r(function(e,t,r){return{ctor:"StyleBlock",_0:e,_1:t,_2:r}}),ia=t(function(e,t){var r=t;return l(oa,r._0,r._1,s(A["++"],r._2,F.fromArray([e])))}),aa=t(function(e,t){var r=t;if("[]"===r.ctor)return t;if("[]"!==r._1.ctor)return s(re["::"],r._0,s(aa,e,r._1));switch(r._0.ctor){case"StyleBlockDeclaration":return F.fromArray([ra(s(ia,e,r._0._0))]);case"MediaRule":return F.fromArray([s(ta,r._0._0,s(Gi,ia(e),r._0._1))]);default:return t}}),ua=function(e){return{ctor:"MediaQuery",_0:e}},ca=r(function(e,t,r){return{ctor:"Selector",_0:e,_1:t,_2:r}}),sa=t(function(e,t){return{ctor:"CustomSelector",_0:e,_1:t}}),la=function(e){return{ctor:"UniversalSelectorSequence",_0:e}},fa=t(function(e,t){return{ctor:"TypeSelectorSequence",_0:e,_1:t}}),da=t(function(e,t){var r=t;switch(r.ctor){case"TypeSelectorSequence":return s(fa,r._0,s(A["++"],r._1,F.fromArray([e])));case"UniversalSelectorSequence":return la(s(A["++"],r._0,F.fromArray([e])));default:return s(sa,r._0,s(A["++"],r._1,F.fromArray([e])))}}),pa=t(function(e,t){var r=t;return"[]"===r.ctor?F.fromArray([]):"_Tuple2"===r._0.ctor&&"[]"===r._1.ctor?F.fromArray([{ctor:"_Tuple2",_0:r._0._0,_1:s(da,e,r._0._1)}]):s(re["::"],r._0,s(pa,e,r._1))}),ha=t(function(e,t){var r=t;return"[]"===r._1.ctor?l(ca,s(da,e,r._0),F.fromArray([]),r._2):l(ca,r._0,s(pa,e,r._1),r._2)}),_a=t(function(e,t){var r=t;e:do{if("[]"===r.ctor)return t;if("[]"!==r._1.ctor)break e;switch(r._0.ctor){case"StyleBlockDeclaration":if("[]"===r._0._0._1.ctor)return F.fromArray([ra(l(oa,s(ha,e,r._0._0._0),F.fromArray([]),r._0._0._2))]);var n=s(Gi,ha(e),r._0._0._1);return F.fromArray([ra(l(oa,r._0._0._0,n,r._0._0._2))]);case"MediaRule":if("::"===r._0._1.ctor){if("[]"===r._0._1._1.ctor){if("[]"===r._0._1._0._1.ctor){var o=l(oa,s(ha,e,r._0._1._0._0),F.fromArray([]),r._0._1._0._2);return F.fromArray([s(ta,r._0._0,F.fromArray([o]))])}var n=s(Gi,ha(e),r._0._1._0._1),o=l(oa,r._0._1._0._0,n,r._0._1._0._2);return F.fromArray([s(ta,r._0._0,F.fromArray([o]))])}var i=s(_a,e,F.fromArray([s(ta,r._0._0,r._0._1._1)]));return"::"===i.ctor&&"MediaRule"===i._0.ctor&&"[]"===i._1.ctor?F.fromArray([s(ta,i._0._0,s(re["::"],r._0._1._0,i._0._1))]):i}break e;case"SupportsRule":return F.fromArray([s(ea,r._0._0,s(_a,e,r._0._1))]);case"DocumentRule":if("[]"===r._0._4._1.ctor){var o=l(oa,s(ha,e,r._0._4._0),F.fromArray([]),r._0._4._2);return F.fromArray([d(Zi,r._0._0,r._0._1,r._0._2,r._0._3,o)])}var n=s(Gi,ha(e),r._0._4._1),o=l(oa,r._0._4._0,n,r._0._4._2);return F.fromArray([d(Zi,r._0._0,r._0._1,r._0._2,r._0._3,o)]);case"PageRule":return t;case"FontFace":return t;case"Keyframes":return t;case"Viewport":return t;case"CounterStyle":return t;default:return t}}while(!1);return s(re["::"],r._0,s(_a,e,r._1))}),va=t(function(e,t){var r=t;if("[]"===r._1.ctor){var n=r._0;return F.fromArray([l(oa,n,F.fromArray([]),r._2),l(oa,s(ha,e,n),F.fromArray([]),F.fromArray([]))])}var o=r._1,i=r._0,a=s(Gi,ha(e),o);return F.fromArray([l(oa,i,o,r._2),l(oa,i,a,F.fromArray([]))])}),ma=function(e){return{ctor:"PseudoClassSelector",_0:e}},ga=function(e){return{ctor:"IdSelector",_0:e}},ya=function(e){return{ctor:"ClassSelector",_0:e}},ba=function(e){return{ctor:"TypeSelector",_0:e}},wa=function(e){return{ctor:"PseudoElement",_0:e}},Aa={ctor:"Descendant"},ka={ctor:"Child"},Sa={ctor:"GeneralSibling"},Ea={ctor:"AdjacentSibling"},xa=function(e){var t=e;return t._0},Ta=t(function(e,t){var r=t;switch(r.ctor){case"StyleBlockDeclaration":return s(ta,e,F.fromArray([r._0]));case"MediaRule":return s(ta,s(A["++"],e,r._0),r._1);case"SupportsRule":return s(ea,r._0,s(ne,Ta(e),r._1));case"DocumentRule":return d(Zi,r._0,r._1,r._2,r._3,r._4);case"PageRule":return t;case"FontFace":return t;case"Keyframes":return t;case"Viewport":return t;case"CounterStyle":return t;default:return t}}),Oa=(n(function(e,t,r,n){return{key:e,value:t,important:r,warnings:n}}),n(function(e,t,r,n){return{charset:e,imports:t,namespaces:r,snippets:n}}),function(e){return{ctor:"ApplyMixins",_0:e}}),Ra=t(function(e,t){return{ctor:"WithMedia",_0:e,_1:t}}),Ca=t(function(e,t){return{ctor:"WithPseudoElement",_0:e,_1:t}}),qa=t(function(e,t){return{ctor:"NestSnippet",_0:e,_1:t}}),Na=t(function(e,t){return{ctor:"ExtendSelector",_0:e,_1:t}}),Ia=function(e){return{ctor:"AppendProperty",_0:e}},ja=t(function(e,t){var r=t;switch(r.ctor){case"AppendProperty":return Ia(e(r._0));case"ExtendSelector":return s(Na,r._0,s(Da,e,r._1));case"NestSnippet":return t;case"WithPseudoElement":return t;case"WithMedia":return t;default:return Oa(s(Gi,ja(e),r._0))}}),Da=t(function(e,t){var r=t;return"[]"===r.ctor?t:"[]"===r._1.ctor?F.fromArray([s(ja,e,r._0)]):s(re["::"],r._0,s(Da,e,r._1))}),La=function(e){return{ctor:"Snippet",_0:e}},Ba=t(function(e,t){return{ctor:"Keyframes",_0:e,_1:t}}),Ma=(t(function(e,t){return{ctor:"PageRule",_0:e,_1:t}}),o(function(e,t,r,n,o){return{ctor:"DocumentRule",_0:e,_1:t,_2:r,_3:n,_4:o}})),Pa=t(function(e,t){return{ctor:"SupportsRule",_0:e,_1:t}}),Fa=t(function(e,t){return{ctor:"MediaRule",_0:e,_1:t}}),Ua=function(e){return{ctor:"StyleBlockDeclaration",_0:e}},Ja=r(function(e,t,r){return{ctor:"StyleBlock",_0:e,_1:t,_2:r}}),Ha=function(e){for(;;){var t=e;if("[]"===t.ctor)return F.fromArray([]);if("StyleBlockDeclaration"===t._0.ctor)return s(A["++"],s(re["::"],t._0._0._0,t._0._0._1),Ha(t._1));var r=t._1;e=r}},Wa=function(e){var t=e;return{ctor:"_Tuple2",_0:t.warnings,_1:{key:t.key,value:t.value,important:t.important}}},za=function(e){return{ctor:"_Tuple2",_0:s(le,function(e){return e.warnings},e),_1:s(ne,function(e){return g(Wa(e))},e)}},Va=o(function(e,t,r,n,o){var i=o;return"StyleBlockDeclaration"===i.ctor?d(Zi,e,t,r,n,i._0):o}),Ga=function(e){var t=e;if("[]"===t.ctor)return{declarations:F.fromArray([]),warnings:F.fromArray([])};var r=Ga(t._1);return{declarations:s(A["++"],t._0.declarations,r.declarations),warnings:s(A["++"],t._0.warnings,r.warnings)}},Ka=function(e){var t=function(e){var r=e;if("[]"===r.ctor)return{ctor:"_Tuple2",_0:F.fromArray([]),_1:F.fromArray([])};var n=t(r._1),o=n._0,i=n._1,a=za(r._0._1),u=a._0,c=a._1;return{ctor:"_Tuple2",_0:s(A["++"],u,o),_1:s(re["::"],{ctor:"_Tuple2",_0:r._0._0,_1:c},i)}},r=t(e),n=r._0,o=r._1;return{declarations:F.fromArray([Ki(o)]),warnings:n}},$a=function(e){var t=za(e),r=t._0,n=t._1;return{declarations:F.fromArray([$i(n)]),warnings:r}},Xa=function(e){var t=za(e),r=t._0,n=t._1;return{declarations:F.fromArray([$i(n)]),warnings:r}},Qa=t(function(e,t){return{declarations:F.fromArray([s(Xi,e,t)]),warnings:F.fromArray([])}}),Ya=function(e){var t=za(e),r=t._0,n=t._1;return{declarations:F.fromArray([Qi(n)]),warnings:r}},Za=t(function(e,t){var r=za(t),n=r._0,o=r._1;return{declarations:F.fromArray([s(Yi,e,o)]),warnings:n}}),eu=t(function(e,t){var r=t;switch(r.ctor){case"StyleBlockDeclaration":return s(ta,e,F.fromArray([r._0]));case"MediaRule":return s(ta,s(A["++"],e,r._0),r._1);case"SupportsRule":return s(ea,r._0,s(ne,eu(e),r._1));case"DocumentRule":return d(Zi,r._0,r._1,r._2,r._3,r._4);case"PageRule":return t;case"FontFace":return t;case"Keyframes":return t;case"Viewport":return t;case"CounterStyle":return t;default:return t}}),tu=t(function(e,t){var r=function(t){var r=ru(t),n=r.declarations,o=r.warnings;return{declarations:s(ne,eu(e),n),warnings:o}},n=s(ne,r,t);return{warnings:s(le,function(e){return e.warnings},n),declarations:s(le,function(e){return e.declarations},n)}}),ru=function(e){var t=e;return s(nu,t._2,F.fromArray([ra(l(oa,t._0,t._1,F.fromArray([])))]))},nu=t(function(e,r){e:for(;;){var n=e;if("[]"===n.ctor)return{declarations:r,warnings:F.fromArray([])};switch(n._0.ctor){case"AppendProperty":var o=Wa(n._0._0),i=o._0,a=o._1,u=s(nu,n._1,s(aa,a,r));return{declarations:u.declarations,warnings:s(A["++"],i,u.warnings)};case"ExtendSelector":var c=function(e){var t=s(nu,n._0._1,e.declarations);return{warnings:s(A["++"],e.warnings,t.warnings),declarations:t.declarations}},f=Ga(s(Gi,c,s(ne,function(e){return{declarations:F.fromArray([e]),warnings:F.fromArray([])}},s(na,va(n._0._0),r)))),p=s(nu,n._1,f.declarations);return{warnings:s(A["++"],f.warnings,p.warnings),declarations:p.declarations};case"NestSnippet":var h=t(function(e,t){var r=e,o=t;return l(ca,r._0,s(A["++"],r._1,s(re["::"],{ctor:"_Tuple2",_0:n._0._0,_1:o._0},o._1)),L(F.fromArray([o._2,r._2])))}),_=function(e){var t=e;switch(t.ctor){case"StyleBlockDeclaration":var n=s(le,function(e){return s(ne,h(e),s(re["::"],t._0._0,t._0._1))},Ha(r)),o=function(){var e=n;return"[]"===e.ctor?F.fromArray([]):F.fromArray([ra(l(oa,e._0,e._1,F.fromArray([])))])}();return Ga(F.fromArray([s(nu,t._0._2,o)]));case"MediaRule":return s(tu,t._0,t._1);case"SupportsRule":return s(iu,t._0,t._1);case"DocumentRule":return d(ou,t._0,t._1,t._2,t._3,t._4);case"PageRule":return s(Za,t._0,t._1);case"FontFace":return Ya(t._0);case"Keyframes":return s(Qa,t._0,t._1);case"Viewport":return Xa(t._0);case"CounterStyle":return $a(t._0);default:return Ka(t._0)}};return Ga(s(t(function(e,t){return s(A["++"],e,t)}),F.fromArray([s(nu,n._1,r)]),s(ne,_,s(le,xa,n._0._1))));case"WithPseudoElement":var v=n._1,m=r;e=v,r=m;continue e;case"WithMedia":var g=function(){var e=Ha(r);return"[]"===e.ctor?F.fromArray([]):F.fromArray([s(ta,n._0._0,F.fromArray([l(oa,e._0,e._1,F.fromArray([]))]))])}();return Ga(F.fromArray([s(nu,n._1,r),s(nu,n._0._1,g)]));default:var y=s(A["++"],n._0._0,n._1),b=r;e=y,r=b;continue e}}}),ou=o(function(e,t,r,n,o){var i=ru(o),a=i.declarations,u=i.warnings;return{declarations:s(ne,f(Va,e,t,r,n),a),warnings:u}}),iu=t(function(e,t){var r=au(s(le,xa,t)),n=r.declarations,o=r.warnings;return{declarations:F.fromArray([s(ea,e,n)]),warnings:o}}),au=function(e){var t=e;if("[]"===t.ctor)return{declarations:F.fromArray([]),warnings:F.fromArray([])};var r=uu(t._0),n=r.declarations,o=r.warnings,i=au(t._1);return{declarations:s(A["++"],n,i.declarations),warnings:s(A["++"],o,i.warnings)}},uu=function(e){var t=e;switch(t.ctor){case"StyleBlockDeclaration":return ru(t._0);case"MediaRule":return s(tu,t._0,t._1);case"SupportsRule":return s(iu,t._0,t._1);case"DocumentRule":return d(ou,t._0,t._1,t._2,t._3,t._4);case"PageRule":return s(Za,t._0,t._1);case"FontFace":return Ya(t._0);case"Keyframes":return s(Qa,t._0,t._1);case"Viewport":return Xa(t._0);case"CounterStyle":return $a(t._0);default:return Ka(t._0)}},cu=(t(function(e,t){return{declarations:e,warnings:t}}),function(e){for(;;){var t=e;if("[]"===t.ctor)return F.fromArray([]);if("StyleBlockDeclaration"===t._0.ctor)return s(A["++"],s(re["::"],t._0._0._0,t._0._0._1),cu(t._1));var r=t._1;e=r}}),su=function(e){return Z(e)?{value:"none"}:{value:s(Pe,", ",s(ne,function(e){return e},e))}},lu=function(e){return k(e+0)},fu=function(e){return l(m,t(function(e,t){return s(A["++"],e,t)}),"%",lu(s(t(function(e,t){return e*t}),100,e)))},du=(t(function(e,r){var n=function(e){var t=e;return La("[]"===t.ctor?F.fromArray([]):F.fromArray([Ua(l(Ja,t._0,t._1,r))]))};return n(cu(s(le,xa,s(ne,t(function(e,t){return t(e)})(F.fromArray([])),e))))}),qa(Sa),qa(Ea),qa(Aa),qa(ka),Ca(wa("selection")),Ca(wa("first-line")),Ca(wa("first-letter")),Ca(wa("before")),Ca(wa("after")),Na(ma("valid")),Na(ma("target")),Na(ma("scope")),Na(ma("root")),Na(ma("required")),Na(ma("read-write")),Na(ma("out-of-range")),Na(ma("optional")),Na(ma("only-of-type")),Na(ma("only-child")),Na(ma("link")),Na(ma("last-of-type")),Na(ma("last-child")),Na(ma("invalid")),Na(ma("indeterminate")),Na(ma("hover")),Na(ma("focus")),Na(ma("fullscreen")),Na(ma("first-of-type")),Na(ma("first-child")),Na(ma("first")),Na(ma("enabled")),Na(ma("empty")),Na(ma("disabled")),Na(ma("checked")),Na(ma("active")),r(function(e,t,r){return Ia({key:t,value:r,important:!1,warnings:e})})),pu=du(F.fromArray([])),hu=t(function(e,t){var r=l(ca,t,F.fromArray([]),D);return La(F.fromArray([Ua(l(Ja,r,F.fromArray([]),e))]))}),_u=_u||{};_u["."]=t(function(e,t){return s(hu,t,la(F.fromArray([ya(s(zi,"",e))])))});var _u=(t(function(e,t){return s(hu,t,s(sa,e,F.fromArray([])))}),_u||{});_u["#"]=t(function(e,t){return s(hu,t,la(F.fromArray([ga(s(zi,"",e))])))});var vu=function(e){return k(e)},mu=t(function(e,t){var r=function(t){e:for(;;){var n=t;if("[]"===n.ctor)return F.fromArray([]);switch(n._0.ctor){case"StyleBlockDeclaration":var o=n._1;t=o;continue e;case"MediaRule":return s(re["::"],s(Fa,s(A["++"],e,n._0._0),n._0._1),r(n._1));default:return s(re["::"],n._0,r(n._1))}}},n=function(e){for(;;){var t=e;if("[]"===t.ctor)return F.fromArray([]);if("StyleBlockDeclaration"===t._0.ctor)return s(re["::"],t._0._0,n(t._1));var r=t._1;e=r}},o=s(le,xa,t),i=s(Fa,e,n(o));return La(s(re["::"],i,r(o)))}),gu=t(function(e,t){return s(mu,F.fromArray([ua(e)]),t)}),yu=function(e){return l(du,e.warnings,"background-color",e.value)},bu=(n(function(e,t,r,n){var o=s(Pe," ",F.fromArray([e.value,t.value,r.value,n.value])),i=s(A["++"],e.warnings,s(A["++"],t.warnings,s(A["++"],r.warnings,n.warnings)));return l(du,i,"border-color",o)}),r(function(e,t,r){var n=s(Pe," ",F.fromArray([e.value,t.value,r.value])),o=s(A["++"],e.warnings,s(A["++"],t.warnings,r.warnings));return l(du,o,"border-color",n)}),t(function(e,t){var r=s(Pe," ",F.fromArray([e.value,t.value])),n=s(A["++"],e.warnings,t.warnings);return l(du,n,"border-color",r)}),s(pu,"display","flex"),o(function(e,t,r,n,o){return s(pu,e,s(Pe," ",F.fromArray([t.value,r.value,n.value,o.value])))})),wu=(bu("text-shadow"),bu("padding"),bu("margin"),bu("border-image-outset"),bu("border-image-width"),bu("border-radius"),n(function(e,t,r,n){return s(pu,e,s(Pe," ",F.fromArray([t.value,r.value,n.value])))})),Au=(wu("text-shadow"),wu("text-indent"),wu("padding"),wu("margin"),wu("border"),wu("border-top"),wu("border-bottom"),wu("border-left"),wu("border-right"),wu("border-block-start"),wu("border-block-end"),wu("border-block-start"),wu("border-block-end"),wu("border-image-outset"),wu("border-image-width"),wu("border-radius"),wu("font-variant"),wu("font-variant-numeric"),wu("text-decoration"),r(function(e,t,r){return s(pu,e,s(Pe," ",F.fromArray([t.value,r.value])))})),ku=(Au("text-shadow"),Au("text-indent"),Au("padding"),Au("margin"),Au("border"),Au("border-top"),Au("border-bottom"),Au("border-left"),Au("border-right"),Au("border-block-start"),Au("border-block-end"),Au("border-block-start"),Au("border-block-end"),Au("border-image-outset"),Au("border-image-width"),Au("border-top-width"),Au("border-bottom-left-radius"),Au("border-bottom-right-radius"),Au("border-top-left-radius"),Au("border-top-right-radius"),Au("border-radius"),Au("border-spacing"),Au("font-variant"),Au("font-variant-numeric"),Au("text-decoration"),t(function(e,t){return s(pu,e,t.value)})),Su=(ku("text-rendering"),ku("text-overflow"),ku("text-shadow"),ku("text-indent"),ku("text-transform"),ku("display"),ku("opacity"),ku("width")),Eu=(ku("max-width"),ku("min-width"),ku("height")),xu=(ku("min-height"),ku("max-height"),ku("padding"),ku("padding-block-start"),ku("padding-block-end"),ku("padding-inline-start"),ku("padding-inline-end"),ku("padding-top"),ku("padding-bottom")),Tu=(ku("padding-right"),ku("padding-left"),ku("margin"),ku("margin-top")),Ou=(ku("margin-bottom"),ku("margin-right")),Ru=(ku("margin-left"),ku("margin-block-start"),ku("margin-block-end"),ku("margin-inline-start"),ku("margin-inline-end"),ku("top"),ku("bottom")),Cu=(ku("left"),ku("right")),qu=(ku("border"),ku("border-top"),ku("border-bottom"),ku("border-left"),ku("border-right"),ku("border-block-start"),ku("border-block-end"),ku("border-block-start"),ku("border-block-end"),ku("border-image-outset"),ku("border-image-width"),ku("border-block-end-style"),ku("border-block-start-style"),ku("border-inline-end-style"),ku("border-bottom-style"),ku("border-inline-start-style"),ku("border-left-style"),ku("border-right-style"),ku("border-top-style"),ku("border-style"),ku("border-bottom-width"),ku("border-inline-end-width"),ku("border-left-width"),ku("border-right-width"),ku("border-top-width"),ku("border-bottom-left-radius"),ku("border-bottom-right-radius"),ku("border-top-left-radius"),ku("border-top-right-radius"),ku("border-radius"),ku("border-spacing"),ku("overflow"),ku("overflow-x"),ku("overflow-y"),ku("white-space"),ku("line-height"),ku("letter-spacing"),ku("font-family"),function(e){return s(ku,"font-family",su(e))}),Nu=(ku("font-size"),ku("font-style"),ku("font-variant"),ku("font-variant-ligatures"),ku("font-variant-caps"),ku("font-variant-numeric"),ku("text-decoration"),ku("text-decoration-line"),ku("text-decoration-style"),ku("position")),Iu=(ku("text-bottom"),ku("text-top"),ku("super"),ku("sub"),ku("baseline"),ku("middle"),ku("stretch"),ku("flex-end"),ku("flex-start"),ku("order"),Au("flex-flow"),ku("flex-flow"),ku("flex-direction"),ku("flex-wrap"),ku("flex-shrink"),ku("flex-grow"),ku("flex-basis"),wu("flex"),Au("flex"),ku("flex"),ku("transform-style"),ku("box-sizing"),ku("transform-box"),ku("true"),ku("match-parent"),ku("end"),ku("start"),ku("justify-all"),ku("text-justify"),ku("center"),ja(function(e){return v.update(e,{important:!0})}),ku("all"),r(function(e,t,r){var n=s(Pe," ",s(oe,function(e){return x(He(e))},F.fromArray([k(s(e,t.numericValue,r.numericValue)),t.unitLabel])));return v.update(t,{value:n})})),_u=_u||{};_u["|*|"]=Iu(t(function(e,t){return e*t}));var _u=_u||{};_u["|/|"]=Iu(t(function(e,t){return e/t}));var _u=_u||{};_u["|-|"]=Iu(t(function(e,t){return e-t}));var _u=_u||{};_u["|+|"]=Iu(t(function(e,t){return e+t}));var ju=(r(function(e,t,r){e:for(;;){var n=r;switch(n.ctor){case"AppendProperty":return s(pu,t,n._0.key);case"ExtendSelector":return l(du,F.fromArray([s(A["++"],"Cannot apply ",s(A["++"],e,s(A["++"]," with inapplicable mixin for selector ",k(n._0))))]),t,"");case"NestSnippet":return l(du,F.fromArray([s(A["++"],"Cannot apply ",s(A["++"],e,s(A["++"]," with inapplicable mixin for combinator ",k(n._0))))]),t,"");case"WithPseudoElement":return l(du,F.fromArray([s(A["++"],"Cannot apply ",s(A["++"],e,s(A["++"]," with inapplicable mixin for pseudo-element setter ",k(n._0))))]),t,"");case"WithMedia":return l(du,F.fromArray([s(A["++"],"Cannot apply ",s(A["++"],e,s(A["++"]," with inapplicable mixin for media query ",k(n._0))))]),t,"");default:if("[]"===n._0.ctor)return l(du,F.fromArray([s(A["++"],"Cannot apply ",s(A["++"],e," with empty mixin. "))]),t,"");if("[]"===n._0._1.ctor){var o=e,i=t,a=n._0._0;e=o,t=i,r=a;continue e}var u=e,c=t,f=Oa(n._0._1);e=u,t=c,r=f;continue e}}}),t(function(e,t){return s(A["++"],e,s(A["++"],"(",s(A["++"],s(Pe,", ",t),")")))})),Du=(ua("tv"),ua("projection"),ua("print"),ua("screen"),t(function(e,t){return{value:e,fontWeight:t}}),{ctor:"Compatible"}),Lu=({value:"transparent",color:Du,warnings:F.fromArray([])},{value:"currentColor",color:Du,warnings:F.fromArray([])},r(function(e,t,r){var n=v.cmp(e,0)<0||v.cmp(e,255)>0||v.cmp(t,0)<0||v.cmp(t,255)>0||v.cmp(r,0)<0||v.cmp(r,255)>0?F.fromArray([s(A["++"],"RGB color values must be between 0 and 255. rgb(",s(A["++"],k(e),s(A["++"],", ",s(A["++"],k(t),s(A["++"],", ",s(A["++"],k(r),") is not valid."))))))]):F.fromArray([]);return{value:s(ju,"rgb",s(ne,lu,F.fromArray([e,t,r]))),color:Du,warnings:n,red:e,green:t,blue:r,alpha:1}}),n(function(e,t,r,n){var o=v.cmp(e,0)<0||v.cmp(e,255)>0||v.cmp(t,0)<0||v.cmp(t,255)>0||v.cmp(r,0)<0||v.cmp(r,255)>0||v.cmp(n,0)<0||v.cmp(n,1)>0?F.fromArray([s(A["++"],"RGB color values must be between 0 and 255, and the alpha in RGBA must be between 0 and 1. rgba(",s(A["++"],k(e),s(A["++"],", ",s(A["++"],k(t),s(A["++"],", ",s(A["++"],k(r),s(A["++"],", ",s(A["++"],k(n),") is not valid."))))))))]):F.fromArray([]);return{value:s(ju,"rgba",s(ne,lu,F.fromArray([e,t,r,n]))),color:Du,warnings:o,red:e,green:t,blue:r,alpha:1}}),function(e){var t=v.eq(l(Me,0,1,e),"#")?e:s(A["++"],"#",e),r=s(Hn,Wn("^#([a-fA-F0-9]{8}|[a-fA-F0-9]{6}|[a-fA-F0-9]{4}|[a-fA-F0-9]{3})$"),t)?F.fromArray([]):F.fromArray([s(Pe," ",F.fromArray(["The syntax of a hex-color is a token whose value consists of 3, 4, 6, or 8 hexadecimal digits.",t,"is not valid.","Please see: https://drafts.csswg.org/css-color/#hex-notation"]))]);return{value:t,color:Du,red:0,green:0,blue:0,alpha:1,warnings:r}}),Bu=i(function(e,t,r,n,o,i){var a=0,u=0,c=0;return{value:e,color:Du,red:c,green:u,blue:a,alpha:i,warnings:t}}),Mu=(r(function(e,t,r){var n=F.fromArray([lu(e),fu(t),fu(r)]),o=s(ju,"hsl",n),i=v.cmp(e,360)>0||v.cmp(e,0)<0||v.cmp(t,1)>0||v.cmp(t,0)<0||v.cmp(r,1)>0||v.cmp(r,0)<0?F.fromArray([s(A["++"],"HSL color values must have an H value between 0 and 360 (as in degrees) and S and L values between 0 and 1. ",s(A["++"],o," is not valid."))]):F.fromArray([]);return p(Bu,o,i,e,t,r,1)}),n(function(e,t,r,n){var o=F.fromArray([lu(e),fu(t),fu(r),lu(n)]),i=s(ju,"hsla",o),a=v.cmp(e,360)>0||v.cmp(e,0)<0||v.cmp(t,1)>0||v.cmp(t,0)<0||v.cmp(r,1)>0||v.cmp(r,0)<0||v.cmp(n,1)>0||v.cmp(n,0)<0?F.fromArray([s(A["++"],"HSLA color values must have an H value between 0 and 360 (as in degrees) and S, L, and A values between 0 and 1. ",s(A["++"],i," is not valid."))]):F.fromArray([]);return p(Bu,i,a,e,t,r,n)}),r(function(e,t,r){return{value:s(A["++"],lu(r),t),numericValue:r,units:e,unitLabel:t,length:Du,lengthOrAuto:Du,lengthOrNumber:Du,lengthOrNone:Du,lengthOrMinMaxDimension:Du,lengthOrNoneOrMinMaxDimension:Du,textIndent:Du,flexBasis:Du,lengthOrNumberOrAutoOrNoneOrContent:Du,fontSize:Du
}})),Pu=t(function(e,t){return{value:s(A["++"],lu(t),e),angle:Du}}),Fu=(Pu("deg"),Pu("grad"),Pu("rad"),Pu("turn"),i(function(e,t,r,n,o,i){return{value:s(ju,"matrix",s(ne,lu,F.fromArray([e,t,r,n,o,i]))),transform:Du}}),n(function(e,t,r,n){var o=n,i=s(ne,lu,F.fromArray([e,t,r]));return{value:s(ju,"rotate3d",s(A["++"],i,F.fromArray([o.value]))),transform:Du}}),t(function(e,t){return{value:s(ju,"scale",s(ne,lu,F.fromArray([e,t]))),transform:Du}}),r(function(e,t,r){return{value:s(ju,"scale3d",s(ne,lu,F.fromArray([e,t,r]))),transform:Du}}),t(function(e,t){return{value:s(ju,"skew",F.fromArray([e.value,t.value])),transform:Du}}),t(function(e,t){return{value:s(ju,"translate",F.fromArray([e.value,t.value])),transform:Du}}),r(function(e,t,r){return{value:s(ju,"translate3d",F.fromArray([e.value,t.value,r.value])),transform:Du}}),{value:"wrap",flexWrap:Du,flexDirectionOrWrap:Du}),Uu=(v.update(Fu,{value:"wrap-reverse"}),{value:"row",flexDirection:Du,flexDirectionOrWrap:Du}),Ju=(v.update(Uu,{value:"row-reverse"}),v.update(Uu,{value:"column"}),v.update(Uu,{value:"column-reverse"}),{value:"fill-available",minMaxDimension:Du,lengthOrMinMaxDimension:Du,lengthOrNoneOrMinMaxDimension:Du}),Hu=(v.update(Ju,{value:"max-content"}),v.update(Ju,{value:"min-content"}),v.update(Ju,{value:"fit-content"}),{value:"fixed",position:Du}),Wu=({value:"normal",warnings:F.fromArray([]),fontStyle:Du,featureTagValue:Du},t(function(e,t){var r=F.fromArray([{ctor:"_Tuple2",_0:!v.eq(Ue(e),4),_1:s(A["++"],"Feature tags must be exactly 4 characters long. ",s(A["++"],e," is invalid."))},{ctor:"_Tuple2",_0:v.cmp(t,0)<0,_1:s(A["++"],"Feature values cannot be negative. ",s(A["++"],k(t)," is invalid."))}]),n=s(ne,g,s(oe,y,r));return{value:s(A["++"],k(e),s(A["++"]," ",k(t))),featureTagValue:Du,warnings:n}}),t(function(e,t){return{ctor:"PseudoClass",_0:e,_1:t}}),t(function(e,t){return{ctor:"PseudoElement",_0:e,_1:t}}),{ctor:"PercentageUnits"}),zu=(s(Mu,Wu,"%"),{ctor:"EmUnits"}),Vu=(s(Mu,zu,"em"),{ctor:"ExUnits"}),Gu=(s(Mu,Vu,"ex"),{ctor:"ChUnits"}),Ku=(s(Mu,Gu,"ch"),{ctor:"RemUnits"}),$u=(s(Mu,Ku,"rem"),{ctor:"VhUnits"}),Xu=(s(Mu,$u,"vh"),{ctor:"VwUnits"}),Qu=(s(Mu,Xu,"vw"),{ctor:"VMinUnits"}),Yu=(s(Mu,Qu,"vmin"),{ctor:"VMaxUnits"}),Zu=(s(Mu,Yu,"vmax"),{ctor:"PxUnits"}),ec=s(Mu,Zu,"px"),tc={ctor:"MMUnits"},rc=(s(Mu,tc,"mm"),{ctor:"CMUnits"}),nc=(s(Mu,rc,"cm"),{ctor:"InchUnits"}),oc=(s(Mu,nc,"in"),{ctor:"PtUnits"}),ic=(s(Mu,oc,"pt"),{ctor:"PcUnits"}),ac=(s(Mu,ic,"pc"),{ctor:"IncompatibleUnits"}),uc={value:"initial",overflow:Du,none:Du,number:Du,textDecorationLine:Du,textRendering:Du,textIndent:Du,textDecorationStyle:Du,boxSizing:Du,display:Du,all:Du,alignItems:Du,length:Du,lengthOrAuto:Du,lengthOrNone:Du,lengthOrNumber:Du,lengthOrMinMaxDimension:Du,lengthOrNoneOrMinMaxDimension:Du,flexBasis:Du,flexWrap:Du,flexDirection:Du,flexDirectionOrWrap:Du,lengthOrNumberOrAutoOrNoneOrContent:Du,fontFamily:Du,fontSize:Du,fontStyle:Du,fontWeight:Du,fontVariant:Du,units:ac,numericValue:0,unitLabel:""},cc=(v.update(uc,{value:"unset"}),v.update(uc,{value:"inherit"}),l(Mu,ac,"",0),t(function(e,t){var r=s(fa,ba(e),F.fromArray([])),n=l(ca,r,F.fromArray([]),D);return La(F.fromArray([Ua(l(Ja,n,F.fromArray([]),t))]))})),sc=(cc("html"),cc("body")),lc=(cc("article"),cc("header"),cc("footer"),cc("h1"),cc("h2"),cc("h3"),cc("h4"),cc("h5"),cc("h6"),cc("nav"),cc("section"),cc("div"),cc("hr"),cc("li"),cc("main"),cc("ol"),cc("p"),cc("ul"),cc("pre"),cc("a"),cc("code"),cc("small"),cc("span"),cc("strong"),cc("img"),cc("audio"),cc("video"),cc("canvas"),cc("caption"),cc("col"),cc("colgroup"),cc("table"),cc("tbody"),cc("td"),cc("tfoot"),cc("th"),cc("thead"),cc("tr"),cc("button"),cc("fieldset"),cc("form"),cc("input"),cc("label"),cc("legend"),cc("optgroup"),cc("option"),cc("progress"),cc("select"),t(function(e,t){var r=t.key;return"animation-name"===r?v.update(t,{value:s(A["++"],e,t.value)}):t})),fc=t(function(e,t){var r=t;switch(r.ctor){case"ClassSelector":return ya(s(A["++"],e,r._0));case"IdSelector":return ga(r._0);default:return ma(r._0)}}),dc=t(function(e,t){var r=t;switch(r.ctor){case"TypeSelectorSequence":return s(fa,r._0,s(ne,fc(e),r._1));case"UniversalSelectorSequence":return la(s(ne,fc(e),r._0));default:return s(sa,r._0,s(ne,fc(e),r._1))}}),pc=t(function(e,t){var r=t,n=dc(e);return l(ca,n(r._0),s(ne,function(e){var t=e;return{ctor:"_Tuple2",_0:t._0,_1:n(t._1)}},r._1),r._2)}),hc=t(function(e,t){var r=t;switch(r.ctor){case"AppendProperty":return Ia(s(lc,e,r._0));case"ExtendSelector":return s(Na,s(fc,e,r._0),s(ne,hc(e),r._1));case"NestSnippet":return s(qa,r._0,s(ne,_c(e),r._1));case"WithPseudoElement":return s(Ca,r._0,s(ne,hc(e),r._1));case"WithMedia":return s(Ra,r._0,s(ne,hc(e),r._1));default:return Oa(s(ne,hc(e),r._0))}}),_c=t(function(e,t){var r=t;return La(s(ne,vc(e),r._0))}),vc=t(function(e,t){var r=t;switch(r.ctor){case"StyleBlockDeclaration":return Ua(s(mc,e,r._0));case"MediaRule":return s(Fa,r._0,s(ne,mc(e),r._1));case"SupportsRule":return s(Pa,r._0,function(e){return F.fromArray([La(e)])}(s(ne,vc(e),s(le,xa,r._1))));case"DocumentRule":return d(Ma,r._0,r._1,r._2,r._3,s(mc,e,r._4));case"PageRule":return t;case"FontFace":return t;case"Keyframes":return s(Ba,s(A["++"],e,r._0),r._1);case"Viewport":return t;case"CounterStyle":return t;default:return t}}),mc=t(function(e,t){var r=t;return l(Ja,s(pc,e,r._0),s(ne,pc(e),r._1),s(ne,hc(e),r._2))}),gc=t(function(e,t){return s(ne,_c(Wi(e)),t)}),yc=t(function(e,t){return go(s(Pe," ",s(ne,zi(e),t)))}),bc=(yc(""),t(function(e,t){return s(yc,e,s(ne,y,s(oe,g,t)))})),wc=function(e){return{$class:yc(e),classList:bc(e),id:function(e){return yo(Wi(e))},name:e}},Ac=(r(function(e,t,r){return{$class:e,classList:t,id:r}}),n(function(e,t,r,n){return{$class:e,classList:t,id:r,name:n}}),function(e){return function(t){return function(r){return function(n){return function(o){return function(i){return function(a){return function(u){return function(c){return function(s){return{id:e,url:t,name:r,season:n,number:o,airdate:i,airtime:a,airstamp:u,runtime:c,summary:s}}}}}}}}}}}),kc=l(ir,"summary",Xt,l(ir,"runtime",Kt,l(ir,"airstamp",Xt,l(ir,"airtime",Xt,l(ir,"airdate",Xt,l(ir,"number",Kt,l(ir,"season",Kt,l(ir,"name",Xt,l(ir,"url",Xt,l(ir,"id",Kt,rr(Ac))))))))))),Sc=(t(function(e,t){return{medium:e,original:t}}),t(function(e,t){return{score:e,show:t}})),Ec=t(function(e,t){return{time:e,days:t}}),xc=l(ir,"days",Vt(Xt),l(ir,"time",Xt,rr(Ec))),Tc=function(e){return{average:e}},Oc=l(ir,"average",Wt($t),rr(Tc)),Rc=r(function(e,t,r){return{name:e,code:t,timezone:r}}),Cc=l(ir,"timezone",Xt,l(ir,"code",Xt,l(ir,"name",Xt,rr(Rc)))),qc=r(function(e,t,r){return{id:e,name:t,country:r}}),Nc=l(ir,"country",Cc,l(ir,"name",Xt,l(ir,"id",Kt,rr(qc)))),Ic=r(function(e,t,r){return{tvrage:e,thetvdb:t,imdb:r}}),jc=l(ir,"imdb",Wt(Xt),l(ir,"thetvdb",Wt(Kt),l(ir,"tvrage",Wt(Kt),rr(Ic)))),Dc=t(function(e,t){return{medium:e,original:t}}),Lc=l(ir,"original",Xt,l(ir,"medium",Xt,rr(Dc))),Bc=(t(function(e,t){return{self:e,previousepisode:t}}),function(e){return function(t){return function(r){return function(n){return function(o){return function(i){return function(a){return function(u){return function(c){return function(s){return function(l){return function(f){return function(d){return function(p){return function(h){return function(_){return function(v){return{id:e,url:t,name:r,type$:n,language:o,genres:i,status:a,runtime:u,premiered:c,schedule:s,rating:l,weight:f,network:d,externals:p,image:h,summary:_,updated:v}}}}}}}}}}}}}}}}}}),Mc=l(ir,"updated",Kt,l(ir,"summary",Xt,l(ir,"image",Wt(Lc),l(ir,"externals",jc,l(ir,"network",Wt(Nc),l(ir,"weight",Kt,l(ir,"rating",Oc,l(ir,"schedule",xc,l(ir,"premiered",Wt(Xt),l(ir,"runtime",Wt(Kt),l(ir,"status",Xt,l(ir,"genres",Vt(Xt),l(ir,"language",Xt,l(ir,"type",Xt,l(ir,"name",Xt,l(ir,"url",Xt,l(ir,"id",Kt,rr(Bc)))))))))))))))))),Pc=l(ir,"show",Mc,l(ir,"score",$t,rr(Sc))),Fc=Vt(kc),Uc=Vt(Pc),Jc="/api",Hc=function(e){return s(Ko,Uc,s(A["++"],Jc,s(A["++"],"/search/shows?q=",Lo(e))))},Wc=function(e){return s(Ko,Fc,s(A["++"],Jc,s(A["++"],"/shows/",s(A["++"],k(e),"/episodes"))))},zc="app-",Vc={ctor:"AppContainer"},Gc=(s(gc,zc,F.fromArray([sc(F.fromArray([qu(F.fromArray(["Roboto",vu("Helvetica Neue"),"Helvetica","Arial"])),yu(Lu("f4f4f4"))])),s(t(function(e,t){return s(_u["."],e,t)}),Vc,F.fromArray([xu(ec(80))]))])),wc(zc)),Kc=Gc.$class,$c=t(function(e,t){return s(io,F.fromArray([Kc(F.fromArray([Vc]))]),F.fromArray([s(io,F.fromArray([go("mui-appbar")]),F.fromArray([s(io,F.fromArray([go("mui-container mui--appbar-height mui--appbar-line-height")]),F.fromArray([s(ao,F.fromArray([go("mui--text-headline")]),F.fromArray([ro(e)]))]))])),s(io,F.fromArray([go("mui-container")]),F.fromArray([t]))]))}),Xc="c-search-",Qc={ctor:"SearchCollapsed"},Yc=(s(gc,Xc,F.fromArray([s(t(function(e,t){return s(_u["."],e,t)}),Qc,F.fromArray([xu(ec(60)),Tu(ec(-32))])),s(gu,"screen and ( max-width: 450px )",F.fromArray([s(t(function(e,t){return s(_u["."],e,t)}),Qc,F.fromArray([xu(ec(0)),Tu(ec(0)),Nu(Hu),Ru(ec(15)),Cu(ec(15)),s(pu,"z-index","2")]))]))])),function(e){return s(io,F.fromArray([go("mui-panel")]),F.fromArray([ro(s(j,"",e))]))}),Zc=function(e){var t={medium:"http://lorempixel.com/72/100/abstract"},r=e;return"Nothing"===r.ctor?t.medium:r._0.medium},es={term:"",visible:!1,results:F.fromArray([]),error:D},ts=wc(Xc),rs=ts.$class,ns=(n(function(e,t,r,n){return{visible:e,term:t,results:r,error:n}}),function(e){return{ctor:"AddShow",_0:e}}),os=t(function(e,t){return s(io,F.fromArray([]),F.fromArray([s(io,F.fromArray([So(F.fromArray([{ctor:"_Tuple2",_0:"display",_1:"flex"},{ctor:"_Tuple2",_0:"overflow",_1:"auto"},{ctor:"_Tuple2",_0:"min-height",_1:"100px"},{ctor:"_Tuple2",_0:"margin-bottom",_1:"15px"}]))]),F.fromArray([s(uo,F.fromArray([So(F.fromArray([{ctor:"_Tuple2",_0:"height",_1:"100px"}])),bo(Zc(t.show.image))]),F.fromArray([])),s(io,F.fromArray([So(F.fromArray([{ctor:"_Tuple2",_0:"padding-left",_1:"15px"},{ctor:"_Tuple2",_0:"flex",_1:"1"}]))]),F.fromArray([s(io,F.fromArray([go("mui--text-title")]),F.fromArray([ro(t.show.name)])),s(io,F.fromArray([go("mui--text-subhead")]),F.fromArray([ro(function(){var e=t.show.network;return"Nothing"===e.ctor?"":e._0.name}())])),s(io,F.fromArray([]),F.fromArray([s(Qo,F.fromArray([]),t.show.summary)]))]))])),s(io,F.fromArray([]),F.fromArray([function(){var r=s(ur,t.show.id,e);return r===!1?s(fo,F.fromArray([No(ns(t)),go("mui-btn mui-btn--primary")]),F.fromArray([ro("Add")])):s(fo,F.fromArray([go("mui-btn mui-btn--primary"),ko(!0)]),F.fromArray([ro("Already added")]))}()]))]))}),is=t(function(e,t){return s(io,F.fromArray([go("mui-panel")]),s(de,s(oo,F.fromArray([]),F.fromArray([])),s(ne,os(t),e)))}),as={ctor:"HideSearch"},us={ctor:"ShowSearch"},cs=function(e){return s(io,F.fromArray([rs(F.fromArray([Qc]))]),F.fromArray([s(fo,F.fromArray([No(us),go("mui-btn mui-btn--fab mui-btn--accent"),So(F.fromArray([{ctor:"_Tuple2",_0:"float",_1:"right"}]))]),F.fromArray([ro("+")]))]))},ss=function(e){return{ctor:"ShowError",_0:e}},ls=function(e){return{ctor:"ShowResults",_0:e}},fs=t(function(e,t){var r=e;switch(r.ctor){case"UpdateTerm":return{ctor:"_Tuple2",_0:v.update(t,{term:r._0}),_1:ke};case"Search":return{ctor:"_Tuple2",_0:t,_1:l(en,ss,ls,Hc(t.term))};case"ShowResults":return{ctor:"_Tuple2",_0:v.update(t,{results:r._0}),_1:ke};case"ShowError":var n=r._0;return"UnexpectedPayload"===n.ctor?{ctor:"_Tuple2",_0:v.update(t,{error:M(n._0)}),_1:ke}:{ctor:"_Tuple2",_0:v.update(t,{error:M("Something terrible has happened")}),_1:ke};case"ShowSearch":return{ctor:"_Tuple2",_0:v.update(t,{visible:!0}),_1:ke};case"HideSearch":return{ctor:"_Tuple2",_0:v.update(t,{visible:!1}),_1:ke};default:return{ctor:"_Tuple2",_0:v.update(t,{visible:!1}),_1:ke}}}),ds={ctor:"Search"},ps=function(e){return{ctor:"UpdateTerm",_0:e}},hs=t(function(e,t){return s(co,F.fromArray([Co(ds)]),F.fromArray([s(io,F.fromArray([So(F.fromArray([{ctor:"_Tuple2",_0:"padding-top",_1:"15px"},{ctor:"_Tuple2",_0:"padding-bottom",_1:"15px"}]))]),F.fromArray([s(io,F.fromArray([go("mui-textfield mui-textfield--float-label")]),F.fromArray([s(lo,F.fromArray([wo("text"),qo(ps)]),F.fromArray([])),s(so,F.fromArray([]),F.fromArray([ro("Search for shows")]))])),s(fo,F.fromArray([No(ds),go("mui-btn mui-btn--primary"),So(F.fromArray([{ctor:"_Tuple2",_0:"text-align",_1:"right"}]))]),F.fromArray([ro("Search")])),s(fo,F.fromArray([No(as),go("mui-btn mui-btn--danger")]),F.fromArray([ro("Cancel")]))])),v.cmp(X(e.results),0)>0?s(is,e.results,t):v.eq(e.error,D)?s(io,F.fromArray([]),F.fromArray([])):Yc(e.error)]))}),_s=t(function(e,t){return e.visible?s(hs,e,t):cs(e)}),vs="c-show-",ms={ctor:"Button"},gs={ctor:"ShowImage"},ys=(s(gc,vs,F.fromArray([s(t(function(e,t){return s(_u["."],e,t)}),gs,F.fromArray([Eu(ec(200))])),s(t(function(e,t){return s(_u["."],e,t)}),ms,F.fromArray([Su(ec(136))])),s(gu,"screen and ( max-width: 600px )",F.fromArray([s(t(function(e,t){return s(_u["."],e,t)}),gs,F.fromArray([Eu(ec(100))]))])),s(gu,"screen and ( max-width: 342px )",F.fromArray([s(t(function(e,t){return s(_u["."],e,t)}),ms,F.fromArray([Ou(ec(8))]))]))])),t(function(e,t){var r=_e(xn(t.airstamp));return"Nothing"===r.ctor?!0:l(li,fi,e,r._0)})),bs=t(function(e,t){return s(oe,function(e){return!v.eq(e.episodes,F.fromArray([]))},s(ne,function(t){return v.update(t,{episodes:s(oe,ys(e),t.episodes)})},t))}),ws=t(function(e,t){var r=t.episodes;return"[]"===r.ctor?!1:v.cmp(e,r._0.id)>-1}),As=function(e){var t=e;return"[]"===t.ctor?0:t._0.season},ks=(t(function(e,t){var r=It(t);return s(ne,function(e){return v.update(e,{episodes:s(j,F.fromArray([]),s(Ye,e.id,r))})},e)}),function(e){return Wc(e.id)}),Ss=wc(vs),Es=Ss.$class,xs=ge.outgoingPort("persistShow",function(e){return{id:e.id,lastEpisodeWatched:e.lastEpisodeWatched,name:e.name,image:"Nothing"===e.image.ctor?null:e.image._0,seasons:F.toArray(e.seasons).map(function(e){return{number:e.number,episodes:F.toArray(e.episodes).map(function(e){return{id:e.id,name:e.name,summary:e.summary,season:e.season,number:e.number,airstamp:e.airstamp}})}}),rev:e.rev}}),Ts=(i(function(e,t,r,n,o,i){return{id:e,name:t,summary:r,season:n,number:o,airstamp:i}}),t(function(e,t){return{number:e,episodes:t}}),i(function(e,t,r,n,o,i){return{id:e,lastEpisodeWatched:t,name:r,image:n,seasons:o,rev:i}}),n(function(e,t,r,n){return{today:e,show:t,seasonsListVisible:r,visibleSeasons:n}}),function(e){return{ctor:"SetRev",_0:e}}),Os=function(e){return{ctor:"SetTodaysDate",_0:e}},Rs=function(e){return{ctor:"ShowTimeError",_0:e}},Cs={ctor:"_Tuple2",_0:{today:Sn(0),seasonsListVisible:!1,visibleSeasons:ft,show:{id:0,name:"",lastEpisodeWatched:0,image:D,seasons:F.fromArray([]),rev:""}},_1:l(en,Rs,Os,Tn)},qs=function(e){return{ctor:"ShowError",_0:e}},Ns=function(e){return{ctor:"UpdateEpisodes",_0:e}},Is=t(function(e,r){var n=e;switch(n.ctor){case"MarkEpisodeWatched":var o=v.update(r,{lastEpisodeWatched:n._0});return{ctor:"_Tuple2",_0:o,_1:xs(o)};case"MarkSeasonWatched":var i=s(Rr,function(e){return v.eq(e.number,n._0)},r.seasons),a=i;if("Nothing"===a.ctor)return{ctor:"_Tuple2",_0:r,_1:ke};var u=a._0.episodes;if("[]"===u.ctor)return{ctor:"_Tuple2",_0:r,_1:ke};var o=v.update(r,{lastEpisodeWatched:u._0.id});return{ctor:"_Tuple2",_0:o,_1:xs(o)};case"MarkAllEpisodesWatched":var c=function(){var e=r.seasons;if("[]"===e.ctor)return 0;var t=e._0.episodes;return"[]"===t.ctor?0:t._0.id}(),o=v.update(r,{lastEpisodeWatched:c});return{ctor:"_Tuple2",_0:o,_1:xs(o)};case"UpdateEpisodes":var f=s(ne,function(e){return{episodes:e,number:As(e)}},s(Dr,t(function(e,t){return v.eq(e.season,t.season)}),s(ne,function(e){return{id:e.id,name:e.name,summary:e.summary,season:e.season,number:e.number,airstamp:e.airstamp}},ae(n._0)))),o=v.update(r,{seasons:f});return{ctor:"_Tuple2",_0:o,_1:v.eq(o,r)?ke:xs(o)};case"UpdateShow":return{ctor:"_Tuple2",_0:r,_1:l(en,qs,Ns,ks(r))};case"SetRev":return{ctor:"_Tuple2",_0:v.update(r,{rev:n._0}),_1:ke};default:return{ctor:"_Tuple2",_0:r,_1:ke}}}),js=t(function(e,t){var r=e;switch(r.ctor){case"SetTodaysDate":return{ctor:"_Tuple2",_0:v.update(t,{today:r._0}),_1:ke};case"ToggleSeasons":return{ctor:"_Tuple2",_0:v.update(t,{seasonsListVisible:r._0}),_1:ke};case"ToggleSeason":var n=l(Ot,r._0,r._1,t.visibleSeasons);return{ctor:"_Tuple2",_0:v.update(t,{visibleSeasons:n}),_1:ke};default:var o=s(Is,e,t.show),i=o._0,a=o._1;return{ctor:"_Tuple2",_0:v.update(t,{show:i}),_1:a}}}),Ds={ctor:"UpdateShow"},Ls=function(e){return{ctor:"ToggleSeasons",_0:e}},Bs=function(e){return{ctor:"MarkEpisodeWatched",_0:e}},Ms=t(function(e,t){return s(io,F.fromArray([]),F.fromArray([s(io,F.fromArray([go("mui--text-subhead")]),F.fromArray([ro(s(A["++"],"Episode ",s(A["++"],k(t.number),s(A["++"]," - ",t.name))))])),s(io,F.fromArray([]),F.fromArray([s(Qo,F.fromArray([]),t.summary)])),v.cmp(t.id,e)>0?s(io,F.fromArray([So(F.fromArray([{ctor:"_Tuple2",_0:"display",_1:"flex"},{ctor:"_Tuple2",_0:"justify-content",_1:"flex-end"}]))]),F.fromArray([s(fo,F.fromArray([No(Bs(t.id)),go("mui-btn mui-btn--primary mui-btn--small c-show-Button")]),F.fromArray([ro("I watched this")]))])):s(io,F.fromArray([]),F.fromArray([]))]))}),Ps=r(function(e,t,r){var n=t;return n===!0?s(io,F.fromArray([]),s(A["++"],s(de,s(oo,F.fromArray([]),F.fromArray([])),s(ne,Ms(e),r.episodes)),F.fromArray([s(oo,F.fromArray([]),F.fromArray([]))]))):s(io,F.fromArray([]),F.fromArray([]))}),Fs=function(e){return{ctor:"MarkSeasonWatched",_0:e}},Us={ctor:"MarkAllEpisodesWatched"},Js=t(function(e,t){return{ctor:"ToggleSeason",_0:e,_1:t}}),Hs=r(function(e,t,r){var n=function(){var e=s(Ye,r.number,t);return"Nothing"===e.ctor?!1:e._0}();return s(io,F.fromArray([]),F.fromArray([s(io,F.fromArray([So(F.fromArray([{ctor:"_Tuple2",_0:"display",_1:"flex"},{ctor:"_Tuple2",_0:"justify-content",_1:"space-between"},{ctor:"_Tuple2",_0:"flex-wrap",_1:"wrap"}]))]),F.fromArray([s(io,F.fromArray([go("mui--text-title"),So(F.fromArray([{ctor:"_Tuple2",_0:"line-height",_1:"43px"},{ctor:"_Tuple2",_0:"width",_1:"50%"}]))]),F.fromArray([ro(s(A["++"],"Season ",k(r.number)))])),s(io,F.fromArray([]),F.fromArray([s(io,F.fromArray([]),F.fromArray([v.eq(s(ws,e,r),!0)?s(io,F.fromArray([]),F.fromArray([])):s(fo,F.fromArray([No(Fs(r.number)),go("mui-btn mui-btn--primary mui-btn--small c-show-Button")]),F.fromArray([ro("I watched this")]))])),s(io,F.fromArray([So(F.fromArray([{ctor:"_Tuple2",_0:"text-align",_1:"right"}]))]),F.fromArray([s(fo,F.fromArray([No(s(Js,r.number,x(n))),go("mui-btn mui-btn--accent mui-btn--small c-show-Button")]),F.fromArray([ro(n?"Hide episodes":"Show episodes")]))]))]))])),s(oo,F.fromArray([]),F.fromArray([])),l(Ps,e,n,r)]))}),Ws=r(function(e,t,r){return s(io,F.fromArray([]),s(re["::"],s(oo,F.fromArray([]),F.fromArray([])),s(ne,s(Hs,e,r),t)))}),zs=function(e){var t=e,r=t.show,n=t.seasonsListVisible,o=s(bs,t.today,r.seasons),i=se(s(ne,function(e){return e.episodes},o)),a=X(i),u=function(){var e=r.lastEpisodeWatched;return 0===e?a:X(s(oe,function(e){return v.cmp(e.id,r.lastEpisodeWatched)>0},i))}(),c=function(){var e=u;switch(e){case 0:return"All caught up";case 1:return s(A["++"],k(u)," episode to watch");default:return s(A["++"],k(u)," episodes to watch")}}();return s(io,F.fromArray([]),F.fromArray([s(io,F.fromArray([So(F.fromArray([{ctor:"_Tuple2",_0:"display",_1:"flex"},{ctor:"_Tuple2",_0:"overflow",_1:"auto"},{ctor:"_Tuple2",_0:"min-height",_1:"100px"},{ctor:"_Tuple2",_0:"margin-bottom",_1:"15px"}]))]),F.fromArray([s(uo,F.fromArray([Es(F.fromArray([gs])),bo(s(j,"http://lorempixel.com/72/100/abstract",r.image))]),F.fromArray([])),s(io,F.fromArray([So(F.fromArray([{ctor:"_Tuple2",_0:"padding-left",_1:"15px"},{ctor:"_Tuple2",_0:"flex",_1:"1"}]))]),F.fromArray([s(io,F.fromArray([go("mui--text-title")]),F.fromArray([ro(r.name)])),s(io,F.fromArray([go("mui--text-subhead")]),F.fromArray([ro(v.cmp(a,0)>0?c:"")]))]))])),s(fo,F.fromArray([No(Ls(x(n))),go("mui-btn mui-btn--accent mui-btn--small c-show-Button")]),F.fromArray([ro(n?"Hide seasons":"Show seasons")])),v.eq(u,0)?s(io,F.fromArray([]),F.fromArray([])):s(fo,F.fromArray([go("mui-btn mui-btn--primary mui-btn--small c-show-Button"),No(Us)]),F.fromArray([ro("I'm caught up")])),v.eq(n,!0)?l(Ws,r.lastEpisodeWatched,o,t.visibleSeasons):s(io,F.fromArray([]),F.fromArray([]))]))},Vs={list:F.fromArray([]),error:D},Gs=ge.incomingPort("loadShows",Vt(s(Ft,s(Yt[":="],"id",Kt),function(e){return s(Ft,s(Yt[":="],"lastEpisodeWatched",Kt),function(t){return s(Ft,s(Yt[":="],"name",Xt),function(r){return s(Ft,s(Yt[":="],"image",Qt(F.fromArray([zt(D),s(tr,M,Xt)]))),function(n){return s(Ft,s(Yt[":="],"seasons",Vt(s(Ft,s(Yt[":="],"number",Kt),function(e){return s(Ft,s(Yt[":="],"episodes",Vt(s(Ft,s(Yt[":="],"id",Kt),function(e){return s(Ft,s(Yt[":="],"name",Xt),function(t){return s(Ft,s(Yt[":="],"summary",Xt),function(r){return s(Ft,s(Yt[":="],"season",Kt),function(n){return s(Ft,s(Yt[":="],"number",Kt),function(o){return s(Ft,s(Yt[":="],"airstamp",Xt),function(i){return Pt({id:e,name:t,summary:r,season:n,number:o,airstamp:i})})})})})})}))),function(t){return Pt({number:e,episodes:t})})}))),function(o){return s(Ft,s(Yt[":="],"rev",Xt),function(i){return Pt({id:e,lastEpisodeWatched:t,name:r,image:n,seasons:o,rev:i})})})})})})}))),Ks=ge.incomingPort("loadRev",s(Ft,s(Yt[":="],"id",Kt),function(e){return s(Ft,s(Yt[":="],"rev",Xt),function(t){return Pt({id:e,rev:t})})})),$s=(t(function(e,t){return{list:e,error:t}}),t(function(e,t){return{id:e,rev:t}}),function(e){return{ctor:"LoadRev",_0:e}}),Xs=t(function(e,t){return{ctor:"ShowMsg",_0:e,_1:t}}),Qs=r(function(e,t,r){if(v.eq(r.show.id,e)){var n=s(js,t,r),o=n._0,i=n._1;return{ctor:"_Tuple2",_0:o,_1:s(Ee,Xs(e),i)}}return{ctor:"_Tuple2",_0:r,_1:ke}}),Ys=function(e){var t=Cs,r=t._0,n=t._1,o=s(js,Ds,v.update(r,{show:e})),i=o._0,a=o._1;return{ctor:"_Tuple2",_0:i,_1:Ae(F.fromArray([s(Ee,Xs(e.id),n),s(Ee,Xs(e.id),a)]))}},Zs=t(function(e,t){var r=e;switch(r.ctor){case"ShowMsg":var n=r._1,o=n;if("ShowError"===o.ctor){var i=o._0;return"UnexpectedPayload"===i.ctor?{ctor:"_Tuple2",_0:v.update(t,{error:M(i._0)}),_1:ke}:{ctor:"_Tuple2",_0:v.update(t,{error:M("Something terrible has happened")}),_1:ke}}var a=fe(s(ne,s(Qs,r._0,n),t.list)),u=a._0,c=a._1;return{ctor:"_Tuple2",_0:v.update(t,{list:u}),_1:Ae(c)};case"AddToList":var l=r._0,f=Cs,d=f._0,p=f._1,h=d.show,_=function(e){var t=e.image;return"Nothing"===t.ctor?D:M(t._0.medium)},m=v.update(h,{id:l.show.id,name:l.show.name,image:_(l.show)}),g=s(js,Ds,v.update(d,{show:m})),y=g._0,c=g._1,b=s(re["::"],y,t.list);return{ctor:"_Tuple2",_0:v.update(t,{list:b}),_1:Ae(F.fromArray([s(Ee,Xs(y.show.id),p),s(Ee,Xs(y.show.id),c)]))};case"LoadShows":var w=fe(s(ne,Ys,r._0)),A=w._0,c=w._1;return{ctor:"_Tuple2",_0:v.update(t,{list:A}),_1:Ae(c)};default:var k=r._0,S=fe(s(ne,s(Qs,k.id,Ts(k.rev)),t.list)),u=S._0,c=S._1;return{ctor:"_Tuple2",_0:v.update(t,{list:u}),_1:Ae(c)}}}),el=function(e){var t=e.list;if("[]"===t.ctor)return s(io,F.fromArray([]),F.fromArray([]));var r=e.error;return"Just"===r.ctor?s(io,F.fromArray([]),F.fromArray([ro(r._0)])):s(io,F.fromArray([go("mui-panel"),So(F.fromArray([{ctor:"_Tuple2",_0:"margin-top",_1:"15px"},{ctor:"_Tuple2",_0:"margin-bottom",_1:"15px"}]))]),s(de,s(oo,F.fromArray([]),F.fromArray([])),s(ne,function(e){return s(_o,Xs(e.show.id),zs(e))},t)))},tl=function(e){return{ctor:"LoadShows",_0:e}},rl=function(e){return xe(F.fromArray([Gs(tl),Ks($s)]))},nl=function(e){return{ctor:"AddToList",_0:e}},ol=function(e){return l(K,t(function(e,t){return s(lr,e.show.id,t)}),sr,e.list)},il={search:es,shows:Vs},al=(t(function(e,t){return{search:e,shows:t}}),function(e){return{ctor:"ShowsMsg",_0:e}}),ul=function(e){return s(Te,al,rl(e.shows))},cl=function(e){return{ctor:"SearchMsg",_0:e}},sl=t(function(e,t){var r=e;if("SearchMsg"===r.ctor){var n=r._0,o=n;if("AddShow"===o.ctor){var i=s(fs,n,t.search),a=i._0,u=i._1,c=s(Zs,nl(o._0),t.shows),l=c._0,f=c._1;return{ctor:"_Tuple2",_0:v.update(t,{shows:l,search:a}),_1:Ae(F.fromArray([s(Ee,al,f),s(Ee,cl,u)]))}}var d=s(fs,n,t.search),a=d._0,p=d._1;return{ctor:"_Tuple2",_0:v.update(t,{search:a}),_1:s(Ee,cl,p)}}var h=s(Zs,r._0,t.shows),l=h._0,p=h._1;return{ctor:"_Tuple2",_0:v.update(t,{shows:l}),_1:s(Ee,al,p)}}),ll=function(e){return s($c,"Elm TV",s(io,F.fromArray([]),F.fromArray([s(_o,cl,s(_s,e.search,ol(e.shows))),s(_o,al,el(e.shows))])))},fl={main:ho({init:{ctor:"_Tuple2",_0:il,_1:ke},view:ll,update:sl,subscriptions:ul})},dl={};if(dl.Main=dl.Main||{},ge.addPublicModule(dl.Main,"Main","undefined"==typeof fl?null:fl),"function"==typeof define&&define.amd)return void define([],function(){return dl});if("object"==typeof e)return void(e.exports=dl);var pl=this.Elm;if("undefined"==typeof pl)return void(this.Elm=dl);for(var hl in dl){if(hl in pl)throw new Error("There are two Elm modules called `"+hl+"` on this page! Rename one of them.");pl[hl]=dl[hl]}}).call(this)}]);